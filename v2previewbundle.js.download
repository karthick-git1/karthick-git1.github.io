var requirejs,require,define;!function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var i in e)if(t(e,i)&&n(e[i],i))break}function U(e,n,i,r){return n&&B(n,function(n,a){!i&&t(e,a)||(!r||"object"!=typeof n||!n||H(n)||G(n)||n instanceof RegExp?e[a]=n:(e[a]||(e[a]={}),U(e[a],n,i,r)))}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,i){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=i,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){t=t&&t.split("/");var i,r,a,o,s,l,d,u,c=A.map,p=c&&c["*"];if(e){for(r=(e=e.split("/")).length-1,A.nodeIdCompat&&Q.test(e[r])&&(e[r]=e[r].replace(Q,"")),"."===e[0].charAt(0)&&t&&(r=t.slice(0,t.length-1),e=r.concat(e)),r=e,a=0;a<r.length;a++)"."===(o=r[a])?(r.splice(a,1),a-=1):".."===o&&0!==a&&(1!=a||".."!==r[2])&&".."!==r[a-1]&&0<a&&(r.splice(a-1,2),a-=2);e=e.join("/")}if(n&&c&&(t||p)){a=(r=e.split("/")).length;e:for(;0<a;a-=1){if(s=r.slice(0,a).join("/"),t)for(o=t.length;0<o;o-=1)if((n=m(c,t.slice(0,o).join("/")))&&(n=m(n,s))){i=n,l=a;break e}!d&&p&&m(p,s)&&(d=m(p,s),u=a)}!i&&d&&(i=d,l=u),i&&(r.splice(0,l,i),e=r.join("/"))}return(i=m(A.pkgs,e))?i:e}function i(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function a(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,i,r){var o,s,l=null,d=t?t.name:null,u=e,c=!0,p="";return e||(c=!1,e="_@r"+(j+=1)),e=a(e),l=e[0],e=e[1],l&&(l=n(l,d,r),s=m(P,l)),e&&(l?p=s&&s.normalize?s.normalize(e,function(e){return n(e,d,r)}):-1===e.indexOf("!")?n(e,d,r):e:(p=n(e,d,r),e=a(p),l=e[0],p=e[1],i=!0,o=x.nameToUrl(p))),i=!l||s||i?"":"_unnormalized"+(W+=1),{prefix:l,name:p,parentMap:t,unnormalized:!!i,url:o,originalName:u,isDefine:c,id:(l?l+"!"+p:p)+i}}function s(e){var t=e.id,n=m(D,t);return n||(n=D[t]=new x.Module(e)),n}function l(e,n,i){var r=e.id,a=m(D,r);!t(P,r)||a&&!a.defineEmitComplete?(a=s(e)).error&&"error"===n?i(a.error):a.on(n,i):"defined"===n&&i(P[r])}function d(e,t){var n=e.requireModules,i=!1;t?t(e):(v(n,function(t){(t=m(D,t))&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||g.onError(e))}function c(){R.length&&(ha.apply(L,[L.length,0].concat(R)),R=[])}function p(e){delete D[e],delete w[e]}function f(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,v(e.depMaps,function(i,r){var a=i.id,o=m(D,a);o&&!e.depMatched[r]&&!n[a]&&(m(t,a)?(e.defineDep(r,P[a]),e.check()):f(o,t,n))}),n[i]=!0)}function h(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),a=[],o=[],s=!1,l=!0;if(!E){if(E=!0,B(w,function(e){var d=e.map,u=d.id;if(e.enabled&&(d.isDefine||o.push(e),!e.error))if(!e.inited&&n)r(u)?s=t=!0:(a.push(u),i(u));else if(!e.inited&&e.fetched&&d.isDefine&&(s=!0,!d.prefix))return l=!1}),n&&a.length)return e=C("timeout","Load timeout for modules: "+a,null,a),e.contextName=x.contextName,d(e);l&&v(o,function(e){f(e,{},{})}),n&&!t||!s||!z&&!ea||I||(I=setTimeout(function(){I=0,h()},50)),E=!1}}function _(e){t(P,e[0])||s(o(e[0],null,!0)).init(e[1],e[2])}function b(e){e=e.currentTarget||e.srcElement;var t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function y(){var e;for(c();L.length;){if(null===(e=L.shift())[0])return d(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));_(e)}}var E,S,x,O,I,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},D={},w={},k={},L=[],P={},F={},$={},j=1,W=1;return O={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?P[e.map.id]=e.exports:e.exports=P[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(k,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var i=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(r)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{i=x.execCb(n,r,t,i)}catch(t){e=t}else i=x.execCb(n,r,t,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",d(this.error=e)}else i=r;this.exports=i,this.map.isDefine&&!this.ignore&&(P[n]=i,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,r=o(e.prefix);this.depMaps.push(r),l(r,"defined",u(this,function(r){var a,c;c=m($,this.map.id);var f=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,_=x.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(r.normalize&&(f=r.normalize(f,function(e){return n(e,h,!0)})||""),l(r=o(e.prefix+"!"+f,this.map.parentMap),"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(c=m(D,r.id))&&(this.depMaps.push(r),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable())):c?(this.map.url=x.nameToUrl(c),this.load()):(a=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),a.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],B(D,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&p(e.map.id)}),d(e)}),a.fromText=u(this,function(n,r){var l=e.name,u=o(l),c=M;r&&(n=r),c&&(M=!1),s(u),t(A.config,i)&&(A.config[l]=A.config[i]);try{g.exec(n)}catch(e){return d(C("fromtexteval","fromText eval for "+i+" failed: "+e,e,[i]))}c&&(M=!0),this.depMaps.push(u),x.completeLoad(l),_([l],a)}),r.load(e.name,_,a,A))})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){w[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var i,r;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=m(O,e.id))return void(this.depExports[n]=i(this));this.depCount+=1,l(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&l(e,"error",u(this,this.errback))}i=e.id,r=D[i],!t(O,i)&&r&&!r.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(D,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:D,defined:P,urlFetched:F,defQueue:L,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:d,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&($[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(D,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(r,a){function l(n,i,u){var c,p;return a.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?d(C("requireargs","Invalid require call"),u):r&&t(O,n)?O[n](D[r.id]):g.get?g.get(x,n,r,l):(c=o(n,r,!1,!0),c=c.id,t(P,c)?P[c]:d(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(r?"":". Use require([])")))):(y(),x.nextTick(function(){y(),(p=s(o(null,r))).skipMap=a.skipMap,p.init(n,i,u,{enabled:!0}),h()}),l)}return a=a||{},U(l,{isBrowser:z,toUrl:function(e){var t,i=e.lastIndexOf("."),a=e.split("/")[0];return-1!==i&&("."!==a&&".."!==a||1<i)&&(t=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(n(e,r&&r.id,!0),t,!0)},defined:function(e){return t(P,o(e,r,!1,!0).id)},specified:function(e){return e=o(e,r,!1,!0).id,t(P,e)||t(D,e)}}),r||(l.undef=function(e){c();var t=o(e,r,!0),n=m(D,e);i(e),delete P[e],delete F[t.url],delete k[e],T(L,function(t,n){t[0]===e&&L.splice(n,1)}),n&&(n.events.defined&&(k[e]=n.events),p(e))}),l},enable:function(e){m(D,e.id)&&s(e).enable()},completeLoad:function(e){var n,i,a=m(A.shim,e)||{},o=a.exports;for(c();L.length;){if(null===(i=L.shift())[0]){if(i[0]=e,n)break;n=!0}else i[0]===e&&(n=!0);_(i)}if(i=m(D,e),!n&&!t(P,e)&&i&&!i.inited){if(A.enforceDefine&&(!o||!da(o)))return r(e)?void 0:d(C("nodefine","No define call for "+e,null,[e]));_([e,a.deps||[],a.exportsFn])}h()},nameToUrl:function(e,t,n){var i,r,a;if((i=m(A.pkgs,e))&&(e=i),i=m($,e))return x.nameToUrl(i,t,n);if(g.jsExtRegExp.test(e))i=e+(t||"");else{for(i=A.paths,r=(e=e.split("/")).length;0<r;r-=1)if(a=e.slice(0,r).join("/"),a=m(i,a)){H(a)&&(a=a[0]),e.splice(0,r,a);break}i=e.join("/"),i=("/"===(i+=t||(/^data\:|\?/.test(i)||n?"":".js")).charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+i}return A.urlArgs?i+(-1===i.indexOf("?")?"?":"&")+A.urlArgs:i},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=b(e),x.completeLoad(e.id))},onScriptError:function(e){var t=b(e);if(!r(t.id))return d(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if(void 0===define){if(void 0!==requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}void 0!==require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,i){var r,a="_";return!H(e)&&"string"!=typeof e&&(r=e,H(t)?(e=t,t=n,n=i):e=[]),r&&r.context&&(a=r.context),(i=m(F,a))||(i=F[a]=g.s.newContext(a)),r&&i.configure(r),i.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.15",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var i=e&&e.config||{};if(z)return(i=g.createNode(i,t,n)).setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Y?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(M=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,J=i,D?y.insertBefore(i,D):y.appendChild(i),J=null,i;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){if(y||(y=e.parentNode),I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((i=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),i=N),i&&(e||(e=i.getAttribute("data-requiremodule")),r=F[i.getAttribute("data-requirecontext")])),(r?r.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this);var hbMessageFormat=function(){"use strict";function e(e){this.index=0,this.tokens=e,this.nodes=[],this.openString=!1,this.openCode=!1,this.isSubformat=!1}function t(e,t){this.input=t,this.str=[],this.nodes=e,this.formatters={}}e.prototype.codeOpen=function(e,t,n){e[n-1];this.openString?this.nodes.push({data:"{"}):this.openCode?this.isSubformat=!0:this.openCode=!0},e.prototype.codeClose=function(e,t,n){"'"===e[n-1].char||this.openString?this.nodes.push({data:"}"}):(this.openCode&&(this.isSubformat?this.isSubformat=!1:this.openCode=!1),this.openString=!1)},e.prototype.string=function(e,t,n){e[n-1];var i=e[n+1];this.openString?i&&"'"===i.char?(this.index++,this.nodes.push({data:"'"}),this.openString=!1):this.openString=!1:i&&"'"===i.char?(this.index++,this.nodes.push({data:"'"})):this.openString=!0},e.prototype.data=function(e,t,n){var i;this.openCode?(i={code:t.data},this.isSubformat&&(i.sub=!0),this.nodes.push(i)):this.nodes.push({data:t.data})};var n=t.prototype;n.add=function(e,t){this.formatters[e]=t},n.getFormatter=function(e,n){for(var r,a,o,s,l=[];;){if(e.sub){for(s=[];s.push(e),e.sub=!1,void 0!==(e=this.nodes[++this.index])&&e.hasOwnProperty("sub")&&!0===e.sub;);o=new t(s,this.input),l.push({code:o.get()})}if(l.push(e),void 0===(e=this.nodes[++this.index])||!e.hasOwnProperty("code")){--this.index;break}}if(0===l.length)return!1;if(/^[\d]+$/.test(l[0].code))r=i.placeholder;else{if(!(a=l[0].code.match(/^\s*[\d]+\s*,\s*([\w]+).*$/)))return!1;r=i[a[1]]}var d=l.map(function(e){return e.code}).join("");return{method:r.method,currNodes:d}},n.get=function(){return this.walk(),this.str.join("")},n.walk=function(){var e,t,n=this.nodes;this.index=0;for(var i=n.length;this.index<i;){if((e=n[this.index]).hasOwnProperty("code")){if(!(t=this.getFormatter(e,this.index)))return this.input;this.str.push(t.method(t.currNodes,this.input))}else this.str.push(e.data);this.index++}};var i={placeholder:{method:function(e,t){return t[e]}},choice:{method:function(e,t){var n,i,r,a=/^(-?\d*(?:\.\d+)?)([#<>=]{1})([\s\S]+?)$/,o=e.match(/^\s*([\d]+)\s*,\s*([\w]+)\s*,\s*([\s\S]*?)$/),s=o[3];s=s.split("|");for(var l,d=o[1],u=0,c=s.length;u<c;u++)switch(n=s[u],i=n.match(a),r=i[2],l=i[1],isNaN(Number(l))||(l=Number(l)),r){case"#":if(Number(t[d])===l)return i[3];break;case"<":if(l<Number(t[d]))return i[3].replace("{0,number,integer}",t[d]);break;case">":if(l>Number(t[d]))return i[3].replace("{0,number,integer}",t[d])}}},time:{method:function(e,t){return"time"===e.match(/(\d+)\s*,\s*(time|date)\s*,?\s*[\w]*/)[2]?t[1].getHours()+":"+t[1].getMinutes():t[1].getDate()+"/"+t[1].getMonth()+"1/"+t[1].getFullYear()}},date:{method:function(e,t){return"time"===e.match(this.test)[2]?t[1].getHours()+":"+t[1].getMinutes():t[1].getDate()+"/"+t[1].getMonth()+"1/"+t[1].getFullYear()}},number:{method:function(e,t){return t[e.match(/([\d]+)/)[1]]}}};return function(){function n(e,t){r[e]=t}var r={};return n("choice",i.choice),n("placeholder",i.placeholder),n("dateTime",i.dateTime),{formatters:r,add:n,format:function(n){var i=function(t){for(var n,i=new e(t),r=t.length;i.index<r;)(n=t[i.index]).hasOwnProperty("type")?i[n.type](t,n,i.index):i.data(t,n,i.index),i.index++;return i.nodes}(function(e){function t(e){for(var t=0,n=l.length;t<n;t++)if(e===l[t].char)return l[t];return!1}for(var n,i,r,a=0,o=e.length,s=[],l=[{type:"codeOpen",char:"{"},{type:"codeClose",char:"}"},{type:"string",char:"'"}],d=l.map(function(e){return e.char});e[a];){if(i="",n=e[a],r=t(n))s.push({char:n,type:r.type});else{for(n&&(i=n);-1===d.indexOf(e[a+1])&&a+1<o;)i+=e[++a];s.push({data:i})}a++}return s}(n)),r=Array.prototype.slice.call(arguments);return new t(i,r=r.splice(1)).get()}}}()}();"undefined"!=typeof module&&(module.exports=hbMessageFormat);var i18n={};i18n.get=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)return"";if("undefined"==typeof langObj)return"";var t=langObj[e[0]];return t?(e.splice(0,1),e.splice(0,0,t),hbMessageFormat.format.apply(hbMessageFormat.format,e)):""};var cms_i18n=i18n.get;!function(e,t){"function"==typeof define&&define.amd?define("hbDialog",t):e.hbDialog=t()}(this,function(){"use strict";function e(e,t,n){e.addEventListener(t,n,!1),b.push({element:e,type:t,listener:n})}function t(e,t,n){e.removeEventListener(t,n,!1);for(var i=b.length-1;i>=0;i--)if(b[i].element===e&&b[i].type===t&&b[i].listener===n){b.splice(i,1);break}}function n(e){for(var n=b.length-1;n>=0;n--)(e.contains(b[n].element)||e===b[n].element)&&t(b[n].element,b[n].type,b[n].listener)}function i(e,t){(function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)})(e,t)||(e.className+=" "+t)}function r(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");n.test(e.className)&&(e.className=e.className.replace(n," "))}function a(e,t){return e.hasOwnProperty(t)}function o(t,n){var i=y("span");n.helperModuleName&&i.setAttribute("data-module-name",n.helperModuleName),n.helperHashName&&i.setAttribute("data-hash",n.helperHashName),i.innerHTML='<svg class="sites-icon small cursor-pointer"><use xlink:href="#zs-question"></use></svg>',e(i,"click",function(e){$E.dispatch(document,"help:inited",{element:e})}(i)),t.appendChild(i)}function s(t,n){var i;for(var r in n)a(n,r)&&(i=y("div"),n[r].className.split(/\s+/).forEach(function(e){e&&i.classList.add(e)}),i.innerText=n[r].label,n[r].attribute&&n[r].attribute.forEach(function(e){i.setAttribute(e.name,e.value)}),e(i,"click",n[r].callback),t.appendChild(i))}function l(){var e=document.createElement("div");return i(e,"hb-hidden-mask"),e}function d(t){var n=$D.get(".hb-mo-content",this.parentElement);k=l(),L=l(),document.body.appendChild(k),n.appendChild(L),F=this,N=function(e,t){e=e||window.event,t||(t=e.target||e.srcElement);var n=t.currentStyle||window.getComputedStyle(t,null),i=parseInt(n.borderInlineStartWidth,10),r=parseInt(n.borderBlockStartWidth,10),a=t.getBoundingClientRect();return{x:e.clientX-i-a.left,y:e.clientY-r-a.top}}(t),document.body.style.cursor="move",e(document,"mousemove",c),e(document,"mouseup",u)}function u(e){t(this,"mousedown",d),t(document,"mousemove",c),t(document,"mouseup",u),document.body.style.cursor="default",k&&k.parentNode.removeChild(k),L&&L.parentNode.removeChild(L)}function c(e){var t=e.clientX-N.x,n=e.clientY-N.y;F.parentElement.style.insetInlineStart=t+"px",F.parentElement.style.insetBlockStart=n+"px"}function p(e){return"0"===e?"0px":e}function m(t){this.closeBtn=null,this.dialog=null,this.overlay=null,this.state="closed",this.id=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()}(),this.appCtx=v,t||(t={}),this.settings=t,E.push(this),"inplace"===this.settings.type&&this.settings.referenceElement.setAttribute("data-hb-dialog-uuid",this.id),this.html=function(){var t=document.createDocumentFragment(),n=null,r=y("div"),a=y("div"),l=null,u=null,c=this.settings,m=null,f=null;return!0===c.header&&(u=y("div"),t.appendChild(u),u.className=A+" "+c.headerClass,u.innerHTML=c.headingText,this.header=u,"panel"===c.type&&(c.mask=!1,e(u,"mousedown",d))),$IS.object(c.header)&&(u=y("div"),t.appendChild(u),u.className=A+" "+C,c.header.headerLeft&&(m=y("div"),u.appendChild(m),m.className=D,M.innerText=c.header.headerLeft.text.headingText,c.header.headerLeft.text&&(m.innerHTML="<p class="+R+">"+M.innerHTML+"</p>"),$IS.object(c.header.headerLeft.helper)&&o(m,c.header.headerLeft.helper),c.header.headerLeft.buttons&&s(m,c.header.headerLeft.buttons)),c.header.headerRight&&(f=y("div"),u.appendChild(f),f.className=w,c.header.headerRight.buttons&&s(f,c.header.headerRight.buttons))),t.appendChild(a),a.className=S,a.style.width="100%",a.innerHTML=c.content,c.footer&&((l=y("div")).className=x+" "+c.footerClass,t.appendChild(l),l.innerHTML='<button class="mo-btn mo-btn__ok" data-action="ok">'+c.okText+'</button><button class="mo-btn mo-btn__cancel" data-action="cancel">'+c.cancelText+"</div>",s(l,c.buttons)),r.setAttribute("data-type",c.type),r.appendChild(t),"inplace"===c.type&&(c.entryAnimation="ScaleIn",c.exitAnimation="ScaleOut"),"modals"==c.type&&c.width&&(isNaN(c.maxWidth)||(r.style.maxInlineSize=c.maxWidth+"px"),isNaN(c.minWidth)||(r.style.minInlineSize=c.minWidth+"px")),c.mask&&((n=y("div")).appendChild(r),n.className=O+" "+c.maskClass,n.style.backgroundColor=c.maskColor),"fullscreen"===c.type?(c.offsetTop&&(r.style.height="calc( 100vh - "+p(c.offsetTop)+")",r.style.insetBlockStart=c.offsetTop),c.offsetLeft&&(r.style.width="calc( 100vw - "+p(c.offsetLeft)+")",r.style.insetInlineStart=c.offsetLeft),r.className=I+" x"+c.entryAnimation+"Full"):r.className=I+" x"+c.entryAnimation,"panel"===c.type&&(r.style.position="absolute",r.style.boxShadow="0 0 14px rgba(189, 189, 191, 0.75)"),c.footer&&(this.okBtn=r.querySelector('[data-action="ok"]'),this.cancelBtn=r.querySelector('[data-action="cancel"]'),l.className+=" "+c.footerClass,this.okBtn.className+=" "+c.okBtnClass,this.cancelBtn.className+=" "+c.cancelBtnClass),!0===c.closeBtn&&(this.closeBtn=y("span"),this.closeBtn.innerHTML=T,i(this.closeBtn,"hb-mo-close"),r.appendChild(this.closeBtn),this.closeBtnClass&&i(this.closeBtn,c.closeBtnClass)),this.mask=n,this.dialog=r,this.content=a,r.className+=" "+c.dialogClass,a.className+=" "+c.contentClass,r.setAttribute("data-fixed-header-footer",!!c.fixHeaderFooter),"inplace"===c.type&&i(r,"hb-mo-arrow"),n||r}.call(this);for(var n=0;n<E.length;n++)E[n].html.style.zIndex=1e3*(n+1);!0===this.settings.autoOpen&&this.open()}function f(e,t,n,i){var r,a,o,s,l=g(n);return"center"===e?(r=l.x+h(n,"width")/2-h(i,"width")/2,a=l.x+h(n,"width")/2+h(i,"width")/2):"left"===e?(r=l.x+h(n,"width")-h(i,"width"),a=l.x+h(i,"width")):"right"===e&&(r=l.x,a=l.x+h(i,"width")),"below"===t?(o=l.y+h(n,"height"),s=l.y+h(i,"height")+h(n,"height")+10):"upper"===t&&(o=l.y-h(i,"height"),s=l.y-h(i,"height")),{left:r,right:a,top:o,bottom:s}}function h(e,t){return parseFloat(window.getComputedStyle(e)[t].replace("px",""))}function g(e){for(var t=0,n=0;e;){if("BODY"==e.tagName){var i=e.scrollLeft||document.documentElement.scrollLeft,r=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-i+e.clientLeft,n+=e.offsetTop-r+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:n}}function _(e,t){t&&t.stopPropagation(),"ok"===e&&this.settings.onOk?this.settings.onOk():this.close(e)}var v,b=[],y=document.createElement.bind(document),E=[],T='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 224.512 224.512;" xml:space="preserve"><path d="M64 6.4L57.6 0 32 25.6 6.4 0 0 6.4 25.6 32 0 57.6 6.4 64 32 38.4 57.6 64l6.4-6.4L38.4 32"></path></svg>',S="hb-mo-content",x="hb-mo-footer",O="hb-dialog-overlay",I="hb-dialog",A="hb-mo-header",C="hb-mo-custom-header",D="hb-mo-header-left",w="hb-mo-header-right",R="hb-mo-header-text";e(document,"keydown",function(e){e.stopPropagation();var t=e.keyCode,n=(e.target,E[E.length-1]);n&&27===t&&!0===n.settings.escClose&&n.close()});var N,k,L,M=document.createElement("div"),P=["content"],B=(function(){var e,t=y("div"),n={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),function(){var e,t=y("div"),n={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(a(n,e)&&void 0!==t.style[e])return n[e]}(),function(){var e,t=y("div"),n={animation:"animationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(a(n,e)&&void 0!==t.style[e])return n[e]}()),F=null,U={type:"modals",entryAnimation:"FadeIn",exitAnimation:"FadeOut",closeBtn:!0,okBtn:!0,cancelBtn:!0,escClose:!0,mask:!0,autoOpen:!1,okText:"OK",cancelText:"Cancel",header:!0,footer:!0,onOpen:!1,beforeClose:!1,onClose:!1,onCancel:!1,onOk:!1,maskColor:"rgba(0,0,0,.7)",headingText:"Heading Text",maxWidth:600,fixHeaderFooter:!1,focus:"",minWidth:280,fixedWidth:!1,fixedHeight:!1,content:"",toggle:!1,offsetTop:"0px",offsetLeft:"0px",dialogClass:"",headerClass:"",contentClass:"",footerClass:"",closeBtnClass:"",okBtnClass:"",cancelBtnClass:"",maskClass:"",position:"below-center",dragHandlerClass:""};return m.prototype.close=function(a){function o(){if(t(this.dialog,B,this.boundRemoveDialog),this.mask)this.appCtx&&this.appCtx.view.purgeTemplate(this.mask),this.mask.parentNode.removeChild(this.mask);else{if(!this.dialog||!this.dialog.parentNode)return;this.appCtx&&this.appCtx.view.purgeTemplate(this.dialog),this.dialog.parentNode.removeChild(this.dialog)}1==E.length&&E[0]==this&&r(document.body,"no-scroll"),this.state="closed","inplace"===this.settings.type&&(this.settings.referenceElement.removeAttribute("data-hb-dialog-state"),this.settings.referenceElement.removeAttribute("data-hb-dialog-uuid")),$E.dispatch(document.body,"hbDialog:close",this),"close"===a?this.settings.onClose&&this.settings.onClose.call(this):"cancel"===a&&this.settings.onCancel&&this.settings.onCancel.call(this),function(e){for(var t=E.length-1;t>=0&&E[t].id!==e;t--);E[t]=null,E.splice(t,1)}(this.id)}function s(){"undefined"!=typeof $E&&$E.purge&&($E.purge(this.dialog),this.mask&&$E.purge(this.mask)),this.mask?(n(this.mask),this.mask.style.opacity=0):n(this.dialog),this.state="closing",$E.dispatch(document.body,"hbDialog:closing",this),this.settings.exitAnimation&&(this.boundRemoveDialog=o.bind(this),e(this.dialog,B,this.boundRemoveDialog)),"fullscreen"===this.settings.type?(r(this.dialog,"x"+this.settings.entryAnimation+"Full"),i(this.dialog,"x"+this.settings.exitAnimation+"Full")):(r(this.dialog,"x"+this.settings.entryAnimation),i(this.dialog,"x"+this.settings.exitAnimation)),this.settings.exitAnimation&&(this.boundRemoveDialog=o.bind(this),e(this.dialog,B,this.boundRemoveDialog))}void 0===a&&(a="close"),"opened"===this.state&&($E.dispatch(document.body,"hbDialog:beforeClose",this),this.settings.beforeClose?this.settings.beforeClose(s.bind(this)):s.call(this))},m.prototype.dismiss=function(){this.close("dismiss")},m.prototype.reposition=function(){if("fullscreen"!==this.settings.type&&"inplace"!==this.settings.type){var e=this.dialog.getBoundingClientRect();this.dialog.style.insetInlineStart=document.documentElement.clientWidth/2-e.width/2+"px",this.dialog.style.insetBlockStart=window.innerHeight/2-e.height/2+"px"}},m.prototype.disableButtons=function(){this.settings.footer&&(this.settings.okBtn&&(this.okBtn.disabled=!0),this.settings.cancelBtn&&(this.cancelBtn.disabled=!0))},m.prototype.enableButtons=function(){this.settings.footer&&(this.settings.okBtn&&(this.okBtn.disabled=!1),this.settings.cancelBtn&&(this.cancelBtn.disabled=!1))},m.prototype.open=function(){function n(){$E.dispatch(document.body,"hbDialog:open",l),l.settings.onOpen&&l.settings.onOpen.call(l),t(l.dialog,B,n)}var a=null,o=null,s=this.settings,l=this;if("fullscreen"===this.settings.type?r(this.dialog,"x"+this.settings.exitAnimation+"Full"):r(this.dialog,"x"+this.settings.exitAnimation),"inplace"===s.type)if(o=s.referenceElement,a=o.getAttribute("data-hb-dialog-state"),!0===s.toggle){if("opened"===a)return void this.close()}else if("opened"===a)return;this.state="opening",$E.dispatch(document.body,"hbDialog:beforeOpen",this),s.footer&&(s.okBtn?(this.okBtn.setAttribute("tabIndex",0),e(this.okBtn,"click",_.bind(this,"ok"))):this.okBtn.style.display="none",s.cancelBtn?(this.cancelBtn.setAttribute("tabIndex",0),e(this.cancelBtn,"click",_.bind(this,"cancel"))):this.cancelBtn.style.display="none"),"string"==typeof s.closeBtn&&(this.closeBtn=this.dialog.querySelector(s.closeBtn)),"string"==typeof s.okBtn&&(this.okBtn=this.dialog.querySelector(s.okBtn)),"string"==typeof s.cancelBtn&&(this.cancelBtn=this.dialog.querySelector(s.cancelBtn)),this.closeBtn&&(this.closeBtn.setAttribute("tabIndex",0),e(this.closeBtn,"click",_.bind(this,"close")),this.closeBtnClass&&i(this.closeBtn,this.closeBtnClass)),"inplace"!==s.type?("panel"!==s.type&&i(document.body,"no-scroll"),document.body.appendChild(this.html)):(o.parentNode.insertBefore(this.html,o.nextSibling),function(e,t,n){g(e);var r,a,o,s,l="rtl"==document.documentElement.getAttribute("dir");t.style.insetBlockStart=e.offsetTop+e.offsetHeight+5+"px",(r=n.match(/([\w]+)-center+/))?(s=f(a="center",o=r[1],e,t),"upper"===o&&(t.style.insetBlockStart=e.offsetTop-h(e,"height")-h(t,"height")+"px"),s.left<0?l?(t.style.insetInlineEnd=e.offsetLeft+"px",a="left"):(t.style.insetInlineStart=e.offsetLeft+"px",a="right"):s.right>document.documentElement.clientWidth?l?(t.style.insetInlineEnd=e.offsetLeft+h(e,"width")-h(t,"width")+"px",a="right"):(t.style.insetInlineStart=e.offsetLeft+h(e,"width")-h(t,"width")+"px",a="left"):l?t.style.insetInlineEnd=e.offsetLeft+h(e,"width")/2-h(t,"width")/2+"px":t.style.insetInlineStart=e.offsetLeft+h(e,"width")/2-h(t,"width")/2+"px"):(r=n.match(/([\w]+)-left+/))?(s=f(a="left",o=r[1],e,t)).left<0?l?(a="left",t.style.insetInlineEnd=e.offsetLeft+"px"):(a="right",t.style.insetInlineStart=e.offsetLeft+"px"):l?t.style.insetInlineEnd=e.offsetLeft+e.clientWidth-t.clientWidth+"px":t.style.insetInlineStart=e.offsetLeft+e.clientWidth-t.clientWidth+"px":(r=n.match(/([\w]+)-right+/))&&((s=f(a="right",o=r[1],e,t)).right>document.documentElement.clientWidth?l?(t.style.insetInlineEnd=e.offsetLeft+e.clientWidth-t.clientWidth+"px",a="right"):(t.style.insetInlineStart=e.offsetLeft+e.clientWidth-t.clientWidth+"px",a="left"):l?t.style.insetInlineEnd=e.offsetLeft+"px":t.style.insetInlineStart=e.offsetLeft+"px"),"upper"===o?s.top<0&&(o="below"):"below"===o&&window.innerHeight<s.bottom&&(o="upper"),i(t,o+"-"+a),"upper"===o?(i(t,"arrow-bottom"),t.style.insetBlockStart=e.offsetTop-h(e,"height")-h(t,"height")+"px"):i(t,"arrow-top")}.call(this,o,this.html,s.position)),this.html.setAttribute("tabIndex",0),"ok"===this.settings.focus?this.okBtn&&this.okBtn.focus():"cancel"===this.settings.focus?this.cancelBtn&&this.cancelBtn.focus():this.html.focus(),e(this.dialog,B,n),this.state="opened";this.dialog.getBoundingClientRect();"inplace"===this.settings.type?(o.setAttribute("data-hb-dialog-state","opened"),this.settings.closeOnOutsideClick&&(this.content.hasAttribute("tabindex")||this.content.setAttribute("tabindex",0),$E.bind(this.content,"focusout",function(e){var t=e.relatedTarget;(!t||t&&!l.dialog.contains(t))&&l.close("close")}),this.content.focus())):"fullscreen"===s.type?this.dialog.style.transform="translate3d(0,0,0)":this.reposition(),this.settings.dragHandlerClass&&function(e,t){function n(t){o&&(e.style.left=t.clientX-r+"px",e.style.top=t.clientY-a+"px")}function i(){o=!1,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)}var r,a,o=!1;document.getElementsByClassName(t)[0].addEventListener("mousedown",function(t){t.preventDefault(),o=!0,r=t.clientX-e.offsetLeft,a=t.clientY-e.offsetTop,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)})}(this.dialog,this.settings.dragHandlerClass)},m.setAppInstance=function(e){v=e},{Dialog:function(e){var t=function(e,t){var n;"fullscreen"!==e.type&&"inplace"!=e.type||void 0!==e.mask||(e.mask=!1);for(n in t)e.hasOwnProperty(n)||(e[n]=t[n]),"string"!=typeof e[n]||P.includes(n)||(M.innerText=e[n],e[n]=M.innerHTML);return e}(e,U),n=null,i=null;return"inplace"===t.type?(n=t.referenceElement.getAttribute("data-hb-dialog-uuid"),null===(i=function(e){for(var t=E.length-1;t>=0;t--)if(E[t].id===e)return E[t];return null}(n))?new m(t):i):new m(t)},headerTemplate:"",footerTemplate:"",closeOpenDialogs:function(e){var t;e instanceof m?t=[e]:e instanceof Array&&(t=e);for(var n,i=E.length-1;i>=0;i--)n=E[i],t?-1===t.indexOf(n)&&n.dismiss():n.dismiss()},getDialog:function(e){try{for(var t=0;t<E.length;t++)if(E[t].dialog.contains(e))return E[t]}catch(e){}},dialogInstances:E,setLocale:function(e){["okText","cancelText"].forEach(function(t){e.hasOwnProperty(t)&&e[t]&&(U[t]=e[t])})}}}),function(){"use strict";var t,n="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),i=n&&navigator.userAgent.indexOf("MSIE")>-1,r=n?document:null,a=n?window:global,o=Object.prototype.toString;n&&(t=r.body,o=Object.prototype.toString);var s={};s.core={};var l=/^[a-z-_]$/i;if(s.is={array:function(e){return"[object Array]"===o.call(e)},date:function(e){return"[object Date]"===o.call(e)},function:function(e){return"[object Function]"===o.call(e)},regex:function(e){return"[object RegExp]"===o.call(e)},object:function(e){return"[object Object]"===o.call(e)},url:function(e){return/^https?:\/\/[\-A-Za-z0-9+&@#\/%?=~_|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_|]/.test(e)}},s.dom={isNode:function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},selector:function(e,t){var n=e[0];return-1!==e.indexOf(" ")||-1!==e.indexOf(":")?this.getAll(e,t):"#"===n&&0===e.lastIndexOf("#")?this.getById(e.substr(1),t):"."===n&&0===e.lastIndexOf(".")?this.getByClass(e.substr(1),t):l.test(e)?this.getByTag(e,t):this.getAll(e,t)},get:function(e,t){return t||(t=r),t.querySelector(e)},getAll:function(e,t){return t||(t=r),t.querySelectorAll(e)},getByClass:function(e,t){return t||(t=r),t.getElementsByClassName(e)},getByTag:function(e,t){return t||(t=r),t.getElementsByTagName(e)},getById:function(e,t){return t||(t=r),t.getElementById(e)},getByDataId:function(e,t){return t||(t=r),t.querySelector('[data-element-id="'+e+'"]')},getClasses:function(e){var t=e.className.match(/[\w-]+/g),n=[];if(null===t)return[];for(var i=t.length-1;i>=0;i--)n.push(t[i]);return n},hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");n.test(e.className)&&(e.className=e.className.replace(n," "))},innerDimension:function(e){return this._getBox(e,"client")},outerDimension:function(e){return this._getBox(e,"offset")},scrollDimension:function(e){return this._getBox(e,"scroll")},offset:function(e){var t=0,n=0;if(e.offsetParent)for(t=e.offsetLeft,n=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop;return{left:t,top:n}},css:function(){var e=function(e,t){return t.toUpperCase()},t=function(t){return t.replace(/\-(\w)/g,e)};return function(e,n,i){if(void 0===i&&"string"==typeof n)return i="",r.defaultView&&r.defaultView.getComputedStyle?i=r.defaultView.getComputedStyle(e,"").getPropertyValue(n):e.currentStyle&&("float"==n&&(n="styleFloat"),i=e.currentStyle[t(n)]),i;if("object"==typeof n)for(var a in n){var o=n[a];"float"==a&&(a=e.currentStyle?"styleFloat":"cssFloat"),e.style[t(a)]=o}else"float"==n&&(n=e.currentStyle?"styleFloat":"cssFloat"),e.style[t(n)]=i}}(),parents:function(e){var t=[];for(e=e.parentNode;e;)t.push(e),e=e.parentNode;return t},isAncestor:function(e,t){return!(!s.dom.isNode(e)||!s.dom.isNode(t))&&("contains"in e?e.contains(t):e.compareDocumentPosition(t)%16)},findParent:function(e,t){for(e=e.parentNode;e;){if(this.hasClass(e,t))return e;e=e.parentNode}return!1},findParentByTag:function(e,t){for(e=e.parentNode;e;){if(e.tagName&&e.tagName.toUpperCase()===t.toUpperCase())return e;e=e.parentNode}return!1},append:function(e,t){e.appendChild(t)},prepend:function(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},insertBefore:function(e,t){e.parentNode.insertBefore(t,e)},remove:function(e){return e.parentNode.removeChild(e)},text:function(e,t){e.appendChild(e.ownerDocument.createTextNode(t))},_getBox:function(e,t){var n={width:e[t+"Width"],height:e[t+"Height"]};if(0===n.width&&0===n.height){var i,r,a=this.parents(e),o=[];for(i=0,r=a.length;i<r;i++){var s=a[i];s.style&&"none"==s.style.display&&o.push(s)}o.push(e);var l=[];for(i=0,r=o.length;i<r;i++){var d=o[i];l.push({position:d.style.position,display:d.style.display}),d.style.display="block"}for(n.width=e[t+"Width"],n.height=e[t+"Height"],i=0,r=o.length;i<r;i++){(d=o[i]).style.display=l[i].display}}return n},getChildConts:function(e,t){for(var n=[].slice.call(this.getAll(e,t)),i=[];n.length!=i.length;){for(var r=n.pop(),a=!1,o=n.length-1;o>=0;o--){var s=n[o];if(this.isAncestor(s,r)){a=!0;break}}a||(i.push(r),n.unshift(r))}return i},childrenByCont:function(e,t,n){for(var i=this.getChildConts(e,n),r=[],a=0;a<i.length;a++)i[a].childNodes.forEach(function(e){e.matches&&e.matches(t)&&r.push(e)});return r}},n){s.event={listeners:[],domreadyListeners:[],bind:function(e,t,n,i){if(e&&t&&n){var r={element:e,type:t,etype:t,handler:n,options:i=i||{}},a=i.scope||e,o=i.args;r.fn=function(e){n.call(a,e,o)};var s=t.indexOf(".");-1!=s&&(r.etype=t=t.substring(s+1)),e.addEventListener?e.addEventListener(t,r.fn,!1):e.attachEvent&&e.attachEvent("on"+t,r.fn),this.listeners.push(r)}},unbind:function(e,t,n){if(e&&"string"==typeof t)if(n){var i=this.listeners,r=this._getListenerIndex(i,e,t,n);r>-1&&this._removeListener(r,i)}else this._removeListeners(e,t)},purge:function(e){for(var t=this.listeners.length;t--;){var n=this.listeners[t];n&&(n.element===e||s.dom.isAncestor(e,n.element))&&this._removeListener(t,this.listeners)}},target:function(e){return this._getHTMLNode(e.target||e.srcElement)},relatedTarget:function(e){var t=e.relatedTarget;return t||("mouseout"==e.type?t=e.toElement:"mouseover"==e.type&&(t=e.fromElement)),this._getHTMLNode(t)},_getHTMLNode:function(e){for(;e&&3==e.nodeType;)e=e.parentNode;return e},dispatch:function(e,n,i,a){"string"==typeof e&&(a=i,i=n,n=e,e=t);var o=function(e){var t=null;return"function"==typeof CustomEvent?t=new CustomEvent(n,{detail:e,bubbles:!0,capture:!!a}):(t=r.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,e),t}(i);e.dispatchEvent(o)},fireEvent:function(e,t){if(document.createEventObject){var n=document.createEventObject();return e.fireEvent("on"+t,n)}return(n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(n)},pageOffset:function(){if(r){var e=!r.compatMode||"CSS1Compat"==r.compatMode?r.documentElement:t;return function(t){return t.type.match(/(click|mouse|menu|drag)/i)?{x:t.pageX||t.clientX+e.scrollLeft,y:t.pageY||t.clientY+e.scrollTop}:null}}}(),clientOffset:function(){if(r){(!r.compatMode||"CSS1Compat"==r.compatMode)&&r.documentElement;return function(e){return e.type.match(/(click|mouse|menu)/i)?{x:e.pageX?e.pageX-a.pageXOffset:e.clientX,y:e.pageY?e.pageY-a.pageYOffset:e.clientY}:null}}}(),isRightClick:function(e){return e.button&&2==e.button||e.which&&3==e.which},mousescroll:function(e){},wheelDelta:function(){return type.match(/(dommousescroll|mousewheel)/i)?e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3:null},isDOMLoaded:function(e){e||(e=r);return(i&&-1!=navigator.userAgent.indexOf("MSIE 10")?/complete/:/interactive|loaded|complete/).test(e.readyState)},callOnLoad:function(e,t){t||(t=r),this.isDOMLoaded(t)?e():this.bind(t,"DOMContentLoaded",e)},checkDOMReady:function(){var e,t,n=function(t){if(!t||"DOMContentLoaded"!=t.type&&"load"!=t.type){if(r.readyState)if(/loaded|complete/.test(r.readyState))i();else if("function"==typeof r.documentElement.doScroll){try{e||r.documentElement.doScroll("left")}catch(t){return}i()}}else i()},i=function(){e||(e=!0,r.removeEventListener&&r.removeEventListener("DOMContentLoaded",n,!1),r.onreadystatechange=null,"undefined"!==t&&clearInterval(t),t=null,s.event._domready())};r&&(r.addEventListener?r.addEventListener("DOMContentLoaded",n,!1):(r.onreadystatechange=n,a.onload=n,t=setInterval(n,5)))},ready:function(e,t){this.domreadyListeners.push(function(){e.call(t||d)})},_domready:function(){for(var e=0,t=this.domreadyListeners.length;e<t;e++)try{this.domreadyListeners[e]()}catch(e){}},_getListenerIndex:function(e,t,n,i){for(var r=e.length;r--;){var a=e[r];if(a&&a.element===t&&n===a.type&&a.handler===i)return r}return-1},_removeListeners:function(e,t){for(var n=this.listeners.length;n--;){var i=this.listeners[n];i&&i.element===e&&("function"==typeof t&&i.handler===t||"string"==typeof t&&t===i.type)&&this._removeListener(n,this.listeners)}},_removeListener:function(e,t){var n=t[e];t.splice(e,1);var i=n.element;i.removeEventListener?i.removeEventListener(n.etype,n.fn,!1):i.detachEvent&&i.detachEvent("on"+n.etype,n.fn),n.fn=null,n.handler=null,n=null}};s.dcAjax={get:function(e){e.url=u(e.url),s.ajax.get(e)},post:function(e){e.url=u(e.url),s.ajax.post(e)}};function u(e){return e.startsWith("/dcapp/")||(e="/dcapp"+e),stand_alone_path+"/siteapps"+e}s.ajax={error:function(e){s.ajax.errorOptions=e},setDynamicHeaderModifier:function(e){s.ajax.dynamicHeaderModifier=e},errorTest:null,post:function(e){return e.method="POST",this.request(e)},get:function(e){return e.method="GET",this.request(e)},put:function(e){return e.method="PUT",this.request(e)},del:function(e){return e.method="DELETE",this.request(e)},request:function(e){var t=e.url;if(t){var n=e.method||"GET",i=e.sync||!1,r=e.params||{},a=e.headers=e.headers||{},o=e.dynamicHeaderModifier||s.ajax.dynamicHeaderModifier;0!=e.dynamicHeaderModifier&&o&&o(e);var l=e.handler,d=e.error,u=e.errorHandler,c=d&&d.condition,p=e.args,m=this.listener,f=this._getTransport();i||(f.onreadystatechange=function(){if(4==f.readyState){var e=!0;if(m&&(e=m.call(f)),e&&l)try{!function(e,t){var n=s.ajax.errorOptions;return t||(t=n&&n.condition&&n.condition),!(!t||!t.call(e))}(f,c)?l.call(f,p):u?u.call(f,p):s.ajax.errorOptions&&s.ajax.errorOptions.handler?s.ajax.errorOptions.handler.call(f,p):l.call(f,p)}catch(e){}f=null}});var h;if("object"==typeof r){var g=[];for(var _ in r)g.push(encodeURIComponent(_)+"="+encodeURIComponent(r[_]));g.length>0&&(h=g.join("&"))}else"string"==typeof r&&(h=r);"GET"===n&&h&&(t+=(t.indexOf("?")+1?"&":"?")+h),f.open(n,t,!i);for(var v in a)f.setRequestHeader(v,a[v]);return"GET"!==n&&(e.bodyJSON?(f.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h=JSON.stringify(e.bodyJSON)):e.formData instanceof FormData?h=e.formData:f.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8")),e.credential&&(f.withCredentials=!0),f.send(h),i?f:void 0}},_getTransport:function(){if(a.XMLHttpRequest)return new XMLHttpRequest;if(a.ActiveXObject)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){throw new Exception("Browser not supported")}}}},s.event.checkDOMReady(),s.CX=function(e,t){function n(e){return"String"===a(e)?e:JSON.stringify(e)}function i(e){var t=null;try{t=JSON.parse(e)}catch(t){return e}return t}function r(e){var t=a(e);if("HTMLIFrameElement"===t)return e.contentWindow;if("global"===t||"Window"===t||"Object"===t)return e;throw new Error("Provide a valid target !!")}function a(e){return Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1]}function o(t){this.ctx=t.ctx||e,this.origin=t.targetOrigin,this.target=t.target,this.winHandler=t.winHandler,this.handlers={},this.targetReady=-1!==s.indexOf(t.targetOrigin),this.queuedMsgs=[],this.initialise(),l.push(this)}var s=[],l=[];return e.addEventListener("load",function n(){var i=t.getElementsByTagName("iframe");parent&&parent!==e&&parent.postMessage("CX_load__"+this.location.origin,"*");for(var r=i.length-1;r>=0;r--)i[r].contentWindow.postMessage("CX_load__"+this.location.origin,"*");t.removeEventListener("DOMContentLoaded",n)}),e.addEventListener("message",function(e){if(o.defaultHandlers){var t=i(e.data);if($IS.object(t)){if(!o.defaultHandlers[t.requestId])return;if(!o.defaultHandlers[t.requestId].handler)return;!function(e,t){var n;return!(!(n=t&&t.condition?t.condition:o.errorOptions&&o.errorOptions.condition)||!n.call(e))}(t,o.defaultHandlers[t.requestId].error)?o.defaultHandlers[t.requestId].handler.call(t,o.defaultHandlers[t.requestId].args):o.defaultHandlers[t.requestId].errorHandler?o.defaultHandlers[t.requestId].errorHandler.call(t,o.defaultHandlers[t.requestId].args):o.errorOptions&&o.errorOptions.handler?o.errorOptions.handler.call(t,o.defaultHandlers[t.requestId].args):$E.dispatch(document,"lib:xhrError",{responseText:t.responseText})}else if(/^CX_load__/.test(e.data)){s.push(e.origin);for(var n=l.length-1;n>=0;n--)l[n].origin===e.origin&&(l[n].targetReady=!0,l[n].dispatchQueuedMsg(),l.splice(n,1))}}}),o.prototype._={},o.prototype.initialise=function(){this.ctx.addEventListener("message",function(e){var t=null;this.origin===e.origin&&(t=this._.unserialize(e.data),this.winHandler&&this.winHandler.call(this,e,t.data),"Object"===this._.getType(t)&&t.msgType&&this.handlers[t.msgType]&&this.handlers[t.msgType].forEach(function(n){n.call(this,e,t.data)}))}.bind(this))},o.prototype._.getType=a,o.prototype._.serialize=n,o.prototype._.unserialize=i,o.prototype._.getTargetWindow=function(e){var t=this.getType(e);if("HTMLIFrameElement"===t)return e.contentWindow;if("global"===t)return e;throw new Error("Provide a valid target !!")},o.prototype.dispatchQueuedMsg=function(){for(var e=0,t=this.queuedMsgs.length;e<t;e++)this.dispatchMessage(this.queuedMsgs[e].msgType,this.queuedMsgs[e].data);this.queuedMsgs=null},o.prototype.dispatchMessage=function(e,t){var n={msgType:e,data:t};this.targetReady?this._.getTargetWindow(this.target).postMessage(this._.serialize(n),this.origin):this.queuedMsgs.push(n)},o.prototype.bind=function(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},o.prototype.unbind=function(e,t){if(this.handlers[e]){for(var n=this.handlers[e].length-1;n>=0;n--)this.handlers[e][n]===t&&this.handlers[e].splice(n,1);0===this.handlers.messageType.length&&delete this.handlers.messageType}},o.initDefaultChannel=function(t,n,r){o.defaultChannel={target:t,targetOrigin:n,defaultHandler:r},o.defaultHandlers={},e.addEventListener("message",function(e){var t=i(e.data);-1!==o.defaultChannel.targetOrigin.indexOf(e.origin)&&"default-channel"===t.msgType&&o.defaultChannel.defaultHandler({method:t.cxType,data:t.data,requestId:t.requestId})}.bind(o.defaultChannel))},o.error=function(e){o.errorOptions=e},o.post=function(e){this.request(e,"post")},o.get=function(e){this.request(e,"get")},o.put=function(e){this.request(e,"put")},o.delete=function(e){this.request(e,"delete")},o.window_open=function(e){this.request(e,"window_open")},o.request=function(e,t){var i=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}();o.defaultHandlers[i]={handler:e.handler,error:e.error,errorHandler:e.error&&e.errorHandler,args:e.args};var a={cxType:t,requestId:i,msgType:"default-channel",data:e};r(o.defaultChannel.target).postMessage(n(a),o.defaultChannel.targetOrigin)},o.dispatch=function(e){r(o.defaultChannel.target).postMessage(n(e),o.defaultChannel.targetOrigin)},o}(a,document),null===a.$||void 0===a.$?a.$=s.dom.selector.bind(s.dom):s.dollar=a.$,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),s.dom.matches=function(e,t){if(void 0!==e&&1===e.nodeType){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(e){return-1!==[].slice.call(document.querySelectorAll(e)).indexOf(this)}).call(e,t)}},s.noConflict=function(){a.$=s.dollar},s.util={getQueryParams:function(e){var t=e||a.location.search;t=decodeURIComponent(t.replace(/\+/g," "));var n={};if(URLSearchParams){new URLSearchParams(t).forEach(function(e,t){n[t]=e})}else for(var i=/([^?=&]+?)=([^&]+)/g;null!==(param=i.exec(t));)n[param[1]]=param[2];return n}},a.$U=s.util,a.$D=s.dom,a.$E=s.event,a.$X=s.ajax,a.$CX=s.CX,a.$DX=s.dcAjax,a.$IS=s.is}else a.$IS=s.is,a.$D=s.dom}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():e.Hummingbird=t()}(this,function(){"use strict";function e(e,t){return e.hasOwnProperty(t)}function t(){}function n(e){return JSON.parse(JSON.stringify(e))}function i(e,t){var n={};return e.forEach(function(e,i){t[i]?n[t[i]]=e:n["arg"+i]=e}),n}function r(e,t,n){for(var i=null,r={},a=0,o=e.length;a<o;a++)e[a].id===t&&(i=e[a].params);return n&&n.length>0?(n.forEach(function(e,t){r[n[t]]=i[e]}),function(e){return Object.keys(e).length>0}(r)?r:null):i}function a(e){return window.location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+e}function o(e,t){return e.replace(/:([\w-\._]+)/g,function(e,n){return t[n]})}function s(e,t){var n=t.target,i=n.getAttribute("data-bind"),r=i&&i.split(".");if(r&&e&&!function(e){if(-1!==[13,27,38,40,9].indexOf(e))return!0}(t.keyCode?t.keyCode:t.charCode)&&!t.__visited){t.__visited=!0;var a,o=r.length,s="",d=this;d.bindObj||(d.bindObj={}),a=d.bindObj,s=function(e){var t,n;return"checkbox"===e.type?void 0===(t=e.value)||null===t?t=!!e.checked:e.checked||(t=!1):"radio"===e.type?void 0!==(t=e.value)&&null!==t||(t=!!e.checked):"SELECT"===e.tagName?("select-one"===e.type&&(n=e.selectedOptions).length>0&&(t=n[0].value),t=e.value):t=e.value,"string"==typeof t&&(t=t.trim()),t}(n),e.extension.callExtension("beforeModelUpdate",[{element:n,value:s,bindStr:i,appCtx:e}],function(t){if(!t)return M.is("core")&&M.log("Interrupted at beforeModelUpdate"),void(e._.r.prevRoutesSeq=[]);var n=null,i=r.length,u=d.modelObj;r.forEach(function(e,t){var r;e=e.trim(),null!==n?(a[n]||(a[n]={}),a[n][e]=s,n=null):/([\w]+)\[(\d+)\]/.test(e)?(r=e.match(/([\w]+)\[(\d+)\]/),n=Number(r[2]),a[r[1]]||(a[r[1]]=new Array(n)),i-1===t?("boolean"==typeof(u=u[r[1]][n])?s="true"===s:isNaN(u)||(s=Number(s)),a[r[1]][n]=s):(a=a[r[1]],u=l(u,r[1]))):(u=l(u,e),t!==o-1?$.object(a[e])||(a[e]={}):("boolean"==typeof u&&(s="true"===s),a[e]=s),a=a[e])})})}}function l(e,t){return e&&t&&e[t]}function d(e,t){this.map=[],this.id=1,this.routesSeq=[],this.prevRoutesSeq=[],this.config={},this.__tracker=[],this.redirects={},this.config.titleFormat=e.titleFormat||"My Site Title",this.config.prefix=function(e){return 0===e.length?"":"/"===e.charAt(0)?e:"/"+e}(e.prefix||""),this.startRoute=null,this.prevModule=null,t&&(this.appCtx=t)}function u(e,t){return""!=t&&0===e.indexOf(t)&&e.length>t.length}function c(e){if(e){(this.requireVersion?this.requireVersion:require)([this.__curRoute.module],function(e){void 0===e&&M&&M.warn("Module is undefined. Check module name or module file: "+this.__curRoute.module);var t=this.__curRoute;t.curBindCtx=e,this.appCtx.extension.callExtension("afterModuleLoad",[{caller:t.caller,url:t.urlOri,queryString:this.__curURL.queryString,moduleCtx:e,fnName:t.func,prevModuleCtx:this.prevModule}],function(e,t){if(!t)return void(M&&M.is("core")&&M.log("Interrupted at beforeRoute"));var n=this.__curRoute,i=n.params?n.params:[];null===this.prevModule||this.prevModule.modelObj||this.prevModule.bindObj||this.prevModule===e||(this.prevModule.modelObj={},this.prevModule.bindObj={});this.prevModule=e,e.modelObj||(e.modelObj={}),e.bindObj||(e.bindObj={}),e.__modify||(e.__modify=s.bind(e,this.appCtx));if(!$.function(e[n.func]))throw new Error('Function "'+n.func+'" specified in route '+n.urlOri+" is not defined.");(i=Object.keys(i).map(function(e){return i[e]})).push(this.appCtx),i.push(this.__curURL.queryString),e[n.func].apply(this.appCtx,i),this._afterModuleLoad(n.caller,n.urlOri,n.pushStateFlag)}.bind(this,e))}.bind(this),this._handleRequireErr)}else M.is("core")&&M.log("Interrupted at beforeModuleLoad")}function p(e,t){return V.call(e,t)}function m(e){this.data=e,this.children=[],this.parent=null}function f(e,t){this.str=e,this.tokenRe=/({{.*?}}|{%.*?%}|{#.*?#})/g,this.id=t,this.tokens=[],this.endTags=[],this.blockTypes=Object.keys(W)}function h(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})}function g(e){return e.replace(/"/g,'\\"').replace(/'/g,"\\'")}function _(e){return"string"==typeof e?e.replace(/\n/g,"\\n"):e}function v(e,t,n,i){this.inBrowser="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),this.tmpl_id=e.replace(/-/g,"_"),this.str=t,this.viewFnStr="",this.macroStr="",this.partialStr="",this.currTokenIndex=0,this.tokenizer=new f(t,e),this.tokenizer.init(),this.ast=this.tokenizer.ast,this.tokens=this.tokenizer.tokens,this.endTags=this.tokenizer.endTags,this.indexVars=0,this.loops=0,this.notFlag=!1,this.indentLevel=4,this.indentLevelMacro=4,this.indentLevelPartial=4,this.inBrowser?this.showErrInfo=n&&n.showErrInfo||!0:this.showErrInfo=!1,this.config=n,this.currCodeType="view",this.currLoopCtx,this.viewEngineInstance=i,this.macros={},this.partials={}}function b(e){return/<\s*input\s/g.test(e)?"input":/<\s*select\s/g.test(e)?"select":/<\s*textarea\s/g.test(e)?"textarea":null}function y(e,t){var n=t||{},i=/(\w+)\s+contains\s+(?:(("|')(?:.+)?\3)|(\w+))/,r=[],a=[];if(i.test(e))return function(e,t){var n="",i=y(e[1]);if(t.skipExpr)return i;if(void 0!=e[4])throw new Error("variables not allowed in contains statement");return n+="Object.prototype.toString.call("+i+") === '[object Object]' ? ("+i+".hasOwnProperty("+e[2]+") ): ("+i+".indexOf("+e[2]+") > -1)"}(i.exec(e),n);var o=0;return e=(e=(e=e.replace(/[\w\.]+\s*\[(\s*".*?"\s*)\]/g,function(e,t,n){return e=e.replace(/\["/,".").replace(/"\]/,""),a.push(e),"__SQ_NOTS__"})).replace(/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/g,function(e,t,n){return r.push(e),"__STRR__"})).replace(/[a-zA-Z_$\.]+[\w\.$]*/gm,function(e,t,n){return"true"===e||"false"===e?e:"__STRR__"===e?r[o++]:-1!==Q.indexOf(e)?e:"u._r(ctx, "+J+', "'+e+'")'}),o=0,e=e.replace(/__SQ_NOTS__/,function(){return a[o++]})}function E(e){return(e=e||"").match(/([\w]+)/g)}function T(e,t){var n,i=document.createDocumentFragment(),r=/<tr[\s\S]*?<\/tr>/.test(e);for((n=t&&r?document.createElement("table"):document.createElement("div")).innerHTML=e,t&&r&&(n=n.querySelector("tbody"));n.firstChild;)i.appendChild(n.firstChild);return i}function S(e,t){e&&void 0===e.autoEscape&&(e.autoEscape=!0),this.config=e,this.cache={},this.filter=G,t&&(this.appCtx=t)}function x(e){e||M.is("core")&&M.log("Interrupted at beforeRender.")}function O(e){e&&delete te[e]}function I(t){if(t!==ae){ae=t;var n=t.target,i=n,r=null,a="",o="",s=null,l=this.getAttribute("data-hb-id");if($D.hasClass(n,"disabled"))return t.stopPropagation(),void t.preventDefault();if(e(te,this.getAttribute("data-hb-id"))&&te[l])for(;i!==this&&null!==i;)if(r=i.getAttribute("data-event"),n=i,i=i.parentNode,r)for(var d=0,u=(r=A(r)).length;d<u&&!t.cancelBubble;d++)o=r[d][0],a=r[d][1],te[l]&&te[l][o]&&te[l][o][a]&&(s=te[l][o][a],t.type===o&&s&&s.call(n,t))}}function A(e){if(""===e)return[];return(e=e.trim().split(",")).map(function(e){return e.trim().split(" ")})}function C(e){for(var t=e.options,n=t.length-1;n>=0;n--)if(t[n].hasAttribute("data-default"))return t[n];return!1}function D(e){for(var t,n,i,r=e.length-1;r>=0;r--)if("radio"===(t=e[r]).type||"checkbox"===t.type)t.value===t.getAttribute("data-value")&&(t.checked=!0);else if("TEXTAREA"===t.tagName)t.value=t.value;else if("SELECT"===t.tagName){if("select-one"!==t.type)continue;(i=t.getAttribute("value")||t.getAttribute("data-value"))&&""===i.trim()?(n=C(t))&&(t.value=n.value):i&&(t.value=i.trim())}else t.hasAttribute("data-value")&&(t.value=t.getAttribute("data-value"))}function w(e,t,n){for(var i,r,a=t.getAttribute?t.getAttribute("data-hb-id"):t,o=0,s=e.length;o<s;o++)for(var l=0,d=(i=A((r=e[o]).getAttribute("data-event"))).length;l<d;l++)!function(e,t,n,i,r){var a=t[0],o=t[1],s=!1,l=!1,d=function(e,t){var n=e,i=!1;return(t=t.split(".")).forEach(function(e){n[e]?n=n[e]:i=!0}),i?null:n}(i,o),u=te[e]?Object.keys(te[e]):[];if(-1===["click","change"].indexOf(a))return void $E.bind(n,a,d);$D.isNode(r)||"string"!=typeof e||(r=$D.get('[data-hb-id="'+e+'"]'));if(void 0===te[e])te[e]={},te[e][a]={},s=!0;else if(-1===u.indexOf(a))te[e][a]={},s=!0;else{for(var c=$E.listeners.length-1;c>=0;c--)if($E.listeners[c].element===r&&$E.listeners[c].type===a){l=!0;break}l||(s=!0)}s&&$E.bind(r,a,I);te[e][a][o]||(te[e][a][o]=d)}(a,i[l],r,n,t)}function R(e,t,n){this.logLevel=e,this.types={router:!0,view:!0,core:!0,extension:!0},this._filterBy(t,n),this.setLevel(e)}function N(e){var t,n,i,r,a,o,s;if(z?e.mode||(e.mode="development"):e.mode="server",e.prefix||(e.prefix=""),e.constants||(e.constants={}),e.filterLog||(e.filterLog=["router","view","core","extension"]),e.filterLogType===L&&(e.filterLogType=!0),e.logLevel===L&&(e.logLevel="production"===e.mode?0:2),M=new R(e.logLevel,e.filterLog,e.filterLogType),z&&(t=function(e,t,n){t.type&&"popstate"===t.type&&(t=P.location.pathname,n=!1),t=k(t,e.configs.prefix),e._.r.redirects[t]&&(t=e._.r.redirects[t]),e._.r.navigate(t,n,this)}.bind(null,this),n=new j(t,this)),i=new ee(this),r=new d({titleFormat:e.titleFormat,prefix:e.prefix},this),a=new S({templatePath:e.viewPath,ext:e.ext||".html",showErrInfo:e.showErrInfo||!0},this),z&&(this.addRoute=r.addRoute.bind(r),this.navigate=t,this.goBack=r.goBack.bind(r),this.setRequireVersion=r.setRequireVersion.bind(r),this.removeRequireVersion=r.removeRequireVersion.bind(r)),this.utils=H,this.constants=e.constants,this.data=e.data||{},this.configs=e,this.hsNav=n,this.view=a,this.view.cache={},this.extension=i,this.version="v1.0.0",this._={r:r},this.messages=e.messages||{},o=this.view.cache,"production"===e.mode)for(var l=(s=Object.keys(e.viewPath)).length-1;l>=0;l--)o[s[l]]=window[s[l]+"ViewCache"]}function k(e,t){return"string"==typeof e?e.replace(a(t),""):e}var L,M,P,B,F,U=Object.prototype.toString,$={array:function(e){return"[object Array]"===U.call(e)},date:function(e){return"[object Date]"===U.call(e)},function:function(e){return"[object Function]"===U.call(e)},regex:function(e){return"[object RegExp]"===U.call(e)},object:function(e){return"[object Object]"===U.call(e)},url:function(e){return/^https?:\/\/[\-A-Za-z0-9+&@#\/%?=~_|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_|]/.test(e)}},z="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window);z?(P=window,F=P,document,navigator.userAgent.toLowerCase().indexOf("msie 9.0")>0,(B=z&&window.navigator.userAgent.toLowerCase())&&B.indexOf("trident")>0,B&&B.indexOf("android")>0,B&&/(iphone|ipad|ipod|ios)/i.test(B)):(F=global,require("fs"));var H=function(){function n(t,i){var r,a=Object.prototype.toString;for(r in i)e(i,r)&&("object"==typeof i[r]?(t[r]||(t[r]="[object Array]"===a.call(i[r])?[]:{}),n(t[r],i[r])):t[r]=i[r])}function i(e,t,n){var r,a=Object.prototype.toString.call(e);if((t=t||{})[n=n||""])return e;switch(a){case"[object Object]":r=function(e,t,n,r){var a;for(var o in e)a=e[o],t[o]=i(a,n,r+(r?".":"")+o);return t}(e,{},t,n);break;case"[object Array]":r=function(e,t,n,r){for(var a=0;a<e.length;a++)t[a]=i(e[a],n,r+"["+a+"]");return t}(e,[],t,n);break;case"[object Number]":case"[object Boolean]":case"[object RegExp]":case"[object Date]":r=e;break;default:r=function(e){var t;if(!e)return e;document.createElement("div").innerText=e;try{t=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}(e)}catch(n){t=e}return t}(e)}return r}return{mergeObj:function(e,t){var i=JSON.parse(JSON.stringify(e));return n(i,t),i},escapeHtml:i,runSeries:function(e,n,i,r){function a(e){return null===e||void 0===e}function o(t,r){if(t||!1===t?(d[l]=t,u=!0):a(r)||l>-1&&(c[l]=r),++l>=s)return u?i(d,c):i(null,c);try{e[l].apply(null,n)}catch(e){o(e)}}var s=e.length,l=-1,d=[],u=!1,c=[];if(a(n)&&(n=[]),$.array(e)){if(a(i)&&(i=t),0===s)return i(null,c);n.push(o),o()}else M.is("core")&&M.warn("Invalid tasks for series.")}}}();d.prototype.addRoute=function(e,t){var n=null,i=[],r=null;return $.regex(e)?r=e:(n=function(e){return e.replace(/\//g,"\\/")}(e).replace(/:([\w-]+)/g,function(){return i.push(arguments[1]),"([\\w\\-\\.]+)"}),r=new RegExp("^"+n+"$")),this.map.push({id:this.id++,url:e,re:r,module:t.module,fn:t.fn,start:!!t.start,loader:!!t.loader,args:i,dep:t.dep,title:t.title}),t.start&&!this.startRoute&&/^[\/\.\w_-]+$/.test(e)&&(this.startRoute=e),this.id-1},d.prototype.addRouteRedirect=function(e,t){"string"==typeof e&&"string"==typeof t&&e!==t&&(this.redirects[e]=t)},d.prototype.removeRouteRedirectFrom=function(e){delete this.redirects[e]},d.prototype.removeRouteRedirectTo=function(e){for(var t in this.redirects)this.redirects[t]===e&&delete this.redirects[t]},d.prototype.navigate=function(e,t,n){var i=null;if(0==this.map.length)return M.warn("No Route has been added yet");void 0===t&&(t=!0),n||(n=this),i=this._parseRoute(e,n),this.__curURL=i,this.__prevUrl=window.location.href,i&&this._processRouting(i,n,e,t)},d.prototype.setRequireVersion=function(e){this.requireVersion=e},d.prototype.removeRequireVersion=function(){delete this.requireVersion},d.prototype.goBack=function(e){var t,n,i,r,a=null,o=null,s=this.__tracker,l=this.map,d=[];if(e&&e.dep){for(M.info("options Provided for goBack",e),n=l[s[s.length-1].id-1],i=e&&e.dep,r=0===(i=!isNaN(Number(i))&&i>0?i:1);n.dep&&i;)n=l[n.dep-1],d.push(n),i--;e:for(;d.length>0;){n=d.pop();t:for(var u=0;u<s.length;u++){if(s[u].id==n.id){s.length=u+1,t=!0;break e}if(function(e,t,n){for(var i=e[n-1].dep;i;){if(i==t)return!0;i=e[(n=i)-1].dep}return!1}(l,n.id,s[u].id)){if(/^\/[/.\w-]+$/.test(l[n.id-1].url)){s.length=u,t=!0,s.push({id:n.id,url:l[n.id-1].url});break e}break t}}}}e&&e.level&&!isNaN(Number(e.level))&&e.level>0&&s.length>e.level&&(s.length=s.length-e.level),s.length>1&&!r?(a=(o=s[s.length-2]).url,M.info("Navigated From URL found to be",o.url)):(a=this._getParentRoute(t?s[s.length-1]:null),M.info("Parent Url => ",a)),a&&this.appCtx.navigate(a)},d.prototype._getParentRoute=function(e){var t,n,i=this.map,r=/\/[^\/]+?$/,a=!1,o=null;e?(t=e.id,n=e.url):(t=this.__curRoute.id,n=this.__curRoute.urlOri);e:for(;o!==n;){o=n,n=n.replace(r,"");for(var s=0;s<i.length;s++)if(t!=i[s].id&&i[s].re.test(n)&&!i[s].loader){a=!0;break e}}return a?n:this.startRoute},d.prototype._parseRoute=function(e,t){var n="";return void 0===e?(M&&M.is("router")&&routerwarn("URL is undefined"),null):(t&&t.href&&(e=t.href),(e=e.replace(a(this.config.prefix),"")).length>1&&"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),/\?([\w-]+(=[\w-]*)?(&[\w-]+(=[\w-]*)?)*)?/.test(e)&&(n=function(e){var t={};return(e=e.split("&")).forEach(function(e){e=e.split("="),t[e[0]]=e[1]}),t}(e.substring(e.indexOf("?")+1)),e=e.substring(0,e.indexOf("?"))),{url:e,queryString:n})},d.prototype._getRoutesStack=function(e,t,a,s){var l=e.url,d=e.queryString,u=null,c=-1,p=-1,m=null,f=!1,h=!1,g="";this.routesSeq=[],t.href||(t="appCtx");for(var _=0,v=this.map.length,b=0,y=this.map.length;b<y;){for(_=0;_<v;_++)if(m=this.map[_],f=!1,u=null,h=!1,-1===c&&m.re.test(l)?(l.match(m.re)[1]&&(u=i(l.match(m.re).slice(1),m.args)),f=!0,h=s,M&&M.is("router")&&M.info("Route matched : "+l+" ==> "+m.url)):-1!==c&&m.id===c&&(h=!1,f=!0,u=r(this.routesSeq,p,m.args),m.args.length>0&&(a=u?o(m.url,u):m.url),M&&M.is("router")&&M.info("Dependent route : "+l+" ==> "+m.url)),f){g=u&&(g=m.title.match(/arg([\d]+)/))?u["arg"+g[1]]:m.title,this.routesSeq.push({id:m.id,module:m.module,func:m.fn,depRouteId:m.dep,title:g,params:u,queryString:d,caller:t,urlOri:a,pushStateFlag:h});break}if(_===v||!this.map[_].dep)break;p=this.map[_].id,c=this.map[_].dep,b++}if(!f)return M&&M.is("router")&&M.warn("No route found for url : "+l),void $E.dispatch(document.body,"hbRouter:routenotfound");var E=[];E=n(this.routesSeq),this._removeRoutedRoutes(),this.prevRoutesSeq=n(E)},d.prototype._processRouting=function(e,t,n,i){function r(e){e?this.processNextRouteInSequence():M&&M.is("core")&&M.log("Interrupted at beforeRoute")}this._getRoutesStack(e,t,n,i),this.appCtx&&this.routesSeq.length>0?this.appCtx.extension.callExtension("beforeRoute",[{curRoutesStack:this.routesSeq,prevModule:this.prevModule}],r.bind(this)):r.call(this,!0)},d.prototype._removeRoutedRoutes=function(){var e=this.routesSeq.length,t=this.prevRoutesSeq.length,n=e-t,i=0;n>0?i=n:n<0||(i=1);for(var r=e-1,a=t-1;r>=i&&a>=0&&(this.routesSeq[r].id===this.prevRoutesSeq[a].id&&0!==r);r--,a--)this.routesSeq.pop();this.prevRoutesSeq=[]},d.prototype.processNextRouteInSequence=function(){this.__complete=!1;var e=this.routesSeq.length-1;this.__curRoute=this.routesSeq[e],this.addTrack(),this.appCtx?this.appCtx.extension.callExtension("beforeModuleLoad",[this.routesSeq[e]],c.bind(this)):c.call(this,!0)},d.prototype.addTrack=function(){if(!(this.routesSeq.length>1)){for(var e=this.__tracker,t=this.__curRoute,n=-1,i=0;i<e.length;i++)if(u(e[i].url,t.urlOri)||t.id===e[i].id?n=i:this.map[t.id-1].start&&(n=0),n>-1){e.length=n;break}e.push({id:t.id,url:t.urlOri})}},d.prototype.getNavigationUrl=function(){return this.__curURL&&this.__curURL.url},d.prototype._renderTitle=function(){var e=/:([\w.-]+)/,t=this.routesSeq.length>0&&this.routesSeq[this.routesSeq.length-1]||this.__curRoute,n=t.title;e.test(n)&&(n=t.params[n.match(e)[1]]),n!==L&&!1!==n&&(n=this.config.titleFormat.replace("{title}",n),document.title=n)},d.prototype._afterModuleLoad=function(e,t,n){this._renderTitle(),Hummingbird&&("appCtx"===e&&t&&n?this.appCtx.hsNav._.changeUrl({url:t},"",t):e&&"A"===e.tagName&&e.href!==L&&this.appCtx.hsNav._.changeUrl({url:t},"",t))},d.prototype._handleRequireErr=function(e){("scripterror"===e.requireType||"timeout"===e.requireType&&e.requireModules)&&(!1===require.specified(e.requireModules.toString())?M&&M.is("router")&&M.error("Module "+e.requireModules+" is not defined in config file."):M&&M.is("router")&&M.error("Check if module file exists and is defined in config file. Module name : "+e.requireModules))};var j=function(){function e(e,t){this.routeFn=e,this.appCtx=t,this.init()}function t(t,n){this._=new e(t,n),this.appCtx=n,this.initHistory()}if(z){var n=window;return e.prototype.init=function(){this.historySupport?n.addEventListener("popstate",this.routeFn,!1):M.warn("Browser doesnot support HTML5 history api.")},e.prototype.historySupport=!(!n.history||!n.history.pushState),e.prototype.changeUrl=function(e,t,i){var r=window.location.href;this.historySupport&&(r=r.replace(a(this.appCtx.configs.prefix),""))!==i&&n.history.pushState(e,t,i)},e.prototype.clickHandler=function(e,t){e.id=e.getAttribute("id")||(new Date).getTime();var n=this;e.addEventListener("click",function(i){i.preventDefault();var r=e.getAttribute("href");t?n.routeFn.call(e,r,!0):n.historySupport&&n.changeUrl({url:r},"",r)},!1)},e.prototype._bind=function(e,t){for(var n,i=0;n=e[i];i++)$D.hasClass(n,"jsnav-exclude")||this.clickHandler(n,t)},t.prototype.hookNewUrls=function(e){var t;(t="string"==typeof e?$D.get("#"+e):e)?(this._._bind($D.getAll("a.jsnav",t),!0),this._._bind($D.getAll(".jsnav-tab a",t),this._.clickHandler,!1),this._._bind($D.getAll("li.jsnav",t),!0)):M.is("router")&&M.warn("Cannot hook new urls for targetId : ",e)},t.prototype.initHistory=function(){this._._bind($D.getAll("a.jsnav"),this._.clickHandler,!0),this._._bind($D.getAll("li.jsnav"),this._.clickHandler,!0)},t}}(),G=function(e){this.value=e,this.objType=typeof e};G.add=function(e){Object.defineProperty(G.prototype,e.name,{value:e.method})},G.prototype={escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},lower:function(){return this.value=this.value.toLowerCase(),this},upper:function(){return this.value=this.value.toUpperCase(),this},subStr:function(e,t){return this.value=t?this.value.substr(e,t):this.value.substr(e),this},remove:function(e){e=this.escapeRegExp(e);var t=new RegExp(e,"g");return this.value=this.value.replace(t,""),this},removeFirst:function(e){e=this.escapeRegExp(e);var t=new RegExp(e);return this.value=this.value.replace(t,""),this},append:function(e){return this.value=this.value+e,this},prepend:function(e){return this.value=e+this.value,this},truncate:function(e){return this.value=this.value.substr(0,e),this},trim:function(){return this.value=this.value.replace(/^\s+|\s+$/g,""),this},camelize:function(){return this.value=function(e){return e.replace(/(^[a-zA-Z])|[ \.\?!]([a-zA-Z])/g,function(e){return 1===e.length?e.charAt(0).toUpperCase():e.charAt(0)+e.charAt(1).toUpperCase()})}(this.value),this},lstrip:function(){return this.value=this.value.replace(/^(\s+|\t+)/g,""),this},rstrip:function(){return this.value=this.value.replace(/(\s+|\t+)$/g,""),this},plus:function(e){var t=Number(this.value);if(isNaN(t)||"number"!=typeof e)throw new Error("Cannot perform plus operation on non-numerical value");return this.value=t+e,this},minus:function(e){var t=Number(this.value);if(isNaN(t)||"number"!=typeof e)throw new Error("Cannot perform minus operation on non-numerical value");return this.value=t-e,this},multiply:function(e){var t=Number(this.value);if(isNaN(t)||"number"!=typeof e)throw new Error("Cannot perform multiply operation on non-numerical value");return this.value=t*e,this},divide:function(e){var t=Number(this.value);if(isNaN(t)||"number"!=typeof e)throw new Error("Cannot perform divide operation on non-numerical value");return this.value=t/e,this},modulo:function(e){var t=Number(this.value);if(isNaN(t)||"number"!=typeof e)throw new Error("Cannot perform modulo operation on non-numerical value");return this.value=t%e,this},format:function(e){var t=new Date(this.value),n=t.getDate(),i=t.getDay(),r=t.getMonth(),a=t.getFullYear(),o=a+"",s=t.getHours()>11?t.getHours()-12:0==t.getHours()?12:t.getHours(),l=t.getHours(),d=t.getMinutes(),u=t.getSeconds(),c=t.getHours()<12?"a.m":"p.m",p=t.getHours()<12?"a":"p",m=t.getHours()<12?"AM":"PM",f={d:n,dd:n>9?n:"0"+n,ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i],yy:o.substr(2),yyy:o.substr(1),yyyy:a,m:r,mm:r>9?r:"0"+r,mmm:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"][r],mmmm:["January","February","March","April","May","June","July","August","September","October","November","December"][r],M:d,MM:d>9?d:"0"+d,h:s,hh:s>9?s:"0"+s,H:l,HH:l>9?l:"0"+l,s:u,ss:u>9?u:"0"+u,t:c,tt:p,a:m};return e=e.replace(/d{1,3}|m{1,4}|y{2,4}|s{1,2}|h{1,2}|H{1,2}|s{1,2}|t{1,2}|M{1,2}|a{1,2}/g,function(e){return f[e]?f[e]:e}),this.value=e,this},split:function(e,t){return e=new RegExp(this.escapeRegExp(e),"g"),this.value=void 0!==t&&null!==t?this.value.split(e)[t]:this.value.split(e),this},replace:function(e,t){return this.value=this.value.replace(new RegExp(e,"g"),t),this},json:function(e){return this.value=JSON.stringify(this.value,null,isNaN(e)?0:e),this.escHtml()},toJSONString:function(){return this.json.apply(this,arguments)},parseJSON:function(){return JSON.parse(this.value)},escHtml:function(){if("string"!=typeof this.value)return this;var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return this.value=this.value.replace(/[&<>"'\/]/g,function(t){return e[t]}),this},encodeURIComponent:function(){return this.value=F.encodeURIComponent(this.value),this},escapeNewLine:function(){return this.value=this.value.replace(/\n/g,"\\n"),this},first:function(){return this.value.length>0&&(this.value=this.value[0]),this},last:function(){return this.value.length>0&&(this.value=this.value[this.value.length-1]),this},defVal:function(e){return this.value&&""!==this.value.trim()?this.value:e},join:function(){return this.value&&$.array(this.value)?this.value=this.value.join(","):this.value="",this},toValue:function(){return this.value}};var W={if:{parserRule:"if EXPRESSION",lexerRules:{EXPRESSION:".*",WHITESPACE:"\\s"},opensBlock:!0},else:{parserRule:"else",opensBlock:!0,closesBlock:["if","elif","when"]},elif:{parserRule:"elif EXPRESSION",lexerRules:{EXPRESSION:".*",WHITESPACE:"\\s"},opensBlock:!0,closesBlock:["if","elif"]},endif:{parserRule:"endif",closesBlock:["if","else","elif"]},assign:{parserRule:"assign VARIABLE *= *EXPRESSION",lexerRules:{VARIABLE:"[\\w\\.$]+",WHITESPACE:"\\s",EXPRESSION:".*"}},capture:{parserRule:"capture VARIABLE",lexerRules:{VARIABLE:"[\\w.]+",WHITESPACE:"\\s"},opensBlock:!0},endcapture:{parserRule:"endcapture",closesBlock:["capture"]},for:{parserRule:{In:"for VARIABLE in LIST",InObj:"for VARIABLE, VARIABLE in LIST",Range:"for VARIABLE in range\\(START, STOP,? ?STEP?\\)",Slice:"for VARIABLE in LIST\\[START:STOP:?STEP?\\]",Partial:"for VARIABLE in LIST partial VARIABLE ARGS?",PartialObj:"for VARIABLES in LIST partial VARIABLE ARGS?"},lexerRules:{VARIABLE:"\\s?[\\w.]+\\s?",VARIABLES:"[\\w,\\s]+",LIST:"\\s?[\\w.]+\\s?",START:"\\s?[\\d|\\w]*\\s?",STOP:"\\s?[\\d|\\w]*\\s?",STEP:"\\s?[\\d|\\w]*\\s?",WHITESPACE:"\\s?",ARGS:"\\([\\w,\\s]+\\)"},opensBlock:!0},forelse:{parserRule:"forelse",closesBlock:["for"],opensBlock:!0},endfor:{parserRule:"endfor",closesBlock:["for","forelse"]},cycle:{parserRule:'cycle "VALUES"',lexerRules:{VALUES:".*"}},case:{parserRule:"case VARIABLE",lexerRules:{VARIABLE:"[\\w.]+",WHITESPACE:"\\s"},opensBlock:!0},when:{parserRule:"when VALUE",lexerRules:{VALUE:'".*"|NUMBER|JSON'},opensBlock:!0,closesBlock:["when","case"]},endcase:{parserRule:"endcase",closesBlock:["else","when","case"]},raw:{parserRule:"raw",opensBlock:!0},endraw:{parserRule:"endraw",closesBlock:["raw"]},comment:{parserRule:"comment",opensBlock:!0},endcomment:{parserRule:"endcomment",closesBlock:["comment"]},macro:{parserRule:"macro MACRONAME \\(ARGS?\\)",lexerRules:{MACRONAME:"[\\w.]+",ARGS:"[\\w,\\s]+",WHITESPACE:"\\s?"},opensBlock:!0},endmacro:{parserRule:"endmacro",closesBlock:["macro"]},include:{parserRule:'include "PATH"',lexerRules:{PATH:".*"}},debug:{parserRule:'debug "TYPE"',lexerRules:{TYPE:"[\\w,\\s]+"}},options:{parserRule:'options "OPTIONSYNTAX"',lexerRules:{OPTIONSYNTAX:".*"}}},V=Object.prototype.hasOwnProperty,q={NUMBER:"-?[\\d]+.?[\\d]*",JSON:"",BOOLEAN:"true|false"},Y=/([A-Z]+)/g,X=f.prototype;X.syntaxError=function(e,t){throw new Error("\nSYNTAX ERROR: "+e+" \nLine no: "+t.lineno+" \nCode: "+t.value+" \nid: "+t.id)},X.error=function(e,t){throw new Error("\nSYNTAX ERROR: "+e+" \nLine no: "+t.lineno+" \nCode: "+t.value+" \nid: "+t.id)},X.getTokenData=function(e){var t=this,n=[],i=function(e,t){e="^"+e+"$";var i=null;if(i=new RegExp(e,"g").exec(t)){for(var r=1,a=i.length;r<a;r++)n.push(i[r]);return!0}return!1},r={};return"block"===e.type?r=function(r){var a,o,s="",l=null,d=!1,u="";(s=(r=function(e){return e=e.trim().match(/{%(.*)%}/)[1].trim()}(r)).match(/^([\w]+)/))?s=s[1]:t.syntaxError("Tag not specified. ",e);var c=W[s];if(c||t.syntaxError("Undefined block. ",e),"string"==typeof(o=c.parserRule))l=(l=c.hasOwnProperty("lexerRules")&&c.lexerRules.hasOwnProperty("WHITESPACE")?o.replace(/ {1,}/g,c.lexerRules.WHITESPACE):o.replace(/ {1,}/g,"\\s")).replace(Y,function(e){return"("+(a=function(e){for(var t in q)p(q,t)&&(e=e.replace(t,q[t]));return e}(c.lexerRules[e]))+")"}),d=i(l,r);else for(var m in o)if(p(o,m)&&(l=o[m],l=l.replace(Y,function(e){return"("+c.lexerRules[e]+")"}),l=l.replace(/ {1,}/g,c.lexerRules.WHITESPACE),d=i(l,r))){u=m;break}return d||t.syntaxError("invalid ",e),c.endTag&&t.endTags.push(c.endTag),{tag:s,subTagType:u,data:r,args:n,endTag:c.endTag}}(e.value):"expression"===e.type?r=function(e){return{data:function(e){return e=e.trim().match(/{{(.*)}}/)[1].trim()}(e)}}(e.value):"code"===e.type&&(r=function(e){return{data:function(e){return e=e.trim().match(/{#(.*)#}/)[1].trim()}(e)}}(e.value)),function(e,t){for(var n in t)p(t,n)&&(e[n]=t[n])}(r,e),r};X.init=function(){if(""!==this.str){var e,t=/[\n]/g,n="",i="",r=0,a=null,o=1,s=[],l=new m("ast");l.isRoot=!0;for(var d,u,c,p,f=l,h=!1,g=!1,_=null,v=this.str.split(this.tokenRe),b=0,y=v.length;b<y;)h=!1,g=!1,u=null,_=(a=(n=v[b]).match(t))?a.length:0,i=this.getTokenType(n),e=new m(c=this.getTokenData({type:i,value:n,lineno:o,index:r++,id:this.id})),"block"===i&&((d=W[c.tag]).closesBlock&&(g=!0,u=d.closesBlock,p=s.pop(),-1===u.indexOf(p.tag)&&this.error("Unclosed block",p)),d.opensBlock&&(h=!0,s.push(c))),g?(u&&-1!==u.indexOf(f.data.tag)?((f=f.parent).children.push(e),e.parent=f):(e.parent=f,f.children.push(e)),h&&(f=e)):h&&(e.parent=f,f.children.push(e),f=e),h||g||(f.children.push(e),e.parent=f),this.tokens.push(c),o+=_,"block"===i&&c,b++;if(this.ast=l,0!==s.length)for(var E=0,T=s.length;E<T;E++)this.error("Unclosed block",s[E])}},X.getTokenType=function(e){return/{%.*?%}/.test(e)?"block":/{{.*?}}/.test(e)?"expression":/{#.*?#}/.test(e)?"code":"data"};var K=/^[a-zA-Z_$.]+[\w$]*$/,J="opt",Z=v.prototype;Z.nextToken=function(){return this.tokens[++this.currTokenIndex]},Z.hasNextToken=function(){return this.currTokenIndex+2<=this.tokens.length},Z.parse=function(e){this.walkAst(this.ast);return this.createViewObj(this.getClassStr("main",e.models,e.contexts))},Z.walkAst=function(e){for(var t=0,n=e.children.length;t<n;t++)this.astIndex=t,this.astCurr=e.children,this.parseToken(e.children[t])},Z.parseUntilBlocks=function(){},Z.getClassStr=function(e,t,n){return"main"===e?this.createMainClass(this.tmpl_id,this.viewFnStr,t,n):this.createClass(this.tmpl_id,this.viewFnStr,t,n)},Z.parseToken=function(e){var t=e.data;this.currNode=e,this.currToken=t,this.currLine=t.lineno,this.currValue=t.value,this.currType=t.type,this.addNewLine(),"block"===this.currType?this.parseBlock():"data"===this.currType?this.parseData():"expression"===this.currType?this.parseExpr():"code"===this.currType&&this.parseCode(),this.showErrInfo&&(this.notFlag?this.notFlag=!0:this.addCode("\n"+this.indent()+"tk_index = "+t.index+";")),++this.currTokenIndex},Z.getNewIndexVar=function(){return"i_v"+this.indexVars++},Z.genLoopId=function(){return"l_"+this.loops++},Z.createViewObj=function(e,t){var n=this,i="{\n";return i+='\t"tmpl_id": "'+this.tmpl_id+'",\n',i+='\t"macros": {',Object.keys(this.macros).forEach(function(e,t){t>0&&(i+="\n\t\t,"),i+="\n    "+e+":"+n.macros[e].trim()}),i+="\n\t},\n",i+='\t"partials": {',Object.keys(this.partials).forEach(function(e,t){t>0&&(i+="\n\t\t,"),i+="\n\t\t"+e+":"+n.partials[e].trim()}),i+="\n\t},\n",i+='\t"viewFn": '+e,t&&(i+=',\n"macros": '+t),i+="}"},Z.createClass=function(e,t,n){var i="";return n=n||"",i+="function "+e+" ("+n+") {\n",i+=this.indent(1)+'var v = ""; \n__fn_code_here__\n',i+=this.indent()+"return v;\n",(i+=this.indent()+"}").replace("__fn_code_here__",t)},Z.createMainClass=function(e,t,n,i){var r="";return this.indentLevel=1,r+="function "+e+"(ctx, "+J+") {\n",r+=this.indent(1)+'"use strict";\n',r+=this.indent(1)+"ctx = ctx || {};\n",r+=this.indent()+"var t = this, u = t.u, e = u.exists, f = t.filters;\n",this.inBrowser&&(r+=this.indent()+"var tk_index = 0;\n",r+=this.indent()+"try {\n",this.increaseIndent()),r+=this.indent()+'var v = "";',r+=this.indent()+"__fn_code_here__",r+=this.indent()+"return v;\n",this.inBrowser&&(r+=this.indent(-1)+"} catch (e) {\n",r+=this.indent(1)+'console.log(e, "\\nline no: ", t.tokens[ tk_index + 1 ].lineno, "\\ncode: ", t.tokens[ tk_index + 1 ].value);\n',r+=this.indent(-1)+"}\n"),(r+=this.indent(-1)+"}\n").replace("__fn_code_here__",t)},Z.error=function(e,t){var n,i;throw t?(n=t.value,i=t.lineno):(n=this.currValue,i=this.currLine),new Error("\n"+e+"\nCode: "+n+"\nLine no. : "+i)},Z.parseCode=function(){this.addCode(this.currToken.data)},Z.addMacroCode=function(e,t){this.macroStr+=this.indent()+e,!0===t?this.indentLevel++:!1===t&&this.reduceIndent(),this.addNewLine()},Z.addPartialCode=function(e,t){this.viewFnStr+=this.indent()+e,!0===t?this.indentLevel++:!1===t&&this.reduceIndent(),this.addNewLine()},Z.addCode=function(e,t){t||(t=0),"macro"===this.currCodeType?this.macroStr+=this.indent()+e:"partial"===this.currCodeType?this.partialStr+=this.indent()+e:this.viewFnStr+=this.indent()+e,this.modifyIndent(t),this.addNewLine()},Z.addStr=function(e){"macro"===this.currCodeType?this.macroStr+=this.indent()+'v += "'+g(_(e))+'";':"partial"===this.currCodeType?this.partialStr+=this.indent()+'v += "'+g(_(e))+'";':this.viewFnStr+=this.indent()+'v += "'+g(_(e))+'";',this.addNewLine()},Z.addExpr=function(e){"macro"===this.currCodeType?this.macroStr+=this.indent()+"v += "+e+";":"partial"===this.currCodeType?this.partialStr+=this.indent()+"v += "+e+";":this.viewFnStr+=this.indent()+"v += "+e+";"},Z.addNewLine=function(){"macro"===this.currCodeType?this.macroStr+="\n":"partial"===this.currCodeType?this.partialStr+="\n":this.viewFnStr+="\n"},Z.modifyIndent=function(e){"macro"===this.currCodeType?this.indentLevelMacro=this.indentLevelMacro+e:"partial"===this.currCodeType?this.indentLevelPartial=this.indentLevelPartial+e:this.indentLevel=this.indentLevel+e},Z.reduceIndent=function(){this.modifyIndent(-1)},Z.increaseIndent=function(){this.modifyIndent(1)},Z.indent=function(e){if(!this.inBrowser)return"";var t,n="",i=0;i=void 0===e?0:e,"macro"===this.currCodeType?(this.indentLevelMacro=this.indentLevelMacro+i,t=this.indentLevelMacro):"partial"===this.currCodeType?(this.indentLevelPartial=this.indentLevelPartial+i,t=this.indentLevelPartial):(this.indentLevel=this.indentLevel+i,t=this.indentLevel);for(var r=t-1;r>=0;r--)n+="\t";return n},Z.getFormFieldType=function(e){var t,n=!0;for(n=this.tokens[e];n&&null===(t=b(n.value));)e--,n=this.tokens[e];return t},Z.genMacroCall=function(e){var t,n,i=e.match(/^([\w.]+)\s?\((.*)\)$/),r=i[1],a=i[2],o=a&&a.split(","),s="",l="";return void 0!==a&&Array.isArray(o)&&o.forEach(function(e,t){e=e.trim(),0!==t&&(s+=","),K.test(e)?s+="ctx."+o[t]:s+=o[t]}),l=r+"( "+J+(s.trim()?", ":"")+s,t=s.trim(),n='"'+r+'"',s="if (t.macros."+r+") { v += t.macros."+l+" ) } else { v+= u._resolveMacro(ctx, "+J+", t.viewEngineInstance, "+n+", ["+t+"])}"},Z.processPartialArgs=function(e){if(!e)return"";var t=" ";return e.forEach(function(e,n){t+=", ctx."+e.trim()}),t},Z.processTextArea=function(){for(var e,t=this.currTokenIndex;e=this.tokens[t].value,!/<\/textarea>/.test(e);)t++;return t},Z.parseExpr=function(){var e,t,n,i=/on *"(.*)"/,r="",a=null,o=this.currToken.data,s="";/([|]+)/g.test(o)?(o=function(e){for(var t=0,n=e.length,i=[],r=0,a=!1;t<n;)"("===e[t]?a=!0:!0===a&&")"===e[t]&&(a=!1),a||"|"!==e[t]?(void 0===i[r]&&(i[r]=""),i[r]+=e[t]):r++,t++;return{var:i[0].trim(),filters:i.slice(1)}}(o),s+="new f( u._r(ctx, "+J+', "'+o.var+'"))',o.filters.forEach(function(e){if(!1===/\w+\(.*\)/.test(e))s+="."+e+"()";else{t=function(e){var t,n=e.match(/([\w]+)\((.*)\)/),i={filterName:n[1],args:[]};return n&&(n=n[2].split(/,(?=(?:(?:[^"']*"'){2})*[^"']*$)/)).forEach(function(e){t=/^'.*'$/.test(e.trim())||/^".*"$/.test(e.trim())?"string":isNaN(Number(e))?"variable":"constant",i.args.push({type:t,val:e.trim()})}),i}(e),n=t.args,s+="."+t.filterName+"(";for(var i=0,r=n.length;i<r;i++)0!==i&&(s+=", "),"variable"===n[i].type&&(s+="ctx."),s+=n[i].val;s+=")"}}),s+=".value",this.addExpr(s)):i.test(o)?this.addStr('data-event="'+o.match(i)[1]+'"'):/bind ([\w+.]*)/.test(o)?(r=this.processInputField(o),a=this.getFormFieldType(this.currToken.index),this.addStr('data-bind="'+r+'"'),"input"===a?(this.addNewLine(),this.addStr(' data-value="'),this.addCode("v += new f(u._r(ctx, "+J+', "'+r+'")).escHtml().value;'),this.addStr('"')):"select"===a?(this.addStr(' value="'),this.addCode("v += new f(u._r(ctx, "+J+', "'+r+'")).escHtml().value;'),this.addStr('"')):"textarea"===a&&(this.addStr(' value="'),this.addCode("v += new f(u._r(ctx, "+J+', "'+r+'")).escHtml().value;'),this.addStr('"'))):(e=function(e){return e.match(/([\w]+)\((.*)\)/)}(o))?"i18n"===e[1]?this.addCode("v += opt.i18n("+function(e){var t=e.split(",");return e="",t.forEach(function(t,n){t=t.trim(),n>=1?(e+=", ",K.test(t)?e+=" ctx."+t:e+=t):e+=t}),e}(e[2])+");"):this.addCode(this.genMacroCall(o)):!function(e){return"loop"===e.split(".")[0]}(o)?this.addCode("v += "+y(o)+";"):this.addCode("v += u._r("+o+");")},Z.processInputField=function(e){var t;if(t=e.match(/^bind\s+([\w\.?]+)$/))t=t[1].trim();else{if(!(t=e.match(/^bind\s+([\w\.]+\[\d+\][\w\.]*)$/)))throw new Error("invalid bind syntax");t=t[1].trim()}if(""===t)throw new Error("invalid bind syntax");return t};var Q=["loop.index","loop.index0","loop.first","loop.last","loop.revindex","loop.revindex0","loop.length"];Z.parseIf=function(e){e.args;this.addCode("if ("+y(e.args[0])+") { ",1),this.walkAst(this.currNode)},Z.parseEndif=function(e){this.addNewLine(),this.reduceIndent(),this.addCode("}")},Z.parseElse=function(e){var t=this;this.reduceIndent();var n=(this.currNode,this.currNode.parent,t.getPrevNode().data.tag);"if"===n||"elif"===n?this.addCode("} else {",1):"when"===n&&this.addCode("default:",1),this.walkAst(this.currNode)},Z.parseElif=function(e){this.reduceIndent(),this.addCode("} else if ("+y(e.args[0])+") { ",1),this.walkAst(this.currNode)},Z.varExists=function(){},Z.parseAssign=function(e){var t=e.args,n=t[0],i=t[1];this.addCode("ctx."+n+" = "+y(i,{skipExpr:!0})+";")},Z.parseCapture=function(e,t){var n=e.args[0];this.currTokenIndex++,this.addCode("ctx."+n+" = (function(){",1),this.addCode('var v = "";'),this.walkAst(this.currNode),this.addNewLine(),this.addCode("return v;"),this.reduceIndent(),this.addCode("})();")},Z.parseEndcapture=function(){},Z.getPrevNode=function(){return this.astCurr[this.astIndex-1]},Z.parseEndfor=function(e,t){var n=this.getPrevNode();this.reduceIndent(),"Partial"!==n.data.subTagType&&"PartialObj"!==n.data.subTagType&&(this.addCode("}",-1),this.addCode("}",-1),this.unclosedForElse?this.addCode(")();"):this.addCode("})();"),this.unclosedForElse=!1)},Z.parseForIn=function(e){var t=e.args[0],n=e.args[1],i=this.getNewIndexVar(),r=this.genLoopId();this.currLoopCtx=r,this.addCode("(function() {",1),this.addCode("ctx."+r+" = {};"),this.addCode("var loop = ctx."+r),this.addCode("if ("+function(e){var t="",n="ctx.";return(e=e.split(".")).forEach(function(e,i){0!==i?(n+="."+e,t+=" && "):n+=e,t+=n}),t}(n)+" && ctx."+n+".length > 0) {",1),this.addCode("for(var "+i+" = 0, len = ctx."+n+".length; "+i+" < len; "+i+"++) {",1),this.addCode("ctx."+t+" = ctx."+n+"["+i+"];"),this.addCode("loop = u.genLoopObj(ctx."+n+", "+i+", len );"),this.walkAst(this.currNode)},Z.parseForInObj=function(e){var t=e.args[0],n=e.args[1],i=e.args[2],r=this.getNewIndexVar(),a=this.getNewIndexVar(),o=this.genLoopId();this.currLoopCtx=o,this.addCode("(function() {",1),this.addCode("ctx."+o+" = {};"),this.addCode("var loop = ctx."+o),this.addCode("var "+a+";"),this.addCode("if (ctx."+i+") {",1),this.addCode(a+" = Object.keys(ctx."+i+");"),this.reduceIndent(),this.addCode("}"),this.addCode("if ("+a+" && "+a+".length > 0) {",1),this.addCode("for(var "+r+" = 0, len = "+a+".length; "+r+" < len; "+r+"++) {",1),this.addCode("ctx."+t+" = "+a+"["+r+"];"),this.addCode("ctx."+n+" = ctx."+i+"[ ctx."+t+"];"),this.addCode("loop = u.genLoopObj(ctx."+i+", "+r+", len );"),this.walkAst(this.currNode)},Z.parseForRange=function(e){var t=e.args[0],n=e.args[1],i=e.args[2],r=e.args[3];r||(r=1),K.test(n.trim())&&(n="ctx."+n),K.test(i.trim())&&(i="ctx."+i),r.trim&&K.test(r.trim())&&(r="ctx."+r);var a=this.getNewIndexVar();this.addCode("(function() {",1),this.addCode("if (true) {",1),this.addCode("for (var "+a+" = "+n+";"+a+" < "+i+"; "+a+"+= "+r+"){",1),this.addCode("ctx."+t+" = "+a),this.walkAst(this.currNode)},Z.parseForSlice=function(e){var t=e.args[0],n=e.args[1],i=e.args[2],r=e.args[3],a=e.args[4];a||(a=1),r||(r="u._r(ctx, "+J+', "'+n+'").length'),K.test(i.trim())&&(i="ctx."+i),K.test(r.trim())&&(r="ctx."+r),a.trim&&K.test(a.trim())&&(a="ctx."+a);var o=this.getNewIndexVar();this.addCode("(function() {",1),this.addCode("if (true) {",1),this.addCode("var "+t+";"),this.addCode("for (var "+o+" = "+i+";"+o+" < "+r+"; "+o+"+= "+a+"){",1),this.addCode("ctx."+t+" = ctx."+n+"["+o+"]"),this.walkAst(this.currNode)},Z.parseForPartial=function(e){var t=e.args,n=t[0],i=t[1].trim(),r=t[2],a=this.getNewIndexVar(),o=E(t[3]),s="";if(o&&o.length>0&&(s=", "+o.join(",")),this.addCode("if (u.exists(ctx."+i+")) {",1),this.addCode("for (var "+a+" = 0 ;"+a+" <= (ctx."+i+".length - 1) ; "+a+"+= 1) {",1),this.addCode("ctx."+n+" = ctx."+i+"["+a+"]"),"view"!==this.currCodeType&&(this.prevCodeType=this.currCodeType),this.currCodeType="partial",this.addCode("function "+r+"("+J+", "+n+s+") {"),this.addCode("var t = this.parent, u = t.u, e = u.exists, f = t.filters;"),this.addCode("var ctx = {};"),this.addCode("ctx."+n+" = arguments[1];"),o){for(var l=0,d=o.length;l<d;l++)this.addCode("ctx."+o[l]+" = arguments["+(l+2)+"];");this.reduceIndent()}this.addCode("var tk_index = 0;"),this.addCode('var v = "";'),this.walkAst(this.currNode),"partial"!==this.currCodeType&&this.error("Error in parse code "),this.addNewLine(),this.addCode("return v;"),this.reduceIndent(),this.addCode("}"),this.addNewLine(),this.reduceIndent(),"view"!==this.prevCodeType?(this.currCodeType=this.prevCodeType,this.prevCodeType=null):this.currCodeType="view",this.addCode("v += t.partials."+r+"("+J+", ctx."+n+this.processPartialArgs(o)+");",-1),this.addCode("}",-1),this.addCode("}",-1),this.partials[r]=this.partialStr,this.partialStr=""},Z.parseForPartialObj=function(e){var t=e.args,n=t[0],i=n.split(",").map(function(e){return e.trim()}),r=t[1],a=t[2],o=E(t[3]),s="";o&&o.length>0&&(s=", "+o.join(","));var l=this.getNewIndexVar();if(this.addCode("if (u.exists(ctx."+r+")) {",1),this.addCode("var keys = Object.keys(ctx."+r+");"),this.addCode("var "+n+";"),this.addCode("for (var "+l+" = 0 ;"+l+" <= (keys.length - 1) ; "+l+"+= 1) {",1),this.addCode("ctx."+i[0]+" = keys["+l+"];"),this.addCode("ctx."+i[1]+" = ctx."+r+"[keys["+l+"]];"),"view"!==this.currCodeType&&(this.prevCodeType=this.currCodeType),this.currCodeType="partial",this.addCode("function "+a+"("+n+s+") {"),this.addCode("var t = this.parent, u = t.u, e = u.exists, f = t.filters;"),this.addCode("var tk_index = 0;"),this.addCode('var v = "";'),this.addCode("var ctx = {};"),this.addCode("ctx."+i[0]+" = arguments[0];"),this.addCode("ctx."+i[1]+" = arguments[1];"),o){this.addCode("for(var __i = 1, __len = arguments.length; __i < __len; __i++) {",1);for(var d=0,u=o.length;d<u;d++)this.addCode("ctx."+o[d]+" = arguments[__i]");this.reduceIndent(),this.addCode("}",-1)}this.walkAst(this.currNode),this.addNewLine(),this.addCode("return v;",-1),this.addCode("}",-1),"view"!==this.prevCodeType?(this.currCodeType=this.prevCodeType,this.prevCodeType=null):this.currCodeType="view",this.addCode("v += t.partials."+a+"(ctx."+i[0]+", ctx."+i[1]+this.processPartialArgs(o)+");",-1),this.addCode("}",-1),this.addCode("}",-1),this.partials[a]=this.partialStr,this.partialStr=""},Z.parseForelse=function(e){this.reduceIndent(),this.addCode("}",-1),this.addCode("} else {",1),this.unclosedForElse=!0,this.walkAst(this.currNode)},Z.parseBlock=function(){var e=this.currToken,t="parse"+h(e.tag)+h(e.subTagType);if("function"==typeof this[t])return this[t](e);this.error('Parse fn not written for tag "'+e.tag+'". ')},Z.parseComment=function(){},Z.parseEndcomment=function(){},Z.parseCase=function(e){this.addCode("switch(ctx."+e.args[0]+") {",1),this.notFlag=!0},Z.parseWhen=function(e){this.addCode("case "+e.args[0]+":",1),this.walkAst(this.currNode),this.addNewLine(),this.addCode("break;"),this.reduceIndent()},Z.parseEndcase=function(){this.reduceIndent(),this.addCode("}")},Z.parseRaw=function(e){this.currTokenIndex++;for(var t;"endraw"!==this.tokens[this.currTokenIndex].tag;)t=this.tokens[this.currTokenIndex],this.addStr(t.value),this.currTokenIndex++;this.currTokenIndex--},Z.parseEndraw=function(){},Z.parseData=function(){var e=this.currToken;this.addStr(_(e.value))},Z.parseMacro=function(e){"view"!==this.currCodeType&&(this.prevCodeType=this.currCodeType),this.currCodeType="macro";var t=this,n=e.args[0],i=e.args[1],r=i;""===r||void 0===r||null===r?r="()":(i=i.trim()).length>0&&(r=(r=i.split(",")).map(function(e){return e.trim()})),i=i||"",this.addCode("function "+n+"("+J+(i?", ":"")+i+") {",1),this.addCode("try {",1),this.addCode("var t = this.parent, u = t.u, e = u.exists, f = t.filters;"),this.addCode("var tk_index = 0;"),this.addCode("var ctx = {};"),Array.isArray(r)&&r.forEach(function(e){t.addCode("ctx."+e+"="+e+";")}),this.addCode('var v = "";'),this.walkAst(this.currNode),"macro"!==this.currCodeType&&this.error("Error in parse code."),this.addNewLine("macro"),this.addCode("return v;",-1),this.addCode("} catch (e) {",1),this.addCode('console.log("macro catch", e);'),this.addCode("}",-1),this.addNewLine("macro"),this.addCode("}"),this.macros[n]=this.macroStr,this.macroStr="","view"!==this.prevCodeType?(this.currCodeType=this.prevCodeType,this.prevCodeType=null):this.currCodeType="view"},Z.parseEndmacro=function(){},Z.parseOn=function(){},Z.parseCycle=function(e){var t=ne(e.args[0],",");this.addCode("if (loop.first){",1),this.addCode("t.cA = "+JSON.stringify(t)+"; t.cAI = 0; } else {"),this.addCode("t.cAI = t.cAI < t.cA.length - 1 ? t.cAI + 1 : 0;"),this.reduceIndent(),this.addCode("}"),this.addCode("v += t.cA[ t.cAI ];")},Z.parseInclude=function(e){var t,n,i,r,a,o,s,l=this.config.templatePath,d=e.args[0],u=this.config.ext;e.id;d&&0!==d.length||this.error('Incorrect path in include: "'+this.currToken.tag+'". ');var c=(d=d.trim().split(":"))[d.length-1];if(c=c.replace(/-/g,"_"),4===d.length||3===d.length?(l=l[d[0]]+"/"+d[1]+"/"+d[2],s=d[0]):2===d.length?l=l+"/"+d[0]+"/"+d[1]:1===d.length&&(l=l+"/"+d[0]),s||this.appCtx&&(s=this.appCtx.configs.viewPathDefaultKey),this.inBrowser){if(t=new RegExp('<script.*id="'+c+'".*>[\\s\\S]*?([\\s\\S]*?.*)<\/script>'),(n=new XMLHttpRequest).open("GET",l+u,!1),n.send(),200!==n.status)throw new Error("Error while include");a="return "+(a=(r=new v(c,(i=n.responseText.match(t))?i[1]:n.responseText,this.config,this.viewEngineInstance)).parse({tmpl_id:c}))+";",o=new Function(a)(),this.viewEngineInstance.set(o,r,s),s?this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'", "'+s+'");'):this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'");')}else s?this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'", "'+s+'");'):this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'");')},Z.parseDebug=function(e){for(var t,n=e.args[0],i=["models","model","modules"],r=(n=n.split(",")).length-1;r>=0;r--){if(t=n[r].trim(),-1===i.indexOf(t))throw new Error("Error at: "+JSON.stringify(e));"models"!==t&&"model"!==t||this.addCode("console.log(ctx, "+J+");"),this.addCode("console.log(ctx."+t+");")}},Z.parseOptions=function(e){var t,n,i=e.args[0].split(","),r=["model","text","value","emptyVal","defVal"],a=["model","defVal"],o=this,s={};i.length<=2?(t="arr",n=a):(t="obj",n=r),0===(i=i.map(function(e){return e=e.trim(),e=e.split(":"),e[0]=e[0].trim(),e[1]=e[1].trim(),-1===n.indexOf(e[0])&&o.error("Incorrect argument type in option tag : "+e[0]),s[e[0]]=e[1],e})).length&&this.error("Incorrect arguments in options block ");var l=this.getNewIndexVar(),d=this.getNewIndexVar();"obj"===t?(this.addCode("for (var "+l+" = 0, "+d+" = ctx."+s.model+".length; "+l+" < "+d+"; "+l+"++) {",1),this.addStr('<option value="'),this.addCode("v += ctx."+s.model+"["+l+']["'+s.value+'"]'),this.addStr('"'),this.addCode("if ("+s.defVal+" == ctx."+s.model+"["+l+']["'+s.value+'"]) {'),this.addStr(" data-default "),this.addCode("}"),this.addStr(">"),this.addCode("v += ctx."+s.model+"["+l+']["'+s.text+'"]'),this.addCode('v += "</option>"'),this.reduceIndent(),this.addNewLine(),this.addCode("}")):"arr"===t&&(this.addCode("for (var "+l+" = 0, "+d+" = ctx."+s.model+".length; "+l+" < "+d+"; "+l+"++) {",1),this.addStr('<option value="'),this.addCode("v += ctx."+s.model+"["+l+"]"),this.addStr('"'),this.addCode('if ("'+s.defVal+'" == ctx.'+s.model+"["+l+"]) {"),this.addStr(" data-default "),this.addCode("}"),this.addStr(">"),this.addCode("v += ctx."+s.model+"["+l+"]"),this.addCode('v += "</option>"'),this.reduceIndent(),this.addNewLine(),this.addCode("}"))};var ee=function(){function e(e){this.appCtx=e,this.extensions={appStart:{},beforeRoute:{},afterRoute:{},beforeModuleLoad:{},afterModuleLoad:{},beforeRender:{},afterRender:{},afterRenderCallBack:{},beforeModelUpdate:{},afterModelUpdate:{}}}return e.prototype.eventExists=function(e){return this.extensions.hasOwnProperty(e)},e.prototype.add=function(e){var t,n,i,r=this;if($.object(arguments[1]))i=arguments[1],Object.keys(i).forEach(function(t){if(n=i[t],!r.eventExists(t))throw new Error('Inappropriate event. Event "'+t+"\" doesn't exist. ");r.extensions[t][e]=n});else{if(t=arguments[1],n=arguments[2],!this.eventExists(t))throw new Error('Inappropriate event. Event "'+t+"\" doesn't exist. ");this.extensions[t][e]=n}},e.prototype.callExtension=function(e,t,n){for(var i=Object.keys(this.extensions[e]),r=this.extensions[e],a=[],o=i.length-1;o>=0;o--)a.push(r[i[o]]);return t&&t[0]&&(t[0].appCtx=this.appCtx),H.runSeries(a,t,function(i,r){i?(M.is("extension")&&M.error("Event: ",e," Errors: ",i),n(!1,t)):n(!0,t[0])}),!0},e}(),te={},ne=function(e,t){var n=[];return e.split(t).forEach(function(e,t){(e=e.trim())&&n.push(e.trim())}),n},ie={genLoopObj:function(e,t,n){return{first:0===t,last:t===n-1,index0:t,index:++t,even:t%2==0,odd:t%2!=0,revindex:n-t+1,revindex0:n-t,length:n}},remWS:function(e){return e.replace(/[\n\t\r]/g,"").replace(/>( *)</g,"><").replace(/ {2,}/g," ").trim()},exists:function(e){return null!==e&&void 0!==e},safeString:function(e){if("string"!=typeof e)return e;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return e=e.replace(/[&<>"'\/]/g,function(e){return t[e]})},i18n:function(){return""},_r:function(e,t,n){if(void 0===n&&ie.exists(e))return e;var i,r;return n=n.split("."),i=n[0]&&e.hasOwnProperty(n[0])?e:t.gctx,n.forEach(function(e,t){void 0!==i&&(!0===/([\w]+)\[(\d+)\]/.test(e)?(r=e.match(/([\w]+)\[(\d+)\]/),i=i[r[1]][r[2]]):i=i[e])}),void 0!==i&&null!==i||(i=""),i},_resolveMacro:function(e,t,n,i,r){for(var a=[t].concat(r),o=0;o<t.m_ctx.length;o++){var s=t.m_ctx[o].split("/"),l=n.cache[s[0]],d=l&&l[s[1]];if(d&&d.macros[i])return d.macros[i].apply(d.macros,a)}return F[i].apply(void 0,a)},resolveInclude:function(e,t,n,i,r){var a,o;return i=i.replace(/-/g,"_"),n.appCtx?(r&&"undefined"!==r||(r="sites_face"),(o=r?n.cache[r][i]:n.cache[i])?("development"!==n.appCtx.configs.mode&&n.set(o,"",r),a=o.viewFn(e,t)):(M.warn("Include tag: compiled template not found : ",i),a="")):a=n.cache[i].viewFn(e,t),a},_isT:function(e){return"false"!==e&&Boolean(e)}},re=S.prototype;re.render=function(e,t){var n=e.mountPoint,i=e.bindCtx;if("string"==typeof e.mountPoint&&(n=document.querySelector("#"+n)),!n)throw new Error("Mount Point is invalid.",n);e.toAppend||($E.purge(n),this.unbindDelegatedEvents(n),n.innerHTML=""),Hummingbird&&this.appCtx&&"production"===this.appCtx.configs.mode&&this.set(e,"",e.viewPathType);var r={gctx:e.globals||{},m_ctx:e.macros_ctx||[],i18n:this.appCtx.configs.i18n||ie.i18n},a=T(e.viewFn(e.models,r)),o=a.querySelectorAll("[data-event]"),s=a.querySelectorAll("[data-bind]");n.getAttribute("data-hb-id")||n.setAttribute("data-hb-id","hb-"+parseInt(1e6*Math.random())),D(s,e.context),w(o,n,e.context),Hummingbird&&this.appCtx&&(e.template=a,this.appCtx.extension.callExtension("beforeRender",[e],x),i&&($E.bind(n,"keyup",i.__modify),$E.bind(n,"change",i.__modify))),n.setAttribute("data-tmpl-id","hb-"+e.templateId),n.appendChild(a),t&&t()},re.purgeTemplate=function(e){"string"==typeof e&&(e=$D.get(e)),this.unbindDelegatedEvents(e),$E.purge(e)},re.unbindDelegatedEvents=function(e){delete te[e.getAttribute("data-hb-id")];for(var t=$D.getAll("[data-hb-id]",e),n=t.length-1;n>=0;n--)O(t[n].getAttribute("data-hb-id"));e.hasAttribute("data-hb-id")&&O(e.getAttribute("data-hb-id"))};var ae=null;re.parse=function(e,t){var n=e.templateId,i=e.templateStr,r=e.data_contexts,a=e.data_models,o=e.viewPathType;if(!i)throw new Error("no template specified for template id: ",n);r||(r=""),a||(a=""),e.models=ne(a,","),e.contexts=ne(r,",");var s=new v(n,i,this.config,this,o),l=s.parse(e);if(t)return l;l="return "+l+";";var d=new Function(l)();return this.set(d,s,o),d.viewFn.bind(d)},re.set=function(e,t,n){n?(this.cache[n]||(this.cache[n]={}),this.cache[n][e.tmpl_id]||(this.cache[n][e.tmpl_id]={}),this.cache[n][e.tmpl_id]=e):(this.cache[e.tmpl_id]||(this.cache[e.tmpl_id]={}),this.cache[e.tmpl_id]=e),e.u=ie,e.viewEngineInstance=this,e.macros.parent=e,e.partials.parent=e,t&&(e.tokens=t.tokens),e.filters=G},re.renderPartial=function(e){var n,i=this,r=function(e){var t,n;if(""===e||!e)throw"Invalid Partial";return-1!==(e=e.trim().split("."))[0].indexOf(":")&&(t=(n=e[0].split(":"))[0],e[0]=n[2]&&-1!==n[2].indexOf("/")?n[2].split("/")[1]:n[1]),{templateType:t,partialInfo:e}}(e.partial),a=r.templateType,o=r.partialInfo[0],s=r.partialInfo[1],l={gctx:e.globals||{},m_ctx:e.macros_ctx||[],i18n:this.appCtx.configs.i18n||ie.i18n};n=a?this.cache[a][o]:this.cache[o],e.args.unshift(l);var d=n.partials[s].apply(n.partials,e.args),u="string"==typeof e.refEl?$D.get(e.refEl):e.refEl;if(!u)throw new Error("Invalid reference element for partial");d=T(d,!0),e.template=d;var c=function(e){for(var t=e;t&&t.hasAttribute;){if(t.hasAttribute("data-hb-id"))return t.getAttribute("data-hb-id");t=t.parentElement}}(u);return this.appCtx&&(this.appCtx.hsNav.hookNewUrls(d),this.appCtx.extension.callExtension("beforeRender",[e],function(){switch(D(d.querySelectorAll("[data-bind]")),w($D.getAll("[data-event]",d),c,e.context),e.insertType){case"append":$D.append(u,d);break;case"prepend":$D.prepend(u,d);break;case"insertAfter":$D.insertAfter(d,u);break;case"insertBefore":$D.insertBefore(u,d);break;case"replace":i.purgeTemplate(u),u.parentNode.replaceChild(d,u)}i.appCtx.extension.callExtension("afterRenderCallBack",[{tmplId:o,models:e.args,targetId:u,ctx:{},moduleNames:{},curTemplateId:11}],t)})),d},void 0===z&&(z="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window));var oe=z?window.console:console,t=function(){},se=["trace","log","info","warn","error"];return R.prototype.setLevel=function(e){var n=this;se.forEach(function(e,i){i<n.logLevel?n[e]=t:n[e]=function(e,n){return e[n]?e[n].bind(e,n.toUpperCase()+": "):t}(oe,e)})},R.prototype.is=function(e){return this.types[e]},R.prototype._filterBy=function(t,n){if(t)for(var i in this.types)e(this.types,i)&&(-1===t.indexOf(i)?this.types[i]=!n:this.types[i]=n)},N.prototype.start=function(){var e=this;this.extension.callExtension("appStart",[{appCtx:this}],function(){e.hasRouterConfig()&&e.navigate(P.location.href),$E.dispatch(document,"hbjs:app:start",{appCtx:e})})},N.prototype.next=function(){if(this.hasRouterConfig()){var e=this._.r,t=e.routesSeq.pop();t&&t.id&&(M.is("router")&&M.log("completedRoute: ID:",t.id," urlOri: ",k(t.urlOri,this.configs.prefix)," Remaining routes: ",e.routesSeq.length),e.routesSeq.length>0?e.processNextRouteInSequence():this.extension.callExtension("afterRoute",[{appCtx:this,id:t.id}],function(e){this.appCtx.__curRoute=null,this.__complete=!0,e||M.is("core")&&M.log("Interrupted at afterRoute")}.bind(this._.r)))}else M.warn("No Route has been added yet")},N.prototype.interruptRoute=function(e,t,n){switch(e){case"beforeRoute":$E.fireEvent(document,"routeInterrupted")}},N.prototype.hasUnsavedData=function(){return!!(this.hasRouterConfig()&&this._.r.prevModule&&$.object(this._.r.prevModule.bindObj)&&Object.keys(this._.r.prevModule.bindObj).length>0)},N.prototype.render=function(e){if(this._&&this._.r&&e.hasOwnProperty("routeId")&&"number"==typeof e.routeId&&this._.r.__curRoute&&this._.r.__curRoute.id!==e.routeId)M.warn("The specified routeId : "+e.routeId+", does not match current Route Id : "+this._.r.__curRoute.id);else{var t,n,i,r,a,o,l,d,u=e.models||{},c=e.context||{},p=e.globals||{},m=e.macros_ctx||{},f=e.args,h=this,g=null,_=e.template.trim().split(":"),v=e.bindCtx;if(3===_.length?(d=(r=/(.*):(.*):(.*)\/(.*)/.exec(e.template))[1],t=r[1]+":"+r[2],n=r[3],i=r[4],a=r[2]):2===_.length&&(r=/(.*):(.*)\/(.*)/.exec(e.template),t=r[1],n=r[2],i=r[3],a=r[1]),c&&c[a]&&c[a].modelObj)for(var b in u)u.hasOwnProperty(b)&&(c[a].modelObj[b]=u[b]);if(null===e.target)throw new Error("!! TEMPLATE ERROR: Target id specified for template : "+i+" is invalid. Check in module file.");if($.object(v))$.function(v.__modify)||(v.__modify=s.bind(v,this));else if(null!==v)if(this._.r.__curRoute)this._.r.__complete||(v=this._.r.__curRoute.curBindCtx);else{M.warn("specify a bindCtx, when a render is not part of a route",e)}l=this._.r.__curRoute&&this._.r.__curRoute.id,g=this.view.cache||{};var y;if("production"!==this.configs.mode)d?(g[d]||(g[d]={}),y=g[d]):y=g,y[i]||(y[i]={module:a,tmplFile:n,dataModels:u,context:c,tmplTarget:e.target}),this.parseTemplate({module:t,models:u,tmplFile:n,tmplId:i,tmplTarget:e.target,ctx:c,globals:p,macros_ctx:m,callback:e.callback,args:f,nextRoute:e.nextRoute,render:!0,bindCtx:v,viewPathType:d,toAppend:e.toAppend,curTemplateId:l});else{d||(d=this.configs.viewPathDefaultKey),(o=g[d][i]).mountPoint=e.target,o.bindCtx=v,o.toAppend=e.toAppend,o.models=u,o.context=c,o.globals=p,o.macros_ctx=m,o.viewPathType=d;var E=Object.keys(c).toString();h.view.render(o,function(){h._afterTmplRender(t,u,i,e.target,c,E,l,e.callback,e.args),e.nextRoute&&h.next()})}}},N.prototype.parseTemplate=function(e){var t,n=this,i="",r=e.module,a=e.bindCtx,o=e.viewPathType,s=e.curTemplateId;if(z){if(!r)return void M.error("module needs to be specified");-1!==r.indexOf(":")?(r=e.module.split(":"),i=this.view.config.templatePath[r[0]]+"/"+r[1]):i=this.view.config.templatePath+"/"+r,M.info("Loading: ",i+"/"+e.tmplFile+".html")}if(!z||"development"!==this.configs.mode)return"server"===this.configs.mode?t=n.view.parse(e,!0):-1;!function(e,t){var n=$D.get('[data-viewpath-type="'+e+'"][data-template-file="'+t+'"]');n&&$D.remove(n)}(o,e.tmplFile),$X.get({url:i+"/"+e.tmplFile+".html",handler:function(){try{!function(e,t,n){var i=document.createElement("div");i.setAttribute("data-viewpath-type",t),i.setAttribute("data-template-file",n),document.body.appendChild(i),i.innerHTML=e}(this.responseText,o,e.tmplFile);var i=$D.get('[data-viewpath-type="'+o+'"][data-template-file="'+e.tmplFile+'"] script#'+e.tmplId);if(null===i)throw new Error("Template: "+e.tmplId+" Couldnot be found.");var l=i.getAttribute("data-modules");t=n.view.parse({templateId:e.tmplId,templateStr:i.innerHTML,data_models:i.getAttribute("data-models"),data_modules:l,viewPathType:o}),z&&e.render&&n.view.render({templateId:e.tmplId,mountPoint:e.tmplTarget,models:e.models,context:e.ctx,globals:e.globals,macros_ctx:e.macros_ctx,viewFn:t,bindCtx:a,toAppend:e.toAppend}),n._afterTmplRender(r,e.models,e.tmplId,e.tmplTarget,e.ctx,l,s,e.callback,e.args),e.nextRoute&&n.next()}catch(t){M.error("Err while rendering template: "+e.tmplId,t)}}})},N.prototype._afterTmplRender=function(e,n,i,r,a,o,s,l,d){var u=this;this.hsNav.hookNewUrls(r),this.extension.callExtension("afterRender",[{tmplId:i,models:n,targetId:r,ctx:a,moduleNames:o,curTemplateId:s}],function(e){l&&l.apply(null,d),e?u.extension.callExtension("afterRenderCallBack",[{tmplId:i,models:n,targetId:r,ctx:a,moduleNames:o,curTemplateId:s}],t):M.is("core")&&M.log("Interrupted at afterRender.")})},N.parse=function(e,t){var n;n=e.ViewInstance?e.ViewInstance:new S(t);var i=e.tmplId||"t_1";return{ViewInstance:n,render:n.parse({templateId:i,templateStr:e.template})}},N.prototype.hasRouterConfig=function(){return this._.r.map.length>0},N}),function(e,t){"function"==typeof define&&define.amd?define("hbUI",t):e.hbUI=t()}(this,function(){"use strict";function e(e,t,n,i){var r=window.setTimeout(function(){$D.removeClass(t,"active"),$D.removeClass(i,n),p.splice(e,1),window.clearTimeout(r),r=null},250)}function t(e){for(var t=l.length-1;t>=0;t--)if($D.hasClass(e,l[t]))return l[t]}function n(e,n){for(var a=$D.getAll(".hb-ui",e),o="",l=0,d=a.length;l<d;l++)void 0!==(o=t(a[l]))&&s[o].init(a[l],o);!1===c&&(c=!0,$E.bind(document,"keydown",r),$E.bind(document,"click",r)),n&&i(e)}function i(e){for(var n,i=$D.getAll(".hb-ui",e),r="",a=0,o=i.length;a<o;a++)void 0!==(r=t(i[a]))&&function(e,t){return e&&e.indexOf(t)>-1}((n=s[r]).cycles,"afterRenderCallBack")&&n.afterRenderCallBack&&s[r].afterRenderCallBack(i[a],r)}function r(e){f.hideAllActiveDD(e,function(e,t){for(var n=t;n&&n!==d;){if($D.hasClass(n,"hb-cbox-button")||"INPUT"===n.nodeName&&$D.hasClass(n,"dropdown-menu-cbox"))return e.stopPropagation(),n;if($D.hasClass(n,"hb-dd-cb"))return e.stopPropagation(),!0;if($D.hasClass(n,"select")||$D.hasClass(n,"dropdown-menu"))return!1;n=n.parentNode}return!0}(e,e.target))}function a(e,t){n(e.template),t()}function o(e,t){var n;i(n=$D.isNode(e.targetId)?e.targetId:$D.getById(e.targetId)),f.autofocus(n),t()}var s={},l=[],d="",u={},c=!1;u.ddActive=[];var p=u.ddActive,m={ELEMENT:1,ATTR:2,TEXT:3};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});var f={};f.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},f.debounce=function(e,t,n){var i;return function(){var r=this,a=arguments,o=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,a)},t),o&&e.apply(r,a)}},f.throttle=function(e,t,n){var i=(new Date).getTime();return function(){var r=(new Date).getTime();r-i>=e&&(i=r,t.apply(n||null,arguments))}},f.getParentByClass=function(e,t){for(var n=t;n;){if($D.hasClass(n,e))return n;n=n.parentNode}return null},f.getParentByAttr=function(e,t){for(var n=t;n&&"BODY"!==n.tagName;){if(n.getAttribute(e))return n;n=n.parentNode}return null},f.fireEvent=function(e,t,n,i,r){i=void 0===i||i,r=void 0===r||r;if(document.createEventObject){return(a=document.createEventObject()).detail=n,a.cancelBubble=i,a.returnValue=r,e.fireEvent("on"+t,a)}var a;return(a=document.createEvent("HTMLEvents")).detail=n,a.initEvent(t,i,r),!e.dispatchEvent(a)},f.getCssProperty=function(e,t,n){var i=window.getComputedStyle(e,null).getPropertyValue(t);return"int"===n?parseInt(i.replace("px","").replace("%","")):i},f.splitby=function(e,t){for(var n=(t=t.split(e)).length-1;n>=0;n--)t[n]=t[n].trim();return t},f.getKeyCode=function(e){return e.keyCode?e.keyCode:e.charCode},f.getFormEl=function(e){for(var t=e;t=t.parentElement;)if("FORM"===t.tagName)return t},f.parseOptions=function(e){var t=e.getAttribute("data-options").split(","),n={};t.forEach(function(e,n){t[n]=e.trim(),t[n]=t[n].split(":")});for(var i=0,r=t.length;i<r;i++)n[t[i][0].trim()]=t[i][1].trim();return n},f.textToHtml=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t},f.buildFragment=function(e){var t=document.createDocumentFragment().appendChild(document.createElement("div"));return t.innerHTML=e,t},f.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},f.parseHTML=function(e){var t=/^<(\w+)\s*\/?>(?:<\/\1>|)$/.exec(e);return t?[document.createElement(t[1])]:(t=f.buildFragment(e),Array.prototype.slice.call(t.childNodes))},f.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},f.prependChild=function(e,t){e.insertBefore(t,e.firstChild)},f.getMutationObserver=function(){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return e||!1},f.createElement=document.createElement.bind(document),f.hideAllActiveDD=function(t,n){if(n){for(var i,r,a,o,s,l=p.length-1;l>=0;l--)r=p[l].el,(i=$D.getByClass("dd-cont",r)[0]).hasAttribute("data-prevent-hide")?i.removeAttribute("data-prevent-hide"):(o=p[l].ex_ani,a=p[l].en_ani,$D.removeClass(i,a),$D.addClass(i,o),e(l,r,o,i));for(l=(s=$D.getByClass("dropdown-menu-cbox")).length-1;l>=0;l--)if(n.nodeType===m.ELEMENT){if("INPUT"===n.nodeName&&n.id===s[l].id)continue;"LABEL"===n.nodeName&&n.getAttribute("for")!==s[l].id&&!0===s[l].checked&&(s[l].checked=!1)}else s[l].checked=!1}},f.export=function(e,t){h[e]=t},f.isElementVisible=function(e,t){var n=e.getBoundingClientRect(),i=(t||document).elementFromPoint(n.x+n.width/2,n.y+n.height/2);return e.isSameNode(i)||e.contains(i)},f.autofocus=function(e){var n,i,r=$D.get("[hb-autofocus]",e);if(r){if(!r.matches("input, select, textarea, a, button"))return;if(n=window.getComputedStyle(r),$D.hasClass(r,"hb-ui")){if(void 0===(i=t(r)))return;s[i].focus&&s[i].focus(r,i)}else"none"===n.display||"hidden"===n.visibility||r.disabled||r.focus()}},u.animationEnd=function(){var e,t=document.createElement("div"),n={animation:"animationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e]}();var h={_:u,components:s,getType:t,extend:function(e){!function(e){if($IS.array(e.tag)?e.tag.forEach(function(t){l.push(t),s[t]=e}):(l.push(e.tag),s[e.tag]=e),e.hasOwnProperty("api"))for(var t in e.api)e.api.hasOwnProperty(t)&&(h[t]=e.api[t])}(e)},init:function(e){"undefined"!=typeof Hummingbird&&e instanceof Hummingbird?(e.extension.add("hbUI",{beforeRender:a}),e.extension.add("hbUI",{afterRenderCallBack:o}),Object.defineProperty(u,"validateRules",{get:function(){if(void 0!==e.validateInstance)return e.validateInstance.validationRules},set:function(t){e.validateInstance.validationRules=e.validateInstance.validationRules||t}})):n(e,!0),$E.bind(document.body,"hbui:afterRender",function(e){i(e.target)})},list:function(){return l},NODE_TYPE:m,KEYCODE:{BACKSPACE:8,TAB:9,CAPSLOCK:20,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,DOWNARROW:40,UPARROW:38},utils:f,visible:i,hook:n};return f.export("focus",function(e){var n=window.getComputedStyle(e);if($D.hasClass(e,"hb-ui")){var i=t(e);if(void 0===i)return;s[i].focus&&s[i].focus(e,i)}else"none"===n.display||"hidden"===n.visibility||e.disabled||e.focus()}),h}),function(e,t){"function"==typeof define&&define.amd?define("log",t):"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():e.log=t()}(this,function(){function e(e,t){return(t=e[t]).bind(e)}function t(t){return typeof console!==o&&(console[t]!==a?e(console,t):console.log!==a?e(console,"log"):r)}function n(e){for(var n=null,a=0;a<s.length;a++)n=s[a],i[n]=a<e?r:t(n)}var i={},r=function(){},a=void 0,o="undefined",s=["trace","log","debug","info","warn","error"];return i.setLevel=function(e){n(e)},i.enableAll=function(){n(0)},i.disableAll=function(e){n(6)},i.version="1.0.0",n(0),i}),function(e,t,n){"function"==typeof define&&define.amd?define("utils",["log"],n):"object"==typeof exports&&"undefined"!=typeof module?module.exports=n.call(global):e.extendModule("utils",["log"],n)}(this,0,function(e){"use strict";function t(e){return"[object Object]"===i(e)}function n(e){return"[object Array]"===i(e)}function i(e){return Object.prototype.toString.call(e)}function r(e,t,n,i){var r=t<=n-2;return!(!i||!r||"object"==typeof e)||!e&&i&&r}function a(e){if(!s.isSelector(e))throw"Not a valid selector string";this.sel=e}var o="undefined"!=typeof window&&!t(window),s={},l=/^([^\.]*)\[(\d+)\]$/,d=o?window:this;s.isBrowser=function(){return o},s.getViewportW=function(e){var t=(e=e||d).document.documentElement.clientWidth,n=e.innerWidth;return t<n?n:t},s.getViewportH=function(e){var t=(e=e||d).document.documentElement.clientHeight,n=e.innerHeight;return t<n?n:t},s.scrollX=function(e){return(e=e||d).pageXOffset||e.document.documentElement.scrollLeft},s.scrollY=function(e){return(e=e||d).pageYOffset||e.document.documentElement.scrollTop},s.getOffset=function(e,t){if(!e)throw new Error("Element to find offset doesnot exists.");t=t||d;var n=e.getBoundingClientRect();return{top:n.top+this.scrollY(t),left:n.left+this.scrollX(t)}},s.extendDeep=function(e,t){var i;e=e||{};for(i in t)t.hasOwnProperty(i)&&("object"==typeof t[i]?(e[i]=n(t[i])?[]:{},extendDeep(t[i],e[i])):e[i]=t[i]);return e},s.matchesSelector=function(e,t){if(void 0!==e&&1===e.nodeType){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(e){return-1!==[].slice.call(document.querySelectorAll(e)).indexOf(this)}).call(e,t)}},s.genUID=function(){function e(e,t){return Math.floor(Math.random()*(t-e))+e}for(var t=[],n=0;n<16;n++)t.push(String.fromCharCode(e(0,255)));return btoa(t.join("")).replace(/(\+|\/|=)/g,function(e){return"="==e?"":"+"==e?"-":"_"})},s.findParentBySel=function(e,t){for(e=e.parentNode;e;){if(this.matchesSelector(e,t))return e;e=e.parentNode}return!1},s.getChildBySel=function(e,t){for(var n=e.children,i=0;i<n.length;i++)if(s.matchesSelector(n[i],t))return n[i]},s.textToHtml=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t},s.htmlEntities=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},s.parseHTML=function(e){var t=/^<(\w+)\s*\/?>(?:<\/\1>|)$/.exec(e);return t?[document.createElement(t[1])]:(t=function(e){var t=document.createDocumentFragment().appendChild(document.createElement("div"));return t.innerHTML=e,t}(e),Array.prototype.slice.call(t.childNodes))},s.deepFreeze=function(e){var t,n;Object.freeze(e);for(n in e)t=e[n],e.hasOwnProperty(n)&&"object"==typeof t&&!Object.isFrozen(t)&&s.deepFreeze(t)},s.uniqueArray=function(e){if(e instanceof Array){e.sort();for(var t=1;t<e.length;t++)e[t-1]===e[t]&&e.splice(t,1)}},s.deepEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if("[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!s.deepEqual(e[n],t[n]))return!1;return!0}if("object"==typeof e&&"object"==typeof t){var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(n=0;n<i.length;n++){var a=i[n];if(!t.hasOwnProperty(a)||!s.deepEqual(e[a],t[a]))return!1}return!0}return!1},s.handleEvents=function(t){function n(n){if(null!==n){var r=function(e){for(var t=[],n=null,i=(e=e.split(",")).length-1;i>=0;i--){if(e[i]=e[i].trim(),-1===e[i].indexOf(":"))throw new Error("Err while binding events: Check if either event type or function is specified ");for(var r=0,a=(n=e[i].split(":")).length;r<a;r++)n[r]=n[r].trim();t.push(n)}return t}(n.events),a=null,o="",s=null;if(-1!==r)for(var l=r.length-1;l>=0;l--)r[l][0]===t.type&&((a=r[l][1].match(i))?(o=a[1],(s=function(e){var t=/^\'.*\'$/;return(e=e.split(",")).forEach(function(e,n,i){e=e.trim(),t.test(e.trim())?i[n]=e.match(/^\'(.*)\'$/)[1]:-1===e.indexOf(".")?i[n]=parseInt(e,10):i[n]=parseFloat(e)}),e}(a[2])).push(t)):o=r[l][1],function(n,i,r){e.debug("Calling delegated event:",n),n=n.split("."),require([n[0]],function(e){if(n.forEach(function(t,n){e[t]&&(e=e[t])}),null===e)throw new Error("Trying to call Undefined function : "+n);i?e.apply(r.bindedNode,i):e.call(r.bindedNode,t)})}(o,s,n))}}var i=/^([\w+\.]*[\w+])\s*\([\ \t]*(.*)[\ \t]*\)$/;!function(e,t){var i=e,r=null;do{if((r=i.getAttribute("data-events"))&&n({events:r,bindedNode:i}),t===i)return;i=i.parentNode}while(null!==i&&i.getAttribute)}(t.target,this)},s.getNewClass=function(){return"zs_"+Math.random().toString(36).substring(4)},s.toggleClass=function(e,t){$D.hasClass(e,t)?$D.removeClass(e,t):$D.addClass(e,t)},s.hasCustomClass=function(e){for(var t=$D.getClasses(e),n=/^zs_[\S]+$/,i=t.length-1;i>=0;i--)if(n.test(t[i]))return t[i];return null},s.throttle=function(e,t){var n=(new Date).getTime();return function(){var i=(new Date).getTime();i-n>=e&&(n=i,t.apply(null,arguments))}},s.debounce=function(e,t,n){var i;return function(){var r=this,a=arguments,o=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,a)},t),o&&e.apply(r,a)}},s.regex={url:/^(?:(?:h[t]tps?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,alphaNumeric:/^[A-Za-z0-9]+$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,dateString:/^(1[0-2]|0?[1-9])\/(3[01]|[12][0-9]|0?[1-9])\/(?:[0-9]{2})?[0-9]{2}$/,affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,hexadecimal:/^[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,customSchemeUrl:/[a-zA-Z-]+:\/\//g};var u=null;return o&&((u=document.createElement("div")).style.display="none"),s.getThumbNail=function(e){if(!e.startsWith("http://")&&!e.startsWith("https://")){var t=e.split("/");return t[t.length-1]="."+t[t.length-1]+"_t.jpg",t.join("/")}return e},s.discardElement=function(e){u.appendChild(e),u.textContent=""},s.currentObservers=[],s.observerElChange=function(e,t){var n=new MutationObserver(function(e){t(e)});n.observe(e,{attributes:!0,subtree:!0,childList:!0,characterData:!0}),s.currentObservers.push({observer:n,target:e})},s.stopObservingElChange=function(e){for(var t=s.currentObservers.length-1;t>=0;t--)e?s.currentObservers[t].target===e&&s.currentObservers[t].observer.disconnect():s.currentObservers[t].observer.disconnect()},s.removeScriptBasedOnSrc=function(e,t){for(var n=$D.getAll("script",t),i=0;i<n.length;i++)n[i].getAttribute("src")&&-1!=n[i].getAttribute("src").indexOf(e)&&n[i].parentNode.removeChild(n[i])},s.loadScript=function(e,t,n){var i=function(e,t){for(var n=$D.getAll("script",t),i=0;i<n.length;i++)if(n[i].getAttribute("src")===e)return n[i];return!0}(e,n&&n.self===n?n.document:n);if(!0===i){var r=document.createElement("script");r.type="text/javascript",r.src=e,t&&$E.bind(r,"load",function e(){t.call(this),$E.unbind(r,"load",e)}),(n=n||window).document.getElementsByTagName("head")[0].appendChild(r)}else t&&t.call(i)},s.loadCss=function(e,t,n){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),t&&$E.bind(i,"load",function e(){t.call(this),$E.unbind(i,"load",e)}),(n=n||window).document.getElementsByTagName("head")[0].appendChild(i)},s.deepClone=function(e){return t(e)||n(e)?JSON.parse(JSON.stringify(e)):e},s.determineLink=function(e){var t={};t.linkObj={};var n={},i="pageLink";if(e.getAttribute("href")){var r=e.getAttribute("href"),a=e&&e.hasAttribute("data-title")?"data-title":"title";switch(!0){case/^\//.test(r):i="toFind",n.tooltip=e.getAttribute(a),n.url=r,-1!==r.indexOf("#")&&(n.url=r.substring(0,r.indexOf("#")),n.anchor=r.substring(r.indexOf("#")+1,r.length));break;case/^h(t)tps?:\/\//.test(r):i="externalLink",n.tooltip=e.getAttribute(a),n.url=r;break;case/^#/.test(r):i="anchorLink",n.tooltip=e.getAttribute(a),n.url=r;break;case/^mailto:/.test(r):i="emailLink",n.tooltip=e.getAttribute(a),n.url=r.replace("mailto:","").substring(0,r.indexOf("?subject=")-"mailto:".length),n.subject=r.substring(r.indexOf("?subject=")+"?subject=".length,r.length);break;case/^tel:/.test(r):i="phoneLink",n.tooltip=e.getAttribute(a),n.url=r.replace("tel:","")}e.getAttribute("target")?"_blank"===e.getAttribute("target")&&(n.target=!0):n.target=!1,e.getAttribute("rel")?"nofollow"===e.getAttribute("rel")&&(n.nofollow=!0):n.nofollow=!1,null!==e.getAttribute("download")&&(n.download=!0),t.linkObj[i]=n}return t.linkType=i,t},s.getPropValue=function(e,t){for(var n,i=e,r=0,a=(t=t.split(".")).length;r<a;r++){if(!i){i=null;break}if(l.test(t[r])){if((n=l.exec(t[r]))[1]&&!(i=i[n[1]]))return null;i=i[n[2]]}else i=i[t[r]]}return i},s.setPropValue=function(e,t,n,i){for(var a,o,s,d,u=t.split("."),c=e,p=0,m=u.length;p<m;p++){if(a=c,o=u[p],s=l.test(o)){if((d=l.exec(o))[1]&&!(c=c[d[1]])){if(!i)return null;a[d[1]]=c=[]}r(c=c[d[2]],p,m,i)&&(a[d[1]][d[2]]=c={})}else r(c=c[o],p,m,i)&&(a[o]=c={});if(!c){c=null;break}}if(p===u.length||null===c&&p===u.length-1)return s?a[d[1]][d[2]]=n:a[o]=n,n},s.joinSel=function(e,t){return e.split(",").map(function(e){return e+t}).join(",")},s.getSelUtil=function(e){try{return new a(e)}catch(e){return null}},a.prototype={get multi(){return this.sel.indexOf(",")>-1}},a.prototype.matchedSel=function(e,t){return(this.multi?this.split().find(function(n){return s.matchesSelector(e,function(e,t){return t&&t.append&&(e+=t.append),e}(n,t))}):s.matchesSelector(e,this.sel)&&this.sel)||null},a.prototype.split=function(){return this.sel.split(",").map(function(e){return e.trim()})},s.isSelector=function(e){try{if(!function(e){return!(void 0===e||null===e)}(e))return!1;$D.get(e)}catch(e){return!1}return!0},s.replaceStaticSchemes=function(e){function t(e){"A"==e.tagName?n(e,"href"):"IMG"==e.tagName&&n(e,"src"),n(e,"style")}function n(e,t){var n;e.hasAttribute(t)&&(n=e.getAttribute(t),r.test(n)&&e.setAttribute(t,i(n)))}function i(e){return e.replace(r,function(e){return a[e]||e})}var r=s.regex.customSchemeUrl,a=app.data.static_servers;if(!$D.isNode(e))return e&&"string"==typeof e&&r.test(e)?i(e):e;e.hasAttribute&&t(e),$D.getAll("img[src], a[href], [style]",e).forEach(t)},s.getCookie=function(e){var t=new RegExp(e+"=[^;]*"),n=document.cookie,i=t.exec(n);if(i){var r=i[0].split("=");return unescape(r[1])}return null},s.setCookie=function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},s.delCookie=function(e,t,n,i){var r=new Date;r.setTime(r.getTime()-1);s.getCookie(e)&&(document.cookie=e+"=null; expires="+r.toGMTString()+(t?"; path="+t:"")+(n?"; domain="+n:"")+(i?"; secure":""))},s.mergeParams=function(e,t,n){try{var i=new URL(e),r=new URL(t);return i.searchParams.forEach(function(e,t){n.includes(t)&&!r.searchParams.has(t)&&r.searchParams.append(t,e)}),r}catch(e){return null}},s.formatDate=function(e,t){var n=(e=new Date(e)).getDate(),i=e.getDay(),r=e.getMonth(),a=e.getFullYear(),o=a+"",s=e.getHours()>11?e.getHours()-12:0==e.getHours()?12:e.getHours(),l=e.getHours(),d=e.getMinutes(),u=e.getSeconds(),c=e.getHours()<12?"a.m":"p.m",p=e.getHours()<12?"a":"p",m=e.getHours()<12?"AM":"PM",f={d:n,dd:n>9?n:"0"+n,ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i],yy:o.substr(2),yyy:o.substr(1),yyyy:a,m:r,mm:r>9?r:"0"+r,mmm:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"][r],mmmm:["January","February","March","April","May","June","July","August","September","October","November","December"][r],M:d,MM:d>9?d:"0"+d,h:s,hh:s>9?s:"0"+s,H:l,HH:l>9?l:"0"+l,s:u,ss:u>9?u:"0"+u,t:c,tt:p,a:m};return t=t?t.replace(/d{1,3}|m{1,4}|y{2,4}|s{1,2}|h{1,2}|H{1,2}|s{1,2}|t{1,2}|M{1,2}|a{1,2}/g,function(e){return f[e]?f[e]:e}):""},function(){if(o){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!d.requestAnimationFrame;++n)d.requestAnimationFrame=d[t[n]+"RequestAnimationFrame"],d.cancelAnimationFrame=d[t[n]+"CancelAnimationFrame"]||d[t[n]+"CancelRequestAnimationFrame"];d.requestAnimationFrame||(d.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),a=d.setTimeout(function(){t(i+r)},r);return e=i+r,a}),d.cancelAnimationFrame||(d.cancelAnimationFrame=function(e){clearTimeout(e)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function n(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return!1;for(var a=0|t,o=Math.max(a>=0?a:r-Math.abs(a),0);o<r;){if(n(i[o],e))return!0;o++}return!1}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;n<r;){var a;n in i&&(a=i[n],e.call(t,a,n,i)),n++}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0})}else d.btoa=function(e){return(e instanceof Buffer?e:new Buffer(e.toString(),"binary")).toString("base64")},s.matchesSelector=function(e,t){return e&&t&&e.matches&&e.matches(t)}}(),d&&(d.utils=s),s}),function(e,t){"function"==typeof define&&define.amd?define("notify",t):e.notify=t()}(this,function(){"use strict";function e(e){function t(){}e=e||"",this.msg=e,this.okLabel="Ok",this.cancelLabel="Cancel",this.onOk=t,this.onCancel=t,this.closeBtn=!1,this.defaultValue="";var n=$D.getByClass("hb-notify-cont");return 0===n.length&&(document.body.insertAdjacentHTML("beforeend",o),n=$D.getByClass("hb-notify-cont")),this.msgCont=n[0],this}function t(e,t,n,a,o){function u(){c&&window.clearTimeout(c),$D.removeClass(this,"slideInDownNotify"),$D.addClass(this,"slideOutUpNotify"),this.addEventListener(l,function e(){this.parentNode.removeChild(this),this.removeEventListener(l,e)})}e=d(e),n=d(n);var c,p,m,f,h=3e3;i&&r&&i===e&&n===r||("error"!==n&&"warning"!==n||(h=5e3),m=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}(s.replace("{msg}",e).replace(/\{type\}/g,n).replace("{position}","right-bottom")),m=$D.get(".hb-notify-msg__item",m),f=$D.get(".hb-notify__close-icon",m),o||(f.style.display="none"),p=function(e){e&&e(),this.removeEventListener(l,p),o?f.addEventListener("click",u.bind(this)):c=window.setTimeout(u.bind(this),h)}.bind(m,a),m.addEventListener(l,p),$D.addClass(m,"slideInDownNotify"),$D.prepend(t,m),i=e,r=n,setTimeout(function(){r=null,i=null},3e3))}function n(e,t){for(var n=$D.getAll(".hb-notify-cont"),i=n.length-1;i>=0;i--)$D.remove(n[i]);t()}var i,r,a,o='<ul class="hb-notify-cont">\t\t\t\t\t</ul>',s='<li class="hb-notify-msg__item">\t\t\t\t\t        <div class="hb-notify {position} {type}">\t\t\t\t\t            <div class="hb-notify__icon-cont">\t\t\t\t\t                <div class="hb-notify__msg-icon hb-{type}"></div>\t\t\t\t\t            </div>\t\t\t\t\t            <div class="hb-notify__msg-cont">\t\t\t\t\t                <div class="hb-notify__msg-content">{msg}</div>\t\t\t\t\t            </div>\t\t\t\t\t            <div class="hb-notify__close-icon" style="fill:#FFFFFF"><svg class="svg-icon-10px"><use xmlns:xlink="ht""tp://www.w3.org/1999/xlink" xlink:href="#zs-delete-cross"></use></svg>\t\t\t\t\t          </div>\t\t\t\t\t        </div>\t\t\t\t\t    </li>',l=function(){var e,t=document.createElement("div"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e]}(),d=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};return e.prototype.enableCloseBtn=function(){return this.closeBtn=!0,this},e.prototype.okLabel=function(e){return this.okLabel=e,this},e.prototype.cancelLabel=function(e){return this.cancelLabel=e,this},e.prototype.alert=function(e){alert(this.msg)},e.prototype.confirm=function(e,t){},e.prototype.defaultValue=function(e){this.defaultValue=e},e.prototype.prompt=function(e,t){},e.prototype.success=function(e){t(this.msg,this.msgCont,"success",e,this.closeBtn)},e.prototype.error=function(e){t(this.msg,this.msgCont,"error",e,this.closeBtn)},e.prototype.info=function(e){t(this.msg,this.msgCont,"info",e,this.closeBtn)},e.prototype.warning=function(e){t(this.msg,this.msgCont,"warning",e,this.closeBtn)},function(t,i){if(!i)return new e(t);(a=i.appCtx).extension.add("hb-notification","beforeRoute",n)}}),define("hbValidate",[],function(){function e(e){if(!(!e.appInstance instanceof Hummingbird)){this.appInstance=e.appInstance,this.onValid=e.onValid||null,this.onInvalid=e.onInvalid||null,this.onFailure=e.onFailure||null,this.onSuccess=e.onSuccess||null,this.i18nFn=e.i18nFn||null;var t=this.appInstance.messages||{};this.validationRules={email:{regex:/^((([^<>()[\]\\.,;:\s@!#&$%*"]+(\.[^<>()[\]\\.,;:\s@!#&$%*"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))?$/,message:t.INVALID_EMAIL_ADDRESS||"Invalid email address"},url:{regex:/^(https?:\/\/[\-A-Za-z0-9+&@#\/%?=~_|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_|])?/,message:t.INVALID_URL||"Invalid URL"},alphanumeric:{regex:/^([0-9A-Za-z]+)?$/,message:t.ALPHA_NUMERIC_ONLY||"Use digits and letters only"},number:{regex:/^(\d+)?$/,message:t.NUMERIC_ONLY||"Use digits only"},phonenumber:{regex:/^(\+|0)?((-|\.|\s)?(\()?[0-9](\))?){0,16}$/,message:t.INVALID_PHONE_NUMBER||"Invalid phone number format"},currency:{regex:/^(((?=.+)(?:([1-9]|0){1,14}))?(?:\.\d+)?)?$/,message:t.INVALID_CURRENCY||"Invalid currency"},required:{regex:/\S/,message:t.REQUIRED||"This field is required"},min:{validateFn:function(e,n,i,r){var a,s=r-i.trim().length;return a=s>0?o.i18nFn&&o.validationRules.min.i18nkey?o.i18nFn(o.validationRules.min.i18nkey,r,s):t.MIN?t.MIN+" "+r:"The number of characters should be greater than or equal to "+r:"",{valid:!(s>0),msg:a}}},max:{validateFn:function(e,n,i,r){var a,s=i.trim().length-r;return a=s>0?o.i18nFn&&o.validationRules.max.i18nkey?o.i18nFn(o.validationRules.max.i18nkey,r,s):t.MAX?t.MAX+" "+r:"The number of characters should be less than or equal to "+r:"",{valid:!(s>0),msg:a}}}},this.watchEvent=e.watchEvent||"change",this.submitHook=!0,this.html=e.html||{error:'<span class="hb-field-error" data-field-error="" role="alert">{{ msg }}</span>',success:'<span class="hb-field-success" data-field-success="" role="alert">{{msg}}</span>'},this.attributeName=e.attributeName||"data-validate",this.errorClass=e.errorClass||"hb-form-error",this.validClass=e.validClass||"",this.init(),o=this}}function t(e){$E.unbind(e.element,"focusout",t),l.now()}function n(e){return'<span class="hb-msg">'+e+"</span>"}function i(e,t){t.preventDefault();var n,i=this,a=r(this,e);return a.length>0?(e.onFailure&&e.onFailure(a,this),n={status:"failure",invalids:a},$E.dispatch(this,"hbValidate:submit",n)):(e.onSuccess&&e.onSuccess(a,this),n={status:"success"},this.__hbValSubmitBound?$E.dispatch(this,"hbValidate:submit",n):n.callback=function(e){$E.dispatch(i,"hbValidate:submit",{status:"success"})}),n}function r(e,t){var n,i=[],r=null,s=$D.getAll("[data-validate]",e),l=null;return t?l=t.attributeName:(l="data-validate",t=o),function(e){return Array.prototype.slice.call(e)}(s).reverse().forEach(function(e,o){r=e.getAttribute(l);e.getAttribute("data-err-msg");r&&(r=a(e.getAttribute(l)),(n=t.validateField(e,r,e.value))&&n.length>0&&(t.showValidationStatus(n,e,t),i.push(n)))}),i}function a(e){return e.trim().split(",").map(function(e){return e.trim()})}var o=null;e.prototype.validateField=function(e,t,n){var i=this,r=i.exts;if(e.hasAttribute("data-validate-skip"))return[];var a,o,s=!1,l=e.getAttribute("data-err-msg"),d=[];return r.forEach(function(t){t.check(e)&&(s=!0,(o=t.validate(e)).valid||(o.ext=t,o.binddata=e.getAttribute("data-bind"),d.push(o)))}),s||(d=t.map(function(r){var o,s;if(-1!==r.indexOf(":")&&(r=(o=r.split(":"))[0].trim(),s=o[1].trim(),isNaN(Number(s))||(s=Number(s))),i.validationRules[r])return i.validationRules[r].validateFn?i.validationRules[r].validateFn(e,t,n,s):i.validationRules[r].regex.test(n)?{valid:!0,type:r}:(a=i.i18nFn&&i.validationRules[r].i18nkey?i.i18nFn(i.validationRules[r].i18nkey):i.validationRules[r].message,{valid:!1,type:r,binddata:e.getAttribute("data-bind"),msg:l&&"required"==r?l:a})}).filter(function(e){return!(!e||e.valid)})),d};var s=null,l=null,d=null;return e.prototype.validateFn=function(n,i){function r(t,n){var i,r,l=l instanceof e?l:o,d=t.element,u=t.value;t.bindStr;d&&(null!==(r=d.getAttribute(l.attributeName))?(r=a(r),i=l.validateField(d,r,u),l.showValidationStatus(i,d,l,n),s=null):n())}var u;if(n.element!==d&&(s=null),n.element.hasAttribute("data-validate-wait")){if(u=n.element.getAttribute("data-validate-wait").trim(),u=Number(u),isNaN(u))return void r(n,i);null===s&&(s=function(e,t,n){var i,r=!1;return function(){function a(){clearTimeout(i)}function o(){r||(r=!0,a(),e.apply(s,l))}var s=this,l=arguments,d=n&&!i;return a(),i=setTimeout(function(){i=null,n||o()},t),d&&o(),{cancel:a,now:o}}}(r,u),d=n.element),l=s(n,i),$E.bind(n.element,"focusout",t,{args:n})}else r(n,i)},e.prototype.showValidationStatus=function(e,t,i,r){for(var a,o=!1,s=(t.getAttribute("data-err-msg"),[]),l=0;a=e[l];l++)a.ext&&a.ext.handleError(t)?(o=!0,a.ext.showError(t,a.msg),a.ext.focus(t)):s.push(n(a.msg));var d=t.closest("[data-err-target]")||t,u=$D.get("[data-field-error]",d.parentNode),c=s.join(" , ");e.length>0&&!o?(u?u.innerHTML=c:($D.addClass(d,this.errorClass),d.insertAdjacentHTML("afterend",i.html.error.replace("{{ msg }}",c))),t.focus(),i.onInvalid&&i.onInvalid(e,t),void 0!==r&&r()):(u&&($D.removeClass(t,this.errorClass),d.parentNode.removeChild(u)),i.onValid&&i.onValid(t),$D.removeClass(d,this.errorClass),$D.addClass(d,this.validClass),void 0!==r&&r())},e.prototype.init=function(){this.appInstance.extension.add("hb-validate","beforeModelUpdate",this.validateFn.bind(this)),this.appInstance.extension.add("hb-validate","afterRender",this.hookFormSubmit.bind(this))},e.prototype.hookFormSubmit=function(e,t){var n;n="string"==typeof e.targetId?$D.getById(e.targetId):e.targetId;for(var r,a=$D.getAll("form",n),o=a.length-1;this.submitHook&&o>=0;o--)r=i.bind(a[o],this),a[o].__hbValSubmitBound=r,a[o].__hbValidate=function(e){return{hasSubmitHook:function(){return!!this.__hbValSubmitBound}.bind(e),removeSubmitHook:function(){$E.unbind(this,"submit",this.__hbValSubmitBound),this.__hbValSubmitBound=null}.bind(e)}}(a[o]),$E.bind(a[o],"submit",r);t()},e.validateContext=r,e.prototype.formSubmit=i,e.prototype.exts=[],e.prototype.addCustomRule=function(e){e.validateFn?this.validationRules[e.name]={validateFn:e.validateFn}:this.validationRules[e.name]={regex:e.regex,message:e.message,i18nkey:e.i18nkey}},e.validateForm=r,e.showError=function(e,t,i){if(!i){var r=!1;if(o.exts.forEach(function(n){n.check(e)&&n.showError(e,t)&&(r=!0,n.focus(e))}),r)return}!function(e,t,i){var r=e.closest("[data-err-target]")||e,a=$D.get("[data-field-error]",r.parentNode);$D.addClass(r,i.errorClass),a?a.innerHTML='<span class="hb-msg">'+t+"</span>":r.insertAdjacentHTML("afterend",i.html.error.replace("{{ msg }}",n(t)))}(e,t,o)},e.removeError=function(e){var t=e.closest("[data-err-target]")||e;$D.removeClass(t,o.errorClass);var n=t.nextElementSibling;n&&n.hasAttribute("data-field-error")&&$D.remove(n)},e}),define("languageData",[],function(){return{af:{name:"Afrikaans",native_name:"Afrikaans",region:["NA","ZA"]},ak:{name:"Akan",native_name:"Akan",region:["GH"]},am:{name:"Amharic",native_name:"",region:["ET"]},ar:{name:"Arabic",native_name:"",region:["AE","BH","DJ","DZ","EG","ER","IQ","JO","KM","KW","LB","LY","MA","MR","OM","PS","QA","SA","SD","SO","SY","TD","TN","YE"],dir:"rtl"},as:{name:"Assamese",native_name:"",region:["IN"]},ay:{name:"Aymara",native_name:"Aymar aru",region:["BO","PE"]},az:{name:"Azerbaijani",native_name:"Azrbaycan dili",region:["AZ"]},be:{name:"Belarusian",native_name:" ",region:["BY","PL","UA"]},bg:{name:"Bulgarian",native_name:"",region:["BG"]},bm:{name:"Bambara",native_name:"Bamanankan",region:["ML"]},bn:{name:"Bengali",native_name:"",region:["BD","IN"]},bs:{name:"Bosnian",native_name:"Bosanski",region:["BA"]},ca:{name:"Catalan",native_name:"Catal",region:["AD","ES","IT"]},co:{name:"Corsican",native_name:"Corsu",region:["FR"]},cs:{name:"Czech",native_name:"etina",region:["CZ"]},cy:{name:"Welsh",native_name:"Cymraeg",region:["GB"]},da:{name:"Danish",native_name:"Dansk",region:["DK","FO","GL"]},de:{name:"German",native_name:"Deutsch",region:["AT","BE","CH","DE","DK","LI","LU","PL"]},dv:{name:"Divehi",native_name:"",region:["MV"],dir:"rtl"},ee:{name:"Ewe",native_name:"Eegbe",region:["GH","TG"]},el:{name:"Greek",native_name:"",region:["CY","GR"]},en:{name:"English",native_name:"English",region:["AS","AU","BB","BE","BM","BW","BZ","CA","GB","GU","GY","HK","IE","IN","JM","MH","MP","MT","MU","NA","NZ","PH","PK","SG","TT","UM","US","VI","ZA","ZW"]},es:{name:"Spanish",native_name:"espaol",region:["AR","BO","CL","CO","CR","CU","DO","EC","ES","GQ","GT","HN","MX","NI","PA","PE","PR","PY","SV","US","UY","VE"]},et:{name:"Estonian",native_name:"Eesti",region:["EE"]},eu:{name:"Basque",native_name:"Euskara",region:["ES"]},fa:{name:"Persian",native_name:"",region:["AF","IR"],dir:"rtl"},fi:{name:"Finnish",native_name:"Suomi",region:["FI","SE"]},fr:{name:"French",native_name:"franais",region:["BE","BF","BI","BJ","BL","CA","CD","CF","CG","CH","CI","CM","DJ","FR","GA","GF","GN","GP","GQ","KM","LU","MC","MF","MG","ML","MQ","NE","RE","RW","SC","SN","TD","TG","VU","YT"]},fy:{name:"Western Frisian",native_name:"Frysk",region:["NL"]},ga:{name:"Irish",native_name:"Gaeilge",region:["IE"]},gd:{name:"Scottish Gaelic",native_name:"Gidhlig",region:["CA","GB"]},gl:{name:"Galician",native_name:"Galego",region:["ES"]},gn:{name:"Guaran",native_name:"Avae'",region:["PY"]},gu:{name:"Gujarati",native_name:"",region:["IN"]},ha:{name:"Hausa",native_name:"",region:["NE","NG"],dir:"rtl"},he:{name:"Hebrew",native_name:"",region:["IL"],dir:"rtl"},hi:{name:"Hindi",native_name:"",region:["IN"]},hr:{name:"Croatian",native_name:"hrvatski",region:["AT","BA","HR","ME","RS"]},ht:{name:"Haitian Creole",native_name:"Kreyl ayisyen",region:["HT"]},hu:{name:"Hungarian",native_name:"Magyar",region:["HU"]},hy:{name:"Armenian",native_name:"",region:["AM"]},id:{name:"Indonesian",native_name:"bahasa Indonesia",region:["ID"]},ig:{name:"Igbo",native_name:"Ass Igbo",region:["NG"]},is:{name:"Icelandic",native_name:"slenska",region:["IS"]},it:{name:"Italian",native_name:"italiano",region:["CH","IT","SM","VA"]},ja:{name:"Japanese",native_name:"",region:["JP"]},jv:{name:"Javanese",native_name:"Basa Jawa",region:["ID"]},ka:{name:"Georgian",native_name:"",region:["GE"]},kk:{name:"Kazakh",native_name:" ",region:["KZ","RU"]},km:{name:"Central Khmer",native_name:"",region:["KH","VN"]},kn:{name:"Kannada",native_name:"",region:["IN"]},ko:{name:"Korean",native_name:"",region:["CN","KP","KR"]},ku:{name:"Kurdish",native_name:"Kurd",region:["AM","IQ","TR"],dir:"rtl"},ky:{name:"Kirghiz",native_name:"",region:["KG"]},lb:{name:"Luxembourgish",native_name:"Ltzebuergesch",region:["LU"]},lg:{name:"Ganda",native_name:"Luganda",region:["UG"]},ln:{name:"Lingala",native_name:"Lingla",region:["AO","CD","CF","CG"]},lo:{name:"Lao",native_name:"",region:["LA","TH"]},lt:{name:"Lithuanian",native_name:"Lietuvi kalba",region:["LT","PL"]},lv:{name:"Latvian",native_name:"Latvieu valoda",region:["LV"]},mg:{name:"Malagasy",native_name:"Fiteny malagasy",region:["MG"]},mi:{name:"Maori",native_name:"Te reo Mori",region:["NZ"]},mk:{name:"Macedonian",native_name:"",region:["AL","MK","RS"]},ml:{name:"Malayalam",native_name:"",region:["IN"]},mn:{name:"Mongolian",native_name:" ",region:["MN"]},mr:{name:"Marathi",native_name:"",region:["IN"]},ms:{name:"Malay",native_name:"Bahasa Melayu",region:["BN","MY","SG"]},mt:{name:"Maltese",native_name:"Malti",region:["MT"]},my:{name:"Burmese",native_name:"",region:["MM"]},ne:{name:"Nepali",native_name:"",region:["IN","NP"]},nl:{name:"Dutch",native_name:"Nederlands",region:["AW","BE","BQ","CW","NL","SR","SX"]},no:{name:"Norwegian",native_name:"Norsk",region:["NO"]},ny:{name:"Chichewa",native_name:"ChiChea",region:["MW","MZ","ZM"]},om:{name:"Oromo",native_name:"Afaan Oromoo",region:["ET","KE"]},or:{name:"Oriya",native_name:"",region:["IN"]},pa:{name:"Panjabi",native_name:"",region:["IN"]},pl:{name:"Polish",native_name:"polski",region:["PL"]},ps:{name:"Pushto",native_name:"",region:["AF","PK"],dir:"rtl"},pt:{name:"Portuguese",native_name:"Portugus",region:["AO","BR","CH","CV","GQ","GW","LU","MO","MZ","PT","ST","TL"]},qu:{name:"Quechua",native_name:"Runa Simi",region:["BO","EC","PE"]},ro:{name:"Romanian",native_name:"Romn",region:["MD","RO"]},ru:{name:"Russian",native_name:"",region:["BY","KG","KZ","MD","RU","TJ","UA"]},rw:{name:"Kinyarwanda",native_name:"Ikinyarwanda",region:["CD","RW","TZ","UG"]},sa:{name:"Sanskrit",native_name:"",region:["IN"]},sd:{name:"Sindhi",native_name:"",region:["PK"],dir:"rtl"},si:{name:"Sinhalese",native_name:"",region:["LK"]},sk:{name:"Slovak",native_name:"Slovenina",region:["RS","SK"]},sl:{name:"Slovenian",native_name:"Slovenina",region:["AT","HU","IT","SI"]},sm:{name:"Samoan",native_name:"Gagana fa'a Smoa",region:["AS","WS"]},sn:{name:"Shona",native_name:"ChiShona",region:["ZW"]},so:{name:"Somali",native_name:"Soomaaliga",region:["DJ","ET","KE","SO"]},sq:{name:"Albanian",native_name:"Shqip",region:["AL","ME","MK"]},sr:{name:"Serbian",native_name:"",region:["BA","RS"]},st:{name:"Sotho, Southern",native_name:"Sesotho",region:["LS","ZA"]},su:{name:"Sundanese",native_name:"Basa Sunda",region:["ID"]},sv:{name:"Swedish",native_name:"Svenska",region:["AX","FI","SE"]},sw:{name:"Swahili",native_name:"Kiswahili",region:["BI","CD","KE","MZ","RW","TZ","UG","ZM"]},ta:{name:"Tamil",native_name:"",region:["IN","LK","SG"]},te:{name:"Telugu",native_name:"",region:["IN"]},tg:{name:"Tajik",native_name:"",region:["RU","TJ","UZ"]},th:{name:"Thai",native_name:"",region:["TH"]},ti:{name:"Tigrinya",native_name:"",region:["ER","ET"]},tk:{name:"Turkmen",native_name:"Trkmene",region:["TM"]},tl:{name:"Tagalog",native_name:"Wikang Tagalog",region:["PH"]},tr:{name:"Turkish",native_name:"Trke",region:["CY","TR"]},ts:{name:"Tsonga",native_name:"Xitsonga",region:["MZ","ZA","ZW"]},tt:{name:"Tatar",native_name:" ",region:["RU"]},ug:{name:"Uighur",native_name:" ",region:["CN"]},uk:{name:"Ukrainian",native_name:"",region:["BY","MD","RU","UA"]},ur:{name:"Urdu",native_name:"",region:["IN","PK"],dir:"rtl"},uz:{name:"Uzbek",native_name:"",region:["UZ"]},vi:{name:"Vietnamese",native_name:"Ting Vit",region:["VN"]},xh:{name:"Xhosa",native_name:"IsiXhosa",region:["BW","ZA","ZW"]},yi:{name:"Yiddish",native_name:"",region:["IL","US"],dir:"rtl"},yo:{name:"Yoruba",native_name:"Yorb",region:["BJ","NG","TG"]},zh:{name:"Chinese",native_name:"",region:["CN","HK","HK","MO","MO","SG","TW"]},zu:{name:"Zulu",native_name:"IsiZulu",region:["ZA"]}}}),define("languageDetails",["languageData"],function(e){"use strict";function t(e){var t={};if("-1"!=e&&""!=e){t.lang_code=e;var n=e.split("_"),a="";if(n.length>0){var o=n[0];if(i[o]){t.language=i[o].name,a=t.language,i[o].native_name&&(t.native_name=i[o].native_name,a=a+" ("+t.native_name+")");var s=i[o].dir;s&&(t.dir=s)}if(n.length>1){var l=n[1];r[l]&&(t.country=r[l],a=a+" - "+t.country)}}t.disp_name=a}return t}function n(e){return"rtl"==t(e).dir?a.RTL:a.LTR}var i=e,r={AC:"Ashmore and Cartier Islands",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"DR Congo",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CP:"Clipperton Island",CR:"Costa Rica",IC:"Coral Sea Islands",CU:"Cuba",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia And The South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macau",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn Islands",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SI:"Slovenia",SJ:"Svalbard",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern and Antarctic Lands",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican City (Holy See)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",XX:"High Seas",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},a={RTL:2,LTR:1};return{getLangInfo:t,language_list:i,country_list:r,getDirectionality:n,isRTL:function(e){return n(e)==a.RTL},checkRTL:function(e){return e==a.RTL},C:a}}),define("confirmDialog",["hbDialog"],function(e){function t(e,t){return void 0!==e?e:t}return{open:function(n){var i=new e.Dialog({dialogClass:"demo-dialog "+("v1"==app.data.uiVersion?"":"sites-alert ")+t(n.dialogClass,""),header:t(n.header,!0),footer:t(n.footer,!0),headingText:t(n.headingText,cms_i18n("ui.common.confirm")),contentClass:t(n.contentClass,"hb-mo-content-custom"),okText:t(n.okText,cms_i18n("ui.common.delete")),okBtnClass:t(n.okBtnClass,"v1"==app.data.uiVersion?"mo-btn__ok__danger":"mo-error"),focus:t(n.focus,"ok"),cancelBtn:t(n.cancelBtn,!0),okBtn:t(n.okBtn,!0),cancelText:t(n.cancelText,cms_i18n("ui.common.cancel")),closeBtn:t(n.closeBtn,!1),escClose:t(n.escClose,!0),onOk:function(){i.dismiss(),n.ok&&n.ok()},onCancel:function(){n.cancel&&n.cancel()},onClose:function(){i.dismiss(),n.close&&n.close()}}),r={title:t(n.title,""),confirmIcon:t(n.confirmIcon,"delete"),contentMsg:n.contentMsg,notesMsg:n.notesMsg};return app.render({template:"common:templateUtils:t_confirm_dialog/t_confirm_dialog",target:i.content,models:{options:r,data:app.data},callback:function(){i.open()}}),i}}}),function(e,t){"function"==typeof define&&define.amd?define("CONST",t):e.CONST=t.apply(null)}(this,function(){"use strict";var e={STATIC_SERVERS:app.data.static_servers,CONT_SELECTORS:[],BUILDER_SELECTORS:[],ANIM_TIME:300,ROLE:{OWNER:1,ADMIN:2,AUTHOR_PUBLISH:3,AUTHOR:4,ADMIN_SUPPORT:5,STAFF:8,DEVELOPER:9,GUEST:10,GUEST_PUBLISH:11,STORE_ADMIN:12,LANDING_PAGE_SHARED_USER:13,LANDING_PAGE_PORTAL_ADMIN:14,LANDING_PAGE_WORKSPACE_ADMIN:15,LANDING_PAGE_DESIGNER:16,LANDING_PAGE_VIEWER:17,SITE_VIEWER:18,TRAINERCENTRAL_PORTAL_ADMIN:19,TRAINERCENTRAL_SHARED_USER:20,TRAINERCENTRAL_TRAINER:21},PAYMENT_STATUS:{ALLOWED:0,BLOCKED:1},SSL_STATUS:{SUCCESS:0,FAILURE:1,IN_PROGRESS:2},RESOURCE_TYPE:app.data.resource_types,RESOURCE_TREE:{PAGE:0,MENU:1,CONTRIBUTOR:2,REDIRECT:3,SEO_REPORT_RESOURCES:4,SUBSITE:6,IMAGE_OPTIMIZER_REPORT_RESOURCES:7},EDITOR_MODULE:{ROOT:0,FILES:1},CONTENT_FORMAT:{BUILDER_FORMAT:0,MARKDOWN_FORMAT:1},PORTAL_CRM_CONNECTION:{DISCONNECTED:0,CONNECTED:1,RECONNECT:2,MIGRATED_TO_STORE:3},FORMDEV_OPTION:{ENABLED:1,DISABLED:0},FORM_STATUS:{ACTIVE:0,BLOCKED_FOR_MIGRATION:1},RESOURCE_VISIBILITY:{SHOW_TO_ALL:0,LIMIT_TO_MEMBERS:1,PASSWORD_PROTECT:2},PORTAL_RESOURCE_RESTRICTION:{PAGE:0,FILE:1,BLOG_CATEGORY:2,BLOG:3},PORTAL_ENTITY:{MEMBERS:1,GROUP:0},ALL_MEMBER_GROUP_ID:0,SITE_VISIBILITY:{PUBLIC:0,ORG_PRIVATE:1,ORG_PUBLIC:2,MEMBER_PORTAL:3,MEMBERS_ONLY:4},PASSWORD_SCOPE:{SITE_LEVEL:1,RESOURCE_LEVEL:0},PORTAL_STATUS:{NOT_CREATED:-1,DISABLE:0,ENABLE:1,DOWNGRADED:2},URL_SRC_PATTERN:/^(((https?|ftp):\/\/|\/\/)?((?:[\p{L}\p{M}\p{N}-]{1,}\.)+[\p{L}\p{M}\p{N}-]{2,}?(:[0-9]+)?)?|(?:xn--[a-z0-9-]+(?:\.[a-z0-9-]+)*))(\/[^<>"|^`]*)?$/iu,AUTO_SAVE:{DELAY:3e5,IS_ENABLED:!0},NEWSLETTER_SERVICE_TYPE:{CAMPAIGNS:1,MAILCHIMP:0},SETUP_TYPE:{TRANSLATION:1,INDEPENDENT_TRANSLATION:2},TASK_TYPE:{MANUAL_TRANSLATE:1,AUTO_TRANSLATE:2},TRANSLATION_SERVICE:{MANUAL:1,GOOGLE_TRANSLATE:2,ZOHO_TRANSLATE:3},TASK_STATUS:{OPEN:1,IN_PROGRESS:2,TRANSLATED:3,REVIEW_COMPLETED:4},TRANSLATION_CONTENT_TYPE:{FULL_CONTENT:1,PARTIAL_CONTENT:2},TRANSLATION_TYPE:{PAGE:1,SUBSITE:2,PARENT_PAGE:3},MEGAMENU_ROW_LAYOUT_ID:{1:1,2:2,3:3,4:4,5:6,6:2,7:2,8:3,9:3,10:3,11:2,12:2},INDUSTRY_TYPE:{1:"Health & Beauty",2:"Fashion - Clothing, Handicraft & Jewellery",3:"Electronics",4:"Food, Groceries & Beverages",5:"Home & Living - Furniture, Paintings",6:"Industrial supplies",7:"Building materials",8:"Office supplies",9:"Others",10:"I'm not sure yet."},SCHEMA_TYPE:{ORG_SCHEMA:5,PERSON_SCHEMA:2,LOCALBUSINESS_SCHEMA:1},MEMBER_PORTAL_LISTING_LIMIT:5e3,LANDING_PAGE_BLOCKED_SECTION_CATEGORIES:["newsletter"],SITES_BLOCKED_SECTION_CATEGORIES:["team"],VERSION_TYPE:{PAGE:1,BANNER:2,FOOTER:3,SIDEBAR:4},CONTENT_STATE:{DRAFT:1,READY_TO_PUBLISH:2,PUBLISHED:3,IN_REVIEW:4},PAGE_REVIEW_ACTION:{SUBMIT_FOR_REVIEW:0,APPROVE:1,REJECT:2},POST_STATUS:{DRAFT:0,PUBLISHED:1,SCHEDULED_POST:2,REVISED_POST:3,IN_REVIEW:4,READY_TO_PUBLISH:5},POST_REVIEW_ACTION:{SUBMIT_FOR_REVIEW:0,APPROVE:1,REJECT:2},SITE_TYPE:{NORMAL_SITE:0,UPLOADED_SITE:1,SITE_ADDON_SITE:2,LANDING_PAGE:3,FORWARDING_SERVER:4,TRAINER_CENTRAL:5},SNAPSHOT_FILE_TYPE:{BANNER_CONTENT:1,SIDEBAR_CONTENT:2,FOOTER_CONTENT:3,PAGE_CONTENT:4,PAGE_META:5},SITE_CATEGORY:{1:"General",2:"Business",3:"Portfolio",4:"Restaurant",5:"Education",6:"Sports",7:"Event",8:"Travel",9:"Beauty & Spa",10:"Finance",11:"Hospital",12:"Logistics",13:"Law"},TIME_PERIOD:{BETWEEN:11,ON:12},ELEMENT_TYPE:{SECTION:"section"},PLANS:{ZOHO_ONE_TRIAL:"11908",SINGLE_PAGE_FREE_PLAN:"5"},DOMAIN_TYPE:{SUB_DOMAIN:0,CUSTOM_DOMAIN:1},PORTAL_PAGE_TYPE:{SIGNUP:"1",SIGNIN:"2",FORGOTPASSWORD:"3"},SEARCH_BUILDER_MODULE:{PAGES:{KEY:"pages",OFFSET:50,MODULE_ID:1},FILES:{KEY:"files",OFFSET:50,MODULE_ID:2},BLOG_POSTS:{KEY:"blog_posts",OFFSET:10,MODULE_ID:3},TRASH:{KEY:"trash",OFFSET:1e3,MODULE_ID:4},PHOTOSET:{KEY:"photoset",OFFSET:1e3,MODULE_ID:5},PHOTOSET_IMAGES:{KEY:"photoset_images",OFFSET:1e3,MODULE_ID:6}},REDIRECT_DESTINATION_TYPE:{RESOURCE_301_REDIRECT:0,EXTERNAL_URL_301_REDIRECT:1},TRANSLATION_FIELD_TYPE:{REPORT_ERROR:0,TRANSLATION_COMPLETE:1},SUBSITE_CATEGORY:{REGULAR_SUBSITE:0,SUBSITE_WITH_TRANSLATION:1,SUBSITE_WITH_LOCALIZED_CONTENT:2},SEARCH_TIME_INTERVAL:{SELECT:0,TODAY:1,YESTERDAY:2,CURRENT_WEEK:3,PREVIOUS_WEEK:4,CURRENT_MONTH:5,PREVIOUS_MONTH:6,CURRENT_QUARTER:7,PREVIOUS_QUARTER:8,CURRENT_YEAR:9,PREVIOUS_YEAR:10,BETWEEN:11,ON:12},FEED_BACK_TYPE:{NORMAL:1,LOW_PRIORITY:2,HIGH_PRIORITY:3,EMERGENCY:4},AI_REQ_ACTIONS:{CONTENT:1,TITLE:2,REGENERATE:3,REPHRASE:4,SUMMARY:5,SHORTENER:6,HEADLINE:7,PUNCTUATION:8},AI_ACTIONS:{REPLACE:"replace_ai_content",INSERT_BELOW:"insert_below_ai_content",INSERT_ABOVE:"insert_above_ai_content",ACCEPT:"accept_ai_content"},ZOHO_DOMAINS_SUPPORTED_DC:["CT","USA","India","Europe","Australia","Canada"],OPTIMIZER_STATUS:{GENERATED:1,IN_PROGRESS:2,OPTIMIZED:3,PAGE_NOT_MODIFIED:4,CONTENT_NOT_MODIFIED:5},SIZE_REPRESENTATION:[cms_i18n("ui.common.size.bytes"),cms_i18n("ui.common.size.kb"),cms_i18n("ui.common.size.mb"),cms_i18n("ui.common.size.gb"),cms_i18n("ui.common.size.tb"),cms_i18n("ui.common.size.pb"),cms_i18n("ui.common.size.eb"),cms_i18n("ui.common.size.zb"),cms_i18n("ui.common.size.yb")]};e.RESOURCE_TYPE&&(e.DIRECTORY_TYPES=[app.data.resource_types.USER_CREATED_DIRECTORY,app.data.resource_types.WORKSPACE_DIRECTORY]);return require(["utils"],function(t){t.deepFreeze(e)}),e}),define("settingsDialog",["hbDialog","CONST"],function(e,t){function n(e){if(e.navmenu&&e.menuitem){var t=$D.get(".sites-wrapper");i($D.get(r(g)+"."+_,t),$D.get(r(g,e.navmenu),t));var n=$D.get(r(g)+" "+r(v)+"."+_,t),a=$D.get(r(g,e.navmenu)+" "+r(v,e.menuitem),t);i(n,a);for(var o=a?a.getAttribute(y):null,s=$D.getAll(r(h),t),l=0;l<s.length;l++){var d=s[l];e.hideSubNav||d.getAttribute(h)!==o?$D.addClass(d,b):$D.removeClass(d,b)}}}function i(e,t){e&&e!=t&&$D.removeClass(e,_),t&&$D.addClass(t,_)}function r(e,t){return"["+e+(t?'="'+t+'"':"")+"]"}function a(){for(var e=document.querySelectorAll(T),t=0;t<e.length;t++){var n=e[t].querySelector(E);n&&($D.removeClass(e[t],"opensubmenu"),$D.removeClass(n,"bottom"),$D.removeClass(n,"top"),$D.removeClass(n,"submenulist"),n.removeAttribute("style"))}}function o(e,t){var n=e.clientX-15,i=e.clientY,r=$D.get("ul",t);if(r){var a=r.getBoundingClientRect(),o=t.offsetWidth+20,d=r.getBoundingClientRect().top-50,u=o,c=d+a.height+50;(S=new l(n,i,o,d,u,c)).ul=t,S.subul=r,s(n+5,i),s(o+5,d-5),s(u+5,c-5)}}function s(e,t){var n=document.createElement("div");n.style.position="fixed",n.style.height="5px",n.style.width="5px",n.style.background="black",n.style.zIndex="1000",n.style.insetInlineStart=e+"px",n.style.insetBlockStart=t+"px",n.style.pointerEvents="none"}function l(e,t,n,i,r,a){this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i,this.p3x=r,this.p3y=a,this.ul=null,this.over=null,this.watching=null}function d(e,t){if(S){var n=(new Date).getTime();-1==O&&(O=n);n-O>=50&&(O=n,function(e){S&&S.mouseMoved(e,!1)}.apply(null,arguments))}else{var i=e.target,r=$D.findParent(i,"sites-navmenu");if(r){var s=r.querySelector(E),l=$D.hasClass(r,"is-selected"),d=window.innerHeight-50,u=$D.findParent(r,"sites-navmenucont");if(s&&!l){a(),$D.addClass(r,"opensubmenu"),$D.addClass(s,"submenulist");var c=$D.scrollDimension(s).height;s.offsetTop+c>d+u.scrollTop+32?(0!=u.scrollTop?s.style.insetBlockEnd=$D.scrollDimension(u).height-s.offsetTop+32+"px":s.style.insetBlockEnd=d-(s.offsetTop+u.scrollTop)+"px",$D.addClass(s,"bottom")):(s.style.insetBlockStart=r.offsetTop-u.scrollTop+"px",$D.addClass(s,"top"))}!function(e,t){o(e,t)}(e,r)}}}function u(e,t){var n=t,i=n.querySelector(E);i&&($D.removeClass(n,"opensubmenu"),$D.removeClass(i,"submenulist"),$D.removeClass(i,"bottom"),$D.removeClass(i,"top"),i.removeAttribute("style"))}function c(e,t){e?$D.removeClass(t,b):$D.addClass(t,b)}function p(e){$X.get({url:app.data.api_url+"/blogs",headers:app.getHeaders(),handler:function(){var t=JSON.parse(this.responseText);"0"==t.status_code&&(f=t.extra),e&&e()}})}var m,f,h="data-subnav-menu",g="data-nav-menu",_="is-selected",v="data-menu-item",b="sites-display-none",y="data-has-sub-menu",E=".sites-menuitems > ul",T="ul.sites-navmenu";require(["mask"],function(e){m=e});var S=null,x=-1;l.prototype.mouseMoved=function(e,t){var n=function(e,t,n){var i=e;return function(e,t,n,i,r,a,o,s){var l=[o-n,s-i],d=[r-n,a-i],u=[e-n,t-i],c=l[0]*l[0]+l[1]*l[1],p=l[0]*d[0]+l[1]*d[1],m=l[0]*u[0]+l[1]*u[1],f=d[0]*d[0]+d[1]*d[1],h=d[0]*u[0]+d[1]*u[1],g=1/(c*f-p*p),_=(f*m-p*h)*g,v=(c*h-p*m)*g;return _>=0&&v>=0&&_+v<1}(t,n,i.p1x,i.p1y,i.p2x,i.p2y,i.p3x,i.p3y)}(this,e.clientX,e.clientY),i=this.subul==e.target||this.subul.contains(e.target),r=this.ul==e.target||this.ul.contains(e.target);if(r&&!i&&o(e,this.ul),t)i||r||(S=null,u(0,this.ul),d(e));else if(n||i||r){var a=this;-1!=x&&clearTimeout(x),x=setTimeout(function(){a.mouseMoved(e,!0)},100)}else S=null,u(0,this.ul)};var O=-1,I={showNewSettings:function(e){function n(){require(["element_settings"],function(e){e.close()}),app.render({template:"sites_v2:settings:t_newsettings/t_newsettings_new",target:"sites-sidebar-cont",models:{app:app,blog_permission:f},context:{settingsDialog:I},callback:function(){require(["appHeader"],function(e){e.toggle()}),$D.css($D.getById("sites-sidebar-cont"),"display","");var t=$D.get(".sites-wrapper");if($E.unbind(t,"mousemove",d),$E.bind(t,"mousemove",d),$D.getById("sitesLoading").style.display="none",app.data.root_resource_id!=app.data.sub_site_id){var n=$D.getById("sites-dtour-dashboard").getElementsByTagName("a")[0];n.href.endsWith(app.data.sub_site_id)||(n.href+="/subsite/"+app.data.sub_site_id)}!function(e){for(var t=$D.getAll(r(g),e),n=0;n<t.length;n++){var i=t[n].querySelector(E);if(i){var a=i.querySelector("li > a"),o=t[n].querySelector("li > a");o.setAttribute("data-href",a.getAttribute("href"))}}}(t),app.next(),e instanceof Function&&e()}})}app.data.isStoreEnabled?$D.getById("store-settings")?app.next():require(["zsroot"],function(e){e.showStoreHome(function(){app.next()})}):app.data.role!=t.ROLE.OWNER&&app.data.role!=t.ROLE.ADMIN&&app.data.role!=t.ROLE.DEVELOPER?p(n):n()},navigateToV2Settings:function(){app.navigate(app.data.builder_base_url+"/settings/general/preferences")},showTabs:n,hideSubNav:c.bind(null,!1),showSubNav:c.bind(null,!0),showPlaceHolder:function(e,t,i,r,o){a(),n(t),app.render({target:"settings-canvas",template:e,callback:i,context:r,models:o})},openOnlySidebar:function(){function e(){var e={app:app,blog_permission:f};app.render({template:"sites_v2:settings:t_newsettings/settings_sidebar",target:"sidebar",models:e,context:{settingsDialog:I},callback:function(){$E.unbind(document.body,"mousemove",d),$E.bind(document.body,"mousemove",d)}})}app.data.role!=t.ROLE.OWNER&&app.data.role!=t.ROLE.ADMIN&&app.data.role!=t.ROLE.DEVELOPER?p(e):e()},menuClick:function(){var e=this.closest(".sites-navmenu");$D.hasClass(e,"is-selected")?$D.removeClass(e,"is-selected"):0==$D.getByClass("is-selected",e).length?app.navigate(this.getAttribute("data-href")):(u(0,e),$D.addClass(e,"is-selected"))},navigateFormData:function(){m.show(function(){$X.get({url:"/zs-site/api/v0/getFormsList",params:{siteId:app.data.siteId},handler:function(){var e=this.responseText,t="creatorform";try{JSON.parse(e).formCount<=0&&(t="zsform")}catch(n){"noForms"==e&&(t="zsform")}t&&"zsform"==t?app.navigate(app.data.builder_base_url+"/settings/zsforms"):app.navigate(app.data.builder_base_url+"/settings/forms")}})})}};return I}),define("csrf",[],function(){function e(){return function(e){var t=new RegExp(e+"=[^;]*"),n=document.cookie,i=t.exec(n);{if(i){var r=i[0].split("=");return unescape(r[1])}return null}}(n)}var t="csrfp",n="csrfc";return{CSRFPName:t,CSRFCName:n,CSRFHeaderName:"X-ZCSRF-TOKEN",getCSRFToken:e,getCSRFHeader:function(){return{"X-ZCSRF-TOKEN":t+"="+e()}}}}),define("asap_widget",["csrf"],function(e){"use strict";function t(e){e&&e.preventDefault(),e&&e.stopPropagation();var t,n=this.getAttribute("data-asap-article_id"),i=this.getAttribute("data-asap-hashtag"),d={};n&&(d.articleId=n),i&&(d.hashtag=i),n&&(t=l?a(s.ASAP_ARTICLE_ID,n):a(s.SITES_ASAP_ARTICLE_ID,n),ZohoHCAsapReady(function(){ZohoHCAsap.kbArticles.view(d)}),r(),o(t))}function n(e){e&&e.preventDefault(),e&&e.stopPropagation();var t,n=this.getAttribute("data-asap-category_id");n&&(t=l?a(s.ASAP_CATEGORY_ID,n):a(s.SITES_ASAP_CATEGORY_ID,n),ZohoHCAsapReady(function(){ZohoHCAsap.kbCategories({categoryId:n})}),r(),o(t))}function i(e){27===e.keyCode&&(e&&e.stopPropagation(),ZohoHCAsapReady(function(){ZohoHCAsap.Action("close")}))}function r(){var e=$D.getById("zohohc-asap-web-helper-main");e.setAttribute("tabindex",0),$E.bind(e,"keydown",i)}function a(e,t){return Object.keys(e).find(function(n){return e[n]===t})}function o(t){var n={},i="/zs-site/api/v1/sitefeaturehits/ASAP";l&&(i="/zstore/api/feature-hits/ASAP"),n.action=t;var r={};r.storeId=app.data.storeId;var a=e.getCSRFHeader();a["X-Site-Id"]=app.data.siteId,$X.post({url:i,headers:a,params:r,bodyJSON:n})}var s={ASAP_ARTICLE_ID:{ORDER_DETAIL:"205219007756696598",PRODUCT:"205219006908700443",PRODUCT_ADD:"205219007020719019",PRODUCT_CLONE:"205219007708741882",COMPOSITE_PRODUCT:"205219007131009992",IMPORT_PRODUCT:"205219007129372242",CATEGORY:"205219007241407878",COLLECTION:"205219007241571333",PAYMENT_GATEWAY:"205219007675653211",PAYPAL:"205219007677142354",AUTHORIZE_NET:"205219007675653370",PAYFLOW_PRO:"205219007675695280",STRIPE:"205219007675745406",TWO_CHECKOUT:"205219007677008973",PAYMENTS_PRO:"205219007675745334",FORTE:"205219007677008258",WORLDPAY:"205219007677008559",ICICI_EAZYPAY:"205219007677212803",RAZORPAY:"205219007677010676",MERCADOPAGO:"205219007677212192",PAYTABS:"205219007677008146",PAYU:"205219009845882540",OFFLINE:"205219007677212613",SHIPPING:"205219007005110430",SHIPPING_ZONE:"205219007005110430",CURRENCY:"205219007024232344",TAX:"205219007579586690",MANAGE_STOCK:"205219007024553330",COUPONS:"205219007722403710",BUY_BUTTON:"205219007028583063",SPECIFICATION:"205219007854330991",CUSTOM_FIELD:"205219007241623826",CUSTOMER:"205219007769919006",PRICE_LIST:"205219007769919704",PRODUCT_FILTER:"205219008772794591",FILES:"205219007245335049",CONTRIBUTORS:"205219007656979574",CONTACT_INFO:"205219007244992359",PICK_UP:"205219008939246475",ATTRIBUTES:"205219007130897691",CUSTOM_CSS:"205219007989705588",TEMPLATES:"205219007605977470",MENU:"205219007243124841",USERS:"205219007579586478",DOMAINS:"205219007986831886",SSL:"205219007986737961",MESSAGE_BAR:"205219007243981692",SOCIAL_PUBLISH:"205219007243894242",SOCIAL_SHARE:"205219007243768369",SOCIAL_PROFILE:"205219007243445738",REVIEW_MODERATION:"205219007594669495",REVIEW_PREFERENCES:"205219007241903194",SEO:"205219007653925449",FACEBOOK_PIXEL:"205219007653607469",SITEMAP_XML:"205219007636042507",ROBOTS_TEXT:"205219007636001874",GOOGLE_ANALYTICS:"205219007605028594",BING_WEB:"205219007595969802",GTM:"205219007595672190",GOOGLE_WEBMASTER:"205219007595589911",REDIRECT:"205219007244116337",GMC:"205219009094153052",SHIPROCKET:"205219007629484663",SALES_IQ:"205219007579760790",ZOHO_MARKETING_AUTOMATION:"205219007579681917",AFTER_SHIP:"205219007559477157",PAGESENSE:"205219007559335416",CAMPAIGNS:"205219007558962497",SURVEY:"205219007558030608",GOOGLE_SHOPPING:"205219007542152139",MAILCHIMP:"205219007541933913",AVALARA:"205219007541833873",CRM:"205219007541738604",ABANDONED_CART:"205219007709880333",TRAFFIC_REPORTS:"205219007709130440",SALES_REPORTS:"205219007709018775",FAILED_PAYMENTS:"205219007641613578",VISUAL_EDITOR:"205219007628566395",SITE_PREFERENCES:"205219007244258581",LOGO_FAVICON:"205219007244394089",SOCIAL_PREVIEW_IMAGE:"205219007244374422",LANGUAGE:"205219013652509864",REGION:"205219007245189298",HEADER_FOOTER:"205219007245289179",DOWNLOAD_STORE:"205219007656858787",DEBUG_ACCESS:"205219007756633564",PAGES:"205219007655159829",DYNAMIC_CONTENT:"205219007245525351",PHOTOSET:"205219007245399678",CODE_SNIPPETS:"205219007245336855",TRAFFIC:"205219007245596534",BLOG_PREFERENCES:"205219007245642745",BLOG_POSTS:"205219007390546193",BLOG_COMMENT_PREFERENCES:"205219007655257808",BLOG_TAGS:"205219007655330678",PORTAL_PREFERENCES:"205219007657171631",SAML:"205219007657253077",SOCIAL_LOGIN:"205219007657352452",GOOGLE_CLIENT:"205219007657468653",FACEBOOK_CLIENT:"205219007657646807",PORTAL_MEMBERS:"205219007663405567",PORTAL_RESTRICTION:"205219007663405773",PORTAL_SENDER_EMAIL:"205219007663525253",ORGANIZATION_PROFILE:"205219007579455684",STORE_WEBSITE_LOCALE:"205219007579508090",STORE_PREFERENCES:"205219007579544034",STORE_EMAIL:"205219007579544144",UNPUBLISH_STORE:"205219009566559975",COMMENT_BOX:"205219009566044630",PRODUCT_REVIEW:"205219007243931832",MEGA_MENU:"205219009835929207",LIVE_SHIPPING_RATE:"205219008508264091"},ASAP_HASHTAG:{EDIT_DELETE_SPEC_GROUP:"Edit_and_Delete_Specification_Groups",CREATE_SPEC_GROUP:"Create_Specification_Set",ADD_CATEGORY:"Add_Categories",CREATE_SUB_CATEGORY:"Create_Sub-Categories",SHIPPING_ZONE:"Shipping_Zone",ADD_SHIPPING_RATE:"Adding_Shipping_Rates",ADD_PICKUP_ADDRESS:"Add_New_Pick_Up_Address",ADD_COUPON:"Add_New_Coupons_to_Your_Store",ENHANCED_COUPON:"Enhanced_Coupon_Settings",CREATE_PRICE_LIST:"To_create_a_new_price_list",MANAGE_COMMENT_BOX:"To_manage_comment_box",MODERATE_COMMENT_BOX:"To_moderate_your_comment_box",CREATE_CUSTOM_FIELD:"Create_Custom_Fields",EDIT_DELETE_CUSTOM_FIELD:"Edit_and_Delete_Custom_Fields",CREATE_CUSTOM_LAYOUT:"Create_Layouts"},ASAP_CATEGORY_ID:{ORDER:"205219007314308050",PRODUCT:"205219007314308031",SHIPPING_CARRIER:"205219007579978060",HELP:"205219000970448545",GENERAL_SITE_SETTINGS:"205219007314341866"},SITES_ASAP_ARTICLE_ID:{DUMMY:"205219009366862986",PAGES:"205219009457684761",ACCESS_RESTRICTION:"205219009715875353",BLOG_SEO:"205219009662415039",BLOG_TAGS:"205219009662155546",BLOG_PREFERENCES:"205219009662021230",BLOG_CATEGORIES:"205219009662155247",BLOG_POSTS:"205219009660436453",TEMPLATES:"205219010052979383",CONTRIBUTORS:"205219009715799991",ACCESS_RESTRICTION:"205219009715875353",SEO_REPORTS:"205219010340769059",PASSWORD_PROTECTION:"205219009764538740",DASHBOARD:"205219009366862986",FILES:"205219010052551842",SEO:"205219009775397228",MARKET_PLACE:"205219010052683531",VISUAL_EDITOR:"205219013052640913",MENU:"205219009613229511",DOMAIN_AND_SSL:"205219009763971633",SOCIAL_PROFILE:"205219010136777779",MEMBER_PORTAL:"205219009761848785",MEMBER_PORTAL_SENDER:"205219009658734086",CODE_SNIPPETS:"205219011499221776",PHOTOSET:"205219014778559643",TRAFFIC_REPORTS:"205219011498544562",SALES_IQ:"205219011713010018",COMMENT_BOX:"205219009556390973",SOCIAL_SHARE:"205219013139027323",ZOHO_MARKETING_AUTOMATION:"205219014739191458",MESSAGE_BAR:"205219009767754314",LANGUAGE:"205219013652509864",PAGESENSE:"205219011842848292",CUSTOM_CSS:"205219013138986985",HEADER_FOOTER:"205219013139179146",UI_TRANSLATION:"205219013652509864",MY_APPS:"205219010052683531",VERIFICATION_FILES:"205219014734614622",SCHEMA_GENERATOR:"205219014736227667",COMMENT_BOX_PREFERENCES:"205219013053063313",COMMENT_BOX_PAGES:"205219013053063313",MODERATE_COMMENT_BOX:"205219013053063313",MODERATE_COMMENT_BOX_PAGES:"205219013053063313",MODERATE_COMMENT_BOX_BLOGS:"205219009662309110",DELETE_SITE:"205219011499221986",DOWNLOAD_SITE:"205219014778767551",UNPUBLISH_SITE:"205219011499490026",SOCIAL_SHARE:"205219013139027323",SOCIAL_PUBLISH:"205219014735011258",SOCIAL_PREVIEW_IMAGE:"205219014734699291",TRASH:"205219014736227274",DEBUG_ACCESS:"205219011499221946",REGION:"205219011499221898",COOKIE_BAR:"205219011499221822",LOGO_FAVICON:"205219011498544719",CONTACT_INFORMATION:"205219011475693807",SITE_PREFERENCES:"205219014764653407",CRM_FORMS:"205219014765343304",ZOHO_FORMS:"205219014765343568",DYNAMIC_CONTENT:"205219013193228779",CONNECTIONS:"205219014778559329",SUBSITE:"205219014796129128",PAGES_ACCESS_CONTROL:"205219014738771113",PAGE_VERSION:"205219014738735661",MEMBER_SYNC_IN_CRM:"205219014739191748",GOOGLE_CLOUD_TRANSLATION:"205219014739191900",BIGIN_FORMS:"205219014764402015",CUSTOM_MAIL_SENDER:"205219014648224987",MEMBER_PORTAL_NOTIFICATIONS:"205219014647844488",MEMBER_PORTAL_CUSTOMPAGE:"205219024251352833",ZOHO_SURVEY:"205219014778767669",DOMAIN_MAPPING:"205219014766718036",SITE_CREATION:"205219014766245708",BEGINNERS_GUIDE:"205219014769322488",ZOHO_SITES_FORMS:"205219011304634157",SUBSITE_TRANSLATION:"205219014796129174",CONTENT_SEARCH:"205219019986440654",ASK_AI:"205219027660912225",PUBLISH_OPTIONS:"205219014736227154",SAML_SIGNIN:"205219009556145893",MEGA_MENU:"205219014818477031",PUBLISH:"205219016569383379",CUSTOM_FONTS:"205219017055321101"},SITES_ASAP_HASHTAG:{DUMMY:"",IMAGE_LIBRARY:"To_access_Image_Library",MY_FILES:"To_access_My_Files",ROBOTS_TEXT:"Robots_Text",REDIRECT:"301_Redirect",GOOGLE_TOOLS:"Google_Tools",BING_WEB:"Bing_Webmaster",SITEMAP:"Sitemap",GROUPS:"Groups",MEMBERS:"Members",PREFERENCES:"Preferences",CREATE_NEW_FORM:"To_create_a_new_form_using_an_existing_template",SSL_HOSTING:"SSL_Hosting",DOMAINS:"Domains"},SITES_ASAP_CATEGORY_ID:{HELP:"205219010140498345",PAGES:"205219007366791461",FILES:"205219010052551586",BLOG:"205219007366791480",FORMS:"205219007367837986",APPS:"205219010052683426",INTEGRATIONS:"205219007367143164",CUSTOMIZATION:"205219007367894079",CONFIGURATION:"205219009121015845",ROLES_AND_PERMISSIONS:"205219007367867360",TRAFFIC_REPORTS:"205219009121015856",WEBSITE_MIGRATION:"205219007367867406",UPGRADE_PLAN:"205219007367837565",EDIT_WEBSITE:"205219009120968168",ADVANCED_VISUAL_EDITOR:"205219009459502911",DOMAIN:"205219009793107848",FAQ:"205219014805101355"}},l=app.data.isStoreEnabled;require(["utils"],function(e){e.deepFreeze(s)}),$E.bind(document,"help:inited",function(e){var i=e.detail?e.detail.element:"";i&&""!=i&&function(e){var i=e.getAttribute("data-module-name"),r=e.getAttribute("data-hash");if(null!=i&&void 0!==i)if(-1!==(i=i.toUpperCase()).indexOf("_ARTICLE")){var a=function(e){var t=l?s.ASAP_ARTICLE_ID[e]:s.SITES_ASAP_ARTICLE_ID[e];return t&&void 0!==t?t:""}(i=i.replace("_ARTICLE","")),o=function(e){if(null==e||void 0===e)return"";e=e.toUpperCase();var t=l?s.ASAP_HASHTAG[e]:s.SITES_ASAP_HASHTAG[e];return t&&void 0!==t?t:""}(r);a.length>0&&e.setAttribute("data-asap-article_id",a),o.length>0&&e.setAttribute("data-asap-hashtag",o),e.setAttribute("data-event","click asap_widget.openArticle"),$E.unbind(e,"click",t),$E.bind(e,"click",t)}else if(-1!==i.indexOf("_CATEGORY")){var d=function(e){var t=l?s.ASAP_CATEGORY_ID[e]:s.SITES_ASAP_CATEGORY_ID[e];return t&&void 0!==t?t:""}(i=i.replace("_CATEGORY",""));d.length>0&&e.setAttribute("data-asap-category_id",d),e.setAttribute("data-event","click asap_widget.openCategory"),$E.unbind(e,"click",n),$E.bind(e,"click",n)}}(i)});return{openHelp:function(e){e&&e.preventDefault(),e&&e.stopPropagation(),ZohoHCAsapReady(function(){ZohoHCAsap.Action("open",{tab:"KB"})})},openArticle:t,openCategory:n,openCommunity:function(e){e&&e.preventDefault(),e&&e.stopPropagation(),ZohoHCAsapReady(function(){ZohoHCAsap.communityCategories()}),r(),o("community")},bindEvent:function(e){var i=$D.getAll(e+"[data-asap-article_id]"),r=$D.getAll(e+"[data-asap-category_id]");if(i.length>0)for(var a=0;a<i.length;a++){var o=i[a];$E.unbind(o,"click",t),$E.bind(o,"click",t)}if(r.length>0)for(a=0;a<r.length;a++)o=r[a],$E.unbind(o,"click",n),$E.bind(o,"click",n)},ASAP_CONSTANT:s}}),define("language",["hbDialog","notify","hbValidate","languageDetails","confirmDialog","settingsDialog","asap_widget","hbUI","CONST"],function(e,t,n,i,r,a,o,s,l){"use strict";function d(e){"language"==e?(M=!1,$X.get({url:app.data.api_url+"/language",headers:app.getHeaders(),handler:c,args:e})):"uitranslation"==e?u(e):"region"==e?(M=!0,$X.get({url:app.data.api_url+"/language",headers:app.getHeaders(),handler:c,args:e}),require(["generalsettings"],function(e){e.showLocale()})):app.next()}function u(e){M=!0,$X.get({url:app.data.api_url+"/language",headers:app.getHeaders(),handler:c,args:e})}function c(e){var t=JSON.parse(this.responseText);if("0"==t.status_code){H.modelObj.priority_languages=t.get_languages.priority_languages;var n=[],r=t.get_languages.languages_list,a=t.get_languages.default_language;for(var o in r){var l=r[o].lang_code,d=i.getLangInfo(l);d.language_id=r[o].language_id,n.push(d)}A.language_list=n,A.default_language=a,app.render({template:"sites_v2:language:t_languages_list/t_languages_tabs",target:"settings-canvas",nextRoute:!0,models:{languages_model:A,uiTransalte:M,app:app},context:{language:H},callback:function(){var t=$D.get("[data-tab="+e+"]");s.showTabs2(t),"region"!=e&&(p(e),app.next())}})}}function p(e){"uitranslation"==e&&(M=!0),"language"!=e&&"region"!=e||(M=!1);var t=e+"-c";app.render({template:"sites_v2:language:t_languages_list/t_languages_list",target:t,models:{languages_model:A,uiTransalte:M,app:app},context:{language:H},callback:function(){app.next()}})}function m(){var e=$D.getById("language_select").value,t=$D.getById("region_select").value,i="-1",r=$D.getById("add_language_button");if("-1"!=e&&"-1"!=t)i=e+"_"+t;else{if("-1"==e)return n.showError($D.get("#language_select"),cms_i18n("ui.settings.languages.nolanguageselected"),!0),void r.removeAttribute("disabled");i=e}if(O(i))return n.showError($D.get("#region_select"),cms_i18n("ui.settings.languages.languageexists"),!0),void r.removeAttribute("disabled");"-1"!=i&&$X.post({url:app.data.api_url+"/language/"+i,headers:app.getHeaders(),bodyJSON:{},handler:f})}function f(){var e=JSON.parse(this.responseText);if("0"==e.status_code){var n=e.add_language;t(cms_i18n("ui.settings.languages.addlanguage.success")).success();for(var r=0;r<n.length;r++){var a={},o=n[r].lang_code;I(o),(a=i.getLangInfo(o)).language_id=n[r].language_id,0==A.language_list.length?(A.language_list.push(a),p("language")):(app.view.renderPartial({partial:"sites_v2:t_languages_list.languagepartial",args:[a,A.default_language],context:{language:H},refEl:"#language_area",insertType:"append"}),A.language_list.push(a))}R.dismiss()}else"1"==e.status_code&&(t(e.developer_message).error(),$D.getById("add_language_button").removeAttribute("disabled"))}function h(){var e=JSON.parse(this.responseText),t=[];if("0"==e.status_code){var n=e.delete_language;I(n);var i=$D.getById("language_"+n);$D.getById("language_area").removeChild(i),t.push(n);for(var r=A.language_list,a=0;a<r.length&&t.length>0;a++){var o;-1!=(o=t.indexOf(r[a].lang_code))&&(t.splice(o,1),r.splice(a,1))}A.language_list=r,0==A.language_list.length&&p("language")}}function g(e){var t=e,n={};n.lang_code=t,$X.get({url:app.data.api_url+"/localization/"+t,headers:app.getHeaders(),args:n,handler:_})}function _(t){var n,r,a,o=JSON.parse(this.responseText),s=t.lang_code,l=i.getLangInfo(s),d="";if(l.language&&(d=l.language),l.country&&(d=d+" "+l.country),delete H.bindObj.custom_languages_keys_model,(!w||w&&"closed"===w.state)&&(w=new e.Dialog({dialogClass:"demo-dialog",header:{headerLeft:{text:{headingText:d},helper:{helperModuleName:"language_article"}}},footer:!1,mask:!0,type:"fullscreen",offsetTop:"0px",offsetLeft:"150px",onOk:function(){b(event,s)},onClose:function(){E()},closeBtn:!0})),"0"==o.status_code){var u,c=o.get_keys;if(c.default_keys){n={};for(var p in c.default_keys){var m=p.replace(/\./g,"$");n[m]=c.default_keys[p]}u=function(e){var t=JSON.parse(JSON.stringify(U));C=[];for(var n in e)if(-1==F.indexOf(n)){var i=n.split("$");if(i[0])if(t[s=i[0]]){var r=t[s];if(r.sub_group[i[1]]){var a=i[1];(o=r.sub_group[a].keys||[]).push(n),r.sub_group[a].keys=o}else r.sub_group.others||(r.sub_group.others={},r.sub_group.others.display_name="Others"),(o=r.sub_group.others.keys||[]).push(n),r.sub_group.others.keys=o}else{t.others||(t.others={},t.others.display_name="Others"),t.others.sub_group||(t.others.sub_group={}),t.others.sub_group[s]||(t.others.sub_group[s]={display_name:s,keys:[]});var o;(o=t.others.sub_group[s].keys||[]).push(n),t.others.sub_group[s].keys=o}}for(var s in t)if(t[s].hide)delete t[s];else{var l=t[s].sub_group||{},d=!0;for(var a in l)z.includes(a)&&!app.data.isStoreEnabled||!(l[a].keys&&l[a].keys.length>0)?delete l[a]:d=!1;d?delete t[s]:C.push(s)}return t}(n)}if(c.language_keys){r={};for(var p in c.language_keys){m=p.replace(/\./g,"$");r[m]=c.language_keys[p]}}if(c.custom_language_keys){a={};for(var p in c.custom_language_keys){m=p.replace(/\./g,"$");a[m]=c.custom_language_keys[p]}}"checkout.error_message.minimum_order_value"in c.custom_language_keys&&A.default_language==s&&(P=c.custom_language_keys["checkout.error_message.minimum_order_value"]),w.close(),app.render({template:"sites_v2:language:t_custom_language_keys/t_custom_language_keys",target:w.content,models:{language_info:l,key_str:u,languages_keys_model:r,default_keys_model:n,custom_languages_keys_model:a,app:app},context:{language:H},bindCtx:H,callback:function(){w.open(),app.render({template:"sites_v2:language:t_custom_language_keys/t_language_menu_list",target:$D.getById("custom_nav_sub_menu"),models:{language_info:l,key_str:u,languages_keys_model:r,default_keys_model:n,custom_languages_keys_model:a},context:{language:H},bindCtx:H,callback:function(){app.next()}});for(var e in u){var t=$D.getById("form_"+e);$E.bind(t,"submit",function(e){b(e,s)})}}})}}function v(){"0"==JSON.parse(this.responseText).status_code?t(cms_i18n("ui.settings.languages.reset.success")).success():t(cms_i18n("ui.settings.languages.reset.error")+" "+cms_i18n("ui.common.please.try.again.later")).error(),w.close()}function b(e,n){var i=n||this.getAttribute("data-lang-code"),r=e.target.id.replace("form_","");if(H.bindObj.custom_languages_keys_model){var a={};for(var o in H.bindObj.custom_languages_keys_model)a[o.replace(/\$/g,".")]=H.bindObj.custom_languages_keys_model[o];!H.bindObj.custom_languages_keys_model.checkout$error_message$minimum_order_value&&P==H.bindObj.custom_languages_keys_model.checkout$error_message$minimum_order_value||A.default_language!=i||(P="",require(["storesettings"],function(e){e.updateMinimumOrderValueErrorMessage(H.bindObj.custom_languages_keys_model.checkout$error_message$minimum_order_value,i)}));var s={};s.lang_code=i,s.dataid=r,$X.post({url:app.data.api_url+"/localization/"+i,headers:app.getHeaders(),args:s,bodyJSON:a,handler:y})}else t(cms_i18n("ui.common.nochangetosave")).info(),$D.getById("save_language_keys_"+r).removeAttribute("disabled")}function y(e){var n=JSON.parse(this.responseText);$D.getById("save_language_keys_"+e.dataid).removeAttribute("disabled"),"0"==n.status_code?(I(e.lang_code),t(cms_i18n("ui.settings.languages.update.success")).success(),$D.getById("save_language_keys_"+e.dataid).setAttribute("data-hb-submit","success"),delete H.bindObj.custom_languages_keys_model,w.close()):(t(cms_i18n("ui.settings.languages.update.error")+" "+cms_i18n("ui.common.please.try.again.later")).error(),$D.getById("save_language_keys_"+e.dataid).setAttribute("data-hb-submit","failure"))}function E(){w.close(),delete H.bindObj.custom_languages_keys_model}function T(e){return $D.hasClass(e,"hb-form-error")}function S(e){var t,n=[];if(""!=e&&k.hasOwnProperty(e)){for(var i in k)if(e==i){t=k[i].region;break}for(var r in t){var a={},o=t[r];a.code=o,a.name=L[o],n.push(a)}}return n}function x(e,t){app.render({template:"sites_v2:language:t_add_language_region/change_region_dialog",target:"regionSelectionDiv",models:{region_list:e},context:{language:H},callback:function(){t&&t(),B.languageOnSelectCallback&&B.languageOnSelectCallback()}})}function O(e){if(e&&"-1"!=e&&""!=e)for(var t in A.language_list){if(A.language_list[t].lang_code==e)return!0}return!1}function I(e){A.default_language&&A.default_language.startsWith(e)&&(N=!0)}var A={};A.default_language=null;var C=[],D={"X-Site-Id":app.data.siteId},w=null,R=null,N=!1,k=i.language_list,L=i.country_list,M=!1,P="",B={languagePicker:!1,languageOnSelectCallback:"",regionOnSelectCallback:"",addNewSubsite:!1},F=[];F=F.map(function(e){return e.replace(/\./g,"$")});var U={product:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.store.common.product"),sub_group:{label:{display_name:cms_i18n("ui.common.label")},message:{display_name:cms_i18n("ui.common.message")},sort_by:{display_name:cms_i18n("ui.common.sortby")},pagination:{display_name:cms_i18n("ui.product.pagination")},custom_field:{display_name:cms_i18n("ui.customfields.title")}}},category:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.common.category"),sub_group:{}},collection:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.store.common.collection"),sub_group:{}},cart:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.settings.language.cart"),sub_group:{action:{display_name:cms_i18n("ui.common.action")},sub_total:{display_name:cms_i18n("ui.store.common.subtotal")}}},checkout:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.settings.language.checkout"),sub_group:{steps:{display_name:cms_i18n("ui.settings.language.steps")},error:{display_name:cms_i18n("ui.common.error")},error_message:{display_name:cms_i18n("ui.shippingcarriers.error_message")},portal:{display_name:cms_i18n("ui.settings.language.portal")},address:{display_name:cms_i18n("ui.common.address")},shipping_address:{display_name:cms_i18n("ui.store.common.shipping_address")},billing_address:{display_name:cms_i18n("ui.store.common.billing_address")},shipping_methods:{display_name:cms_i18n("ui.settings.language.shipping_methods")},pickup_locations:{display_name:cms_i18n("ui.pickup.title")},customer_tax:{display_name:cms_i18n("ui.settings.language.customer_tax")},order_review:{display_name:cms_i18n("ui.settings.language.order_review")},order_summary:{display_name:cms_i18n("ui.store.common.order.summary")}}},sales:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.store.common.sales"),sub_group:{label:{display_name:cms_i18n("ui.common.label")},message:{display_name:cms_i18n("ui.common.message")}}},orders:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.store.common.orders"),sub_group:{title:{display_name:cms_i18n("ui.common.title")},ongoing:{display_name:cms_i18n("ui.settings.language.ongoing")},past:{display_name:cms_i18n("ui.settings.language.past")},monthrange:{display_name:cms_i18n("ui.settings.language.month_range")},empty:{display_name:cms_i18n("ui.settings.language.empty")},order:{display_name:cms_i18n("ui.store.common.order")}}},address:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.settings.language.address_book"),sub_group:{empty:{display_name:cms_i18n("ui.settings.language.empty")},add:{display_name:cms_i18n("ui.common.add")},update:{display_name:cms_i18n("ui.common.update")},edit:{display_name:cms_i18n("ui.common.edit")},delete:{display_name:cms_i18n("ui.common.delete")},select:{display_name:cms_i18n("ui.common.select")}}},smartRecommendations:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.recommendation.enable"),sub_group:{}},search:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.settings.language.product_search"),sub_group:{}},review:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.store.common.product.reviews"),sub_group:{comments:{display_name:cms_i18n("ui.settings.language.display_reviews")},form:{display_name:cms_i18n("ui.store.common.product.reviews")},formvalidate:{display_name:cms_i18n("ui.settings.language.warningmsg")},rating:{display_name:cms_i18n("ui.settings.language.commentbox.rating")}}},currency:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.common.currency"),sub_group:{}},buybutton:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.buybutton.title"),sub_group:{}},product_filters:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.productfilter.title"),sub_group:{}},delivery_location_availability:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.settings.warehouse.restriction.enable"),sub_group:{}},commentbox:{display_name:cms_i18n("ui.feature.commentbox.name",1),sub_group:{comments:{display_name:cms_i18n("ui.settings.language.displaycomments")},form:{display_name:cms_i18n("ui.feature.commentbox.name",1)},formvalidate:{display_name:cms_i18n("ui.settings.language.warningmsg")},rating:{display_name:cms_i18n("ui.settings.language.commentbox.rating")}}},portal:{display_name:cms_i18n("ui.feature.portal.name"),sub_group:{signin:{display_name:cms_i18n("ui.settings.language.portal.signin")},welcome:{display_name:cms_i18n("ui.settings.language.portal.welcome")},signout:{display_name:cms_i18n("ui.common.signout")},signup:{display_name:cms_i18n("ui.settings.language.portal.signup")},profile:{display_name:cms_i18n("ui.common.profile")},zsadmin:{display_name:cms_i18n("ui.common.admin")},verification:{display_name:cms_i18n("ui.settings.language.portal.verification")}}},menu:{display_name:cms_i18n("ui.feature.multiple_menu.name"),sub_group:{more:{display_name:cms_i18n("ui.settings.language.menu.more")}}},gallery:{display_name:cms_i18n("ui.feature.photoalbum.name",1),sub_group:{common:{display_name:cms_i18n("ui.feature.photoalbum.name",1)}}},forms:{display_name:cms_i18n("ui.feature.forms.name"),sub_group:{common:{display_name:cms_i18n("ui.settings.language.forms.common")},error:{display_name:cms_i18n("ui.common.error")},image:{display_name:cms_i18n("ui.common.image")}}},blog:{display_name:cms_i18n("ui.feature.blogs.name"),sub_group:{post:{display_name:cms_i18n("ui.settings.blogs.post")},message:{display_name:cms_i18n("ui.common.message")},rss:{display_name:cms_i18n("ui.settings.language.blogs.rssfeed")}}},crm:{display_name:cms_i18n("ui.feature.crm_form.name"),sub_group:{error:{display_name:cms_i18n("ui.common.error")}}},cookie:{display_name:cms_i18n("ui.feature.cookiebar.name"),sub_group:{text:{display_name:cms_i18n("ui.feature.cookiebar.name")},policyurl:{display_name:cms_i18n("ui.common.cookiebarpolicy")}}},page_title:{hide:!app.data.isStoreEnabled,display_name:cms_i18n("ui.common.page.title"),sub_group:{}},language:{display_name:cms_i18n("ui.common.languages"),sub_group:{common:{display_name:cms_i18n("ui.common.languages")}}},locale:{display_name:cms_i18n("ui.common.locale.switcher"),sub_group:{}},tc_widget:{hide:!(app.data.site_type==l.SITE_TYPE.TRAINER_CENTRAL),display_name:cms_i18n("ui.trainercentral.widgets"),sub_group:{}}},z=["coupons","rating","countdown"],H={initialise:function(e){B={languagePicker:!1,languageOnSelectCallback:"",regionOnSelectCallback:"",addNewSubsite:!1},Object.keys(e).forEach(function(t){B[t]=e[t]})},loadLanguageTabs:function(e){$D.getById("t_langtabs")?d(e):function(e){a.showPlaceHolder("sites_v2:settings:t_newsettings/t_cms_loading",{navmenu:"configuration",menuitem:"region"},function(){d(e)})}(e)},showLanguageList:d,addLanguage:function(){if(R=new e.Dialog({dialogClass:"demo-dialog",header:{headerLeft:{text:{headingText:cms_i18n("ui.settings.languages.addlanguage")},helper:{helperModuleName:"collection_article"}}},footer:!1,type:"fullscreen",escClose:!0,offsetTop:"0px",offsetLeft:"150px",mask:!0}),H.modelObj.priority_languages){var t=k,n={};for(var i in k)H.modelObj.priority_languages.includes(i)&&(delete t.i,n[i]=k[i]);k=Object.assign({},n,t)}app.render({template:"sites_v2:language:t_add_language/add_language_dialog",target:R.content,models:{language_list_json:k,region_list:[]},context:{language:H},callback:function(){R.open();var e=$D.getById("addlanguage_form");$E.bind(e,"submit",m)}})},closeAddLanguage:function(){R.close()},addNewLanguage:m,removeLanguage:function(){r.open({dialogClass:"demo-dialog sites-alert",header:!1,contentMsg:cms_i18n("ui.settings.languages.delete.dialog.msg"),okText:cms_i18n("ui.common.delete"),ok:function(e){var t=this.getAttribute("data-lang-code"),n=this.getAttribute("data-lang-id");if(t!=A.default_language&&"-1"!=t){var i={};i.language_id=n,i.lang_code=t,$X.del({url:app.data.api_url+"/language/"+t,headers:app.getHeaders(),bodyJSON:i,handler:h})}}.bind(this),okBtnClass:"mo-error"})},customLanguageKeys:g,resetLanguage:function(){var e=this.getAttribute("data-lang-code");"-1"!=e&&$X.del({url:app.data.api_url+"/localization/"+e,headers:D,bodyJSON:{},handler:v})},saveCustomKeys:b,cancelCustomKeys:E,onLanguageChange:function(){var e=$D.getById("language_select");T(e)&&n.removeError(e),x(S(e.value))},onRegionCheck:function(){if(!B.languagePicker){var e=$D.get("#region_select");T(e)&&n.removeError(e);var t=$D.getById("language_select").value,i=e.value,r="-1";"-1"!=t&&void 0!=t&&(r="-1"!=i&&void 0!=i?t+"_"+i:t),O(r)&&n.showError($D.get("#region_select"),cms_i18n("ui.settings.languages.languageexists"),!0)}B.regionOnSelectCallback&&B.regionOnSelectCallback()},isLanguageExists:O,exitLanguage:function(){N&&($E.dispatch(document.body,"canvas:reload"),N=!1),w&&w.dismiss(),R&&R.dismiss()},selectTab:function(e){-1!=C.indexOf(e)&&(e+="_keys",C.forEach(function(e){$D.removeClass($D.getById(e+"_keys-c"),"active"),$D.removeClass($D.getById(e+"_keys"),"active")}),e&&($D.addClass($D.getById(e+"-c"),"active"),$D.addClass($D.getById(e),"active")))},editLanguage:function(e){var t=e.target.dataset.langCode;t&&app.navigate(app.data.builder_base_url+"/settings/uitranslation/edit/"+t)},editLanguageDetails:function(e,t){g(t)},selectLanguageMenu:function(){for(var e=this.id,t=$D.getByClass("is-selected",$D.getById("custom_language_container")),n=0;n<t.length;n++)$D.removeClass(t[n],"is-selected");var i=$D.getById(e);$D.addClass(i,"is-selected");var r=$(".tab_content_data");for(n=0;n<r.length;n++)$D.addClass(r[n],"sites-display-none");var a=$D.getById(e+"-c");$D.removeClass(a,"sites-display-none"),$E.dispatch(a,"hbui:afterRender")},showUiTranslation:u,getRegionForLang:S,renderRegion:x};return H}),function(e,t){"function"==typeof define&&define.amd?define("hbTour",t):e.hbTour=t()}(this,function(){function e(e,t){var n=e.scrollX||y.scrollX,i=e.scrollY||y.scrollY,r=e.getBoundingClientRect(e),a={top:r.top,left:r.left,width:r.width,height:r.height,bottom:r.top+r.height,right:r.left+r.width};return t&&(a.left+=n,a.top+=i,a.bottom+=i,a.right+=n),a}function t(e,t){var n=y.getComputedStyle(e);return(n=y.getComputedStyle(e))?n[t]:""}function n(e,t){var n=localStorage.getItem("hb_tour");(n=n?JSON.parse(n):{})[e]=t,localStorage.setItem("hb_tour",JSON.stringify(n))}function i(e){var t=localStorage.getItem("hb_tour");return t?JSON.parse(t)[e]:null}function r(){return b&&Object.keys(b).length>0?b.currentIndex:i("currentIndex")}function a(e){n("currentIndex",e),b.currentIndex=e}function o(n,i,a){var o,c,p,m=b.contentEl,f=!1,h=r();m||((m=document.createElement("div")).className="hbTour__container hbTour-arr tour-arrow-top",b.contentEl=m,f=!0);var g=O;a.title||(a.title=""),g=(g=g.replace("{title}",a.title)).replace("{content}",a.content);var v=i.steps.length,E=h+1+"/"+v;g=g.replace("{progress}",E),f||($E.unbind(o,"click",l),$E.unbind(c,"click",d),$E.unbind(p,"click",u)),m.innerHTML=g,o=$D.get(".hbTour__btn-secondary",m),c=$D.get(".hbTour__btn-primary",m),p=$D.get(".hbTour__closeicon",m),a.nextText&&(c.innerHTML=a.nextText),a.prevText&&(o.innerHTML=a.prevText),a.interact?b.noInteractEl.style.display="none":b.noInteractEl.style.display="block",0===h?$D.addClass(o,"tour_disable"):$E.bind(o,"click",l),h===v-1?(void 0===i.endText?c.innerHTML="EndTour":c.innerHTML=i.endText,$E.bind(c,"click",u)):$E.bind(c,"click",d),$E.bind(p,"click",u),f&&document.body.appendChild(m),function(e){for(var t=e.classList,n=t.length-1;n>=0;n--)"hbTour__container"!==t[n]&&$D.removeClass(e,t[n])}(m),a.noBox?$D.addClass(m,"noBox"):$D.removeClass(m,"noBox"),function(e){var t;b.maskTop.style.cssText="",b.maskBot.style.cssText="",b.maskLeft.style.cssText="",b.maskRight.style.cssText="",e.maskStyle&&(t=e.maskStyle,b.maskTop.style.cssText=t,b.maskBot.style.cssText=t,b.maskLeft.style.cssText=t,b.maskRight.style.cssText=t)}(a),a.containerClass&&$D.addClass(m,a.containerClass),function(n,i,r){var a=s(),o="fixed"===t(n,"position"),l=r.customPos;i.style.marginBlockStart=0,o?($D.addClass(b.maskTop,"tour__fixed-mask"),$D.addClass(b.maskBot,"tour__fixed-mask"),$D.addClass(b.maskLeft,"tour__fixed-mask"),$D.addClass(b.maskRight,"tour__fixed-mask"),$D.addClass(document.body,"tour__fixed-body")):($D.removeClass(b.maskTop,"tour__fixed-mask"),$D.removeClass(b.maskBot,"tour__fixed-mask"),$D.removeClass(b.maskLeft,"tour__fixed-mask"),$D.removeClass(b.maskRight,"tour__fixed-mask"),$D.removeClass(document.body,"tour__fixed-body"));var d,u=e(i);l?((d=l).right=l.left+l.width,d.bottom=l.top+l.height):d=e(n);var c,p=o?0:window.scrollY,m=d.top+p;"left"!==r.pos&&"right"!==r.pos||(m=d.top+d.height/2-u.height/2,l?m=l.top:m<0?m=0:m+u.height>a.h&&(m=a.h-u.height-15));"left"===r.pos?l?c=l.left:(c=d.left-u.width-10)<0&&(c=d.left+d.width+10):"right"===r.pos?l?c=l.right+10:(c=d.left+d.width+10)+u.width>a.w&&(c=d.left-u.width-10):(m-u.height<15?m=m+d.height+15:i.style.marginBlockStart=-(u.height+15)+"px",a.w<d.left+d.width/2+y.scrollX+u.width/2?c=d.right-u.width:(c=d.left+d.width/2+y.scrollX-u.width/2)<0&&(c=0));_(i,S,c,T),i.style.insetBlockStart=m+T,b.maskTop.style.display="block",b.maskTop.style.insetBlockStart=0,b.maskTop.style.insetInlineStart=0,b.maskTop.style.insetInlineEnd=0,b.maskTop.style.height=Math.floor(d.top+p)+T,b.maskRight.style.display="block",b.maskRight.style.insetBlockStart=Math.floor(d.top+p)+T,_(b.maskRight,S,Math.floor(d.right),T),_(b.maskRight,x,0,T),b.maskRight.style.height=Math.floor(a.h-d.top-p)+T,b.maskBot.style.display="block",b.maskBot.style.insetBlockStart=Math.floor(d.bottom+p)+T,_(b.maskBot,S,0,T),b.maskBot.style.width=Math.floor(d.right)+T,b.maskBot.style.height=Math.floor(a.h-d.bottom-p)+T,b.maskLeft.style.display="block",b.maskLeft.style.insetBlockStart=Math.floor(d.top+p)+T,_(b.maskLeft,S,0,T),b.maskLeft.style.width=Math.floor(d.left)+T,b.maskLeft.style.height=Math.floor(d.height)+T,l&&(b.noInteractEl.style.height=l.height+T,b.noInteractEl.style.width=l.width+T,_(b.noInteractEl,S,l.left,T),b.noInteractEl.style.insetBlockStart=l.top+T)}(n,m,a)}function s(){var e=document.body,t=document.documentElement;return{h:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),w:Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)}}function l(e){p()}function d(e){c()}function u(e){f(e)}function c(){var e=r()+1;!b||e>v[b.currentTour].steps.length-1?f():(g(),a(e),m(e,"next"))}function p(){var e=r()-1;!b||e<0?f():(a(e),m(e,"prev"))}function m(t,n){function r(){!1!==h(u)?b&&($D.addClass(u,"hbTour__current"),b.currentEl=u,function(t){var n=!1;b.bgEl||(b.bgEl=document.createElement("div"),b.bgEl.className="tour__bg-el",n=!0),b.noInteractEl||(b.noInteractEl=document.createElement("div"),b.noInteractEl.className="no-interact"),b.bgEl.style.display="none",b.bgEl.style.height=$D.css(t,"height"),b.bgEl.style.width=$D.css(t,"width"),_(b.bgEl,S,e(t,!0).left,T),b.bgEl.style.insetBlockStart=e(t,!0).top+T,b.noInteractEl.style.height=$D.css(t,"height"),b.noInteractEl.style.width=$D.css(t,"width"),_(b.noInteractEl,S,e(t,!0).left,T),b.noInteractEl.style.insetBlockStart=e(t,!0).top+T,n&&($D.append(document.body,b.noInteractEl),$D.append(document.body,b.bgEl))}(u),$E.dispatch(u,"hbTour:open"),s&&("next"===n?s.onNext&&s.onNext(s,l):"prev"===n&&s.onPrev&&s.onPrev(s,l)),o(u,a,d),d.onOpen&&d.onOpen(d,t),D(u,600)):f()}if(b&&b.running){b.currentEl&&$D.removeClass(b.currentEl,"hbTour__current");var a=v[b?b.currentTour:i("currentTour")];if(a){var s,l,d=a.steps[t];"next"===n?(l=t-1,s=a.steps[l]):(l=t+1,s=a.steps[l]);var u=d&&$D.get(a.steps[t].el);if(u&&d){if(s){if("next"===n&&s.onBeforeNext)return void s.onBeforeNext(s,r);if("prev"===n&&s.onBeforePrev)return void s.onBeforePrev(s,r)}r()}else f()}}}function f(e){e="string"==typeof e?e:b.currentTour;var t=v[e];t.onTourEnd&&t.onTourEnd(e),b.currentEl&&$D.removeClass(b.currentEl,"hbTour__current"),b.noInteractEl&&$D.remove(b.noInteractEl),b.bgEl&&$D.remove(b.bgEl),b.contentEl&&$D.remove(b.contentEl),b.maskTop&&$D.remove(b.maskTop),b.maskBot&&$D.remove(b.maskBot),b.maskLeft&&$D.remove(b.maskLeft),b.maskRight&&$D.remove(b.maskRight),b=null,localStorage.removeItem("hb_tour"),g(),$D.removeClass(document.body,"tour__fixed-body"),$E.dispatch(document.body,"hbTour:end",{tour_name:e})}function h(n,i){var r=n;if($D.isNode(r)||(r=(i||document).querySelector(n)),!function(e){for(;e&&e.nodeType!==Node.DOCUMENT_NODE;){if("none"===t(e,"display")||"hidden"===t(e,"visibile"))return!1;e=e.parentElement}return!0}(r))return!1;if(!r||"none"===t(r,"display")||"hidden"===t(r,"visibile"))return!1;var a=e(r,!0);return a.left>=0&&a.top>=0&&a.bottom>=0&&a.right<=s().w}function g(){for(var e=E.length-1;e>=0;e--)C(E[e]);E=[]}function _(e,t,n,i){var r="rtl"==document.documentElement.getAttribute("dir"),a=e.style;r?t==S?a[x]=n+i:t==x&&(a[S]=n+i):a[t]=n+i}var v={},b={},y=window,E=[],T="px",S="insetInlineStart",x="insetInlineEnd",O='<div class="hbTour__outer__container">   \t\t<div class="hbTour__heading">      \t\t<h3>{title}</h3>   \t\t</div>   \t\t<div class="hbTour__content">{content}</div>\t\t<div class="hbTour__footer">   \t\t\t<div class="hbTour__slidecount">{progress}</div>\t   \t\t<div class="\thbTour__btn-container">\t      \t\t<div class="hbTour__btn-secondary">Primary</div>\t      \t\t<div class="hbTour__btn-primary">Secondary</div>\t   \t\t</div>\t\t</div>\t\t<div class="hbTour__closeicon">   \t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="#3A5560" stroke="#3A5560" d="M6.88 6l3.94-3.93a.63.63 0 1 0-.89-.89L6 5.12 2.07 1.18a.63.63 0 1 0-.89.89L5.12 6 1.18 9.93a.63.63 0 1 0 .89.89L6 6.88l3.93 3.94a.62.62 0 0 0 .89 0 .63.63 0 0 0 0-.89L6.88 6z"></path></svg>\t\t</div>\t</div>',I=!!(y.requestAnimationFrame||y.webkitRequestAnimationFrame||y.mozRequestAnimationFrame&&y.mozCancelRequestAnimationFrame||y.oRequestAnimationFrame||y.msRequestAnimationFrame),A=function(e,t,n){function i(){var s,l=(new Date).getTime();l-r>=t&&(s=e.call(),r=(new Date).getTime()),s||n<l-a?C(o):o.value=requestAnimationFrame(i)}if(!I)return y.setInterval(e,t);var r=(new Date).getTime(),a=r,o={};return n=n||3e5,o.value=requestAnimationFrame(i),o},C=function(e){null!==e&&void 0!==e.value&&(y.cancelAnimationFrame(e.value),y.cancelAnimationFrame?y.cancelAnimationFrame(e.value):y.webkitCancelAnimationFrame?y.webkitCancelAnimationFrame(e.value):y.webkitCancelRequestAnimationFrame?y.webkitCancelRequestAnimationFrame(e.value):y.mozCancelRequestAnimationFrame?y.mozCancelRequestAnimationFrame(e.value):y.oCancelRequestAnimationFrame?y.oCancelRequestAnimationFrame(e.value):y.msCancelRequestAnimationFrame?y.msCancelRequestAnimationFrame(e.value):clearInterval(e))},D=function(){function e(e){var t,n,i,r,a="fixed"===y.getComputedStyle(e).position,o=a?0:y.scrollX,s=a?0:y.scrollY,l=e.getBoundingClientRect();return t=l.left+o-window.innerWidth/2+Math.min(l.width,window.innerWidth)/2,n=l.top+s-window.innerHeight/2+Math.min(l.height,window.innerHeight)/2,i=t-o,r=n-s,{x:t,y:n,differenceX:i,differenceY:r}}var t,n;return function(i,r,a){function o(){i!==t&&(cancelAnimationFrame(n),i=t,l=Date.now()+r,s=e(i));var d=Date.now(),u=(r-(l-d))/r,c=a(u);document.body.scrollLeft=s.x-(s.differenceX-s.differenceX*c),document.body.scrollTop=s.y-(s.differenceY-s.differenceY*c),u<1&&(n=requestAnimationFrame(o))}if(i){t=i,r=r||750,a=a||function(e){return e};var s=e(i),l=Date.now()+r;o()}}}();return{add:function(e){if(void 0===e.tourName)throw new Error("Tour Name not specified");if(v[e.tourName])throw new Error("Tour exists");v[e.tourName]=e},state:b,init:function(e){var t=function(){if(b&&b.running)return-1;var e=localStorage.getItem("hb_tour");return!!e&&!0===(e=JSON.parse(e)).running&&(b={currentIndex:e.currentIndex,currentTour:e.currentTour,running:!0},e)}();-1!==t&&(t&&f(t.currentTour),(b={currentIndex:-1,currentEl:null,bgEl:null,noInteractEl:null,maskEl:null,running:!0,currentTour:e})&&(b.bgEl&&$D.remove(b.bgEl),b.noInteractEl&&$D.remove(b.noInteractEl),b.maskEl&&$D.remove(b.maskEl)),function(e){n("currentTour",e)}(e),a(-1),n("running",!0),b.maskTop=document.createElement("div"),b.maskBot=document.createElement("div"),b.maskLeft=document.createElement("div"),b.maskRight=document.createElement("div"),b.maskTop.className="hbTour__mask",b.maskBot.className="hbTour__mask",b.maskLeft.className="hbTour__mask",b.maskRight.className="hbTour__mask",$D.append(document.body,b.maskTop),$D.append(document.body,b.maskBot),$D.append(document.body,b.maskLeft),$D.append(document.body,b.maskRight),function(e){v[e].onStart&&v[e].onStart()}(e),c())},next:c,prev:p,end:f,tours:v,waitForEvent:function(e,t,n){$E.unbind(e,t),$E.bind(e,t,function(e){$E.unbind(this,e.type),n()})},waitForElementVisible:function(e,t,n,i){var r=A(function(){if(h(e,n))return t(),!0},100,i);E.push(r)},waitForElementPresent:function(e,t,n,i){var r=A(function(){if(function(e,t){return(t||document).querySelector(e)}(e,n))return t(),!0},100,i);E.push(r)}}}),define("feedback",["hbDialog","notify","language","csrf","hbTour","asap_widget","CONST"],function(e,t,n,i,r,a,o){"use strict";function s(e,t){var n=function(){var t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n]}();$E.unbind(e,n,function(){y&&y()}),t&&$E.bind(e,n,function(){y&&y(),y=null})}function l(){0==JSON.parse(this.responseText).status_code?T?t(cms_i18n("ui.settings.delete.store.successmessage")).success():t(cms_i18n("ui.cms.feedback.sent")).success():t(cms_i18n("ui.cms.feedback.notSent")).warning(),g.dismiss()}function d(e){u(),void 0===e&&(e=S),r.init(e)}function u(e){E&&E.close()}function c(){var t=this;(v=new e.Dialog({dialogClass:"app-header-dd",header:!1,footer:!1,position:"below-left",type:"inplace",toggle:!1,closeBtn:!1,okBtn:!1,cancelBtn:!1,closeOnOutsideClick:!0,referenceElement:t,onOk:function(e){},onCancel:function(){},onClose:function(){m(this.liCtx)}})).liCtx=t,app.render({template:"common:app_header:t_app_header/t_app_header_dropdown",target:v.content,context:{feedback:C,asap_widget:a},models:{data:app.data,ASAP_CONSTANT:a.ASAP_CONSTANT},bindCtx:C,callback:function(){$E.unbind(t,"click",c),v.open()}})}function p(){var t=this,n=void 0==app.data.feedback||app.data.feedback;(b=new e.Dialog({dialogClass:"app-header-dd",header:!1,footer:!1,position:"below-left",type:"inplace",toggle:!1,closeBtn:!1,okBtn:!1,cancelBtn:!1,closeOnOutsideClick:!0,referenceElement:t,onOk:function(e){},onCancel:function(){},onClose:function(){m(this.liCtx)}})).liCtx=t,app.render({template:"common:app_header:t_app_header/t_app_header_thumbnail_part",target:b.content,context:{feedback:C},models:{data:app.data,feedback:n},bindCtx:C,callback:function(){$E.unbind(t,"click",p),b.open()}})}function m(e){for(var t,n="#user-thumbnail-holder",i=$D.getAll(n,e),r=$D.getAll("[data-help-container]",e),a=0;t=i[a];a++)$E.bind(t,"click",p);for(var o,s=0;o=r[s];s++)$E.bind(o,"click",c);$D.matches(e,n)&&($E.unbind(e,"click",p),$E.bind(e,"click",p)),$D.matches(e,"[data-help-container]")&&($E.unbind(e,"click",c),$E.bind(e,"click",c))}function f(e){var t=e.detail;"modals"==t.settings.type&&("opening"==t.state?$D.getAll(".zs-topband-fixed").forEach(function(e){$D.css(e,"z-index","10")}):"closing"==t.state&&$D.getAll(".zs-topband-fixed").forEach(function(e){$D.css(e,"z-index","")}))}function h(){require(["sitefeaturehits"],function(e){e.tourHits('{"currentTour":"DashboardTour","currentIndex":-1}')}),u()}var g,_,v,b,y,E,T=!1,S="QuickTour",x={tourName:S,showProgress:!0,showIndex:!0,endText:cms_i18n("ui.cms.tour.endtour"),onStart:function(){var e=$D.getById("element-list");$D.removeClass(e,"selected"),y=null},onTourEnd:function(){var e=localStorage.getItem("hb_tour");require(["sitefeaturehits"],function(t){t.tourHits(e)})},steps:[{el:"#zp_add_shortcut",title:cms_i18n("ui.cms.tour.quickTour.1.title"),content:cms_i18n("ui.cms.tour.quickTour.buildingblocks.v2.message"),interact:!1,pos:"left",nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous"),noBox:!1,onBeforeNext:function(e,t){var n=$D.getById("add-sections");y=t;var i=$D.getById("element-list");$D.addClass(i,"selected"),n.click();var a=JSON.parse(localStorage.getItem("hb_tour")).currentIndex;r.tours[S].steps[a].customPos.width=866;var o=$(r.tours[S].steps[a].el);r.tours[S].steps[a].customPos.height=o.getBoundingClientRect(o).height,s(i,!0)},containerClass:"no-box"},{el:"#element-list",customPos:{top:50,left:$D.get('[dir="rtl"]')?-866:0},title:cms_i18n("ui.cms.tour.quickTour.addsection.v2.title"),content:cms_i18n("ui.cms.tour.quickTour.addsection.v2.message",app.data.product_title),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),onBeforeNext:function(e,t){y=t;var n=$D.getById("element-list");$D.removeClass(n,"selected"),s(n,!1),y()},onBeforePrev:function(e,t){y=t;var n=$D.getById("element-list");$D.removeClass(n,"selected"),y()},prevText:cms_i18n("ui.common.previous")},{el:"#zp_tools",title:cms_i18n("ui.cms.tour.quickTour.tools.v2.title"),content:cms_i18n("ui.cms.tour.quickTour.tools.v2.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous"),onBeforePrev:function(e,t){y=t;var n=$D.getById("element-list");$D.addClass(n,"selected"),s(n,!0)},onBeforeNext:function(e,t){y=t;var n=$D.get("#visualEditorSettings"),i=n.getBoundingClientRect();if(0==i.width&&0==i.height){$D.get("#openVisualIcon").click()}s(n,!0),y()}},{el:"#visualEditorSettings",title:cms_i18n("ui.feature.VisualEditor.name"),content:cms_i18n("ui.cms.tour.quickTour.ve.v2.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")},{el:app.data.sub_site_map&&app.data.root_resource_id&&app.data.sub_site_map[app.data.root_resource_id]&&app.data.sub_site_map[app.data.root_resource_id].settings.flag_resource_publish?"#zp_publish_dd_appheader":"#zp_publish_appheader",title:cms_i18n("ui.feature.publish.name"),content:cms_i18n("ui.cms.tour.quickTour.pubhelp.v2.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")},{el:"#open_sidebar",title:cms_i18n("ui.cms.tour.quickTour.qa.v2.title"),content:cms_i18n("ui.cms.tour.quickTour.qa.v2.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")},{el:"#zs-help-container",title:cms_i18n("ui.index.site.help"),content:cms_i18n("ui.cms.tour.quickTour.finalwords.message",app.data.product_title,app.data.support_mail),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")}],welcome_step:{headingText:cms_i18n("ui.cms.tour.quickTour.welcome.title"),content:cms_i18n("ui.cms.tour.quickTour.welcome.message",app.data.product_title),startBtnAction:d.bind(null,S)},uri_path:"/zcms/editor"},O=[{el:"#sites-container-id #sites-dtour-dashboard",title:cms_i18n("ui.dashboard.dashboard"),content:cms_i18n("ui.cms.tour.dashboardTour.dashboard.message"),interact:!1,pos:"left",nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous"),noBox:!1,containerClass:"no-box"},{el:"#sites-container-id #sites-dtour-data",title:cms_i18n("ui.common.content"),content:cms_i18n("ui.cms.tour.dashboardTour.data.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")},{el:"#sites-container-id #sites-dtour-settings",title:cms_i18n("ui.common.settings"),content:cms_i18n("ui.cms.tour.dashboardTour.settings.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")},{el:"#sites-container-id #sites-dtour-reports",title:cms_i18n("ui.cms.tour.dashboardTour.reports.title"),content:cms_i18n("ui.cms.tour.dashboardTour.reports.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")},{el:"#zp_editsite_appheader",title:cms_i18n("ui.cms.tour.dashboardTour.editsite.title"),content:cms_i18n("ui.cms.tour.dashboardTour.editsite.message"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")}];if(app.data.share_options&&app.data.share_options.subsite&&!app.data.isStoreEnabled){var I={el:"#sites-container-id #sites-dtour-subsite",title:cms_i18n("ui.feature.subsite.name",2),content:cms_i18n("ui.feature.subsite.desc"),pos:"right",interact:!1,nextText:cms_i18n("ui.common.next"),prevText:cms_i18n("ui.common.previous")};O.splice(2,0,I)}var A={tourName:"DashboardTour",showProgress:!0,showIndex:!0,endText:cms_i18n("ui.cms.tour.endtour"),onStart:function(){},onTourEnd:function(){var e=localStorage.getItem("hb_tour");require(["sitefeaturehits"],function(t){t.tourHits(e)})},steps:O,welcome_step:{headingText:cms_i18n("ui.cms.tour.dashboardTour.welcome.title",app.data.product_title),content:cms_i18n("ui.cms.tour.dashboardTour.welcome.message",app.data.product_title)},uri_path:"/zcms"};r.add(x),r.add(A);var C={init:function(){m(document),app.extension.add("feedback","afterRender",function(e,t){var n=e.targetId;$D.isNode(n)||(n=$D.get("#"+n)),m(n),t()}),$E.bind(document.body,"hbDialog:beforeOpen",f),$E.bind(document.body,"hbDialog:closing",f)},openFeedbackDialog:function(n,r,a){var s=cms_i18n((T=!(null==r||!r)&&r)?"ui.settings.delete.store.heading":"ui.cms.feedback.title");(!g||g&&"closed"===g.state)&&(g=new e.Dialog({dialogClass:"domain-dialog",header:!0,headingText:s,footer:!0,offsetTop:"50px",closeBtn:!0,offsetLeft:"100px",okText:"Send",onOk:function(){var e=$("#feedback_form");$E.fireEvent(e,"submit")}}),app.render({template:"common:feedback:t_feedback/t_feedback",target:g.content,context:{feedback:C},models:{feedback:{},is_delete:T,feedback_type:o.FEED_BACK_TYPE,subscriptionPage:app.data.subscriptionPage},bindCtx:C,callback:function(){g.open(),$("#feedback_text").focus(),a&&($D.getById("feedback_type").options[a.type-1].setAttribute("selected",!0),$D.getById("feedback_text").value=a.message),$E.bind($("#feedback_form"),"hbValidate:submit",function(e){"success"==e.detail.status&&(g.okBtn.disabled=!0,function(e){e=e||{};var n=utils.getOrDefault(C,"bindObj.feedback.feedback_content",$D.getById("feedback_text").value),r=utils.getOrDefault(C,"bindObj.feedback.feedback_type",e.is_ai?e.type:"1");if(n.length>5e3)return t(cms_i18n("ui.cms.common.field.error.length",cms_i18n("ui.cms.feedback.name"),5e3)).error(),void(g.okBtn.disabled=!1);T&&(n="Request for store deletion - "+n);var a={feedbackType:r,feedbackContent:n};void 0===app.data.siteId||"null"==app.data.siteId?$X.post({url:"/zs-site/api/v1/feedback",bodyJSON:a,headers:i.getCSRFHeader(),handler:l}):(a.siteId=app.data.siteId,$X.post({url:"/zs-site/api/v1/feedback",bodyJSON:a,handler:l}))}(a))})}}))},openVideoDialog:function(){(!_||_&&"closed"===_.state)&&(_=new e.Dialog({dialogClass:"domain-dialog-style med",header:!1,escClose:!0,closeBtn:!1,cancelBtn:!1,okText:cms_i18n("ui.cms.video.ok.button"),offsetTop:"50px",offsetLeft:"100px",contentClass:"h-vc",onOk:function(){_.close()}}),app.render({template:"common:feedback:t_watch_video/t_watch_video",target:_.content,context:{feedback:C},callback:function(){_.open()}}))},openTour:d,openTourWelcome:function(t){u(),E=new e.Dialog({type:"modals",header:!1,footer:!1,dialogClass:"domain-dialog med sites-welcome",closeBtn:!1}),app.render({template:"sites_v2:dashboard:t_v2_announcement/annoucement_dialog_v2",target:E.content,callback:function(){E.open()},context:{startBtnAction:C["open"+t],closeWelcomeForWatchLater:h},models:{welcome:r.tours[t].welcome_step},bindCtx:C})},openTourByUri:function(e){var t=0==window.location.pathname.indexOf("/zcms/editor")?app.data.builder_url:app.data.sitesBaseUrl,n={};Object.keys(r.tours).forEach(function(e){n[r.tours[e].uri_path]=r.tours[e].tourName}),t in n&&d(n[t])},openHelpDialog:c,openUserDialog:p,addRecordToMics:function(e){!function(e,t){var n={};n.storeId=app.data.storeId;var r=i.getCSRFHeader();r["X-Site-Id"]=app.data.siteId,$X.post({url:t,headers:r,params:n,bodyJSON:e})}({},"/zstore/api/feature-hits/"+e.target.id)}};return Object.keys(r.tours).forEach(function(e){C["open"+e]=C.openTour.bind(null,e)}),C}),define("resource",["hbUI","CONST","notify","hbDialog"],function(e,t,n,i){"use strict";function r(e,t,n){var i="",o=a(e,t);if(o&&o.resource_type!==M){var s=o.resource_url;o.resource_type==P&&(s=o.resource_url.replace(/.html$/i,"")),n.push(s),i=r(e,o.parent_id,n)}else 0===o.resource_type&&(i+=L+n.reverse().join(L));return i}function a(e,t){var n,i,r;if(e.resource_id===t)return e;i=e[k];for(n in i)if(r=a(i[n],t))return r;return!1}function o(t){return e.convertNested(t,{id_key:"resource_id",child_key:k,parent_key:"parent_id",root_id:"-1",text_val_key:"resource_url",value_key:"resource_id"})}function s(e){var n=U;return n!=t.ROLE.OWNER&&(n=p(e)),n==t.ROLE.OWNER}function l(e){var n=U;return n!=t.ROLE.OWNER&&(n=p(e)),n==t.ROLE.OWNER||n==t.ROLE.ADMIN||n==t.ROLE.DEVELOPER||n==t.ROLE.STORE_ADMIN||n==t.ROLE.LANDING_PAGE_PORTAL_ADMIN||n==t.ROLE.TRAINERCENTRAL_PORTAL_ADMIN||n==t.ROLE.TRAINERCENTRAL_TRAINER}function d(e){var n=U;return n!=t.ROLE.OWNER&&(n=p(e)),n==t.ROLE.AUTHOR_PUBLISH||n==t.ROLE.AUTHOR||n==t.ROLE.GUEST||n==t.ROLE.GUEST_PUBLISH||n==t.ROLE.LANDING_PAGE_WORKSPACE_ADMIN||n==t.ROLE.LANDING_PAGE_DESIGNER}function u(e){var n=U;return n!=t.ROLE.OWNER&&(n=p(e)),n==t.ROLE.OWNER||n==t.ROLE.ADMIN||n==t.ROLE.DEVELOPER||n==t.ROLE.STORE_ADMIN||n==t.ROLE.LANDING_PAGE_PORTAL_ADMIN||n==t.ROLE.AUTHOR_PUBLISH||n==t.ROLE.AUTHOR||n==t.ROLE.GUEST||n==t.ROLE.GUEST_PUBLISH||n==t.ROLE.LANDING_PAGE_WORKSPACE_ADMIN||n==t.ROLE.LANDING_PAGE_DESIGNER||n==t.ROLE.TRAINERCENTRAL_PORTAL_ADMIN||n==t.ROLE.TRAINERCENTRAL_TRAINER}function c(e){var n=U;return n!=t.ROLE.OWNER&&(n=p(e)),n==t.ROLE.LANDING_PAGE_VIEWER||n==t.ROLE.SITE_VIEWER}function p(e){if(e)return m(e);if(app.data.resource_role)return app.data.resource_role;var t=$D.getById("pagecanvas");return t&&t.contentWindow.zs_resource_id?m(t.contentWindow.zs_resource_id):U}function m(e){if(U==t.ROLE.OWNER)return U;for(var n in B){var i=B[n];if(i.resource_id==e){return i.role==t.ROLE.ADMIN_SUPPORT?t.ROLE.ADMIN:i.role}}var r=a(F,e),o=r.parent_id;if(r&&o!=e)return m(o);for(var n in H)if(H[n]&&H[n].node.resource_id==e&&H[n].node.parent_id!=e)return m(H[n].node.parent_id);return-1}function f(e,t){if(l())return o(e);if(d()||c()){e=o(e);for(var n in e)if(void 0!=R[e[n].value])R[e[n].value].node.isAllowed?e[n].node.disabled=!!e[n].node.disabled:e[n].node.disabled=!0;else if(""!=H&&null!=H.parent_id)return R[H.parent_id].node.isAllowed;return e}}function h(e,t,n){for(var i=0;i<e.length;i++)t.includes(e[i].parent_id)||t.includes(e[i].resource_id)?(e[i].disabled=!0,e[i].children.length>0&&h(e[i].children,e[i].resource_id,n)):n.includes(e[i].resource_type)?(e[i].disabled=!1,e[i].children.length>0&&h(e[i].children,t,n)):(e[i].disabled=!0,h(e[i].children,t,n))}function g(e,t){e.isAllowed=!1;for(var n in B)if((B[n].resource_id==e.resource_id||""!=t&&t.isAllowed)&&(e.isAllowed=u(e.resource_id)),e.children&&0!=e.children.length){var i=e.children;for(var r in i)g(i[r],e)}}function _(e,n){if(l(e))return!0;if(d(e)||c(e)){if(N||(g(F,""),v()),null!=R[e])return R[e].node.resource_type==t.RESOURCE_TYPE.ROOT&&null!=n?R[n].node.isAllowed:R[e].node.isAllowed;if(""!=H&&null!=H[e])return H[e].node.isAllowed}}function v(t){var n=[];N=!0,t?n.push(t):n.push(F);var i=e.convertNested(n,{id_key:"resource_id",child_key:"children",parent_key:"parent_id",root_id:"-1",text_val_key:"resource_url",value_key:"resource_id"});R=b(i,"parent_id"),g(F,"")}function b(e,t){for(var n={},i=0;i<e.length;i++)n[e[i].value]=e[i],n[e[i].value].parent_id=e[i].node[t];return n}function y(e){if(N||(g(F,""),v()),null!=R[e]){if(R[e].node.resource_type==t.RESOURCE_TYPE.PAGE)return R[e].node.resource_name;if(t.DIRECTORY_TYPES.includes(R[e].node.resource_type)||R[e].node.resource_type==t.RESOURCE_TYPE.ROOT)return R[e].node.resource_url}}function E(e){return N||(g(F,""),v()),null!=R[e]?R[e]:""!=H&&null!=H[e]?H[e]:null}function T(){var e,n=$("#pagecanvas").contentWindow,i=app.data.enable_blogs,r=!!i;j.editable_container=".zpcontent-container";var a=O(n.zs_resource_id),o=A(n.zs_resource_id),u=I(n.zs_resource_id);if(n.zs_content_format==t.CONTENT_FORMAT.MARKDOWN_FORMAT)e=!1;else if(n.zs_content_format==t.CONTENT_FORMAT.BUILDER_FORMAT)if(parseInt(n.zs_resource_type)==t.RESOURCE_TYPE.PAGE)if(app.data.sub_site_map[app.data.root_resource_id].settings.flag_draft_state&&app.data.sub_site_map[app.data.root_resource_id].settings.flag_pagereview_state)if(s(n.zs_site_resource_id))e=!0;else if(l(n.zs_site_resource_id)){e=!0;app.data.sub_site_map[app.data.root_resource_id].settings.flag_pagereview_state?n.zs_resource_contentstate&&n.zs_resource_contentstate==t.CONTENT_STATE.IN_REVIEW&&(e=!1,S()&&(e=!0)):e=!0}else d(n.zs_resource_id)&&(e=!0,n.zs_resource_contentstate&&n.zs_resource_contentstate==t.CONTENT_STATE.IN_REVIEW&&(e=!1));else e=_(n.zs_resource_id);else if(parseInt(n.zs_resource_type)==t.RESOURCE_TYPE.BLOG)e=!1;else if(parseInt(n.zs_resource_type)==t.RESOURCE_TYPE.BLOG_POST)if(s(n.zs_site_resource_id))e=!0;else if(l(n.zs_site_resource_id)){e=!0;app.data.sub_site_map[app.data.root_resource_id].settings.flag_postreview_state?n.zs_post_details&&n.zs_post_details.publish_status==t.POST_STATUS.IN_REVIEW&&(e=!1,x()&&(e=!0)):e=!0}else if(d(n.zs_blog_id)){app.data.sub_site_map[app.data.root_resource_id].settings.flag_postreview_state?i&&(e=r=!1,parseInt(app.data.author_id)==parseInt(n.zs_author_id)&&(e=r=!0,n.zs_post_details&&n.zs_post_details.publish_status==t.POST_STATUS.IN_REVIEW&&(e=!1))):e=r=!(!i||parseInt(app.data.author_id)!=parseInt(n.zs_author_id))}n.hasOwnProperty("zs_lang_parent_id")&&"-1"!=n.zs_lang_parent_id&&n.hasOwnProperty("zs_translation_json")&&n.zs_translation_json.setup_type==t.SETUP_TYPE.TRANSLATION&&(e=!1,j.is_translation=!0);var c=e&&n.hasOwnProperty("parent_subsite_setup_type")&&n.parent_subsite_setup_type==t.SETUP_TYPE.TRANSLATION;return d(n.zs_resource_id)&&j.enable_editor&&parseInt(n.zs_resource_type)==t.RESOURCE_TYPE.BLOG_POST&&(j.editable_container=".zpcontent-container.blogpost-container"),d(n.zs_resource_id)||c?function(e,t,n){var i=[".zpcontent-container.page-container"];e&&i.push(".zpcontent-container.hero-container"),t&&i.push(".zpcontent-container.sidebar-container"),n&&i.push(".zpcontent-container.footer-container"),j.editable_container=i.join(", ")}(a,o,u):j.enable_editor||(j.editable_container=""),j.enable_editor=e,j.enable_blog_app=r,j}function S(e){var t=$("#pagecanvas").contentWindow;if(c(t.zs_resource_id))return!1;var n=e||t.zs_page_reviewer;return!!(n&&n.resource_id==t.zs_resource_id&&app.data.userId==n.task_reviewer||s(t.zs_site_resource_id))}function x(){var e=$("#pagecanvas").contentWindow,t=e.zs_post_reviewer;return!!(t&&t.resource_id==e.zs_resource_id&&app.data.userId==t.task_reviewer||s(e.zs_site_resource_id))}function O(e){if(N||(g(F,""),v()),null!=R[e]&&R[e].node.resource_type==t.RESOURCE_TYPE.PAGE)return R[e].node.custom_banner}function I(e){if(N||(g(F,""),v()),null!=R[e]&&R[e].node.resource_type==t.RESOURCE_TYPE.PAGE)return R[e].node.custom_footer}function A(e){if(N||(g(F,""),v()),null!=R[e]&&R[e].node.resource_type==t.RESOURCE_TYPE.PAGE)return R[e].node.custom_sidebar}function C(e,t){if(t){var n,i={};for(var r in t)if(n={},"object"==typeof t[r])(n=C(e[r],t[r]))&&!D(n)&&(i[r]=n);else{var a="boolean"==typeof e[r]?e[r].toString():e[r],o="boolean"==typeof t[r]?t[r].toString():t[r];t&&t.hasOwnProperty(r)&&o==a||(i[r]=t[r])}return D(i)?void 0:i}}function D(e){return 0===Object.keys(e).length}function w(e){for(var t in e){if(e[t].isAllowed)return!0;if(e[t].children>0&&w(e[t].children))return!0}return!1}var R,N,k="children",L="/",M=0,P=1,B=app.data.shared_user_resources,F=app.data.resources,U=app.data.role,z=[],H="",j={},G=[t.RESOURCE_TYPE.BLOG,t.RESOURCE_TYPE.BLOG_POST,t.RESOURCE_TYPE.BLOG_TAG,t.RESOURCE_TYPE.BLOG_CATEGORY,t.RESOURCE_TYPE.BLOG_AUTHOR];return{resourcePath:r,getResourceRole:m,isCustomBanner:O,isCustomSidebar:A,isCustomFooter:I,directoryPath:function(e){var t="";if(e)for(var n=0,i=e.length;n<i;n++){var r=e[n];0!==r.resource_type&&(t+=L+r.resource_url)}return t},getResourceDetails:function(t,n,i){for(var a=-1,o=e.convertNested(t.children,{id_key:"resource_id",child_key:"children",parent_key:"parent_id",root_id:"-1",text_val_key:"resource_url",value_key:"resource_id"}),s=0;s<o.length;s++){var l=r(t,o[s].value,[]);if(n==l||i&&o[s].node.is_home_page&&n==l.substring(0,l.lastIndexOf("/")+1)){a={resource_type:o[s].node.resource_type,resource_id:o[s].value,is_home_page:o[s].node.is_home_page};break}}return a},getDomainName:function(e,t){var n=function(e){if(N||(g(F,""),v()),null!=R[e])return R[e].node}(t);if(n){var i=n.sub_site_id;if(e&&e[i])return e[i]}return""},getAliasURLPath:function(e,t){if(e)for(var n=0;n<e.length;n++){var i=e[n];if(i.target_resource_id==t&&i.url_alias_path)return i.url_alias_path}return""},disableRestrictedDirectory:f,disableSelectedDirectory:function(e,t){var n=[e];return h(n,t,[0,2]),n=f(n)},builderNavigation:function(){var e=app.data.builder_url,t=$("#pagecanvas");if(t){var n=t.contentWindow.location.pathname;"/"!==n&&(e+=n)}app.navigate(e),app.next()},checkAllResources:g,checkIsAllowedResource:_,checkSelectedResources:function(e,t){var n=!0;if(l(e))n=!0;else if(d(e)||!c()){N||(g(F,""),v());for(var i=0;i<t.length;i++)if(null!=R[t[i]])return R[t[i]]&&!R[t[i]].node.isAllowed&&(n=!1),R[e].node.isAllowed}return n},getNestedResources:v,checkAllowedResources:function(e){for(var t=0;t<e.length;t++)if(!e[t].isAllowed){var n=e[t].parent_id;if(l(n))for(var t in e)e[t].isAllowed=!0;else if((d(n)||c(n))&&(N||(g(F,""),v()),e.length>0))if(null!=R[n]){if(R[n].node.isAllowed)for(var t in e)e[t].isAllowed=!0;else if(!R[n].node.isAllowed){var i=R[n].node.children;for(var r in e)for(var a in i)e[r].resource_id==i[a].resource_id&&(e[r].isAllowed=i[a].isAllowed)}}else if(null!=H[n]&&H[n].node.isAllowed)for(var t in e)e[t].isAllowed=!0}return e},getResourceName:y,getResource:E,getSubSiteTree:function(){for(var e=Object.keys(app.data.sub_site_map),t=-1,n={},i=0;i<e.length;i++){var r,a=e[i];if(n.hasOwnProperty(a))r=n[a];else{if(!(r=utils.deepClone(E(a))))break;r.node.children=[],r.node.settings=app.data.sub_site_map[a].settings,n[a]=r}if(null!=r){0==r.level&&(t=r.node.resource_id);for(var o=r.node.parent_id,s=0;s<r.level;s++){var l;if(e.includes(o)){n.hasOwnProperty(o)?l=n[o]:((l=utils.deepClone(E(o))).node.children=[],l.node.settings=app.data.sub_site_map[o].settings,n[o]=l),l.node.children.push(r.node);break}o=(l=utils.deepClone(E(o))).node.parent_id}}}return-1!=t&&n.hasOwnProperty(t)?n[t].node:null},getSubSiteLangMap:function(){for(var e=Object.keys(app.data.sub_site_map),t={},n=0;n<e.length;n++){var i=e[n];app.data.sub_site_map[i].language_parent_id>0?(t.hasOwnProperty(app.data.sub_site_map[i].language_parent_id)||(t[app.data.sub_site_map[i].language_parent_id]=[]),t[app.data.sub_site_map[i].language_parent_id].push(i)):t.hasOwnProperty(i)||(t[i]=[])}return t},getResourceObj:function(e){var t=E(e);return null!=t?t.node:null},handleResourceNavigation:function(e){var i=$("#pagecanvas").contentWindow,r=$("#zp_add_element"),a=$("#zp_add_section"),o=$("#zp_add_post"),s=app.data.enable_blogs;if(null!=e&&e!={}||(e=T()),r&&(r.style.display=e.enable_editor?"flex":"none"),a&&(a.style.display=e.enable_editor?"flex":"none"),o&&(o.style.display=s?"flex":"none"),$D.getById("add-apps")&&"3"!=app.data.site_type&&($D.getById("add-apps").style.display=e.enable_editor?"block":"none"),parseInt(i.zs_resource_type)==t.RESOURCE_TYPE.BLOG_POST){var l=$D.getAll("[data-post-heading]",i.document.body);if(e.enable_blog_app){if(l[0].contentEditable="true",$D.getById("add-apps")&&($D.getById("add-apps").style.display="none"),parseInt(i.zs_resource_type)==t.RESOURCE_TYPE.BLOG_POST&&!e.enable_editor){var d=y(i.zs_resource_id);$D.getById("restriction-alert").style.display="block",$D.getById("restriction-alert-content").innerText=cms_i18n("ui.resources.blog.authorizationMsg")}}else l[0].contentEditable="false",n(cms_i18n("ui.settings.blogs.posts.editing.notallowed")).warning(),require(["blogpost"],function(e){var t={};t.post_id=i.zs_resource_id,e.dispatchRenderBlogPostStatus(t,i.zs_post_details.publish_status)})}else parseInt(i.zs_resource_type)!=t.RESOURCE_TYPE.PAGE||e.enable_editor||e.is_translation?require(["subsitesettings"],function(e){var t=$("#pagecanvas").contentWindow.window.zs_translation_json;(!t||t&&t.task&&e.checkIfPermission(t.task,!0))&&($D.getById("restriction-alert").style.display="none")}):(d=y(i.zs_resource_id),$D.getById("restriction-alert").style.display="block",$D.getById("restriction-alert-content").innerText=cms_i18n("ui.pages.editpagecontent.authorizationMsg",d));var u=$("#zp_save");null!=u&&(parseInt(i.zs_resource_type)!=t.RESOURCE_TYPE.BLOG&&e.enable_editor?$D.removeClass(u,"zs-topband-disable-btn"):$D.addClass(u,"zs-topband-disable-btn"));var c=$("#zp_add_shortcut");c&&(r&&"none"==r.style.display&&o&&"none"==o.style.display?$D.addClass(c,"zs-topband-disable-btn"):$D.removeClass(c,"zs-topband-disable-btn"))},getResourceProperty:T,checkNewResource:function(t){t.isAllowed=!0,z.push(t);for(var n=e.convertNested(z,{id_key:"resource_id",child_key:"children",parent_key:"parent_id",root_id:"-1",text_val_key:"resource_url",value_key:"resource_id"}),i=0;i<n.length;i++)n[i].level=E(n[i].parent_id)+1;H=b(n,"parent_id")},compareJSON:C,checkIfResourceAllowed:function(e,t,n,i){void 0==e&&(e=app.data.resources.resource_id);var r=!1;n&&i&&(r=!0);var a={is_parent_check:r},o=app.data.api_url+"/resources/"+e+"/permission";$X.get({url:o,headers:app.getHeaders(),params:a,handler:t})},checkIfParentAllowed:function(e){for(var t=0;t<e.length;t++){var n=e[t].parent_id;if(!e[t].isAllowed)if(l(n))for(var i=0;i<e.length;i++)e[i].isAllowed=!0;else if(null!=R&&null!=R[n])for(i=0;i<e.length;i++)e[i].isAllowed=R[n].node.isAllowed;else for(i=0;i<e.length;i++)e[i].isAllowed=!0}return e},blockUser:function(e){var t=new i.Dialog({dialogClass:"demo-dialog",header:!1,footer:!1,type:"fullscreen",offsetTop:"0px",offsetLeft:"0",closeBtn:!0,onClose:function(){app.goBack(),t.dismiss()}});app.render({template:"sites_v2:contributor:t_accessDenied/t_accessDenied",target:t.content,models:{app:app,title:e},callback:function(){t.open(),app.next()}})},saveFile:function(e,t,n){$X.put({url:app.data.api_url+"/resources/"+e+"/content",headers:app.getHeaders(),bodyJSON:t,handler:n})},reloadResources:function(e){F=e,v(),$E.dispatch(document.body,"resource:reloaded")},isTranslatedPage:function(){var e=!1,n=$("#pagecanvas").contentWindow.window;return n.hasOwnProperty("zs_lang_parent_id")&&"-1"!=n.zs_lang_parent_id&&n.hasOwnProperty("zs_translation_json")&&n.zs_translation_json.setup_type==t.SETUP_TYPE.TRANSLATION&&(e=!0),e},isParentSubsite:function(){for(var e=Object.keys(app.data.sub_site_map),t=0;t<e.length;t++){var n=e[t];if(app.data.sub_site_id!=n&&app.data.sub_site_map[n].language_parent_id==app.data.sub_site_id)return!0}return!1},isAdminRole:l,isSharedUser:d,resourceObject:a,isChildResourceAllowed:w,isBlogRelatedResource:function(){return G.includes(parseInt($("#pagecanvas").contentWindow.zs_resource_type))},isLocalizedSubsite:function(){var e=app.data.sub_site_id;return!(!app.data.sub_site_map[app.data.sub_site_id]||app.data.sub_site_map[e].sub_site_category!=t.SUBSITE_CATEGORY.SUBSITE_WITH_LOCALIZED_CONTENT)},isPageReviewTaskReviewer:S,isBlogPostReviewTaskReviewer:x,isResourceEditable:u}}),define("appHeader",["feedback","asap_widget","resource","CONST"],function(e,t,n,i){"use strict";function r(){v&&v(),v=null}function a(){var t=$D.getById("zs_tour");if("undefined"!=h&&h&&t&&!app.data.isStoreEnabled&&(t.style.display="none"),h&&"v2"==app.data.uiVersion)require(["root"],function(e){var t;app.data.isStoreEnabled&&(t=e.fnBackToStore()),e.renderTopBar("/",t,!1)});else if("v1"==app.data.uiVersion){var n=$D.get(f);Array.prototype.slice.call(n.children).forEach(function(e){var t=e.matches(o()?s():s()+" #BacktoBuilder");if(h)if(t){if($D.css(e,"display",""),b){for(var n=e.getElementsByTagName("li"),i=0;i<n.length;i++)"zs-help-container"!==n[i].id&&"user-thumbnail-holder"!==n[i].id||$D.css(n[i],"display","none");var r=$("#BacktoBuilder ul")[0];r&&(r.style.justifyContent="unset")}}else $D.css(e,"display","none");else t?$D.css(e,"display","none"):$D.css(e,"display","")}),o()&&function(){var t="common:app_header:t_app_header/t_app_header_back";"v1"==app.data.uiVersion&&(t="common:app_header:t_app_header_v1/t_app_header_back_v1");app.render({template:t,target:"app-headerCont",models:{isStoreView:o(),data:app.data},context:{feedback:e},callback:function(){$D.css($D.getById("BacktoBuilder"),"display","")}})}(),h&&(T.topBand=n)}}function o(){return!(!app.data.isStoreEnabled||void 0==_||"ZSTORE"!=_&&_)}function s(){return o()?"#app-headerCont":"#app-placeholder"}function l(){f="#app-placeholder .zs-topband"}function d(e,t){return e&&e.isSameNode&&e.isSameNode(t)}function u(e){var t=g||$D.get((o()?"#app-headerCont":"#app-placeholder")+" .zs-topband");t&&$D.css(t,"display",e)}function c(e){if(m("publish_dd_subsite"),m("publish_dd_page"),app.data.sub_site_map[app.data.root_resource_id].settings.flag_resource_publish&&e){m("zp_publish_appheader"),p("zp_publish_dd_appheader");(t=$D.getById("publish_dd_btn"))&&t.setAttribute("data-page",!0),app.data.root_resource_id!=app.data.sub_site_id?(p("publish_dd_subsite"),m("publish_dd_site")):(p("publish_dd_site"),m("publish_dd_subsite"))}else{var t;(t=$D.getById("publish_dd_btn"))&&t.removeAttribute("data-page"),p("zp_publish_appheader"),m("zp_publish_dd_appheader")}}function p(e){var t=$D.getById(e);t&&(t.style.display="")}function m(e){var t=$D.getById(e);t&&(t.style.display="none")}var f,h,g,_,v,b,y=/^\/zcms\/editor(\/.*)?$/,E=/^\/zstore(\/.*)?$/;l();var T={routeRendered:function(n){!function(){var e=window.location.pathname;y.test(e)&&(_="ZCMS"),E.test(e)&&(_="ZSTORE")}();var i=$D.get(f),l=$D.get(s());if(b=!!window.CrmPlusLib&&window.CrmPlusLib.isLoadedinFrame&&""!=app.data.iframe_origin,n)h||a(),h=n;else{if(0==h)return void r();i&&h&&"v1"==app.data.uiVersion?a():d();function d(){if(o()||!app.data.isStoreEnabled||"v2"!=app.data.uiVersion){var i=o()?"common:app_header:t_app_header/t_app_header_back":"common:app_header:t_app_header/t_app_header";"v1"==app.data.uiVersion&&(i=o()?"common:app_header:t_app_header_v1/t_app_header_back_v1":"common:app_header:t_app_header_v1/t_app_header_v1"),require(["publish"],function(a){app.render({template:i,target:l,models:{data:app.data,isStoreView:o(),include_thumb:!0,home:n,isLoadedInFrame:b,ASAP_CONSTANT:t.ASAP_CONSTANT},context:{feedback:e,asap_widget:t,appHeader:T,publish:a},callback:function(){h=n,o()&&"v1"==app.data.uiVersion&&($D.get(s()).style.display=""),T.topBand=$D.get(f),"v2"==app.data.uiVersion&&c(),r()}})})}}}(n||i)&&(h=n,r())},getType:function(){return isSite?app.data.isStoreEnabled?"storesite":"site":"store"},show:u.bind(null,""),hide:u.bind(null,"none"),toggle:a,init:e.init,publishSite:function(){var e=this;require(["publish"],function(t){function n(){e.hasAttribute("data-page")?t.publishPage():t.publishSite()}var r=$("#pagecanvas")&&$("#pagecanvas").contentWindow;app.data.sub_site_map[app.data.root_resource_id].settings.flag_pagereview_state&&r&&r.zs_resource_contentstate&&r.zs_resource_contentstate==i.CONTENT_STATE.READY_TO_PUBLISH?t.isResourceModified()||n():n()})},publishSubSite:function(){require(["publish"],function(e){e.publishSubSite()})},hideDirectory:function(e){e.preventDefault(),e.stopPropagation();var t=$D.findParentByTag(this,"ul");$D.hasClass(t,"hide-level")?($D.removeClass(t,"hide-level"),this.children[0].setAttributeNS(null,"href","#icon-zsites-folder")):($D.hasClass(t,"has-content")?this.children[0].setAttributeNS(null,"href","#icon-zsites-folder-plus"):this.children[0].setAttributeNS(null,"href","#icon-zsites-folder"),$D.addClass(t,"hide-level"))},changeSubSite:function(e){if(e.preventDefault(),e.stopPropagation(),"SPAN"==this.nodeName){var t=this.getAttribute("data-resourceid");window.location.pathname.startsWith(app.data.builder_url)?function(e){var t=app.data.sub_site_id,i=app.data.sub_site_map[t],r=t;app.data.sub_site_map[t].language_parent_id>0&&(r=app.data.sub_site_map[t].language_parent_id);var a=n.getSubSiteLangMap(),o=app.data.sub_site_map[e];if(e==r||a[r].indexOf(e)>-1){var s=o.content_language,l=i.content_language;if(l==s)return void app.navigate(window.location.pathname);if(!n.isTranslatedPage()&&t!=r)return void app.navigate(app.data.builder_url+o.full_path);for(var d,u=dndBuilder.getCanvas().contentWindow.document.querySelectorAll("[hreflang]"),c=0;c<u.length;c++){var p=u[c],m=s&&s.replace("_","-");if(p.hreflang==m){d=p.getAttribute("href");break}"x-default"==p.hreflang&&e==r&&u.length>1&&(d=p.getAttribute("href"))}d?app.navigate(app.data.builder_url+d):app.navigate(window.location.pathname.replace(app.data.builder_url+i.full_path,app.data.builder_url+o.full_path))}else app.navigate(app.data.builder_url+o.full_path)}(t):t==app.data.root_resource_id?window.location.href="/zcms":window.location.href="/zcms/subsite/"+t}},renderSubsiteTree:function(e){if(e){app.data.sub_site_map={};for(var t=0;t<e.length;t++)app.data.sub_site_map[e[t].resource_id]=e[t];app.data.sub_site_tree=n.getSubSiteTree()}Object.keys(app.data.sub_site_map).length<=1?m("subsitetree_dd"):p("subsitetree_dd"),app.render({template:"sites_v2:root:t_root/t_subsite_tree",target:"subsite_tree_cont",models:{data:app.data},context:{appHeader:T},callback:function(){},bindCtx:T})},showPreviewWithoutSave:function(){require(["publish"],function(e){e.showPreviewWithoutSave()})},handlePublishBtns:c,stopEvent:function(e){e.cancelBubble=!0},set target(e){l()},get target(){return s()},get topBand(){return g},set topBand(e){d(e,g)||($D.getAll(".zs-topband").forEach(function(t){d(t,e)?$D.css(t,"display",""):$D.css(t,"display","none")}),g=e)},request:function(e){v=e}};return T}),define("mask",["log"],function(e){function t(t,r,a){function o(){$D.css(l,"display","block"),r?r():e.warn("Can't found mask callback function")}var s,l=n();l?((s=$D.getById("mask-msg"))&&(s.innerText=a),o()):((l=document.createElement("div")).id=i,$D.append(document.body,l),app.render({template:t,target:l.id,models:{app:app,maskMsg:a},callback:function(){o()}}))}function n(){return $D.getById(i)}var i="mask";return{show:function(e,n){n||(n=""),t("common:mask:t_mask/appmask",e,n)},createsite:function(e){t("common:mask:t_mask/createsitemask",e)},indexPage:function(e){var n=Math.floor(15*Math.random())+1,i=cms_i18n("ui.ecom.index.loader.proverb"+n);i=i.split("-");var r={};r.proverb=i[0],r.author=i[1],t("common:mask:t_mask/indexPage",e,r)},close:function(){var e=n();e&&$D.css(e,"display","none")}}}),define("planFeature",["hbDialog","csrf","mask","notify"],function(e,t,n,i){function r(e,t,n){var i={};return h[e].parameter?i.title=cms_i18n(h[e].title,h[e].parameter):i.title=cms_i18n(h[e].title),i.asap_module=h[e].asap_module,t?(i.desc=-1==t?cms_i18n("ui.upgrade."+e+".desc"):cms_i18n("ui.upgrade."+e+".limitreached",t),void 0!=t.upgradeOptionAvailable&&(i.desc+=t.upgradeOptionAvailable?" "+cms_i18n("ui.upgrade."+e+".upgradeMsg"):" "+cms_i18n("ui.common.contact.support",app.data.support_mail,app.data.support_mail))):i.desc=cms_i18n("ui.feature."+e+".desc"),n&&(i.desc=n),i}function a(e,t,n,i){var a=r(e,t),o={dialogClass:"demo-dialog",header:!0,headingText:a.title,footer:!1,type:"fullscreen",offsetTop:"0px",offsetLeft:"150px",closeBtn:!0,escClose:!0,mask:!0,onClose:app.goBack};s(a.title,a.desc,"sites_v2:planFeature:t_upgrade_fullscreen/upgrade_dialog_full",o,n,null,a.asap_module,i)}function o(e,t,n,i,a){var o=r(e,t,a),l={dialogClass:"demo-dialog",footer:!1,type:"modals",headingText:o.title};t=t||!1,s(o.title,o.desc,"sites_v2:planFeature:t_upgradedialog/upgrade_dialog",l,i,t.upgradeOptionAvailable,o.asap_module)}function s(t,n,i,r,a,o,s,l){var d=new e.Dialog(r);void 0!=a?app.render({template:i,target:a,models:{title:t,desc:n,viewPlansOption:void 0==o||o,addon_trial_id:void 0!=l&&l,app:app,asap_module:s},context:{planFeature:E},callback:function(){app.next()}}):app.render({template:i,target:d.content,models:{title:t,desc:n,viewPlansOption:void 0==o||o,addon_trial_id:void 0!=l&&l,app:app,asap_module:s},context:{planFeature:E},callback:function(){d.open(),app.next()}})}function l(e,n){var i="";if(e==f.agencyPlan)i=app.data.appDomain+"/subscriptions";else{if(e==f.zohoOnePlan||e==f.zohoOneTrialPlan)return void $X.get({url:"/zs-site/api/v1/subscriptions/getzohoonesubscriptionurl",headers:t.getCSRFHeader(),handler:function(){var e=JSON.parse(this.responseText);i="0"==e.status_code&&e.zohoOneSubscriptionUrl?e.zohoOneSubscriptionUrl:app.data.payments_url+"html/store/index.html#subscription?serviceId="+n+"&customId="+app.data.siteId,window.open(i)}});i=app.data.payments_url+"html/store/index.html#subscription?serviceId="+n+"&customId="+app.data.siteId}window.open(i)}function d(){"0"==JSON.parse(this.responseText).status_code&&document.location.reload(!0)}function u(e){e.origin+"/"==app.data.payments_url&&document.location.reload(!0)}function c(){n.close();var e=JSON.parse(this.responseText);if("0"==e.status_code)if(app.data.isStoreEnabled){i(cms_i18n("ui.cms.feedback.sent")).success(),localStorage.setItem("REQUESTED_TRIAL_EXTENSION","true");var t=$D.getById("trial-end-container");if(t){t.querySelector("h2").innerHTML=cms_i18n("ui.upgrade.free_trial.support.title"),t.querySelector("p").innerHTML=cms_i18n("ui.upgrade.free_trial.support.desc");var r=t.querySelector("#contact-support-trial-extn-btn");r&&(r.style.display="none")}}else document.location.reload(!0);else{var a=e.storeTrial?" - "+e.storeTrial.msg:"";i(cms_i18n("ui.upgrade.extend_trial.error","support@zohocommerce.com")+a).error()}}function p(e,t,n,i){return"true"==app.data.plan_feature[e]||(a(t,n,i),app.next&&app.next(),!1)}var m=window.zsData.plan_feature,f={agencyPlan:11922,advanced2018Plan:11918,advancedPlan:11921,zohoOnePlan:11907,zohoOneTrialPlan:11908,trialPlan:50301,essential2018Plan:11916,professional2018Plan:11917,essentialPlan:11919,professional2019Plan:11920,freePlan:11903,StoreTrialPlan:510301,StoreFreePlan:510100,StoreBasicPlan:510101,StoreStandardPlan:510102,StoreProPlan:510103,SZohoOneTrialPlan:510306,SZohoOnePlan:510106,StoreBasic2021Plan:510107,StoreProfessional2021Plan:510108,StoreAdvanced2021Plan:510109,SZohoOneBasicPlan:510106100,SZohoOneProPlan:510106101,starterPlan:11923,professionalPlan:11924,pro3MonthsTrialPlan:50304,SPFreePlan:50305,TrainerCentralBasic:6},h={CartRecovery:{title:"ui.store.common.cart.recovery",asap_module:"abandoned_cart"},TrafficAnalytics:{title:"ui.common.traffic.analytics",asap_module:"traffic_reports"},CustomerReports:{title:"ui.common.customer.reports",asap_module:"sales_reports"},changepermission:{title:"ui.feature.Sharing.name",parameter:2,asap_module:"contributors"},SalesReports:{title:"ui.common.sales.report",asap_module:"sales_reports"},pageversion:{title:"ui.feature.pageversion.name",parameter:2,asap_module:"page_version"},audit:{title:"ui.feature.audit.name"},salesiq:{title:"ui.feature.salesiq.name",asap_module:"sales_iq"},Productreviews:{title:"ui.store.common.product.reviews",asap_module:"product_review"},commentbox:{title:"ui.feature.commentbox.name",parameter:1,asap_module:"comment_box"},blogs:{title:"ui.feature.blogs.name",asap_module:"blog_preferences"},social_share:{title:"ui.feature.social_share.name",asap_module:"social_share"},marketinghub:{title:"ui.feature.marketinghub.name",asap_module:"zoho_marketing_automation"},messagebar:{title:"ui.feature.messagebar.name",asap_module:"message_bar"},publish:{title:"ui.feature.publish.name"},photoalbum:{title:"ui.feature.photoalbum.name",parameter:2,asap_module:"photoset"},SmartRecommendations:{title:"ui.store.common.recommendedproducts"},setHome:{title:"ui.files.setHome"},morepages:{title:"ui.common.page.limitreached"},Scheduled_Post:{title:"ui.settings.blogs.posts.schedule"},creator_form:{title:"ui.feature.forms.name"},Products:{title:"ui.store.common.products",asap_module:"product"},CompositeItems:{title:"ui.compositeproduct.label",asap_module:"composite_product"},StaffAccount:{title:"ui.common.users",asap_module:"users"},Sharing:{title:"ui.feature.Sharing.name",parameter:2,asap_module:"contributors"},multiple_menu:{title:"ui.feature.multiple_menu.name",asap_module:"menu"},edit_sub_domain:{title:"ui.feature.domains.name",asap_module:"domains"},delete_sub_domain:{title:"ui.feature.domains.name",asap_module:"domains"},markPrimary:{title:"ui.settings.domain.primarydomain"},SSL_Hosting:{title:"ui.feature.SSL_Hosting.name",asap_module:"domain_and_ssl"},portal:{title:"ui.feature.portal.name",asap_module:"member_portal"},liverate:{title:"ui.shippingcarriers.title"},ProductFilters:{title:"ui.productfilter.title",asap_module:"product_filter"},CustomField:{title:"ui.customfields.title",asap_module:"custom_field"},OrderCustomField:{title:"ui.customfields.title",asap_module:"custom_field"},megamenu:{title:"ui.feature.megamenu.name",asap_module:"mega_menu"},PickupLocations:{title:"ui.pickup.title",asap_module:"pick_up"},seoanalyzer:{title:"ui.feature.seoanalyzer.name",asap_module:"seo_reports"},imageOptimizer:{title:"ui.feature.imageOptimizer.name"},subsite:{title:"ui.feature.subsite.name",parameter:1,asap_module:"subsite"},publish_options:{title:"ui.feature.publish_options.name",asap_module:"publish_options"},VisualEditor:{title:"ui.feature.VisualEditor.name",asap_module:"visual_editor"},customcsseditor:{title:"ui.feature.customcsseditor.name",asap_module:"custom_css"},dynamiccontent:{title:"ui.feature.dynamiccontent.name",asap_module:"dynamic_content"},connections:{title:"ui.feature.connections.name",asap_module:"connections"},codesnippet:{title:"ui.feature.codesnippet.name",parameter:2,asap_module:"code_snippets"},zsform:{title:"ui.feature.forms.name"},bigin_form:{title:"ui.feature.bigin_form.name"},crm_form:{title:"ui.feature.crm_form.name"},zsform_file:{title:"ui.menu.file"},content_search:{title:"ui.feature.content_search.name"},customfonts:{title:"ui.feature.customfonts.name",asap_module:"custom_fonts"},ask_ai:{title:"ui.feature.askai.name",asap_module:"ask_ai"}},g=[f.professionalPlan,f.advancedPlan,f.advanced2018Plan,f.zohoOnePlan],_=(Object.freeze({zohoOneTrialPlan:String(f.zohoOneTrialPlan),zohoOnePaidPlan:String(f.zohoOnePlan)}),Object.freeze({DYNAMIC_CONTENT:"dynamiccontent",CONNECTIONS:"connections",DCAPP:"dcapp"})),v=!0;(void 0==app.data.isStoreEnabled?app.data.ecommerce_server:app.data.isStoreEnabled)?!m||m.storePlanId!=f.StoreProPlan&&m.storePlanId!=f.StoreAdvanced2021Plan&&m.storePlanId!=f.SZohoOneBasicPlan&&m.storePlanId!=f.SZohoOneProPlan&&m.storePlanId!=f.SZohoOneTrialPlan&&m.storePlanId!=f.SZohoOnePlan&&m.storePlanId!=f.SZohoOneAdvancedPlan||(v=!1):!m||m.planId!=f.professionalPlan&&m.planId!=f.agencyPlan&&m.planId!=f.advanced2018Plan&&m.planId!=f.advancedPlan&&m.planId!=f.zohoOnePlan&&m.planId!=f.zohoOneTrialPlan||(v=!1);var b={isAllowed:function(e){return"app"==e.element_type?function(e){if(m.hasOwnProperty(e.app_type)){if(!y.hasOwnProperty(e.app_type))return"true"==m[e.app_type]||(o(e.app_type),!1);var t=y[e.app_type].call();if(t)return!0;if(!t)return o(e.app_type),!1;if(2==t)return o(e.app_type,!0),!1}return!0}(e):(e.element_type,!0)},checkElementProp:function(e){return!(m.hasOwnProperty(e)&&("false"==m[e]||m[e]>-1))}},y={creator_form:function(){return app.data.formcount<=parseInt(m.NumberOfForms)?"true"==m.creator_form:2},menu_app:function(){return!0}},E={util:b,getDialogContent:r,showOrHideUpgradeOption:function(e,t){g.some(function(e){return e==m.planId})?o(e,{limitreached:t,upgradeOptionAvailable:!1}):o(e,{limitreached:t,upgradeOptionAvailable:!0})},showUpgradeDialog:o,setTrial:function(){var e={};e.site_id=app.data.siteId,$X.post({url:"/zs-site/api/v1/trial",params:e,headers:t.getCSRFHeader(),handler:d})},setAddonTrial:function(){var e=this.getAttribute("data-addon-trial-id"),n={};n.site_id=app.data.siteId,n.addon_trial_id=e,$X.post({url:"/zs-site/api/v1/trial/addon",params:n,headers:t.getCSRFHeader(),handler:d})},liveModeAllowed:function(){return m.storePlanId==f.StoreBasicPlan+""||m.storePlanId==f.StoreStandardPlan+""||m.storePlanId==f.StoreProPlan+""},extendTrialAllowed:function(){return m.storePlanId==f.StoreFreePlan+""},showFullUpgradeDialog:a,showSectionUpgradeDialog:function(e,t){var n=r(e,t),i={dialogClass:"demo-dialog",header:!0,headingText:n.title,footer:!1,type:"fullscreen",offsetTop:"0px",offsetLeft:"150px",closeBtn:!0,escClose:!0,mask:!0,onClose:app.goBack};s(n.title,n.desc,"sites_v2:planFeature:t_upgrade_fullscreen/upgrade_dialog_full",i,null,null,n.asap_module)},initPurchase:function(e){var n=this.id;(function(e){var n={},i="/zs-site/api/v1/sitefeaturehits/upgrade";app.data.isStoreEnabled&&(i="/zstore/api/feature-hits/upgrade"),n.action=e;var r={};r.storeId=app.data.storeId;var a=t.getCSRFHeader();a["X-Site-Id"]=app.data.siteId,$X.post({url:i,headers:a,params:r,bodyJSON:n})})(n=""==n?"BUILDER":"TRIAL_END"),e||0==document.location.pathname.indexOf(app.data.builder_url)&&require(["publish"],function(e){e.save()}),$E.unbind(window,"message",u),$E.bind(window,"message",u);var i=app.data.serviceId;app.data.isStoreEnabled&&(i=app.data.store_serviceId),l(m.planId,i)},initSiteAddonPurchase:function(){$E.unbind(window,"message",u),$E.bind(window,"message",u);var e=app.data.serviceId,t=app.data.siteId;app.data.isStoreEnabled&&(e=app.data.store_serviceId);var n=app.data.payments_url+app.data.payment_url_postfix+"serviceId="+e+"&customId="+t;window.open(n)},checkForTrail:function(){app.data.isTrailAllowed&&({}.siteId=zsData.siteId)},isUpgradeAllowed:v,plan:f,extendTrial:function(){if(app.data.isStoreEnabled)n.show(function(){var e="Request for Zoho Commerce Trial Extension - We request you to extend the trial period of our Zoho Commerce store so that we can continue with our evaluation.",n=app.data.organization.address||{};n.country&&(e=e+"<br><br>Country: "+n.country),n.phone&&(e=e+"<br>Phone: "+n.phone);var i={feedbackType:"1",feedbackContent:e},r=app.data.siteId,a={url:"/zs-site/api/v1/feedback",bodyJSON:i,handler:c};void 0===r||"null"==r?a.headers=t.getCSRFHeader():a.bodyJSON.siteId=r,$X.post(a)});else{var e={};e.site_id=app.data.siteId,n.show(function(){$X.post({url:"/zs-site/api/v1/trial",params:e,headers:t.getCSRFHeader(),handler:c})})}},isFeatureEnabled:function(e){return"true"==m[e]},feature:{DIRECTORY:"Directory",CSS_AND_JS_EDITOR:"CssAndJsEditor",TRAFFIC_REPORT:"TrafficReport",EDIT_SUB_DOMAIN:"EditSubdomain",ZIP_EXTRACT:"Zip_Extract",FAVICON:"FavIcon",LOGO_AND_SOCIAL_PREVIEW_IMAGE:"LogoAndSocialPreviewImage",HTML_SNIPPET_CODE:"HTML_Snippet_Code",MENU:"Menu",SITEMAP:"Sitemap",ADV_VISUAL_EDITOR:"AdvVisualEditor",CODE_SNIPPET:"codeSnippet"},isValidDCPlan:function(){return p(_.DCAPP,_.DYNAMIC_CONTENT,null,"dynamiccontent-c")},isValidConnectionPlan:function(){return p(_.DCAPP,_.CONNECTIONS,null,"connections-c")},getSubscriptionLink:l};return E}),define("facebook",[],function(){"use strict";function e(e,t){var n,i,r,a="fb"+e.getAttribute("id"),o=getDomainName();t?(i="like",r="light","0"==t||"1"==t?n="button_count":"2"==t&&(n="box_count")):(n=e.getAttribute("data-fbStyle"),i=e.getAttribute("data-fbVerb"),r=e.getAttribute("data-fbColor"));var s=document.createElement("div");s.className="fb-like",s.setAttribute("data-href",o),s.setAttribute("data-send","false"),s.setAttribute("data-show-faces","false"),s.setAttribute("data-layout",n),s.setAttribute("data-action",i),s.setAttribute("data-colorscheme",r);var l=document.getElementById(a);l.hasChildNodes()&&l.removeChild(l.childNodes[0]),l.removeAttribute("style"),l.appendChild(s),setTimeout(function(){var e=document.getElementById(a).style;e.overflow="hidden",e.paddingBottom="0px","standard"==n&&(e.height="25px")},100),t&&setTimeout(function(){window.FB.XFBML.parse();var e=document.getElementById(a).style;e.cssFloat="left",e.styleFloat="left",e.padding="5px 5px 0px","0"==t?(e.width="43px",e.overflow="hidden"):"1"==t?e.width="72px":"2"==t&&(e.width="46px")},1e3)}function t(e){var t="fb"+e.getAttribute("id"),n=e.getAttribute("data-fbPageUrl"),i=e.getAttribute("data-fbColor"),r=e.getAttribute("data-fbFace"),a=e.getAttribute("data-fbStream"),o=document.createElement("div");o.className="fb-like-box",o.setAttribute("data-href",n),o.setAttribute("data-show-faces",r),o.setAttribute("data-stream",a),o.setAttribute("data-header","true"),o.setAttribute("data-colorscheme",i),o.setAttribute("data-width",window.ZS_PublishMode||window.ZS_PreviewMode?e.offsetWidth:e.offsetWidth-2);var s=document.getElementById(t);s.hasChildNodes()&&s.removeChild(s.childNodes[0]),s.appendChild(o),window.FB.XFBML.parse()}function n(e){var t="fb"+e.getAttribute("id"),n=e.getAttribute("data-fbPost"),i=e.getAttribute("data-fbColor"),r=getDomainName(),a=document.createElement("div");a.className="fb-comments",a.setAttribute("data-href",r),a.setAttribute("data-num-posts",n),a.setAttribute("data-colorscheme",i),a.setAttribute("data-width",window.ZS_PublishMode||window.ZS_PreviewMode?e.offsetWidth:e.offsetWidth-2);var o=document.getElementById(t);o.hasChildNodes()&&o.removeChild(o.childNodes[0]),o.style.border="1px solid #aaa",o.appendChild(a)}function i(e){var t="fb"+e.getAttribute("id"),n=e.getAttribute("data-fbHeight"),i=e.getAttribute("data-fbColor"),r=e.getAttribute("data-fbTarget"),a=e.getAttribute("data-fbRecommend"),o=getDomainName(),s=document.createElement("div");s.className="fb-activity",s.setAttribute("data-site",o),s.setAttribute("data-recommendations",a),s.setAttribute("data-header","true"),s.setAttribute("data-height",n),s.setAttribute("data-width",window.ZS_PublishMode||window.ZS_PreviewMode?e.offsetWidth:e.offsetWidth-2),s.setAttribute("data-colorscheme",i),s.setAttribute("data-linktarget",r);var l=document.getElementById(t);l.hasChildNodes()&&l.removeChild(l.childNodes[0]),l.appendChild(s)}return{createFbActivityFeed:i,createFbComments:n,createFbLikeBox:t,createFacebookLikeButton:e,enableFacebookWidget:function(){for(;facebookElem.length>0;){var r=facebookElem.pop(),a=r.getAttribute("data-layout");if(a)e(r,a);else{var o=r.getAttribute("data-fwType");"likebutton"==o?e(r):"likebox"==o?t(r):"comments"==o?n(r):"activityfeed"==o&&i(r)}}}}}),define("twitter",[],function(){"use strict";function e(e){if("snippet"==e.getAttribute("data-twType")){var t=e.getAttribute("data-twclass"),n=e.getAttribute("data-twhref"),i=e.getAttribute("data-twdata-widget-id"),r=e.getAttribute("data-twmsg"),a=e.getAttribute("data-twdata-dnt"),o="twit"+e.id,s=document.getElementById(o),l=document.createElement("a");l.setAttribute("class",t),l.setAttribute("href",n),null!=i&&"null"!=i&&l.setAttribute("data-widget-id",i),a&&l.setAttribute("data-dnt",a),l.innerHTML=r,s.appendChild(l)}}function t(e,t){var n,i="twit"+e.id,r="",a="";t?"0"==t?n="none":"1"==t?n="horizontal":"2"==t&&(n="vertical"):(n=e.getAttribute("data-tbStyle"),r=e.getAttribute("data-tbTweetText"),a=e.getAttribute("data-tbRecommended"));var o=getDomainName(),s=document.createElement("div"),l=document.createElement("a");l.href="https://twitter.com/share",l.className="twitter-share-button",l.setAttribute("data-count",n),l.setAttribute("data-url",o),l.setAttribute("data-lang",getBrowserLanguage()),""!=r&&l.setAttribute("data-text",r),""!=a&&l.setAttribute("data-via",a),s.appendChild(l);var d=document.getElementById(i);d.hasChildNodes()&&d.removeChild(d.childNodes[0]),document.getElementById(i).appendChild(s),window.twttr.widgets.load(),t&&setTimeout(function(){var e=document.getElementById(i).style;e.cssFloat="left",e.styleFloat="left",e.padding="5px","1"==t?e.width="75px":"2"==t&&(e.width="55px",e.height="65px")},10)}return{enableTwitterWidget:function(){for(;twitterWidgetElem.length>0;)e(twitterWidgetElem.pop());commonLoadScript("//platform.twitter.com/widgets.js","tweetButton")},createTwitterWidget:e,enableTwitterButton:function(){for(;twitterButtonElem.length>0;){var e=twitterButtonElem.pop(),n=e.getAttribute("data-layout");n?t(e,n):t(e)}},createTweetButton:t}}),define("reset",[],function(){function e(t,n,i){i||(i={});for(var r in t){var a=t[r],o=n?n+"."+r:r;a&&"object"==typeof a?i=e(a,o,i):i[o]=a}return i}return{cancelChanges:function(t,n,i,r){if(n){var a={},o={};a[r]=i,o[r]=n;var s=e(o),l=e(a);for(var d in s)!function(e,t,n){for(var i=$D.getAll("input",e),r=$D.getAll("textarea",e),a=$D.getAll("select",e),o=0,s=i.length;o<s;o++){var l=i[o],d=l.getAttribute("data-bind");if($D.hasClass(l,"hb-form-error")){$D.removeClass(l,"hb-form-error");var u=l.nextElementSibling;$D.hasClass(u,"hb-field-error")&&$D.remove(u)}if(null!=d&&d===t){var c=l.type;if("text"===c){l.value=n||"",$E.fireEvent(l,"keyup");break}if("radio"===c)String(n)==l.value?l.checked="checked":l.checked="";else if("checkbox"===c){l.checked=n;break}}}for(var o=0,s=r.length;o<s;o++){var p=r[o],d=p.getAttribute("data-bind");if(null!=d&&d===t){p.value=n;break}}for(var o=0,s=a.length;o<s;o++){var a=a[o],d=a.getAttribute("data-bind");if(null!=d&&d===t){a.setAttribute("value",n);break}}}(t,d,l[d])}}}}),define("error_codes",[],function(){return{ERROR_SYSTEM_FILES:{SYSTEM_FILE_UPDATE_API_KEY_IS_NOT_MATCHED:41002,EXCEPTION_READING_DFS_FILE_CONTENT:41001},ERROR_AI:{GENERATE_TITLE:55003,AI_PORTAL_NOT_LINKED:55009,ACTION_NOT_SUPPORTED:55004,NO_RESULTS_FOUND_FOR_SEARCH:55005,PLATFORM_AI_ERRORS:55007,MINIMUM_CREDITS:55006,GENERATE_CONTENT:55002,GENERATE_AI_PORTAL_ID:55001,ERROR_ENABLE_DISABLE_AI:55008},ERROR_INTEGRATIONS:{INTEGRATION_SERVER_ERROR:50001,ZOHO_DOMAINS_ERROR:50002},ERROR_DIRECTORY:{CREATING_DIRECTORY_PROBLEM:26004,URL_EXIST:26003,URL_MAX_LENGTH:26002,DIRECTORY_URL_EMPTY:26001,DIRECTORY_NOT_FOUND:26006,RENAME_TRASHED_DIRECTORY:26005},ERROR_ZLT_REPORT_VIEWER:{LINK_NOT_ACTIVE_ERROR:48004,SNAP_ID_NOT_AVAILABLE:48002,ZLT_UNKNOWN_ERROR:48003,TASK_ID_NOT_AVAILABLE:48001},ERROR_DATA_MIGRATION:{INPUT_FILE_NOT_FOUND:40003,OUTPUT_FILE_NOT_FOUND:40004,NOT_PRE_PRODUCTION_MODE:40001,USER_DATA_FILE_NOT_FOUND:40005,MIGRATION_NAME_IS_EMPTY:40002},ERROR_DOMAINCONSOLE:{ANALYTICS_REPORT_MERGE_OTHERINFO_FILE_ERROR:24001,ANALYTICS_REPORT_MERGE_ORIGINAL_FILE_ERROR:24003,ANALYTICS_REPORT_MERGE_DOMAIN_FILE_ERROR:24002,PROVIDE_PROPER_VALUES:24008,INAVLID_REQUEST:24007,VERIFIED_DOMAIN_ICP_STATUS_CHANGE_DISALLOWED:24009,SPLITFILEFETCH_INVALID_SPLIT_TYPE:24006,ANALYTICS_REPORT_MERGE_OUTPUT_FILE_ERROR:24004,SPLITFILEFETCH_FILE_NOT_FOUND:24005},ERROR_TRANSLATION:{DUPLICATE_LANGUAGE_SUBSITE:10016,REVIEW_PERMISSION_DENIED:10013,TRANSLATION_SERVICE_SETUP_NOT_DONE:10007,UPDATE_FAILED_AS_TRANSLATION_TASK_EXIST:10008,INVALID_SNAPSHOT_ID:10010,INVALID_TRANSLATION_RESOURCE_TYPE:10018,CREATE_TRANSLATION_NOT_PERMITTED:10019,INVALID_TRANSLATION_SETUP:10003,INVALID_TASK_ID:10011,INVALID_SETUP_TYPE:10002,TRANSLATION_NOT_COMPLETE:10014,UNSUPPORTED_LANGUAGE:10020,INVALID_TASK_TYPE:10004,GOOGLE_TRANSLATE_SETUP_FAILED:10006,PAGE_SNAPSHOTS_EMPTY:10017,TRANSLATION_EXISTS:10001,TRANSLATION_SERVICE_SETUP_DONE_ALREADY:10009,TRANSLATION_PERMISSION_DENIED:10012,TRANSLATION_RATE_LIMIT_EXCEEDED:10005,SUBSITE_LIMIT_REACHED:10015},ERROR_FORWARDING_SERVER:{FORWARDING_ENTRY_DOES_NOT_EXIST:1002,DOMAIN_NOT_PRESENT:1003,FORWARDING_ENTRY_ALREADY_EXISTS:1001,ADDITIONAL_INFO_EXCEPTION:1004,ACCOUNT_ADMIN_SWITCH_EXCEPTION:1005,EXCEPTION_IN_DOMAIN_ASSOCIATION_FOR_FORWARDING:1004},ERROR_NEWSLETTER:{CAMPAIGNS_PORTAL_NOT_FOUND:42001},ERROR_COMMON:{EMPTY_BODYJSON:10031,NOT_AUTHORIZED:10011,SINGLE_PAGE_PLAN_NOT_APPLICABLE:10034,PROBLEM_WHILE_SAVING_FULL_CONTENT:10042,URL_REACHES_MAXIMUM_LENGTH:10008,INVALID_JSON:10029,USER_NOT_ADMIN:10046,SITE_RESOURCE_ID_MISMATCH:10014,INVALID_EMAIL:10038,CONTENTSTATE_NOT_EXIST:10044,INVALID_RESOURCE_ID:10026,MAX_LENGTH:10039,EMPTY_URL:10006,INVALID_SITE_TYPE_TO_MARK_SITE_AS_DELETED:10041,SAME_USER:10015,DELETE_NOT_ALLOWED:10024,INVALID_SIGNATURE:10020,URL_CONTAINS_ONLY_SPECIAL_CHARACTER:10012,USER_NOT_REVIEWER:10047,CHECKOUTID_RESOURCE_MISMATCH:10027,URL_CONTAINS_SYSTEM_URL:10003,URL_ALREADY_EXIST:10009,PARENT_ID_MISMATCH:10033,UNKNOWN_ERROR:10002,DELETE_FAILED:10023,CHECKOUTID_NOT_EXIST:10026,ACCESS_DENIED:10036,MIN_LENGTH:10040,INVALID_SNIPPET:10018,NO_NEW_USER:10016,UNSUPPORTED_AUTHORIZATION:10021,INVALID_SITE_RESOURCE_ID:10013,UPDATE_FAILED:10022,ADMIN_NOT_PRESENT:10045,SOID_MISMATCH:10035,CHECKOUTID_ERROR:10028,NOT_FOR_COMMERCE:10026,TRASH_NOT_ALLOWED:10030,INVALID_ACCESS_TOKEN:10043,INVALID_FILE_TYPE:10017,EMPTY_INPUTFIELD:10037,NO_CONTENT_FOUND:10019,TRANSLATE_ONGOING_STATE_NOCHANGE:10048,INVALID_URI:10001,PROBLEM_WHILE_SAVING_PATCH_FILE:10004,OPERATION_NOT_ALLOWED_IN_PRODUCTION_MODE:10025,INVALID_VALUES:10026,PAYMENT_FAILURE:10010,ACTION_NOT_ALLOWED:10032},ERROR_LANDINGPAGE:{ORIGINAL_PAGE_NOT_FOUND:49006,RESOURCE_ID_INVALID:49004,PAGE_NOT_ADDED:49002,PARENT_ID_INVALID:49005,SHARES_USER_ID_IS_INVALID:49008,SITE_RESOURCE_ID_INVALID:49003,TEMPLATE_ID_INVALID:49001,WORKSPACE_ALREADY_ADDED:49007,USER_NOT_ALLOWED:49009},ERROR_MAILNOTIFY:{INVALID_SMS_TYPE:39002,CONNECTION_ERROR:39001,REVIEWS_TEMPLATE_SAVE_ERROR:39003},ERROR_IMPORT:{SITE_JSON_FILE_VERSION_NOT_FOUND:38002,SITE_JSON_FILE_NOT_FOUND:38001},ERROR_PAYMENTS:{INVALID_ADDON_TRIAL_ID:22001,ADDON_TRIAL_EXISTS:22002,PAYMENT_MODEL_NOT_FOUND:22006,ADDON_TRIAL_NOT_APPLICABLE:22003,ADDON_TRIAL_DOES_NOT_EXIST:22005,ADDON_ALREADY_PURCHASED:22004},ERROR_SCHEMA:{PROBLEM_WHILE_DELETE:25002,PROBLEM_WHILE_ADD_SCHEMA:25003,DUPLICATE_ENTRY:25004,ORG_SCHEMA_ALREADY_EXISTS:25005,SCHEMA_GENERATOR_DISABLED:25006},ERROR_FORMS:{FORM_LIMIT_REACHED:57008,FROM_EMAIL_NOT_MATCHES_CUSTOM_OR_DEFAULT_EMAIL:57010,ENCRYPTED_BEFORE_PUBLISH:57022,ONE_ENTRY_PER_IP:57012,NO_FORM_FOUND:57003,NO_FORM_RECORD_FOUND:57006,PAGE_RESOURCE_NOT_FOUND:57001,FORM_DATA_ERROR:57004,CUSTOM_TO_DATE:57021,PAGE_RESOURCE_INVALID:57002,CRM_ACCOUNT_HAS_NO_WEBFORMS_OF_SPECIFIED_TYPE:57011,FORM_BLOCKED_FOR_MIGRATION:57013,FORM_DATA_COUNT_EXCEED:57005,CUSTOM_FROM_DATE:57014,CUSTOM_FROMTO_DATE:57020,SUBMIT_NOT_ALLOWED:57009,FORM_NOT_PUBLISHED:57007,CUSTOM_FUTURE_DATE:57015,FIELDS_CANNOT_BE_EMPTY:57e3,CUSTOM_PAST_DATE:57018},ERROR_PRODUCTFILTER:{FILTER_NAME_EMPTY:43001,INVALID_FILTER_TYPE:43002,SHOW_IN_STOREFRONT_ERROR:43007,FILTER_NOT_EXIST:43004,RESOURCE_MAPPED_TO_FILTER:43009,REORDER_ERROR:43006,INVALID_FILTER_VALUE:43003,PAYMENT_REQUIRED:43008,DELETE_FILTER:43005},ERROR_MARKETING_HUB:{DISCONNECT_FAILED:34005,NO_DOMAIN_FOUND:34001,CONNECT_FAILED:34004,CONNECTION_STATUS_ERROR:34002,ACCOUNT_CREATION_FAILED:34003,DNS_VERIFICATION_FAILED:34006},ERROR_COMMENTBOX:{COMMENT_MODERATION_NOT_AUTHORIZED:10026,PRODUCT_REVIEW_SAVE_ERROR_MESSAGE:10032,PRODUCT_REVIEW_PENDING_MESSAGE:10030,VERIFY_CODE_NEW:10033,WORDPRESS_XML_PARSE_ERROR:10037,VERIFY_CODE_INCORRECT:10035,PRODUCT_REVIEW_EMPTY_MESSAGE:10031,PRODUCT_REVIEWS_DISABLED:10029,VERIFY_CODE_EXPIRED:10034,PRODUCT_UNAUTHORIZED_ACCESS_MESSAGE:10036,INVALID_MODERATION_TYPE:10039,WORDPRESS_FILE_INVALID_ERROR:10038},ERROR_CONTRIBUTOR:{NOTAPARTOFORG:20012,INVITED_USER_NOT_FOUND:20005,SUB_SITE_CANNOT_BE_SHARED_AS_AUTHOR:20029,OUTSIDEORG:20013,USER_DELETION_FAILED_IN_BOOKS:20021,ZOHOONE_RESTRICT_PENDINGUSER_UPDATE:20017,ERROR_IN_MARKING_ACTIVE:20024,RESOURCE_TREE_FAILED:20002,PLAN_LIMIT_REACHED:20026,USER_PERMISSION_NOT_FOUND:20006,ERROR_IN_MARKING_USERINACTIVE:20023,ADD_CONTRIBUTOR_FAILED:20001,ERROR_IN_MARKING_USERACTIVE:20022,USER_ALREADY_EXISTS_IN_ACCOUNT:20030,USER_DOES_NOT_EXIST:20033,ERROR_IN_MARKING_USER_AS_SUPERADMIN:20035,ALLOW_ONE_GUEST_DEVELOPER_FOR_ZOHOONE_ACCOUNT:20036,ERROR_IN_MARKING_INACTIVE:20025,PERMISSION_EXISTS:20028,ACCEPT_SHARE_FAILED:20008,USER_NOT_FOUND:20004,DECLINE_SHARE_FAILED:20009,ERROR_IN_USER_ADDITION_BOOKS:20019,INVALID_IMAGE_TYPE:20027,ZOHOONE_USER_FAILURE:20014,ERROR_IN_UPDATE_PERMISSION:20018,ROLE_INVALID:20032,INDIVIDUAL_RESOURCE_PUBLISH:20037,BLOG_RESOURCE_NOT_FOUND:20007,OWNER_SHARE_MSG:20015,SHARED_USER_NOT_FOUND:20003,STOREADMIN_DELETION_FAILED:20016,UPDATE_PROFILE_FAILED:20010,DELETE_CONTRIBUTOR_FAILED:20011,INVALID_USER_ID:20034,USER_INVITE_REQUEST_PENDING:20031},ERROR_RESTRICTIONS:{SITE_VISIBILITY_NOT_ORG_PUBLIC:400001,NO_SUCH_ORG_EXISTS:400003,USER_NOT_IN_ORG:400005,PROBLEM_ADDING_USER:400004,ORG_PUBLIC_ORG_PRIVATE_NOT_ALLOWED:400002},ERROR_EXTENSIONS:{EXTENSIONS_EVENT_NOT_FOUND:40002,EXTENSIONS_FUNCTION_NOT_FOUND:40003,EXTENSIONS_STOREFRONT_FUNCTION_NOT_FOUND:40004,EXTENSIONS_DOES_NOT_EXIST:40001},ERROR_DOMAIN:{DOMAIN_ALREADY_PUBLISHED:48001,DOMAIN_ADD_ERROR:48020,ERROR_FINDING_DOMAIN:48004,BLOCKED_DOMAIN:48018,SUBDOMAIN_GENERATION_LIMIT_EXCEEDED:48012,ERROR_DOMAIN_NOT_ALLOWED:48006,ERROR_DELETING_SUBDOMAIN:48014,GENERATED_SUB_DOMAIN_EXPIRED:48015,VERIFICATION_RECORD_MISMATCH:48016,DNS_MAPPING_NOT_DONE:48005,ERROR_DELETING_DEFAULTGROUP_DOMAIN:48002,DOMAIN_ALREADY_VERIFIED:48010,SUBDOMAIN_EDIT_NOT_ALLOWED:48013,ERROR_DELETING_SPAM_DOMAIN:48017,DOMAIN_ALREADY_EXIST:48008,ERROR_SPAM_DOMAIN_NOT_ALLOWED:48011,NOT_PRIMARY_DOMAIN:48019,ERROR_DELETING_PRIMARY_DOMAIN:48003,DOMAIN_IS_ACTIVE:48021,VERIFICATION_NOT_FOUND:48007,DOMAIN_DOES_NOT_EXIST:48009},ERROR_CRM:{INVALID_DATA:12001,INACTIVE_USER:12002,REQUIRED_HEADER_MISSING:12006,FORM_DELETED:12004,INVALID_FORM_ID:12005,NO_CRM_ACCOUNT:12003,FORM_DEACTIVATED:12007},ERROR_FILES:{UPLOAD_IMAGE_DIMENSION_LIMIT_EXCEEDED:16013,PAGE_LIMIT_REACHED:16015,VERIFICATION_FILE_LIMIT_EXCEEDED:16010,INVALID_IMAGE_TYPE:16017,TOO_MANY_FILES_TO_UNZIP:16018,ERROR_WHILE_CREATING_DESTINATION:16007,SAME_FILE_NAME:16011,UNABLE_TO_CREATE_TEMP_DIRECTORY:16012,PARENT_MODEL_NOT_FOUND:16002,FILE_URL_IS_A_SYSTEM_URL:16003,FILE_UPLOAD_ERROR:16005,INVALID_VERIFICATION_FILE:16008,TEMPLATE_MODEL_NOT_FOUND:16001,INVALID_CONTENT_TYPE:16016,FILE_BEING_UNZIPPED_IS_TOO_BIG:16019,FILE_LIST_IS_EMPTY:16004,FILE_SIZE_LIMIT_EXCEEDED:16009,INVALID_DESTINATION:16006,STORAGE_LIMIT_EXCEEDED:16014},ERROR_PHOTO_ALBUM:{PHOTO_ALBUM_LIMIT_REACHED:53001,PHOTO_ALBUM_NOT_FOUND:53003,INCORRECT_URL:53002},ERROR_BLOG:{INVALID_SCHEDULED_TIME:11008,PUBLISH_WHEN_READYTOPUBLISH:11033,POST_CONTENT_NOT_FOUND:11015,NO_PUBLISH_SCHEDULEDPOST_REVIEW:11032,POST_SAVE_FAILED:11004,NO_PUBLISH_AUTHOR_REVIEW:11031,BLOG_DELETE_TOKEN_NOT_FOUND:11026,TAG_EXISTS:11012,TAG_NOT_FOUND:11019,POST_RESOURCE_NOT_FOUND:11014,ADMIN_NOT_PRESENT:11035,USER_NOT_ADMIN:11036,DEFAULT_CATEGORY_CANNOT_BE_DELETED:11028,DEFAULT_TITLE_UNCHANGED:11023,TAG_SAVE_FAILED:11013,CATEGORY_EMPTY:11020,JOB_ADD_FAILURE:11009,TAG_EMPTY:11021,USER_NOT_FOUND:11003,POST_CONTENT_FILE_WRITE_FAILED:11005,BLOG_SETTINGS_SAVE_FAILED:11017,IMPORT_DETAILS_NOT_FOUND:11022,BLOG_RESOURCE_NOT_FOUND:11001,CATEGORY_EXISTS:11010,AUTHOR_NOT_PERMITTED:11006,CLONE_POST_FAILED:11029,BLOG_RESOURCE_TRASHED:11002,SCHEDULE_NOT_ALLOWED:11016,AUTHOR_OPTION_NOT_ALLOWED:11034,BLOG_URL_EMPTY:11030,BLOG_ID_INVALID:11024,CATEGORY_SAVE_FAILED:11011,BLOG_DELETE_TOKEN_UPDATE_FAILED:11025,INVALID_BLOG_DELETE_TOKEN:11027,NOT_A_PAID_USER:11007,CATEGORY_NOT_FOUND:11018},ERROR_TEMPLATES:{NO_SUB_TEMPLATES_WERE_MERGED:18014,INVALID_TEMPLATE_ZIP:18027,RENAME_FILE_ADDED_IN_CONF:18002,DELETE_FILE_INCLUDED_EXTENDED:18003,DELETE_FILE_ADDED_IN_CONF:18004,TEMPLATE_DETAILS_NOT_FOUND:18021,TEMPLATE_FILES_NOT_MOVED_TO_LIVE:18012,EMPTY_FILE:18023,VESRION_CONTENT_FILE_NOT_FOUND:18017,RENAME_FILE_INCLUDED_EXTENDED:18001,CONTENT_FILE_NOT_FOUND:18015,SITE_JSON_FILE_NOT_FOUND:18016,FILE_READ_FAILED:18019,NO_SUB_TEMPLATES_FOUND:18013,DELETE_FILE_NOT_FOUND:18024,DISPLAY_STATUS_NOT_UPDATED:18011,ADD_FILE_NAME_ALREADY_EXIST:18007,ADD_FILE_TYPE_DOESNOT_MATCH:18008,FILE_CONTENT_NOT_FOUND:18020,TEMPLATE_NOT_FOUND:18009,PROBLEM_WHILE_UPDATING_TEMPLATE:18010,RENAME_FILE_TYPE_DOESNOT_MATCH:18006,CANNOT_DELETE_CONF_FILE:18025,RENAME_FILE_NAME_ALREADY_EXIST:18005,CANNOT_DELETE_TEMPLATE:18022,PROBLEM_WHILE_APPLYING_DEFAULT_CONTENT:18018,TEMPLATE_ID_INVALID:18026,FILE_REPEATED_OR_NOT_EXISTING:18026},ERROR_SEO:{SEO_REPORT_GENERATION_FAILED:27002,KEYWORD_ANALYSIS_FAILED:27004,SEO_REPORT_LIMIT_REACHED:27005,SEO_NOT_FOUND:27001,LINK_ANALYSIS_FAILED:27003},ERROR_SEARCH:{},ERROR_DCAPP:{DC_APP_NOT_FOUND:46002,SAME_FILE_NAME:46001,FUNCTION_UPDATE_ERROR:46006,FUNCTION_NOT_FOUND:46007,FILE_ALREADY_EXISTS:46004,INVALID_FILE_CONTENT:46010,NAME_OR_DISPLAY_NAME_NOT_FOUND:46005,SOURCE_FILE_NOT_FOUND:46003,DC_ADD_VIEW_FAILED:46008,DC_VIEW_NAME_EXISTS:46009},ERROR_SSL:{SSL_INSTALLATION_IN_PROCESS:26020,TOO_MANY_REATTEMPTS:26009,NO_VALID_DOMAIN:26013,REGISTRATION_FAILED:26007,CHALLENGE_LOCATION_CHANGED:26011,ORDER_FAILED:26016,NO_REPLY_NONCE:26008,CSR_ERROR:26015,CERTIFICATE_GET_ERROR:26017,CERTIFICATE_READ_FAILED:26014,DOMAIN_NOT_IN_CERT:26021,CHALLENGE_FAILED:26012,INVALID_SITE_ID_FOR_DOMAIN:26019,CERTIFICATE_ENCODE_ERROR:26018,NO_CHALLENGE_FOUND:26010},ERROR_CDN_CONSOLE:{UNAUTHORIZED_USER:390001,ERROR_WHILE_GENERATING_REFRESH_TOKEN:39002,UNKNOWN_CONFIG_KEY:390004,ERROR_IN_UPDATING_CDN_PROPERTIES_INPG_CONFIG:390003,ERROR_IN_REVOKING_OLD_REFRESH_TOKEN:390005},ERROR_ZFORMS:{ZFORMS_INACTIVE_USER:37003,INTERNAL_SERVER_ERROR:37005,INVALID_DATA_ID:37008,ZFORMS_NOT_A_MEMBER:37004,REQUIRED_PARAM_MISSING:37006,CONNECTION_ERROR:37001,INVALID_DATA_ZGID:37007,UNKNOWN_ERROR:37002},ERROR_REDIRECTION:{REDIRECTION_INVALID:28002,UPDATE_REDIRECTION_ERROR:28006,URL_EXIST:28003,REQUEST_URL_EXIST:28004,DESTINATION_NOT_FOUND_ERROR:28007,REDIRECTION_PAID_FEATURE:28001,BULK_IMPORT_GOING_ON:28009,ADD_REDIRECTION_ERROR:28005,DESTINATION_URL_INVALID:28008},ERROR_CUSTOM_FONTS:{CUSTOM_FONTS_INVALID_DATA:58004,CUSTOM_FONTS_LIMIT_REACHED:58001,CUSTOM_FONTS_FONT_FAMILY_EXISTS:58003,CUSTOM_FONTS_NOT_FOUND:58002},ERROR_SOCIALFEED:{ERROR_WHILE_ACCESSTOKEN_GENERATION:1e3,APP_TYPE_NOT_FOUND:1003,IGPROFILE_NOT_CONNECTED:1001,YOUTUBE_INVALID_INPUT:1002},ERROR_ZSURVEY:{CONNECTION_ERROR:47001,UNKNOWN_ERROR:47002},ERROR_IMAGE_OPTIMIZER:{IMAGE_REPORT_LIMIT_REACHED:57002,IMAGE_REPORT_GENERATION_FAILED:57001},ERROR_ZANALYTICS:{FILE_CONTENT_NOT_FOUND:35006,FILE_NOT_FOUND:35005,ENTITY_NOT_FOUND:35003,NOTIFICATION_URL_NOT_FOUND:35004,ORG_NOT_FOUND:35001,STORE_NOT_FOUND:35002},ERROR_APP_META:{APP_META_RECORD_NOT_EXIST:52006,APP_META_RECORD_DATA_NOT_FOUND:52003,TABLE_NAME_NOT_FOUND:51001,EXTENSION_UUID_NOT_FOUND:52002,APP_META_EXIST:52005,APP_META_EXCEPTION:52004},ERROR_BOOKINGS:{APP_OWNER_ONLY:56009,CREATE_WORKSPACE_ERROR:56007,CONNECTION_ERROR:56001,INSUFFICIENT_DATA:56008,NO_USER_EXISTS:56005,NO_INDUSTRIES:56006,UNKNOWN_ERROR:56002},ERROR_SOCIAL_AUTOPUBLISH:{NOT_PUBLISHED:3002,MULTIPLE_SN_AP:3006,CUSTOM_DOMAIN_AS_PRIMARY_DOMAIN:3004,PAGE_NOT_FOUND:3001,ADD_CUSTOM_DOMAIN:3003,NO_SN_AP:3005},ERROR_RESOURCE:{AMBIGUOUS_PARAMETERS:31003,INVALID_TP_HEADER_FOOTER_DELETE_TARGET_PARAM:31006,RESOURCE_NAME_EXISTS:31012,RESOURCE_NOT_FOUND:31001,RESOURCE_URL_EXISTS:31010,RESOURCE_NOT_FOUND_MOVE_ERROR:31015,RESOURCE_MOVE_ERROR:31014,INVALID_SITES_OPERATION:31004,INVALID_RESOURCE_FOR_TP_HEADER_FOOTER_CODE:31005,RESOURCE_TRASH_ERROR:31018,RESOURCE_HAS_PARENT_TRASHED:31017,RESOURCE_RENAME_ERROR:31013,RESOURCE_RESTORE_ERROR:31016,NOT_A_SUBSITE:31020,INVALID_APP_ID:31009,INVALID_LANGUAGE_PARENT_ID:31007,RESOURCE_PORTAL_TYPE_EXISTS:31019,RESOURCE_ALREADY_IN_ANOTHER_LANG_GROUP:31008,RESOURCE_HAS_SPECIAL_CHAR:31011,INVALID_RESOURCE_PARAMETERS:31002},ERROR_CUSTOMPG:{ALREADY_APPROVED:45015,DELETE_ERROR:45005,TRANSFORMS_DOES_NOT_EXIST:45014,CONNECTOR_APPROVAL_NOT_FOUND:45017,MISSING_FIELDS:45027,UNAPPROVED_VERSION:45013,INVALID_CONNECTOR:45011,UPDATE_FAILURE:45030,DELETE_PG_CONFIGURATION:45022,FILE_FORMAT_ERROR:45024,CONNECTOR_JSON_NOT_FOUND:45031,PUBLISH_ERROR:45006,VERSION_DOES_NOT_EXIST:45018,PLUGIN_PUBLISH_OR_INSTALL_FAILURE:45008,CONFIGURATION_ERROR:45012,HIGHER_VERSION_APPROVED:45019,MALFORMED_ENDPOINT_URL:45021,UNAUTHORIZED_ACTION:45020,UNINSTALL_ERROR:45002,INTERNAL_ERROR:45004,PLUGIN_UPDATE_FAILURE:45007,INVALID_UUID:45026,TRANSFORM_CREATE_FAILURE:45010,PRIVATE_SHARE_FAILURE:45009,CURRENCY_MISMATCH:45029,INVALID_REQUEST:45003,MANDATORY_ENDPOINT_TYPE:45028,INSTALL_ERROR:45001,PARSE_EXCEPTION:45025,HIGHER_VERSION_AVAILABLE:45016,CREATE_FAILURE:45023,TRANSFORM_UPDATE_FAILURE:45027},ERROR_SOCIAL_SHARE:{INVALID_FB_SOCIAL_SHARE_COUNT_RESPONSE:44002,INVALID_SOCIAL_MEDIA_NAME:44001},ERROR_MENUS:{MENU_MAX_LEVEL:21003,MENU_NOT_FOUND:21001,EMPTY_ANCHOR:21004,MENU_ITEMS_NOT_FOUND:21014,ROW_TYPE_NOT_FOUND:21016,INVALID_LAYOUT_ID:21015,DUPLICATE_ANCHOR:21005,MENU_NAME_ALREADY_EXISTS:21008,INVALID_TYPE:21006,INVALID_RESOURCE_ID:21007,MENU_INSERT_TYPE_EMPTY:21019,MULTIPLE_RESOURCES_ERROR:21013,MAX_MENU_COUNT_REACHED:21018,MENU_ITEM_EDIT_COMMON:21011,ACTIVE_MENU_DELETE:21002,MENU_ITEM_HAS_CHILDREN:21010,MEGA_MENU_NOT_FOUND:21012,MENU_ITEM_NOT_CREATED:21017,MENU_ITEM_NOT_FOUND:21009},ERROR_SITES:{OTP_MODEL_NOT_FOUND:13033,SITE_NOT_DELETED:13022,INVALID_GROUP_ID:13030,NO_CHANGE_IN_SOCIAL_PREVIEW_IMAGE_URL:13031,SITE_ACTIVE:13059,ORG_UNMAP_FAILED:13012,SITE_NOT_CREATED:13040,CUSTOM_CSS_ALREADY_EXISTS:13003,SITE_RESOURCE_META_NOT_FOUND:13019,MANAGE_GROUP_SITES_NOT_ALLOWED:13025,SITE_LIMIT_REACHED:13041,SITE_DELETED:13058,CUSTOM_CSS_NOT_FOUND:13001,TRANSFER_SITE_FAILED:13053,SITE_TITLE_EMPTY:13005,SITE_NOT_FOUND:13004,DEBUG_RESTRICTED:13024,CUSTOM_CSS_SAVE_FAILED:13002,SITES_TRIAL_CANCEL:13016,PLAN_NOT_APPLICABLE_FOR_ACCOUNT:13057,SITE_ALREADY_CREATED_VIA_ZOHOPUBLISH:13056,SITE_DETAILS_RESOURCEURL_CHARACTERS_EXCEEDED:13036,TOKEN_MAIL_NOT_SENT:13020,DELETE_GRP_SITE:13023,NO_CHANGE_IN_LOGO_RESOURCE_ID:13013,PAID_ZOHO_ONE_SITE_TRANSFER:13054,SITE_DELETE_TOKEN_NOT_FOUND:13018,INVALID_LOGO_RESOURCE_ID:13032,IS_STORE_SITE:13010,HAS_PAID_PLAN:13015,SITE_ALREADY_CREATED_VIA_ZOHODOMAIN:13039,INCORRECT_SITE_OWNER:13011,USER_EXIST_IN_GROUP:13028,NO_OF_ATTEMPTS_EXCEEDED:13042,SITE_DETAILS_UPDATE_FAILED:13006,STORE_NOT_CREATED:13009,SITE_DETAILS_RESOURCEURL_EMPTY:13035,PHONE_NUMBER_EMPTY:13017,SVG_ELEMENT_HAS_NO_HEIGHT_AND_WIDTH_ATTRIBUTE:13014,TRANSFER_SITE_TOKEN_UPDATE_FAILED:13050,EXCEEDS_MAXIMUM_PER_OTP_THRESHOLD:13032,SITE_DETAILS_RESOURCEURL_ALREADY_EXIST:13037,CAN_NOT_TRANSFER_TO_SITE_OWNER:13055,INVALID_BREADCRUMB_LEVEL:13034,SITE_ALREADY_CREATED_VIA_ZOHOMAIL_PROMOTION:13038,BLOCKED_SITE:13008,SITE_ALREADY_EXIST_IN_GROUP:13026,PAID_SITE_TRANSFER:13024,INVALID_TOKEN:13021,FAVICON_UPLOAD_SIZE_ERROR:13043,PAID_SITE:13007,SITE_EXIST_IN_DEBUG_GROUP:13027,INVALID_USER:13029},ERROR_MOBILE_APP_ADMIN:{SITE_INFO_NOT_AVAILABLE:41003,CLIENT_ID_ERROR:41005,DOMAIN_NOT_AVAILABLE:41002,PORTAL_ID_NOT_AVAILABLE:41001,EMPTY_CLIENT_ID:41004},ERROR_PORTAL:{MISSING_DKIM:37020,PUBLISH_SITE_TO_INVITE_USER:37038,INVALID_PHONE_NUMBER:37009,PROBLEM_WHILE_GETTING_TXT_RECORD:37022,INVALID_PORTAL_ID:37048,EMPTY_JSON_OBJECT:37027,PROBLEM_OCCURRED_WHILE_GETTING_USERS_COUNT:37030,BLOCK_ADD_GMAIL_FROM_ADDRESS:37046,INVALID_POSTAL_CODE:37010,GROUP_ALREADY_EXISTS:37035,GROUP_LIST_NOGROUP:37037,PAGE_GROUP_ALREADY_ADDED:37042,INVALID_ENTRIES:37014,MULTIPLE_DKIM:37019,PORTAL_DELETED:37032,WRONG_CAPTCHA:37012,INVALID_DKIM:37018,DUPLICATE_ENTRY:37016,GROUP_NOT_EXIST:37036,USER_LIMIT_EXCEEDED:37044,TOKEN_EXPIRED:37017,WRONG_EMAIL_OR_TOKEN:37003,MEMBER_NOTFOUND:37041,EMPTY_DOMAIN_NAME_FIELD:37026,PROBLEM_OCCURRED_WHILE_GETTING_USER_LIST:37029,OLD_PASSWORD_INVALID:37015,RESEND_INVITE_INVALID_EMAIL:37047,PORTAL_ALREADY_EXISTS:37031,FEDERATED_SIGNIN_PROVIDER_NOT_SUPPORTED:37028,EMAIL_EXISTS:37005,PROBLEM_WHILE_DELETING_SENDER_EMAIL:37023,USER_EXISTS:37004,SAML_ENABLE_FAILED:37043,PROBLEM_WHILE_EDIT_SENDER_NAME:37024,SIGNUP_DISABLED:37001,EMPTY_FIELDS:37008,PORTAL_NOT_EXIST:37033,ENABLE_PORTAL_TO_INVITE_USER:37039,PASSWORDS_DONT_MATCH:37011,MEMBER_ADD_ERROR_MESSAGE:37045,INVALID_OTP:37006,EMPTY_FROM_ADDRESS_FIELD:37025,SYNTAX_ERROR_DKIM:37021,MEMBER_DELETION_FAILURE:37040,PORTAL_DISABLED:37002,USER_LIMIT_REACHED:37013,GROUP_MEMBER_ALREADY_EXISTS:37034,INVALID_CREDENTIALS:37007},ERROR_CDN:{CDN_PATH_ASSOCIATED_WITH_ANOTHER_BUCKET:38004,KEY_NAME_ALREADY_EXISTS:38007,INVALID_CDN_PATH:38005,INVALID_KEY_NAME:38006,ACCESS_TOKEN_GENERATION_FAILURE:38001,BUCKET_DOES_NOT_EXISTS:38003,UNKNOWN_ERROR_OCCURRED_WHILE_WRITING_TO_CDN_SERVER:38008,ERROR_WHILE_GETTING_CDN_SITE_BUCKET_ORG_ID:38002},ERROR_PAGES:{PAGE_URL_EMPTY:14001,PAGE_VERSION_DISABLED:14008,PAGE_URL_EXIST:14002,PAGE_NAME_EMPTY:14006,ERROR_WHILE_CLONING_PAGE:14004,PAGE_NOT_FOUND:14005,INVALID_PARENT_ID:14007,ERROR_WHILE_ADDING_PAGE:14003},ERROR_PORTAL_CRM:{CRM_MODULE_EMPTY:54009,CRM_CONNECTION_NOTAVAILABLE:54004,CRM_MODULE_NOPERMISSION:54010,CRM_MODULE_READONLY:54008,CRM_PUSH_FAILED:54013,CRM_STORE_NOT_SUPPORTED:54014,CRM_CONNECTION_GENERATION_FAILED:54003,CRM_ORG_ERROR:54011,CRM_ORG_MODULE_ERROR:54012,CRM_MODULE_NOT_EXIST:54007,CRM_DISCONNECTION_FAILED:54001,CRM_CONNECTION_FAILED:54002,CRM_MODULE_API_NOT_SUPPORTED:54006,CRM_API_DISABLED:54005},ERROR_PUBLISH:{CUSTOM_DOMAIN_FEATURE_DOWNGRADED:12009,DOMAINS_NOT_VERIFIED:12021,SITE_NOT_PUBLISHED_YET:12010,RESOURCE_TYPE_NOT_SUPPORTED:12015,NO_DOMAIN_ASSOCIATED:12004,RESOURCE_NOT_READY_TO_PUBLISH:12023,NO_CHANGES_MADE:12012,INDIVIDUAL_PUBLISH_NOT_ENABLED:12024,RESOURCE_PUBLISH_FAILED:12013,RESOURCE_UNPUBLISH_FAILED:12016,SITE_DETAILS_NOT_FOUND:12002,USER_EMAIL_NOT_CONFIRMED:12005,SITE_STATE_NOT_FOUND:12008,RESOURCE_NOT_FOUND:12011,SYSTEM_PROTECTED_RESOURCE:12014,RESOURCE_NOT_PUBLISHED_YET:12019,INHERITED_SITE_NOT_PUBLISHED_YET:12025,PUBLISH_NOT_ALLOWED:12017,SITE_RESOURCE_NOT_ALLOWED_TO_PUBLISH:12020,SUB_SITE_NOT_PUBLISHED_YET:12022,SPAM_SITE:12006,CHILD_SUBSITE_PUBLISHED:12026,PUBLISH_IS_ONGOING:12018,SITE_BLOCKED:12003,THEME_STATE_NOT_FOUND:12007},ERROR_PASSWORD_PROTECT:{INCORRECT_PASSWORD:33001}}}),define("social_autopublish",["hbDialog","notify","facebook","twitter","mask","planFeature","reset","error_codes","utils","settingsDialog","CONST","asap_widget"],function(e,t,n,i,r,a,o,s,l,d,u,c){"use strict";function p(e){$X.get({url:app.data.api_url+"/sites/socialap",headers:A,handler:m})}function m(){var n=!0,i=JSON.parse(this.responseText);if(N.modelObj=N.modelObj?N.modelObj:{},"0"==i.status_code&&i.socialap)N.modelObj.socialap=i.socialap,N.modelObj.socialap.fb&&(N.modelObj.socialap.page=N.modelObj.socialap.fb.page_id);else{if(i.status_code!=s.ERROR_COMMON.PAYMENT_FAILURE)return i.status_code?void function(n){(!D||D&&"closed"===D.state)&&(D=new e.Dialog({dialogClass:"demo-dialog",header:!0,headingText:cms_i18n("ui.feature.socialautopublish.name"),footer:!1,escClose:!0,type:"fullscreen",offsetTop:"50px",offsetLeft:"0",closeBtn:!0,onClose:function(){D.dismiss(),app.goBack()}}));var i="",r="";n==s.ERROR_SOCIAL_AUTOPUBLISH.NOT_PUBLISHED?(i=cms_i18n("ui.settings.social.socialautopublish.publish"),r=cms_i18n("ui.feature.publish.name")):n==s.ERROR_SOCIAL_AUTOPUBLISH.ADD_CUSTOM_DOMAIN?(i=cms_i18n("ui.settings.social.socialautopublish.nocustomDomain"),r=cms_i18n("ui.settings.domains.add.domain")):n==s.ERROR_SOCIAL_AUTOPUBLISH.CUSTOM_DOMAIN_AS_PRIMARY_DOMAIN&&(i=cms_i18n("ui.settings.social.socialautopublish.customDomainAsPrimary"),r=cms_i18n("ui.settings.domains.manage.domain"));app.render({template:"sites_v2:socialshare:t_blocksocialautopublish/t_blocksocialautopublish",target:"socialautopublish-c",models:{helpText:i,buttonName:r,app:app,ASAP_CONSTANT:c.ASAP_CONSTANT},context:{asap_widget:c},callback:function(){var e=$D.getById("manageDomain");$E.bind(e,"click",function(e){if(app.data.role!=u.ROLE.OWNER)t(cms_i18n("ui.settings.domains.add_domain_shareduser")).warning();else if(n==s.ERROR_SOCIAL_AUTOPUBLISH.NOT_PUBLISHED)require(["domain"],function(e){e.showPublishDialog(!0)});else if(n==s.ERROR_SOCIAL_AUTOPUBLISH.ADD_CUSTOM_DOMAIN){var i={};i.type="add",i.hasSubDomain=!0,i.hasCustomDomain=!1,i.callback=p.bind(),require(["domain"],function(e){e.showDomain(i)})}else n==s.ERROR_SOCIAL_AUTOPUBLISH.CUSTOM_DOMAIN_AS_PRIMARY_DOMAIN&&(D.dismiss(),app.navigate("/zcms/"+app.getSubSiteId()+"/settings/domains"))}),app.next()}})}(i.status_code):void t(i.developer_message).error();n=!1}!function(t){N.modelObj||(N.modelObj={},N.modelObj.socialap={});!C||C&&"closed"===C.state?(C=new e.Dialog({dialogClass:"demo-dialog",headingText:cms_i18n("ui.feature.socialautopublish.name"),footer:!1,type:"fullscreen",offsetTop:"50px",offsetLeft:"0",onClose:app.goBack}),app.render({template:"sites_v2:socialshare:t_socialautopublish/t_socialautopublish",target:"socialautopublish-c",models:{socialap:N.modelObj.socialap,isSNAllowed:t,app:app,ASAP_CONSTANT:c.ASAP_CONSTANT},context:{socialAutoPublishModule:N,planFeature:a,asap_widget:c},bindCtx:N,callback:function(){b();var e=$D.getById("fb_preferences_form");e&&$E.bind(e,"hbValidate:submit",function(e){var t=e.detail;"success"===t.status?x():($D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").removeAttribute("disabled"))});var t=$D.getById("tw_preferences_form");t&&$E.bind(t,"hbValidate:submit",function(e){var t=e.detail;"success"===t.status?($D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","success"),O()):($D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","failure"),$D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").removeAttribute("disabled"))}),app.next()}})):app.next()}(n)}function f(e){r.close();var n=JSON.parse(this.responseText);n.hasOwnProperty("error")?(e.close(),$IS.object(n.error)?message=n.error.message:message=n.error,t(message).error()):e.location=n.data.url}function h(){r.close();var e=JSON.parse(this.responseText);e.data.length>0?T(e):($D.css($D.getById("fb_settings_group"),"display","none"),$D.css($D.getById("fb_no_page_div"),"display",""),$D.getById("snFBSettingsSave").setAttribute("disabled",""),$D.getById("snFBSettingsReset").setAttribute("disabled",""),w=!0)}function g(e){var t={};t.ap_sn_name=e,$X.del({url:app.data.api_url+"/sites/socialap",headers:A,bodyJSON:t,handler:_})}function _(){var e=JSON.parse(this.responseText);if("0"===e.status_code&&"fb"==e.api_kind){delete N.modelObj.socialap.fb;var n=$("#fb_settings_target").firstElementChild;n&&$D.remove(n),E(),t(cms_i18n("ui.settings.social.socialautopublish.settingsDelSuccess")).success()}else if("0"===e.status_code&&"tw"==e.api_kind){delete N.modelObj.socialap.tw;var i=$("#tw_settings_target").firstElementChild;i&&$D.remove(i),S(),t(cms_i18n("ui.settings.social.socialautopublish.settingsDelSuccess")).success()}else t(e.status_message).error()}function v(e){e&&app.navigate("/zcms/"+app.getSubSiteId()+"/settings/socialautopublish"),r.close();var n=JSON.parse(this.responseText);if("0"===n.status_code)N.modelObj.socialap=n.socialap,S(),t(cms_i18n("ui.settings.social.socialautopublish.twSettingsFromSitePub")).success();else{if(n.status_code==s.ERROR_COMMON.PAYMENT_FAILURE)return;t(n.developer_message).error()}}function b(){"undefined"==typeof FB&&(window.fbAsyncInit=function(){FB.init({appId:app.data.fb_appId,xfbml:!0,status:!0,version:"v6.0"})},function(e,t,n){var i,r=e.getElementsByTagName("script")[0];e.getElementById("facebook-jssdk")||((i=e.createElement("script")).id="facebook-jssdk",i.src="//connect.facebook.net/en_GB/sdk.js",r.parentNode.insertBefore(i,r))}(document))}function y(){r.close();var e=JSON.parse(this.responseText);0==e.status_code?(N.modelObj.socialap=e.socialap,0!=e.socialap.pages.data.length?(E(e.socialap.pages.data),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","success"),t(e.extra.msg).success()):$D.getById("fb_no_page_list")&&$D.css($D.getById("fb_no_page_list"),"display","")):"400"==e.response_code?($D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),t(e.developer_message).error()):e.status_code==s.ERROR_SOCIAL_AUTOPUBLISH.PAGE_NOT_FOUND?$D.getById("fb_no_page_list")&&$D.css($D.getById("fb_no_page_list"),"display",""):($D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),t(e.extra.error).error()),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").removeAttribute("disabled")}function E(e){app.render({template:"sites_v2:socialshare:t_fbsettings/t_fbsettings",target:"fb_settings_target",models:{socialap:N.modelObj.socialap},context:{socialAutoPublishModule:N},callback:function(){var t=$D.getById("fb_preferences_form");t&&$E.bind(t,"hbValidate:submit",function(e){"success"===e.detail.status?x():($D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").removeAttribute("disabled"))}),T(e)}})}function T(e){var t,n=$D.getById("fbPagesList");if(n){n.innerHTML="";var i=0;if(e.length>0){$D.css($D.getById("fb_settings_group"),"display","");var r;for(N.modelObj.socialap.fb.page_id?r=N.modelObj.socialap.page=N.modelObj.socialap.fb.page_id:(t=new Option(cms_i18n("ui.common.select"),"0",!0),n.appendChild(t),r="0"),i=0;i<e.length;i++){var a=r==e[i].id;t=new Option(e[i].name,e[i].id,!1,a),n.appendChild(t)}$D.css($D.getById("fb_select_page"),"display","")}}}function S(){app.render({template:"sites_v2:socialshare:t_twsettings/t_twsettings",target:"tw_settings_target",models:{socialap:N.modelObj.socialap},context:{socialAutoPublishModule:N},callback:function(){var e=$D.getById("tw_preferences_form");e&&$E.bind(e,"hbValidate:submit",function(e){"success"===e.detail.status?O():($D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","failure"),$D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").removeAttribute("disabled"))})}})}function x(){if(N.bindObj.socialap&&(N.bindObj.socialap.fb||N.bindObj.socialap.page)){if(N.bindObj.socialap.page){var e=$D.getById("fbPagesList");N.bindObj.socialap.fb||(N.bindObj.socialap.fb={}),N.bindObj.socialap.fb.page_name=e.options[e.selectedIndex].text,N.bindObj.socialap.fb.page_id=N.bindObj.socialap.page,delete N.bindObj.socialap.page}if(void 0!=N.bindObj.socialap.fb.ap_postdata&&void 0!=N.bindObj.socialap.fb.ap_postdata.post_as){if(1==N.bindObj.socialap.fb.ap_postdata.post_as)delete N.bindObj.socialap.fb.page_id,delete N.bindObj.socialap.fb.page_name;else if(2==N.bindObj.socialap.fb.ap_postdata.post_as&&(void 0==N.bindObj.socialap.fb.page_id||"0"==N.bindObj.socialap.fb.page_id))return $D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").removeAttribute("disabled"),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),void t(cms_i18n("ui.settings.social.socialautopublish.selectapage")).error()}else 1==N.modelObj.socialap.fb.ap_postdata.post_as&&(delete N.bindObj.socialap.fb.page_id,delete N.bindObj.socialap.fb.page_name);if(N.bindObj.socialap.fb&&N.bindObj.socialap.fb.ap_postdata){var n=N.bindObj.socialap.fb.ap_postdata;void 0!=n.auto_pub&&(n.auto_pub="on"==n.auto_pub?1:0),void 0!=n.pub_on_upd&&(n.pub_on_upd="on"==n.pub_on_upd?1:0),void 0!=n.post_opt&&void 0!=n.post_opt.tags&&(n.post_opt.tags="on"==n.post_opt.tags?"1":"0"),void 0!=n.post_as&&(n.post_as="1"==n.post_as?1:2)}var i=l.deepClone(N.modelObj);N.modelObj=app.utils.mergeObj(N.modelObj,N.bindObj);var a=new jsonDiff({},{}).create_patch(i,N.modelObj,!0);if(0==Object.keys(a).length)return $D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").removeAttribute("disabled"),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),void t(cms_i18n("ui.common.nochangetosave")).info();N.bindObj.socialap.fb&&N.bindObj.socialap.fb.ap_postdata&&1==N.bindObj.socialap.fb.ap_postdata.post_as&&(delete N.modelObj.socialap.fb.page_id,delete N.modelObj.socialap.fb.page_name),delete N.bindObj.socialap;var o={};o=N.modelObj.socialap.fb,FB.login(function(e){"connected"===e.status&&function(e,t){t.state="update",t.src="settings",t.ap_sn_name=1,t.tempFbToken=e.authResponse.accessToken;r.show(function(){$X.post({url:app.data.api_url+"/sites/socialap",headers:A,bodyJSON:t,handler:y})})}(e,o)},{scope:"manage_pages,business_management,publish_pages"})}else $D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").setAttribute("data-hb-submit","failure"),$D.getById("snFBSettingsSave")&&$D.getById("snFBSettingsSave").removeAttribute("disabled"),t(cms_i18n("ui.common.nochangetosave")).info()}function O(e){if(e&&e.srcElement&&"snTWSettingsReset"==e.srcElement.id)N.bindObj&&N.bindObj.socialap&&delete N.bindObj.socialap.tw;else if(N.bindObj&&N.bindObj.socialap&&N.bindObj.socialap.tw){var n=N.bindObj.socialap.tw.ap_postdata;void 0!=n.auto_pub&&(n.auto_pub="on"==n.auto_pub?1:0),void 0!=n.pub_on_upd&&(n.pub_on_upd="on"==n.pub_on_upd?1:0),void 0!=n.post_opt&&void 0!=n.post_opt.tags&&(n.post_opt.tags="on"==n.post_opt.tags?"1":"0"),N.modelObj=app.utils.mergeObj(N.modelObj,N.bindObj),delete N.bindObj.socialap.tw;var i={};(i=N.modelObj.socialap.tw).state="update",i.src="settings",i.ap_sn_name=2;r.show(function(){$X.post({url:app.data.api_url+"/sites/socialap",headers:A,bodyJSON:i,handler:I})})}else $D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","failure"),$D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").removeAttribute("disabled"),t(cms_i18n("ui.common.nochangetosave")).info()}function I(){r.close();var e=JSON.parse(this.responseText);0==e.status_code?(N.modelObj.socialap=e.socialap,S(),$D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","success"),t(e.extra.msg).success()):"400"==e.response_code?($D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","failure"),t(e.developer_message).error()):($D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").setAttribute("data-hb-submit","failure"),t(e.extra.error).error()),$D.getById("snTWSettingsSave")&&$D.getById("snTWSettingsSave").removeAttribute("disabled")}var A=app.getHeaders(),C=null,D=null,w=!1;$E.bind(window,"message",function(e){if(-1!=app.data.appDomain.indexOf(e.origin.replace(/http(s)?:\/\//,""))){var t=JSON.parse(e.data);t.method&&"twitter"===t.method&&function(e){var t={},n=void 0==$D.getById("twApConnect"),i=n?"Connect":$D.getById("twApConnect").innerHTML.trim();t.state="Connect"===i?"insert":"reconnect",t.src=n?"builder":"settings",t.userdetails=e.userdetails,t.flag_tw=!0,r.show(function(){$X.post({url:app.data.api_url+"/sites/socialap",headers:A,bodyJSON:t,args:n,handler:v})})}(t)}});var R=[],N={getSocialAPSettings:p,fnAccordian:function(e){},fnFbLogin:function(e,t){if("fbApConnect"===this.id||t){"undefined"==typeof FB&&b();var n=t||$D.getById("fbApConnect").innerHTML.trim();"Connect"!==n&&"Reconnect"!==n||(FB.login(function(e){"connected"===e.status&&function(e){var t=R.fb_user_id=e.authResponse.userID,n=R.fb_tmp_tok=e.authResponse.accessToken,i={};i.ap_sn_name=1;var a=$D.getById("fbApConnect")?$D.getById("fbApConnect").innerHTML.trim():"Connect";"Reconnect"===a?i.state="reconnect":"Connect"===a&&(i.state="insert"),i.user_id=t,i.tempFbToken=n,i.src=$D.getById("fbApConnect")?"settings":"builder",r.show(function(){$X.post({url:app.data.api_url+"/sites/socialap",headers:A,bodyJSON:i,handler:y})})}(e)},{scope:"manage_pages,publish_pages"}),t&&app.navigate("/zcms/"+app.getSubSiteId()+"/settings/socialautopublish"))}else"fbApDisconnect"==this.id&&g("1")},fnTwLogin:function(e,t){if("twApConnect"===this.id||t){var n=window.open("","Twitter Login: ZOHO SITES","height=500,width=500"),i={},a=t||$D.getById("twApConnect").innerHTML.trim();a!==cms_i18n("ui.common.connect")&&a!==cms_i18n("ui.common.reconnect")||(i.state=a===cms_i18n("ui.common.connect")?"insert":"reconnect",i.siteId=app.data.siteId,r.show(function(){$X.get({url:"/zs-site/api/v0/twitterLogin",params:i,headers:A,args:n,handler:f})}))}else"twApDisconnect"==this.id&&g("2")},fnSaveSnFBSettings:x,fnSaveSnTWSettings:O,fnCancelSnFBSettings:function(){if(N.bindObj.socialap&&(N.bindObj.socialap.fb||N.bindObj.socialap.page)){var e=$D.getById("t_fbsettingsform"),n=$D.getById("fb_select_page");o.cancelChanges(e,N.bindObj.socialap.fb,N.modelObj.socialap.fb,"socialap.fb"),delete N.bindObj.socialap.fb,o.cancelChanges(n,N.bindObj.socialap.page,N.modelObj.socialap.page,"socialap.page"),delete N.bindObj.socialap.page,2==N.modelObj.socialap.fb.ap_postdata.post_as?n.style.display="":n.style.display="none",delete N.bindObj.socialap}else t(cms_i18n("ui.common.nochangetosave")).info()},fnCancelSnTWSettings:function(){if(N.bindObj.socialap&&N.bindObj.socialap.tw){var e=$D.getById("t_twsettingsform");o.cancelChanges(e,N.bindObj.socialap.tw,N.modelObj.socialap.tw,"socialap.tw"),delete N.bindObj.socialap}else t(cms_i18n("ui.common.nochangetosave")).info()},fnFbBlogPostAs:function(){"2"===this.value?function(){var e={};e.siteId=app.data.siteId,r.show(function(){$X.get({url:"/zs-site/api/v0/refreshFbPgList",params:e,handler:h})})}():(w&&($D.css($D.getById("fb_settings_group"),"display",""),$D.css($D.getById("fb_no_page_div"),"display","none"),$D.getById("snFBSettingsSave").removeAttribute("disabled"),$D.getById("snFBSettingsReset").removeAttribute("disabled"),w=!1),$D.css($D.getById("fb_select_page"),"display","none"))},onRouteChange:function(){C&&C.dismiss(),C=null},fnLoadFbSdk:b};return N}),define("punycode",[],function(){function e(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:d}function t(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function n(e,t,n){var i;for(e=n?Math.floor(e/u):e>>1,e+=Math.floor(e/t),i=0;e>(d-c)*p>>1;i+=d)e=Math.floor(e/(d-c));return Math.floor(i+(d-c+1)*e/(e+m))}function i(e,t){return(e-=(e-97<26)<<5)+((!t&&e-65<26)<<5)}function r(t,i){var r,a,u,m,g,_,v,b,y,E,T,S,x,O=[],I=[],A=t.length;for(r=o,u=0,m=s,(g=t.lastIndexOf(l))<0&&(g=0),_=0;_<g;++_){if(i&&(I[O.length]=t.charCodeAt(_)-65<26),t.charCodeAt(_)>=128)throw new RangeError("Illegal input >= 0x80");O.push(t.charCodeAt(_))}for(v=g>0?g+1:0;v<A;){for(b=u,y=1,E=d;;E+=d){if(v>=A)throw RangeError("punycode_bad_input(1)");if((T=e(t.charCodeAt(v++)))>=d)throw RangeError("punycode_bad_input(2)");if(T>Math.floor((f-u)/y))throw RangeError("punycode_overflow(1)");if(u+=T*y,S=E<=m?c:E>=m+p?p:E-m,T<S)break;if(y>Math.floor(f/(d-S)))throw RangeError("punycode_overflow(2)");y*=d-S}if(a=O.length+1,m=n(u-b,a,0===b),Math.floor(u/a)>f-r)throw RangeError("punycode_overflow(3)");r+=Math.floor(u/a),u%=a,i&&I.splice(u,0,t.charCodeAt(v-1)-65<26),O.splice(u,0,r),u++}if(i)for(u=0,x=O.length;u<x;u++)I[u]&&(O[u]=String.fromCharCode(O[u]).toUpperCase().charCodeAt(0));return h.encode(O)}function a(e,r){var a,u,m,g,_,v,b,y,E,T,S,x;r&&(x=h.decode(e));var O=(e=h.decode(e.toLowerCase())).length;if(r)for(v=0;v<O;v++)x[v]=e[v]!=x[v];var I=[];for(a=o,u=0,_=s,v=0;v<O;++v)e[v]<128&&I.push(String.fromCharCode(x?i(e[v],x[v]):e[v]));for(m=g=I.length,g>0&&I.push(l);m<O;){for(b=f,v=0;v<O;++v)(S=e[v])>=a&&S<b&&(b=S);if(b-a>Math.floor((f-u)/(m+1)))throw RangeError("punycode_overflow (1)");for(u+=(b-a)*(m+1),a=b,v=0;v<O;++v){if((S=e[v])<a&&++u>f)return Error("punycode_overflow(2)");if(S==a){for(y=u,E=d;T=E<=_?c:E>=_+p?p:E-_,!(y<T);E+=d)I.push(String.fromCharCode(t(T+(y-T)%(d-T),0))),y=Math.floor((y-T)/(d-T));I.push(String.fromCharCode(t(y,r&&x[v]?1:0))),_=n(u,m+1,m==g),u=0,++m}}++u,++a}return I.join("")}var o=128,s=72,l="-",d=36,u=700,c=1,p=26,m=38,f=2147483647,h={decode:function(e){for(var t,n,i=[],r=0,a=e.length;r<a;){if(55296==(63488&(t=e.charCodeAt(r++)))){if(n=e.charCodeAt(r++),55296!=(64512&t)||56320!=(64512&n))throw new RangeError("UTF-16(decode): Illegal UTF-16 sequence");t=((1023&t)<<10)+(1023&n)+65536}i.push(t)}return i},encode:function(e){for(var t,n=[],i=0,r=e.length;i<r;){if(55296==(63488&(t=e[i++])))throw new RangeError("UTF-16(encode): Illegal UTF-16 value");t>65535&&(t-=65536,n.push(String.fromCharCode(t>>>10&1023|55296)),t=56320|1023&t),n.push(String.fromCharCode(t))}return n.join("")}};return{toASCII:function(e){for(var t=e.split("."),n=[],i=0;i<t.length;++i){var r=t[i];n.push(r.match(/[^A-Za-z0-9-_/?=&]/)?"xn--"+a(r):r)}return n.join(".")},toUnicode:function(e){for(var t=e.split("."),n=[],i=0;i<t.length;++i){var a=t[i];n.push(a.match(/^xn--/)?r(a.slice(4)):a)}return n.join(".")}}}),define("domain",["hbDialog","notify","planFeature","social_autopublish","confirmDialog","error_codes","CONST","asap_widget","mask","punycode"],function(e,t,n,i,r,a,o,s,l,d){"use strict";function u(e){var t=JSON.parse(this.responseText);c(U=t.domain_list,e.redirectToBuyDomain)}function c(e,t){for(var n=!1,i=!1,r=0;e&&r<e.length;r++)0==e[r].domain_type?n=!0:i=!0;var a={};a.type="add",a.hasSubDomain=n,a.hasCustomDomain=i,a.redirectToBuyDomain=t,m(a)}function p(e,t){var n=t||{};n.type="publish",n.first_publish=e,e||(n.domain_name=t.primary_domain,n.hasCustomDomain&&n.subDomainPrimary&&(n.secondaryDomain=t.secondary_domain,n.secondaryDomainId=t.secondary_domain_id)),i.fnLoadFbSdk(),function(e,t){{if(null==e.certificate_details)return t(e);if(e.certificate_details.isSSLReadyToInstall)return app.data.share_options.domain_and_SSL?(e.showSslMsg=!0,e.sslMsg=cms_i18n("ui.settings.domain.ssl.redirect.msg",app.data.builder_base_url+"/settings/sslhosting"),t(e)):t(e);require(["domains"],function(n){n.getSSLInfo(e.certificate_details,function(n){e.sslMsg=n.status_msg,n.ssl_status!=o.SSL_STATUS.SUCCESS?e.showSslMsg=n.show_msg:e.showSslMsg=!1;return t(e)})})}}(n,function(e){m(e)})}function m(t){B&&C(),Y.bindObj||(Y.bindObj={});var r={makePrimaryDiv:!1,subDomainDiv:!1,publishDiv:!1,customDomainDiv:!1,domain_purchase_enabled:app.data.domain_purchase_enabled,DNSDiv:!1,paymentsDiv:!1,flag_publish:!1,first_publish:!1,genSubDomainDiv:!1,hideDomConfigDiv:!1},s={};r.type=t.type,r.hosting_domain=app.data.hosting_domain,r.hosting_domain=r.hosting_domain.substr(1),r.showSslMsg=t.showSslMsg,r.sslMsg=t.sslMsg;var l="true"==app.data.plan_feature.Custom_Domain;r.paymentsDiv=!l,M=t.callback;var d="true"==app.data.plan_feature.publish,u=n.isFeatureEnabled(n.feature.EDIT_SUB_DOMAIN);"add"==t.type?(r.customDomainDiv=!0,r.subDomainDiv=!t.hasSubDomain):"edit"==t.type?(r.subDomainDiv=!0,r.paymentsDiv=!1,r.hideDomConfigDiv=!0,s=t.domain_model):"publish"==t.type?(r.flag_publish=!0,t.first_publish?(r.customDomainDiv=!0,r.subDomainDiv=!0,r.first_publish=!0):(r.domain_name=t.domain_name,r.publishDiv=!0,t.subDomainPrimary?t.hasCustomDomain&&l?(r.secondaryDomain=t.secondaryDomain,r.secondaryDomainId=t.secondaryDomainId,t.customDomainDNS?r.makePrimaryDiv=!0:r.DNSDiv=!0,r.paymentsDiv=!1):r.customDomainDiv=!0:l&&(t.customDomainDNS||(r.publishDiv=!1,r.DNSDiv=!0)))):"addResponse"==t.type&&(r.DNSDiv=!0,r.domain_name=t.domain_name),!r.paymentsDiv&&d||(r.customDomainDiv=!1),d||"edit"==t.type||(r.paymentsDiv=!0),d&&u||"edit"==t.type||(r.subDomainDiv=!1),!d||u||"edit"==t.type||t.hasSubDomain||r.publishDiv||(r.genSubDomainDiv=!0),r.primary_domain=r&&r.domain_name?r.domain_name.replace("www.",""):"",r.verification_status=t.verification_status,r.token=t.token,r.unverifiedDiv=t.hasUnverifiedDomains,r.prefix=function(e,t){var n="www",i=e.split("."),r=i.length;if(t){var a=t.split(".").length;n=i.slice(0,r-a).join(".")||n}else{var o=!1;r>2&&(2!=i[r-1].length||2!=i[r-2].length&&3!=i[r-2].length||(o=!0),n=e.startsWith("www.")&&(3==r||4==r&&o)?"www":2==r||3==r&&o?"www":i[0])}return n}(r.primary_domain,t.rootDomain),r.primary_domain=r&&r.domain_name?r.domain_name.replace(r.prefix+".",""):"",r.secondary_root_domain=r&&r.secondaryDomain?r.secondaryDomain.replace(r.prefix+".",""):"",app._.r.__curRoute&&app._.r.__curRoute.module&&"site_dashboard"==app._.r.__curRoute.module&&require(["site_dashboard"],function(e){e.dashboard()}),"publish"!=t.type||r.primary_domain!=r.domain_name||t.subDomainPrimary||(r.domain_name=r.prefix+"."+r.domain_name),t.domain_name&&(L=t.domain_name);var c,p="";if(k="",t.domainConnectUrl){k=t.domainConnectUrl;var m=new URL(k).hostname;c=m===W.Google?cms_i18n("ui.settings.domain.domainconnect.heading","Google"):m===W.GoDaddy?cms_i18n("ui.settings.domain.domainconnect.heading","GoDaddy"):cms_i18n("ui.settings.domain.domainconnect.heading","");var _=cms_i18n(app.data.isStoreEnabled?"ui.store.common.title":"ui.product.title");p={content:cms_i18n("ui.settings.domain.domainconnect.content",L,c,_),buttonContent:cms_i18n("ui.common.connect")}}B=new e.Dialog({dialogClass:"domain-dialog-cntr",header:{headerLeft:{text:{headingText:c||function(e){var t="";t=cms_i18n(e.customDomainDiv&&e.subDomainDiv?"ui.settings.domain.heading":0==e.verification_status&&e.DNSDiv?"ui.dashboard.domain.verifydomain":e.DNSDiv?"ui.settings.domains.publishheading":"edit"==e.type?"ui.settings.domains.change.domain":"add"==e.type?"ui.settings.domains.add.domain":app.data.isStoreEnabled?"ui.store.common.title":"ui.product.title");return t}(r)}}},footer:!1,closeBtn:!0,type:"fullscreen",mask:!0,offsetTop:"0",offsetLeft:"0px",onClose:function(){B=null,$E.dispatch(document.body,"domainmgmt:close"),app._.r.__curRoute&&app._.r.__curRoute.module&&("social_autopublish"==app._.r.__curRoute.module?i.getSocialAPSettings():["files","pages"].includes(app._.r.__curRoute.module)&&app.navigate(app._.r.__curRoute.urlOri)),isStore&&"/zstore"==window.location.pathname&&$X.get({url:"/zstore/api/to-do",headers:H,handler:function(){var e=JSON.parse(this.responseText);"0"==e.status_code&&e.todos.publish_site&&7==e.extra.completed_number_of_tasks&&require(["dashboard"],function(e){e.show()})}}),isStore||(window.location.pathname.endsWith("/domains/add")||window.location.pathname.endsWith("/zcms"))&&app.goBack&&app.goBack(),window.location.pathname.endsWith("seo/verificationfiles")&&require(["seo"],function(e){e.getVerificationFile()})},onOk:function(){}});var v=o.ZOHO_DOMAINS_SUPPORTED_DC.includes(app.data.data_center);app.render({template:"sites_v2:domain:domain_dialog/domain_dialog",target:B.content,headingText:c,models:{domain_model:s,opts:r,app:app,CONST:o,domainConnectUrl:k,contentInDomainConnect:p,canLoadZDomainWidget:v,redirectToBuyDomain:t.redirectToBuyDomain},context:{domain:Y,planFeature:n},callback:function(){if(B.open(),app.next(),f("subDomainForm","submit",h),f("mapDomainForm","submit",D),f("buyDomainForm","submit",D),f("customDomainForm","submit",g),t.redirectToBuyDomain&&($D.getById("mapDomainTab")&&$D.removeClass($D.getById("mapDomainTab"),"hb-active"),$D.getById("mapDomain-c")&&$D.removeClass($D.getById("mapDomain-c"),"hb-active"),$D.getById("buyDomain-c")&&$D.addClass($D.getById("buyDomain-c"),"hb-active")),r.publishDiv&&$X.get({url:app.data.api_url+"/sites/socialap",headers:H,handler:function(){if(JSON.parse(this.responseText).socialap)P=JSON.parse(this.responseText).socialap;else if((P=JSON.parse(this.responseText))&&P.status_code&&(P.status_code==a.ERROR_SOCIAL_AUTOPUBLISH.ADD_CUSTOM_DOMAIN||P.status_code==a.ERROR_SOCIAL_AUTOPUBLISH.CUSTOM_DOMAIN_AS_PRIMARY_DOMAIN)){var e=$D.getById("snIcons");e&&(e.style.display="none")}}}),k)for(var e=document.querySelectorAll('[data-dns-settings="dns-settings-div"]'),n=0;n<e.length;n++)$D.css(e[n],"display","none");var i=$D.getById("zp_mapDomainName"),o=$D.getById("zp_buyDomainName");i&&(i.value="",i.focus()),o&&(o.value="",o.focus())}})}function f(e,t,n){var i=$D.getById(e);i&&($E.unbind(i,t,n),$E.bind(i,t,n))}function h(e){e.preventDefault();"edit"==$D.getById("zp_addsubdombtn").getAttribute("subDomainType")?b.call(this):g.call(this)}function g(e,t){if(e&&e.preventDefault(),!z){var n={};n.site_id=app.data.siteId;var i,r;if(t&&("mapDomainForm"==t||"buyDomainForm"==t)||this&&"customDomainForm"==this.id){var a=t||this&&this.id,s=q[a];if(i=$D.getById(s.inputId).value.toLowerCase(),r=$D.getById(s.buttonId),i=i.replace(/ht(tp)s?:\/\//,""),!x(i,a))return void(r&&r.removeAttribute("disabled"));n.domain_name=d.toUnicode(i),n.domain_type=o.DOMAIN_TYPE.CUSTOM_DOMAIN}else{n.domain_type=o.DOMAIN_TYPE.SUB_DOMAIN;var l=q.subDomainForm;i=(i=$D.getById(l.inputId).value.toLowerCase()).replace(/ht(tp)s?:\/\//,""),O("loading");if(!S(i+app.data.hosting_domain))return void($D.getById(l.buttonId)&&$D.getById(l.buttonId).removeAttribute("disabled"));n.sub_domain_name=d.toUnicode(i)}z=!0,$X.post({url:app.data.api_url+"/domains",params:n,headers:H,handler:v,args:this?this.id:t})}}function _(e){var n=$D.getById("domainDialogDiv").getAttribute("flag_publish");if(0==e.origin.indexOf(app.data.appDomain)&&0==e.data.indexOf("domainresponse::")){window.focus(),j.close(),B&&C();var i=e.data.replace("domainresponse::",""),r=JSON.parse(i);if("0"==r.status_code){if("false"==n||0==n){$D.getById("domain-empty-state")&&($D.getById("domain-empty-state").style.display="none");for(var a=0;a<r.domain_list.length;a++)app.view.renderPartial({partial:"sites_v2:t_domainsTable.domainsPartial",args:[r.domain_list[a],app],context:{domain:Y},refEl:"#zp_domtablecontainer",insertType:"append"})}else $E.dispatch(document.body,"domain:added",r);t(r.developer_message).success()}else t(r.developer_message).error()}}function v(e){var t=JSON.parse(this.responseText);z=!1;var n="";if("0"==t.status_code)if(t.extra&&(n=t.extra.URL),M&&M(),M=null,"forwarding_domain_swap"==t.api_kind)!function(e,t){var n={headingText:cms_i18n("ui.settings.domain.forwardingdomain.dialogtitle"),okText:cms_i18n("ui.common.remove"),closeBtn:!1,escClose:!1,confirmIcon:"none",contentMsg:cms_i18n("ui.settings.domain.forwardingdomain"),ok:function(){$X.post({url:app.data.api_url+"/domains/forwarding-domain-swap-authorization",headers:H,bodyJSON:t,handler:v,args:e})},cancel:function(){C()}};r.open(n)}(e,t.initial_params);else{if($E.dispatch(document.body,"domainmgmt:add",t),t.domain_list&&t.domain_list.length>0&&0==t.domain_list[0].verification_status&&t.domain_list[0].token){var i=t.domain_list[0],o={primary_domain:i.domain_name,subDomainPrimary:!1,is_ssl_hosted:!1,hasCustomDomain:!0,customDomainDNS:!1,secondary_domain:i.domain_name,secondary_domain_id:i.domain_id,verification_status:i.verification_status,token:i.token,rootDomain:i.verification_details.domain_name,domainConnectUrl:n};return C(),void p(!1,o)}if("true"==$D.getById("domainDialogDiv").getAttribute("first_publish")||1==$D.getById("domainDialogDiv").getAttribute("first_publish"))$E.dispatch(document.body,"domain:added",t);else if("true"==$D.getById("domainDialogDiv").getAttribute("flag_publish")||1==$D.getById("domainDialogDiv").getAttribute("flag_publish"))require(["publish"],function(e){var n=e.publish_details,i=t.domain_list,r={primary_domain:n.primary_domain,subDomainPrimary:!0,is_ssl_hosted:n.is_ssl_hosted,hasCustomDomain:!0,customDomainDNS:i[0].dns_status||i[0].forward_status,secondary_domain:i[0].domain_name,secondary_domain_id:i[0].domain_id,verification_status:i[0].verification_status};C(),p(!1,r)});else{var s=t.domain_list;C(),0==s[0].domain_type||s[0].dns_status&&s[0].forward_status||function(e,t){var n={};n.type="addResponse",n.domain_name=e,n.verification_status=t,m(n)}(s[0].domain_name,s[0].verification_status),$D.getById("zp_mapDomBtn")&&$D.getById("zp_mapDomBtn").removeAttribute("disabled")}}else{var l,d="subDomainForm",u="mapDomainForm",c="buyDomainForm";if(l=e==d?$D.getById("domErrorMsg"):e==u?$D.getById("mapDomMsg"):e==c?$D.getById("buyDomMsg"):$D.getById("configureDomMsg"),"400"==t.response_code)l.innerHTML=cms_i18n("ui.settings.domain.invalid"),l.style.display="block",l.className="sites-text red";else if(t.status_code==a.ERROR_DOMAIN.DOMAIN_ADD_ERROR){var f=cms_i18n("ui.settings.domain.error");l.innerHTML=f,l.style.display="block",l.className="sites-text red"}else if(t.status_code==a.ERROR_DOMAIN.ERROR_DOMAIN_NOT_ALLOWED||t.status_code==a.ERROR_DOMAIN.DOMAIN_ALREADY_EXIST){f=cms_i18n("ui.settings.domain.alreadyadded");l.innerHTML=f,l.style.display="block",l.className="sites-text red"}else if(e===d||"zp_gensubdombtn"===e){f=t.status_code==a.ERROR_DOMAIN.SUBDOMAIN_GENERATION_LIMIT_EXCEEDED?cms_i18n("ui.upgrade.subdomain_generation.limitreached"):t.developer_message;l.innerHTML=f,l.style.display="block",l.className="sites-text red"}else{f=t.status_code==a.ERROR_DOMAIN.ERROR_SPAM_DOMAIN_NOT_ALLOWED?cms_i18n("ui.settings.domains.spamdomain.errormsg"):t.developer_message;l.innerHTML=f,l.style.display="block",l.className="sites-text red"}}$D.getById("zp_existingdombtn")&&$D.getById("zp_existingdombtn").removeAttribute("disabled"),$D.getById("zp_addsubdombtn")&&$D.getById("zp_addsubdombtn").removeAttribute("disabled"),$D.getById("zp_mapDomBtn")&&$D.getById("zp_mapDomBtn").removeAttribute("disabled"),$D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled")}function b(e){if(e&&e.preventDefault(),!z){var t=$D.getById("zp_subdomainname").value.toLowerCase(),n=$D.getById("zp_addsubdombtn").getAttribute("domain_id");if(S((t=t.replace(/ht(tp)s?:\/\//,""))+app.data.hosting_domain)){var i={};i.sub_domain_name=d.toUnicode(t),z=!0,$X.put({url:app.data.api_url+"/domains/"+n,headers:H,bodyJSON:i,handler:y})}}}function y(){var e=JSON.parse(this.responseText);z=!1,"0"==e.status_code?(C(),$E.dispatch(document.body,"domainmgmt:edit",e)):e.status_code==a.ERROR_PUBLISH.PUBLISH_NOT_ALLOWED?(C(),require(["planFeature"],function(e){e.showUpgradeDialog("edit_sub_domain",-1)})):($D.getById("domErrorMsg").innerHTML=e.developer_message,$D.getById("domErrorMsg").style.display="block",$D.getById("domErrorMsg").className="sites-text red"),$D.getById("zp_addsubdombtn").removeAttribute("disabled")}function E(){var e=JSON.parse(this.responseText);"1"==e.status_code?require(["planFeature"],function(e){e.showUpgradeDialog("markPrimary")}):(e.extra&&(e.domain_list=e.domain_list.concat(e.extra)),$E.dispatch(document.body,"domainmgmt:markPrimary",e.domain_list),require(["publish"],function(t){for(var n,i,r=e.domain_list,a=0;a<r.length;a++)if(1==r[a].primary_domain){n=r[a].domain_name,i=r[a].dns_status||r[a].forward_status;break}var o={primary_domain:n,primaryDomainDNS:i,customDomainDNS:i,subDomainPrimary:!1,flag_custom:!0};C(),p(!1,o)}))}function T(){N&&clearTimeout(N);var e=JSON.parse(this.responseText);if("0"==e.status_code){var t=e.checked_domain;return t.IS_VALID?($D.getById("zp_addsubdombtn").disabled=!1,O("success",cms_i18n("ui.settings.domain.available")),!1):($D.getById("zp_addsubdombtn").disabled=!0,O("error",t.ERROR_MSG),!1)}}function S(e){if(N&&clearTimeout(N),"-"==e.charAt(0)||"-"==e.charAt(e.length-1))return O("error",cms_i18n("ui.settings.domain.hyphen.msg2")),!1;if(!/^(?:[\p{L}\p{M}\p{N}-]{1,}\.)+[\p{L}\p{M}\p{N}-]{2,}$/u.test(e))return O("error",cms_i18n("ui.settings.domain.specialchar.msg")),!1;if((e=e.replace(app.data.hosting_domain,"")).length<4||e.length>32)return O("error",cms_i18n("ui.settings.domain.length.msg")),!1;if(-1!=e.indexOf("zoho"))return O("error",cms_i18n("ui.settings.domain.aleradyexists")),!1;if(!/^(xn--[a-z0-9-]+)$/.test(e))for(var t=1;t<e.length;t++){if("-"==e.charAt(t)&&"-"==e.charAt(t-1))return O("error",cms_i18n("ui.settings.domain.hyphen.msg1")),!1}return!0}function x(e,t){e=e.replace(/ht(tp)s?:\/\//,"");var n=/^(?:[\p{L}\p{M}\p{N}-]{1,}\.)+[\p{L}\p{M}\p{N}-]{2,}$/u.test(e),i=new RegExp(app.data.hosting_domain).exec(e),r=$D.getById(q[t].messageId);return e&&n&&!i?(r.style.display="none",!0):(r.innerHTML=cms_i18n("ui.settings.domain.invalid"),r.style.display="block",r.className="sites-text red",!1)}function O(e,t){$D.getById("zp_domsuccess").style.display="none",$D.getById("zp_domerror").style.display="none",$D.getById("zp_domspinner").style.display="none","success"==e?($D.getById("zp_domsuccess").style.display="flex",t&&($D.getById("domErrorMsg").innerHTML=t,$D.getById("domErrorMsg").className="sites-text green",$D.getById("domErrorMsg").style.display="flex")):"error"==e?($D.getById("zp_domerror").style.display="flex",t&&($D.getById("domErrorMsg").innerHTML=t,$D.getById("domErrorMsg").style.display="flex",$D.getById("domErrorMsg").className="sites-text red")):"loading"==e&&($D.getById("zp_domspinner").style.display="flex",$D.getById("domErrorMsg").style.display="none")}function I(e,t){var n={};n.siteId=app.data.siteId,n.snName=e;var i=$D.getById(t);i.style.pointerEvents="none",$X.post({url:"/zs-site/api/v0/publishSite2Sn",params:n,handler:function(){var e=JSON.parse(this.responseText);if(e.msg)A(e.msg,!1,!1);else if(e.error)A(e.error,!0,!1);else if(e.fb.msg)A(e.fb.msg,!1,!1);else if(e.fb.error){var t=cms_i18n("ui.common.select"),n=cms_i18n("ui.settings.social.socialautopublish.facebook.connect.error.page");100==e.fb.code&&(t=cms_i18n("ui.dialog.learn"),n=e.fb.error),r.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:n,okText:t,closeBtn:!1,cancelBtn:!1,confirmIcon:"info",okBtnClass:"",ok:function(){100==e.fb.code?window.open("https://developers.facebook.com/docs/sharing/domain-verification/","_blank"):app.navigate("/zcms/"+app.getSubSiteId()+"/settings/socialautopublish")}})}else""===this.responseText&&A(cms_i18n("ui.common.unknown.error"),!0,!1);i.style.pointerEvents="auto"}},{serverUrl:app.data.appDomain})}function A(e,t,n){var i;t?(i=$D.getById("zp_sn_failure_msg"),n&&(e+='<a href="/zcms/'+app.getSubSiteId()+'/settings/socialautopublish" class="jsnav">'+cms_i18n("ui.settings.social.socialautopublish.permissionDeniedLink")+"</a>")):i=$D.getById("zp_sn_success_msg"),i.innerHTML=e,i.style.display="block"}function C(){B&&B.dismiss(),F&&F.dismiss(),B=null,F=null,null!=$D.getById("domainDialogDiv")&&"true"==$D.getById("domainDialogDiv").getAttribute("first_publish")||app.navigate(window.location.pathname)}function D(e){e.preventDefault();var n=o.ZOHO_DOMAINS_SUPPORTED_DC.includes(app.data.data_center);if("true"==app.data.plan_feature.Custom_Domain||n){var i=this.id,a="mapDomainForm"==i?"zp_mapDomainName":"zp_buyDomainName",s=$D.getById(a).value.toLowerCase();if(!x(s,i))return"mapDomainForm"==i?void($D.getById("zp_mapDomBtn")&&$D.getById("zp_mapDomBtn").removeAttribute("disabled")):void($D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled"));var l={domain_name:s,reference_id:app.data.siteId};$X.post({url:app.data.api_url+"/integrations/zohoDomains/search",headers:H,params:l,handler:function(){var e=JSON.parse(this.responseText);if(e&&0==e.status_code){var n=e.get_domain_availability;if(null!=n)if(n.is_available)"mapDomainForm"==i?($D.getById("zp_mapDomBtn")&&$D.getById("zp_mapDomBtn").removeAttribute("disabled"),R(cms_i18n("ui.settings.domains.buyDomainMsg",n.domain_name),"Buy Domain",i)):w(i);else if("mapDomainForm"==i)z=!1,g(null,i);else if(void 0!=n.custom_reason&&null!=n.custom_reason){if(""!=n.custom_reason.detailed)return t(n.custom_reason.detailed).error(),void($D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled"))}else $D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled"),R(cms_i18n("ui.settings.domains.mapDomainMsg",n.domain_name),"Map Domain",i)}else if(!e||50001!=e.status_code&&50002!=e.status_code)t(cms_i18n("ui.settings.domains.error.availability")).error();else if("mapDomainForm"==i)z=!1,g(null,i);else{$D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled");var a;if(50001==e.status_code&&e.get_domain_availability)a=e.get_domain_availability;else if(50002==e.status_code){var o=e.extra;a=cms_i18n("ui.domains.defaultsharedorg.info.msg",o.service_org_name,"<a href='"+o.domains_url+"/org-list' target='_blank'>","</a>")}else a=cms_i18n("ui.common.permission_denied");!function(e){G=r.open({contentMsg:e,okText:cms_i18n("ui.dialog.ok"),cancelBtn:!1,headingText:cms_i18n("ui.common.error"),ok:function(){G&&G.close()}})}(a)}},errorHandler:function(){var e=this.responseText&&JSON.parse(this.responseText),t=e&&e.message||cms_i18n("ui.common.integrations.error");hbValidate.showError($D.getById("configureDomErrorMsg"),t)}})}}function w(e){var n={domainName:"mapDomainForm"==e?$D.getById("zp_mapDomainName").value.toLowerCase():$D.getById("zp_buyDomainName").value.toLowerCase()};$X.post({url:"/zs-site/api/v1/integrations/zohoDomains/buyDomain",headers:app.getHeaders(),params:n,handler:function(){try{var e=JSON.parse(this.responseText);if(0==e.status_code){$D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled");var n=window.location.href;window.location.href=app.data.appDomain+"/zdomainscheckout?domainsResponseURL="+encodeURIComponent(e.add_domain_in_zoho_domain)+"&sitesRedirectionURL="+encodeURIComponent(n)}else t(e.message).error()}catch(e){t(cms_i18n("ui.settings.contributors.error.gettingdata")).error()}},errorHandler:function(){try{var e=JSON.parse(this.responseText);t(e.message).error()}catch(e){t(cms_i18n("ui.settings.contributors.error.gettingdata")).error()}}})}function R(e,t,n){r.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentMsg:e,confirmIcon:"info",okText:t,okBtnClass:"none",ok:function(){"buyDomainForm"==n?g(null,n):w(n)},cancel:function(){"buyDomainForm"==n?$D.getById("zp_buyDomBtn")&&$D.getById("zp_buyDomBtn").removeAttribute("disabled"):$D.getById("zp_mapDomBtn")&&$D.getById("zp_mapDomBtn").removeAttribute("disabled")}})}var N,k,L,M,P,B=null,F=null,U=[],z=!1,H=app.getHeaders(),j=null,G=null,W={Google:"domains.google.com",GoDaddy:"dcc.godaddy.com"},V={CustomDomain:1,SubDomain:2},q={mapDomainForm:{inputId:"zp_mapDomainName",buttonId:"zp_mapDomBtn",messageId:"mapDomMsg"},buyDomainForm:{inputId:"zp_buyDomainName",buttonId:"zp_buyDomBtn",messageId:"buyDomMsg"},customDomainForm:{inputId:"zp_exsdomainame",buttonId:"zp_existingdombtn",messageId:"ownDomErrorMsg"},subDomainForm:{inputId:"zp_subdomainname",buttonId:"zp_addsubdombtn",messageId:"domErrorMsg"}},Y={init:function(){},showDomain:m,showAddDomainDialog:function(e){$X.get({url:app.data.api_url+"/domains",headers:H,args:{redirectToBuyDomain:e},handler:u})},handleDomainDialog:c,showPublishDialog:p,showEditDomainDialog:function(e){var t={};t.type="edit",t.domain_model=e,m(t)},addDomain:g,buyDomain:function(e){e.preventDefault(),e.stopPropagation(),j=window.open(app.data.appDomain+"/domainstart?refId="+app.data.siteId,"_blank"),window.addEventListener("message",_)},editDomain:b,checkSubDomain:function(e){if("zp_subdomainname"===this.id){var t=e.keyCode?e.keyCode:e.charCode;if(13==t)return e.preventDefault(),e.stopPropagation(),!1;if(27==t)return e.preventDefault(),e.stopPropagation(),!1;var n=$("#zp_subdomainname").value.toLowerCase(),i={};n=n.replace(/ht(tp)s?:\/\//,""),i.domain_check=d.toUnicode(n),N&&clearTimeout(N),N=setTimeout(function(){S(n+app.data.hosting_domain)?($D.getById("zp_addsubdombtn").disabled=!0,O("loading"),$X.get({url:app.data.api_url+"/domains",headers:H,params:i,handler:T})):$D.getById("zp_addsubdombtn").disabled=!0},500)}},changePrimary:function(){$X.put({url:app.data.api_url+"/domains/"+this.getAttribute("data-domainid")+"/markPrimary",headers:H,handler:E})},closeDomainDialog:C,shareSocialNetwork:function(){if(P.status_code==a.ERROR_COMMON.PAYMENT_FAILURE)r.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:cms_i18n("ui.upgrade.message"),okText:cms_i18n("ui.upgrade.viewplans"),cancelBtn:!1,closeBtn:!1,okBtnClass:"",confirmIcon:"info",ok:function(){n.initPurchase()}});else if("zp_sn_fb_siteshare"===this.id)if(P&&P.fb){if(!P.fb.ap_token_status.status)return void A(cms_i18n("ui.settings.social.socialautopublish.fbTokenExpire"),!0,!0);I("fb","zp_sn_fb_siteshare")}else r.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:cms_i18n("ui.settings.social.socialautopublish.app.agreeterms","Facebook","sites-link","https://www.facebook.com/terms.php"),okText:cms_i18n("ui.common.connect"),closeBtn:!1,okBtnClass:"",confirmIcon:"info",ok:function(){i.fnFbLogin(null,"Connect")}});else if("zp_sn_tw_siteshare"===this.id)if(P&&P.tw){if(!P.tw.ap_token_status.status)return void A(cms_i18n("ui.settings.social.socialautopublish.twErr89"),!0,!0);I("tw","zp_sn_tw_siteshare")}else r.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:cms_i18n("ui.settings.social.socialautopublish.app.agreeterms","Twitter","sites-link","https://twitter.com/en/tos"),okText:cms_i18n("ui.common.connect"),closeBtn:!1,okBtnClass:"",confirmIcon:"info",ok:function(){i.fnTwLogin(null,"Connect")}})},verifyDomain:function(){var e=this;require(["domains"],function(t){t.validateDomain(e,"dialog")})},navigateToDomains:function(){C(),app.navigate(app.data.builder_base_url+"/settings/domains")},genSubDomainAndPublish:function(e){var t={};t.site_id=app.data.siteId,t.domain_type=o.DOMAIN_TYPE.SUB_DOMAIN,t.generate_subdomain=!0,z=!0,$X.post({url:app.data.api_url+"/domains",params:t,headers:H,handler:v,args:this.id})},domainConnect:function(){l.show();var e=window.open(k,"_blank","fullscreen=no,location=yes,menubar=no,titlebar=yes,directories=no,status=yes,toolbar=no,resizable=no,width=780,height=785"),n=setInterval(function(){e.closed&&(t(cms_i18n("ui.settings.domain.domainconnect.error")).error(),clearInterval(n),l.close())},1e3);window.onDomainConnectSuccess=function(){clearInterval(n),e.close(),$X.post({url:app.data.api_url+"/domains/verify",params:{domain_name:L,domain_type:V.CustomDomain,is_domain_connect_verify:!0},headers:H,handler:function(){l.close();var e=JSON.parse(this.responseText);if(C(),"0"==e.status_code&&e.domain_list&&e.domain_list.length>0){var n=1==e.domain_list[0].verification_status,i=e.domain_list.reduce(function(e,t){return e[t.domain_name]=t,e},{});require(["domains"],function(e){e.renderDomains(i)}),n?t(cms_i18n("ui.settings.domain.verified.success")).success():r.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:cms_i18n("ui.domains.success.info",L),okText:cms_i18n("ui.dialog.ok"),cancelBtn:!1,okBtnClass:"primary",confirmIcon:"info"})}else t(cms_i18n("ui.settings.domain.domainconnect.error")).error()}})},window.onDomainConnectFailure=function(){clearInterval(n),e.close(),l.close(),t(cms_i18n("ui.settings.domain.domainconnect.error")).error()}},changeToManualVerify:function(){$D.css($D.getById("dns-settings-connect-div"),"display","none");for(var e=document.querySelectorAll('[data-dns-settings="dns-settings-div"]'),t=0;t<e.length;t++)$D.css(e[t],"display","block")},checkIfDomainIsRegistered:D,buyDomainFromZohoDomain:w,focusInputOnClick:function(){var e="zp_mapDomainName",t="zp_buyDomainName",n=document.getElementById(e),i=document.getElementById(t);"mapDomainTab"===this.id?(n.value="",n.focus()):(i.value="",i.focus())}};return Y}),define("domains",["hbDialog","notify","hbValidate","confirmDialog","settingsDialog","hbUI","error_codes","mask","planFeature","CONST"],function(e,t,n,i,r,a,o,s,l,d){"use strict";function u(e){!me.domains&&(me.domains=[]);for(var t=0;t<e.length;t++)me.domains.push(e[t])}function c(e){"0"==e.detail.status_code?(u(e.detail.add_and_connect_zoho_domain?e.detail.add_and_connect_zoho_domain:e.detail.domain_list),t(cms_i18n("ui.settings.domain.added")).success(),T()):W(response.developer_message)}function p(e){if("0"==e.detail.status_code){var n=e.detail.domain_list.domain_id;$D.getById(n).innerHTML=te+e.detail.domain_list.domain_name,$D.getById(n).href=te+e.detail.domain_list.domain_name,$D.getById(n+"-edit").setAttribute("domain_name",e.detail.domain_list.domain_name),t(cms_i18n("ui.settings.domain.modified")).success()}else W(e.detail.developer_message)}function m(e){me.domains=e.detail.domain_list,T()}function f(){me.domains&&0==me.domains.length&&$D.getById("zp_empty_adddomainbtn")&&$D.getById("zp_empty_adddomainbtn").focus()}function h(e,t){$X.get({url:app.data.api_url+"/domains",headers:oe,params:{is_ssl_info_needed:!0},handler:t||function(){var e=JSON.parse(this.responseText);me.domains=e.domain_list,e.extra&&(me.domains=me.domains.concat(e.extra));!function(){var e=x(me.domains),t=R(e);v(e,t)}()}})}function g(){$D.getById("settings_li").click();var e=JSON.parse(this.responseText);me.domains=e.domain_list;var t=x(me.domains);app.render({template:"sites_v2:domains:t_domainsTable/t_domainsTable",target:domainDialog.content,models:{domains:t,opts:{},app:app},context:{domains:me}})}function _(e){var t=JSON.parse(this.responseText);me.domains=t.domain_list,O()}function v(e,t){app.render({template:"sites_v2:domains:t_domainsTable/t_domainsTable",target:"domains-c",models:{domains:e,opts:{},app:app,domainInfoBox:t,DOMAIN_INFO_BOX:pe},context:{domains:me},callback:function(){S(),y(e),app.next()}})}function b(){var e=JSON.parse(this.responseText);if(null!=e)if(e.ssl&&e.ssl.isSSLReadyToInstall){E(!1,cms_i18n("ui.settings.domain.ssl.redirect.msg",app.data.builder_base_url+"/settings/sslhosting"))}else!function(e){e&&e.ssl_status==d.SSL_STATUS.SUCCESS&&(e.show_msg=!1);e&&e.show_msg?E(!1,e.status_msg):E(!0)}(P(e.ssl))}function y(e){for(var t=0,n=[],i=0,r=0;r<e.length;r++){var a=e[r];a.hasOwnProperty("ssl_status")&&(n[i]=a,i++,"not_installed"==a.ssl_status&&t++)}if(n.length>0&&t==n.length&&(1!=n.length||n[0].domain_type!=ce.SUBDOMAIN&&n[0].type!=ce.SUBDOMAIN)){E(!1,cms_i18n("ui.settings.domain.ssl.redirect.msg",app.data.builder_base_url+"/settings/sslhosting"))}else M("",b)}function E(e,t){var n=$D.getById("ssl_msg_cont");if(e)n&&(n.style.display="none");else if(n){n.style.display="block";var i=$D.getById("ssl_msg");i&&(i.innerHTML=t)}}function T(e){if(e)for(var t=me.domains.length-1;t>=0;t--)e[me.domains[t].domain_name]&&(me.domains[t]=e[me.domains[t].domain_name]);var n=x(me.domains),i=R(n);app.render({template:"sites_v2:domains:t_domainsTable/t_cms_domainsList",target:"zp_domtablecontainer",models:{domains:n,opts:{},app:app,domainInfoBox:i,DOMAIN_INFO_BOX:pe},context:{domains:me},callback:function(){S(),y(n),app.next()}})}function S(){me.domains.length>0?$D.getById("domainsCloseDiv")&&$D.removeClass($D.getById("domainsCloseDiv"),"mlauto"):$D.getById("domainsCloseDiv")&&$D.addClass($D.getById("domainsCloseDiv"),"mlauto")}function x(e){for(var t=[],n=0;n<e.length;n++)1==e[n].primary_domain?t.splice(0,0,e[n]):t.push(e[n]);return t}function O(t,n,i){Z=t,Q=n,"true"==app.data.plan_feature.Custom_Domain&&d.ZOHO_DOMAINS_SUPPORTED_DC.includes(app.data.data_center)?$X.get({url:app.data.api_url+"/integrations/zohoDomains",headers:oe,handler:function(){var t=JSON.parse(this.responseText);if(t&&0==t.status_code&&0!=t.get_zoho_domains.length){var n=t.get_zoho_domains;X=[],ee={};for(var r=0;r<n.length;r++){var a=n[r].domain_name,o=n[r].domain_status;if(o){if(o==ue.DOMAIN_ALREADY_ADDED){if(![ue.NOT_VERIFIED,ue.VERIFIED,ue.VERIFY_IN_PROGRESS].includes(n[r].domain_verification_details.verification_status))continue;if(1==Z&&Q&&n[r].domain_verification_details.verification_status==ue.VERIFY_IN_PROGRESS)return void I(i);ee[a]=n[r].domain_verification_details.verification_status}else{if(![ue.DOMAIN_USED_IN_ANOTHER_SITE,ue.DOMAIN_IN_USE,ue.DOMAIN_NOT_ADDED].includes(o))continue;ee[a]=o}X.push(a)}}if(function(){for(var e in ee)if(ee[e]!=ue.VERIFIED)return!1;return!0}())return void I(i);!function(t){var n=X.length;K=new e.Dialog({dialogClass:"domain-dialog med",type:"modals",headingText:cms_i18n("ui.feature.domainconnect.name"),cancelText:cms_i18n("ui.common.skip"),okBtn:!1,onCancel:function(){I(t),A()},onClose:function(){I(t),A()}}),app.render({template:"sites_v2:domains:t_domainsTable/z_domains_list_template",target:K.content,callback:function(){K.open()},models:{domainsList:X,domainArrLength:n,domainToVerificationMapping:ee,DOMAIN_STATUS:ue},context:{domains:me}})}(i)}else I(i)}}):I(i)}function I(e){1==Z&&Q?require(["domain"],function(e){e.showPublishDialog(Z,Q)}):1==Z?require(["domain"],function(e){e.showPublishDialog(Z)}):me.domains?require(["domain"],function(t){t.handleDomainDialog(me.domains,e)}):require(["domain"],function(t){t.showAddDomainDialog(e)})}function A(){K&&(K.dismiss(),K=null)}function C(){var t=JSON.parse(this.responseText),i=app.data.product_title;s.close();var r=$D.getById("zp_domtablecontainer");if(0==t.status_code){if("add_domain"==t.api_kind)$E.dispatch(document.body,"domainmgmt:add",t);else if(t.add_and_connect_zoho_domain&&r){for(var a=t.add_and_connect_zoho_domain.reduce(function(e,t){return e[t.domain_name]=t,e},{}),l=me.domains.length-1;l>=0;l--)a[me.domains[l].domain_name]&&(me.domains[l]=a[me.domains[l].domain_name]);T()}if(t.extra.domain_name){!function(t,n){J=new e.Dialog({dialogClass:"domain-dialog-cntr sites-closein",headingText:n,footer:!1,closeBtn:!0,type:"fullscreen",onClose:D,okBtn:!1,onOk:function(){}}),app.render({template:"sites_v2:domains:t_domainsTable/z_domains_success_template",target:J.content,callback:function(){J.open(),A()},models:{domain:t}})}(t.extra.domain_name,i)}else n.showError($D.getById("z-domain-error"),cms_i18n("ui.common.unknown.error"))}else t.status_code==o.ERROR_INTEGRATIONS.INTEGRATION_SERVER_ERROR?n.showError($D.getById("z-domain-error"),cms_i18n("ui.common.integrations.info.dialog.message")):n.showError($D.getById("z-domain-error"),cms_i18n("ui.common.unknown.error.try.again"))}function D(){J&&(J.dismiss(),J=null)}function w(){ae=!1;var e=JSON.parse(this.responseText);if("0"==e.status_code){for(var n=e.domain_model.domain_id,i=0;i<me.domains.length;i++)if(me.domains[i].domain_id==n){me.domains.splice(i,1);break}var r=R(me.domains);me.domains=x(me.domains),v(me.domains,r),t(cms_i18n("ui.settings.domain.removed")).success(),0==me.domains.length&&T()}else t(e.status_message).error()}function R(e){for(var t=pe.NO_CUSTOM_DOMAIN,n=0;n<e.length;n++){if(e[n].type==ce.CUSTOM_DOMAIN){t=pe.HAS_NOTVERIFIED_DOMAIN;break}e[n].domain_type==ce.CUSTOM_DOMAIN&&(t=pe.HAS_ONLY_VERIFIED_DOMAIN)}return t}function N(e,t){var n={url:app.data.api_url+"/domains/"+e.replace("-primary","")+"/markPrimary",headers:oe,handler:k,args:e};t&&(n.bodyJSON={skip_check:!0}),$X.put(n)}function k(e){var n=JSON.parse(this.responseText);"1"==n.status_code?require(["planFeature"],function(e){e.showUpgradeDialog("markPrimary")}):n.status_code==o.ERROR_DOMAIN.DNS_MAPPING_NOT_DONE?L(e,cms_i18n("ui.settings.domain.error.dns")):n.status_code==o.ERROR_SSL.DOMAIN_NOT_IN_CERT?L(e,cms_i18n("ui.settings.domain.error.userupload.ssl",app.data.builder_base_url+"/settings/sslhosting")):n.status_code==o.ERROR_SSL.SSL_INSTALLATION_IN_PROCESS?L(e,cms_i18n("ui.settings.domain.ssl.inprogress",n.extra)):n.status_code==o.ERROR_SSL.CERTIFICATE_GET_ERROR?L(e,cms_i18n("ui.settings.domain.ssl.error")):(n.extra&&(n.domain_list=n.domain_list.concat(n.extra)),me.domains=n.domain_list,T(),t(cms_i18n("ui.settings.domain.primarydomain.msg")).success())}function L(e,t){var n=cms_i18n("ui.dialog.ok"),r=cms_i18n("ui.common.makeprimary");i.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentMsg:t,confirmIcon:"info",okText:n,okBtnClass:"mo-btn__ok",cancelText:r,cancel:function(){N(e,!0)}})}function M(e,t){$X.get({url:app.data.api_url+"/ssl",headers:oe,handler:null!=t?t:function(){var e=JSON.parse(this.responseText);P(e.ssl,function(t){e&&e.ssl&&e.ssl.isSSLReadyToInstall&&(t.show_msg=!1,t.status_msg="");app.render({template:"sites_v2:domains:t_sslHosting/t_sslHosting",target:"ssl-c",models:{cert_obj:t,opts:{},app:app},context:{sslModule:me},callback:function(){app.next()}})})}})}function P(e,t){var n=e.isSSLHosted,i=!1,r=!1,a=0;n&&(r=e.certData.reqCompleted,i=e.certData.showMsg,a=e.reqType,se=i,le=r,n=e.certData.isSSLHosted);var o={role:"Owner",isSSLAllowed:"true"==app.data.plan_feature.SSL_Hosting,isSSLHosted:n,userUploaded:e.userUploaded,show_errorDomains:!1};if(i){o.ssl_status=d.SSL_STATUS.FAILURE,o.show_msg=!0,o.retry_msg="Click here to retry installation process for the above domains.";var s="",l="";if(11==a&&(l=cms_i18n("ui.settings.ssl.error.renewalFailed"),o.retry_msg=cms_i18n("ui.settings.ssl.renewal.retryMsg")),r){if(e.certData.CERT_JSON.SUCCESS){var u=e.certData.API_JSON;if(u.SUCCESS)s="Certificate updated successfully.",o.status_box_class="success-box",o.status_icon_class="zs-success",o.ssl_status=d.SSL_STATUS.SUCCESS;else{var c=u.ERROR_CODE;"5040"==c?s=cms_i18n("ui.settings.ssl.error.invalidIntermediate"):"5000"==c||"5035"==c?s=cms_i18n("ui.settings.ssl.error.invalidEntries"):"5001"==c?s=cms_i18n("ui.settings.ssl.error.noDomains"):"5002"==c?s=cms_i18n("ui.settings.ssl.error.noMatchingDomains"):"5003"==c||"5036"==c||"5034"==c||"5041"==c?s=cms_i18n("ui.settings.ssl.error.addCertificate")+cms_i18n("ui.common.contact.support",app.data.support_mail,app.data.support_mail):"5004"==c?s=cms_i18n("ui.settings.ssl.error.businessAddon"):"5005"==c?s=cms_i18n("ui.settings.ssl.error.customDomain"):"5006"==c?s=cms_i18n("ui.settings.ssl.error.publishAlert"):"5007"==c&&(s=cms_i18n("ui.settings.ssl.error.freeDomain")),o.status_box_class="warning-box",o.status_icon_class="zs-error",o.ssl_status=d.SSL_STATUS.FAILURE}}else s=cms_i18n("ui.settings.ssl.error.getCertificate"),o.status_box_class="warning-box",o.status_icon_class="zs-error",o.ssl_status=d.SSL_STATUS.FAILURE;o.show_close_msg=!0}else{var p=e.estimatedTime;s=cms_i18n("ui.settings.ssl.processingmsg",p.toString()),o.status_box_class="info-box",o.status_icon_class="zs-info",o.show_close_msg=!1,o.ssl_status=d.SSL_STATUS.IN_PROGRESS}o.status_msg=l+s}else o.show_msg=!1;if(!t)return o;t(o)}function B(){$X.del({url:app.data.api_url+"/ssl/delete",headers:oe,handler:F})}function F(){window.location.reload()}function U(e){e.preventDefault(),"success"===e.detail.status&&function(){var e={},n=document.getElementById("sslCrt").value,i=document.getElementById("sslKey").value,r=document.getElementById("sslCACrt").value,a=new RegExp("(-+[\\w| ]+-+)([A-Za-z0-9/=+\n]+)(-+[\\w| ]+-+)");{if(""==n)return t(cms_i18n("ui.settings.ssl.error.enterCertificate")).warning(),!1;if(!a.test(n))return t(cms_i18n("ui.settings.ssl.error.invalidCertificate")).warning(),!1}{if(""==i)return t(cms_i18n("ui.settings.ssl.error.enterKey")).warning(),!1;if(!a.test(i))return t(cms_i18n("ui.settings.ssl.error.invalidKey")).warning(),!1}var o,s;"add"==$D.getById("addCertificate").getAttribute("data-type")?(o="true",s="false"):(o="false",s="true");e.sslCrt=n.trim(),e.sslKey=i.trim(),e.sslCACrt=r.trim(),e.update=s,$X.post({url:app.data.api_url+"/ssl/installOwnSSL",bodyJSON:e,handler:H,headers:oe,args:{refresh:o}})}()}function z(){$X.post({url:app.data.api_url+"/ssl/installFreeSSL",handler:H,headers:oe,args:{refresh:"true"}})}function H(e){var t=JSON.parse(this.responseText);if(t&&"1"==t.status_code&&t.developer_message)return W(t.developer_message),!1;if(!t.ssl.BUSS_ADDON)return require(["planFeature"],function(e){e.showUpgradeDialog("SSL_Hosting")}),!1;if(!t.ssl.CUSTOM_DOMAIN)return W(cms_i18n("ui.settings.ssl.error.customDomain")),!1;if(t.ssl.REQ_ADDED)window.location.reload();else{if(1==t.ssl.CERTIFICATE_TYPE){if(!t.ssl.SITE_PUBLISHED)return W(cms_i18n("ui.settings.ssl.error.publishAlert")),!1;if(!t.ssl.CERT_JSON.SUCCESS)return W(cms_i18n("ui.settings.ssl.error.getCertificate")),!1}var n=t.ssl.API_JSON;if(!n.SUCCESS){var i=n.ERROR_CODE;return"5040"==i?W(cms_i18n("ui.settings.ssl.error.invalidIntermediate")):"5000"==i||"5035"==i?W(cms_i18n("ui.settings.ssl.error.invalidEntries")):"5001"==i?W(cms_i18n("ui.settings.ssl.error.noDomains")):"5002"==i?W(cms_i18n("ui.settings.ssl.error.noMatchingDomains")):"5003"==i||"5036"==i||"5034"==i||"5041"==i?W(cms_i18n("ui.settings.ssl.error.addCertificate")):"5004"==i?msg=cms_i18n("ui.settings.ssl.error.businessAddon"):"5005"==i?msg=cms_i18n("ui.settings.ssl.error.customDomain"):"5006"==i?msg=cms_i18n("ui.settings.ssl.error.publishAlert"):"5007"==i&&(msg=cms_i18n("ui.settings.ssl.error.freeDomain")),!1}if("true"==e.refresh)window.location.reload();else{var r=$("#zp_sslarea")[0];Dialog.showCard(i18n("ui.settings.ssl.updateSuccessfullMsg"),"success",r),fnGetCertificateDetails()}}}function j(){"done"==JSON.parse(this.responseText).ssl&&$D.getById("zs_sslStatusBox")&&($D.getById("zs_sslStatusBox").style.display="none")}function G(e,t,n,r,a,o,s){i.open({dialogClass:e,header:t,contentMsg:n,confirmIcon:r,okText:a,okBtnClass:o,ok:function(){s()}})}function W(e){i.open({dialogClass:"demo-dialog sites-alert h-info",contentMsg:e,confirmIcon:"info",closeBtn:!1,okBtn:!1,escClose:!0,cancelText:cms_i18n("ui.common.close")})}function V(e){var t=e+"-c";app.render({template:"sites_v2:settings:t_newsettings/t_cms_loading",target:t,models:{},context:{}}),"domains"==e?h():"ssl"==e&&M()}function q(e,t){function n(){$X.post({url:app.data.api_url+"/domains/verify",params:i,headers:oe,handler:function(){var n=JSON.parse(this.responseText);if("dialog"==t?e&&e.removeAttribute("disabled"):s.close(),"0"==n.status_code&&n.domain_list&&n.domain_list.length>0){for(var i=n.domain_list.reduce(function(e,t){return e[t.domain_name]=t,e},{}),r=me.domains.length-1;r>=0;r--)i[me.domains[r].domain_name]&&(me.domains[r]=i[me.domains[r].domain_name]);require(["domain"],function(e){e.closeDomainDialog()})}else if("dialog"==t)$D.getById("verify_error").style.display="block";else{var a="";n.domain_list.domainconnect_url&&(a=n.domain_list.domainconnect_url),require(["domain"],function(e){var t={primary_domain:n.domain_list.domain_name,subDomainPrimary:!1,is_ssl_hosted:!1,hasCustomDomain:!0,customDomainDNS:!1,secondary_domain:n.domain_list.domain_name,verification_status:0,token:n.domain_list.token,prefix:n.domain_list.prefix,domainConnectUrl:a};e.showPublishDialog(!1,t)})}T()}})}var i={};i.domain_name=e.getAttribute("data-domain-name"),i.domain_type=e.getAttribute("data-domain-type"),"dialog"==t?(app.formReset.showLoading(e),n()):s.show(n)}function Y(){s.close();var e=JSON.parse(this.responseText);if("0"==e.status_code&&e.domain_list&&e.domain_list.length>0){for(var n=e.domain_list.reduce(function(e,t){return e[t.domain_name]=t,e},{}),i=me.domains.length-1;i>=0;i--)n[me.domains[i].domain_name]&&(me.domains[i]=n[me.domains[i].domain_name]);require(["domain"],function(e){e.closeDomainDialog()}),t(cms_i18n("ui.domain.icplicense.inreview")).success(),T()}else t(e.status_message).error()}var X,K,J,Z,Q,ee,te="http://",ne=null,ie=null,re=null,ae=!1,oe=app.getHeaders(),se=!1,le=!1,de="true"==app.data.plan_feature.SSL_Hosting,ue={NOT_VERIFIED:0,VERIFIED:1,VERIFY_IN_PROGRESS:5,DOMAIN_IN_USE:100,DOMAIN_USED_IN_ANOTHER_SITE:101,DOMAIN_NOT_ADDED:102,DOMAIN_ALREADY_ADDED:103},ce={SUBDOMAIN:0,CUSTOM_DOMAIN:1},pe={NO_CUSTOM_DOMAIN:0,HAS_NOTVERIFIED_DOMAIN:1,HAS_ONLY_VERIFIED_DOMAIN:2};$E.bind(document.body,"domainmgmt:add",c),$E.bind(document.body,"domainmgmt:edit",p),$E.bind(document.body,"domainmgmt:markPrimary",m),$E.bind(document.body,"domainmgmt:close",f);var me={init:function(){},getTabs:function(e,t){function n(){V(t),i()}var i=function(e){var n=$D.get("[data-tab="+t+"]");a.showTabs2(n),app.next()};$D.getById(t+"-c")?n():r.showPlaceHolder("sites_v2:settings:t_newsettings/t_cms_loading",{navmenu:"configuration",menuitem:"domain_and_ssl"},function(){app.render({template:"sites_v2:domains:t_domains/t_cms_domains_ssl",target:"settings-canvas",models:{app:app},context:{domains:me},callback:n})})},getDomainsStore:function(){$X.get({url:app.data.api_url+"/domains",headers:oe,params:{},handler:g})},showEditDomain:function(){if(l.isFeatureEnabled(l.feature.EDIT_SUB_DOMAIN)){var e={};e.domain_id=this.id.replace("-edit","")||this.getAttribute("data-clickid").replace("-edit","");var t=this.getAttribute("domain_name").replace(app.data.hosting_domain,"");t=t.replace(/ht[tp]:\/\//,""),e.subdomain_name=t,require(["domain"],function(t){t.showEditDomainDialog(e)})}else l.showUpgradeDialog("edit_sub_domain",-1)},showAddDomain:O,trashDomain:function(e){var t=this.id.replace("-trash","").replace("-grid","");i.open({dialogClass:"demo-dialog sites-alert",header:!1,contentMsg:cms_i18n("ui.settings.domains.owndomain.delete.warning"),okText:cms_i18n("ui.common.delete"),ok:function(e){if(!ae){for(var t=!1,n=0;n<me.domains.length;n++)if(me.domains[n].domain_id==e){t=!0;break}t&&(ae=!0,$X.del({url:app.data.api_url+"/domains/"+e,headers:oe,handler:w}))}}.bind(null,t),okBtnClass:"mo-error"})},changePrimary:function(){var e=this.id,t=this.getAttribute("data-domain-name");if(1!=this.getAttribute("data-domain-type")||t.startsWith("www."))N(e);else{var n=t.split("."),i=n.length,r=!1;i>2&&(2!=n[i-1].length||2!=n[i-2].length&&3!=n[i-2].length||(r=!0)),2==i||3==i&&r?G("demo-dialog sites-alert h-info",!1,cms_i18n("ui.settings.domain.change.primary.confirm",app.data.product_title,"https://help.zoho.com/portal/en/kb/zohosites/help-guide/configuration/domain-ssl/articles/root-domain"),"info",cms_i18n("ui.common.continue"),"none",function(){N(e)}):N(e)}},getSSL:M,installFreeSSLClick:function(){se&&!le?W(cms_i18n("ui.settings.ssl.dialog.processingmsg")):de?G("demo-dialog sites-alert h-info",!1,cms_i18n("ui.settings.ssl.confirm.freessl"),"info",cms_i18n("ui.common.continue"),"none",z):require(["planFeature"],function(e){e.showUpgradeDialog("SSL_Hosting")})},installOwnSSLClick:function(){se&&!le?W(cms_i18n("ui.settings.ssl.dialog.processingmsg")):de?(re=new e.Dialog({dialogClass:"domain-dialog-style",type:"modals",headingText:cms_i18n("ui.settings.ssl.sslsetup"),fixHeaderFooter:!0,onOk:function(){var e=$D.getById("sslfileupload");$E.fireEvent(e,"submit")}}),app.render({template:"sites_v2:domains:t_addSSL/t_addSSL",target:re.content,context:{domain:me},models:{opts:{type:"add"}},callback:function(){re.open();var e=$D.getById("sslfileupload");$E.unbind(e,"hbValidate:submit",U),$E.bind(e,"hbValidate:submit",U)}})):require(["planFeature"],function(e){e.showUpgradeDialog("SSL_Hosting")})},moveToFreeSSL:function(){se&&!le?W(cms_i18n("ui.settings.ssl.dialog.processingmsg")):de?G("demo-dialog sites-alert h-info",!1,cms_i18n("ui.settings.ssl.confirm.movetofreessl"),"info",cms_i18n("ui.common.continue"),"none",z):require(["planFeature"],function(e){e.showUpgradeDialog("SSL_Hosting")})},updateOwnSSLClick:function(t){se&&!le?W(cms_i18n("ui.settings.ssl.dialog.processingmsg")):de?(re=new e.Dialog({dialogClass:"domain-dialog-style",type:"modals",headingText:cms_i18n("ui.settings.ssl.sslsetup"),fixHeaderFooter:!0,onOk:function(){var e=$D.getById("sslfileupload");$E.fireEvent(e,"submit")}}),app.render({template:"sites_v2:domains:t_addSSL/t_addSSL",target:re.content,context:{domain:me},models:{opts:{type:"update"}},callback:function(){re.open();var e=$D.getById("sslfileupload");$E.unbind(e,"hbValidate:submit",U),$E.bind(e,"hbValidate:submit",U)}})):require(["planFeature"],function(e){e.showUpgradeDialog("SSL_Hosting")})},deleteSSLClick:function(){G("demo-dialog sites-alert",!1,cms_i18n("ui.settings.ssl.confirm.removessl"),"delete",cms_i18n("ui.common.delete"),"mo-error",B)},hideSSLMsg:function(){$X.put({url:app.data.api_url+"/ssl/hideMsg",headers:oe,handler:j})},closeDomainDialog:function(){ne&&ne.dismiss(),re&&re.dismiss(),ne=null,re=null,require(["domain"],function(e){e.closeDomainDialog()}),app.goBack()},closeSSLDialog:function(){ne&&ne.dismiss(),re&&re.dismiss(),ie=null,ne=null,re=null},activeDomainMenu:function(e){var t=e.detail.tab;t&&V(t)},addDomainRouted:function(e){h(0,_)},validateDomain:q,verifyDomain:function(){q(this)},showICPRejectDialog:function(){!function(e){i.open({dialogClass:"demo-dialog sites-alert h-info",headingText:cms_i18n("ui.domain.icplicense.dialog.title"),contentMsg:cms_i18n("ui.domain.icplicense.dialog.reject.text"),okText:cms_i18n("ui.cms.common.apply"),okBtnClass:"",closeBtn:!1,confirmIcon:"info",ok:function(){var t={};t.domain_name=e.getAttribute("data-domain-name"),s.show(function(){$X.post({url:app.data.api_url+"/domains/icp-review",params:t,headers:oe,handler:Y})})}})}(this)},upgradeTrashDomain:function(){l.showUpgradeDialog("delete_sub_domain",-1)},connectAndVerifyZDomain:function(){s.show();var e=this.getAttribute("data-domain-name");$X.post({url:app.data.api_url+"/integrations/addZohoDomain",header:oe,bodyJSON:{domain_name:e},handler:C})},searchZdomain:function(){var e=[],t=this.value.trim();if(""==t)e=X;else{t=t.toLowerCase();for(var n=0;n<X.length;n++)X[n].toLowerCase().match(t)&&e.push(X[n])}app.render({template:"sites_v2:domains:t_domainsTable/domains_search_res_template",target:"z_domains_list",callback:function(){},models:{domainsList:e,domainsListLength:e.length,domainToVerificationMapping:ee,DOMAIN_STATUS:ue},context:{domains:me}})},renderDomains:T,getSSLInfo:P};return me}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("codemirror/lib/codemirror",t):(e=e||self,e.CodeMirror=t())}(this,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function n(e,n){return t(e).appendChild(n)}function i(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)r.appendChild(t[a]);return r}function r(e,t,n,r){var a=i(e,t,n,r);return a.setAttribute("role","presentation"),a}function a(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function o(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function s(t,n){var i=t.className;e(n).test(i)||(t.className+=(i?" ":"")+n)}function l(t,n){for(var i=t.split(" "),r=0;r<i.length;r++)i[r]&&!e(i[r]).test(n)&&(n+=" "+i[r]);return n}function d(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function u(e,t,n){t||(t={});for(var i in e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function c(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i||0,o=r||0;;){var s=e.indexOf("\t",a);if(s<0||s>=t)return o+(t-a);o+=s-a,o+=n-o%n,a=s+1}}function p(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function m(e,t,n){for(var i=0,r=0;;){var a=e.indexOf("\t",i);-1==a&&(a=e.length);var o=a-i;if(a==e.length||r+o>=t)return i+Math.min(o,t-r);if(r+=a-i,r+=n-r%n,i=a+1,r>=t)return i}}function f(e){for(;ya.length<=e;)ya.push(h(ya)+" ");return ya[e]}function h(e){return e[e.length-1]}function g(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function _(){}function v(e,t){var n;return Object.create?n=Object.create(e):(_.prototype=e,n=new _),t&&u(t,n),n}function b(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ea.test(e))}function y(e,t){return t?!!(t.source.indexOf("\\w")>-1&&b(e))||t.test(e):b(e)}function E(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function T(e){return e.charCodeAt(0)>=768&&Ta.test(e)}function S(e,t,n){for(;(n<0?t>0:t<e.length)&&T(e.charAt(t));)t+=n;return t}function x(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,a=i<0?Math.ceil(r):Math.floor(r);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}function O(e,t,n){var i;Sa=null;for(var r=0;r<e.length;++r){var a=e[r];if(a.from<t&&a.to>t)return r;a.to==t&&(a.from!=a.to&&"before"==n?i=r:Sa=r),a.from==t&&(a.from!=a.to&&"before"!=n?i=r:Sa=r)}return null!=i?i:Sa}function I(e,t){var n=e.order;return null==n&&(n=e.order=xa(e.text,t)),n}function A(e,t){return e._handlers&&e._handlers[t]||Oa}function C(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var a=p(r,n);a>-1&&(i[t]=r.slice(0,a).concat(r.slice(a+1)))}}}function D(e,t){var n=A(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function w(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),D(e,n||t.type,e,t),P(t)||t.codemirrorIgnore}function R(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==p(n,t[i])&&n.push(t[i])}function N(e,t){return A(e,t).length>0}function k(e){e.prototype.on=function(e,t){Ia(this,e,t)},e.prototype.off=function(e,t){C(this,e,t)}}function L(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function M(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function P(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function B(e){L(e),M(e)}function F(e){return e.target||e.srcElement}function U(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),ia&&e.ctrlKey&&1==t&&(t=3),t}function $(e){if(null==ma){var t=i("span","");n(e,i("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ma=t.offsetWidth<=1&&t.offsetHeight>2&&!(Wr&&Vr<8))}var r=ma?i("span",""):i("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function z(e){if(null!=fa)return fa;var i=n(e,document.createTextNode("AA")),r=sa(i,0,1).getBoundingClientRect(),a=sa(i,1,2).getBoundingClientRect();return t(e),!(!r||r.left==r.right)&&(fa=a.right-r.right<3)}function H(e){if("string"==typeof e&&ka.hasOwnProperty(e))e=ka[e];else if(e&&"string"==typeof e.name&&ka.hasOwnProperty(e.name)){var t=ka[e.name];"string"==typeof t&&(t={name:t}),(e=v(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return H("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return H("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function j(e,t){t=H(t);var n=Na[t.name];if(!n)return j(e,"text/plain");var i=n(e,t);if(La.hasOwnProperty(t.name)){var r=La[t.name];for(var a in r)r.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=r[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)i[o]=t.modeProps[o];return i}function G(e,t){u(t,La.hasOwnProperty(e)?La[e]:La[e]={})}function W(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function V(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function q(e,t,n){return!e.startState||e.startState(t,n)}function Y(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],a=r.chunkSize();if(t<a){n=r;break}t-=a}return n.lines[t]}function X(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var a=e.text;r==n.line&&(a=a.slice(0,n.ch)),r==t.line&&(a=a.slice(t.ch)),i.push(a),++r}),i}function K(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function J(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Z(e){if(null==e.parent)return null;for(var t=e.parent,n=p(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Q(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],a=r.height;if(t<a){e=r;continue e}t-=a,n+=r.chunkSize()}return n}while(!e.lines);for(var o=0;o<e.lines.length;++o){var s=e.lines[o].height;if(t<s)break;t-=s}return n+o}function ee(e,t){return t>=e.first&&t<e.first+e.size}function te(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ne(e,t,n){if(void 0===n&&(n=null),!(this instanceof ne))return new ne(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ie(e,t){return e.line-t.line||e.ch-t.ch}function re(e,t){return e.sticky==t.sticky&&0==ie(e,t)}function ae(e){return ne(e.line,e.ch)}function oe(e,t){return ie(e,t)<0?t:e}function se(e,t){return ie(e,t)<0?e:t}function le(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function de(e,t){if(t.line<e.first)return ne(e.first,0);var n=e.first+e.size-1;return t.line>n?ne(n,Y(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ne(e.line,t):n<0?ne(e.line,0):e}(t,Y(e,t.line).text.length)}function ue(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=de(e,t[i]);return n}function ce(e,t,n,i){var r=[e.state.modeGen],a={};be(e,t.text,e.doc.mode,n,function(e,t){return r.push(e,t)},a,i);for(var o=n.state,s=function(i){n.baseTokens=r;var s=e.state.overlays[i],l=1,d=0;n.state=!0,be(e,t.text,s.mode,n,function(e,t){for(var n=l;d<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,d=Math.min(e,i)}if(t)if(s.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var a=r[n+1];r[n+1]=(a?a+" ":"")+"overlay "+t}},a),n.state=o,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:r,classes:a.bgClass||a.textClass?a:null}}function pe(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=me(e,Z(t)),r=t.text.length>e.options.maxHighlightLength&&W(e.doc.mode,i.state),a=ce(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function me(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new Ba(i,!0,t);var a=function(e,t,n){for(var i,r,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var l=Y(a,s-1),d=l.stateAfter;if(d&&(!n||s+(d instanceof Pa?d.lookAhead:0)<=a.modeFrontier))return s;var u=c(l.text,null,e.options.tabSize);(null==r||i>u)&&(r=s-1,i=u)}return r}(e,t,n),o=a>i.first&&Y(i,a-1).stateAfter,s=o?Ba.fromSaved(i,o,a):new Ba(i,q(i.mode),a);return i.iter(a,t,function(n){fe(e,n.text,s);var i=s.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()}),n&&(i.modeFrontier=s.line),s}function fe(e,t,n,i){var r=e.doc.mode,a=new Ma(t,e.options.tabSize,n);for(a.start=a.pos=i||0,""==t&&he(r,n.state);!a.eol();)ge(r,a,n.state),a.start=a.pos}function he(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=V(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ge(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=V(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}function _e(e,t,n,i){var r,a,o=e.doc,s=o.mode,l=Y(o,(t=de(o,t)).line),d=me(e,t.line,n),u=new Ma(l.text,e.options.tabSize,d);for(i&&(a=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=ge(s,u,d.state),i&&a.push(new Fa(u,r,W(o.mode,d.state)));return i?a:new Fa(u,r,d.state)}function ve(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function be(e,t,n,i,r,a,o){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,d=0,u=null,c=new Ma(t,e.options.tabSize,i),p=e.options.addModeClass&&[null];for(""==t&&ve(he(n,i.state),a);!c.eol();){if(c.pos>e.options.maxHighlightLength?(s=!1,o&&fe(e,t,i,c.pos),c.pos=t.length,l=null):l=ve(ge(n,c,i.state,p),a),p){var m=p[0].name;m&&(l="m-"+(l?m+" "+l:m))}if(!s||u!=l){for(;d<c.start;)r(d=Math.min(c.start,d+5e3),u);u=l}c.start=c.pos}for(;d<c.pos;){var f=Math.min(c.pos,d+5e3);r(f,u),d=f}}function ye(e,t,n){this.marker=e,this.from=t,this.to=n}function Ee(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Te(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Se(e,t){if(t.full)return null;var n=ee(e,t.from.line)&&Y(e,t.from.line).markedSpans,i=ee(e,t.to.line)&&Y(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,a=t.to.ch,o=0==ie(t.from,t.to),s=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var a=e[r],o=a.marker;if(null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t)||a.from==t&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){var s=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(i||(i=[])).push(new ye(o,a.from,s?null:a.to))}}return i}(n,r,o),l=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var a=e[r],o=a.marker;if(null==a.to||(o.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){var s=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(i||(i=[])).push(new ye(o,s?null:a.from-t,null==a.to?null:a.to-t))}}return i}(i,a,o),d=1==t.text.length,u=h(t.text).length+(d?r:0);if(s)for(var c=0;c<s.length;++c){var p=s[c];if(null==p.to){var m=Ee(l,p.marker);m?d&&(p.to=null==m.to?null:m.to+u):p.to=r}}if(l)for(var f=0;f<l.length;++f){var g=l[f];if(null!=g.to&&(g.to+=u),null==g.from){Ee(s,g.marker)||(g.from=u,d&&(s||(s=[])).push(g))}else g.from+=u,d&&(s||(s=[])).push(g)}s&&(s=xe(s)),l&&l!=s&&(l=xe(l));var _=[s];if(!d){var v,b=t.text.length-2;if(b>0&&s)for(var y=0;y<s.length;++y)null==s[y].to&&(v||(v=[])).push(new ye(s[y].marker,null,null));for(var E=0;E<b;++E)_.push(v);_.push(l)}return _}function xe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Oe(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Ie(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ae(e){return e.inclusiveLeft?-1:0}function Ce(e){return e.inclusiveRight?1:0}function De(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),a=ie(i.from,r.from)||Ae(e)-Ae(t);if(a)return-a;var o=ie(i.to,r.to)||Ce(e)-Ce(t);return o||t.id-e.id}function we(e,t){var n,i=$a&&e.markedSpans;if(i)for(var r=void 0,a=0;a<i.length;++a)(r=i[a]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||De(n,r.marker)<0)&&(n=r.marker);return n}function Re(e){return we(e,!0)}function Ne(e){return we(e,!1)}function ke(e,t){var n,i=$a&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var a=i[r];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!n||De(n,a.marker)<0)&&(n=a.marker)}return n}function Le(e,t,n,i,r){var a=Y(e,t),o=$a&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var d=l.marker.find(0),u=ie(d.from,n)||Ae(l.marker)-Ae(r),c=ie(d.to,i)||Ce(l.marker)-Ce(r);if(!(u>=0&&c<=0||u<=0&&c>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ie(d.to,n)>=0:ie(d.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ie(d.from,i)<=0:ie(d.from,i)<0)))return!0}}}function Me(e){for(var t;t=Re(e);)e=t.find(-1,!0).line;return e}function Pe(e,t){var n=Y(e,t),i=Me(n);return n==i?t:Z(i)}function Be(e,t){if(t>e.lastLine())return t;var n,i=Y(e,t);if(!Fe(e,i))return t;for(;n=Ne(i);)i=n.find(1,!0).line;return Z(i)+1}function Fe(e,t){var n=$a&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Ue(e,t,i))return!0}}function Ue(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return Ue(e,i.line,Ee(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,a=0;a<t.markedSpans.length;++a)if((r=t.markedSpans[a]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ue(e,t,r))return!0}function $e(e){for(var t=0,n=(e=Me(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var a=n.parent;a;n=a,a=n.parent)for(var o=0;o<a.children.length;++o){var s=a.children[o];if(s==n)break;t+=s.height}return t}function ze(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Re(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Ne(i);){var a=t.find(0,!0);n-=i.text.length-a.from.ch,n+=(i=a.to.line).text.length-a.to.ch}return n}function He(e){var t=e.display,n=e.doc;t.maxLine=Y(n,n.first),t.maxLineLength=ze(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=ze(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function je(e){e.parent=null,Oe(e)}function Ge(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Ga:ja;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function We(e,t){var n=r("span",null,null,qr?"padding-right: .1px":null),i={pre:r("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var a=0;a<=(t.rest?t.rest.length:0);a++){var o=a?t.rest[a-1]:t.line,s=void 0;i.pos=0,i.addToken=qe,z(e.display.measure)&&(s=I(o,e.doc.direction))&&(i.addToken=function(e,t){return function(n,i,r,a,o,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var d=n.pos,u=d+i.length;;){for(var c=void 0,p=0;p<t.length&&!((c=t[p]).to>d&&c.from<=d);p++);if(c.to>=u)return e(n,i,r,a,o,s,l);e(n,i.slice(0,c.to-d),r,a,null,s,l),a=null,i=i.slice(c.to-d),d=c.to}}}(i.addToken,s)),i.map=[];!function(e,t,n){var i=e.markedSpans,r=e.text,a=0;if(!i){for(var o=1;o<n.length;o+=2)t.addToken(t,r.slice(a,a=n[o]),Ge(n[o+1],t.cm.options));return}for(var s,l,d,u,c,p,m,f=r.length,h=0,g=1,_="",v=0;;){if(v==h){d=u=c=l="",m=null,p=null,v=1/0;for(var b=[],y=void 0,E=0;E<i.length;++E){var T=i[E],S=T.marker;if("bookmark"==S.type&&T.from==h&&S.widgetNode)b.push(S);else if(T.from<=h&&(null==T.to||T.to>h||S.collapsed&&T.to==h&&T.from==h)){if(null!=T.to&&T.to!=h&&v>T.to&&(v=T.to,u=""),S.className&&(d+=" "+S.className),S.css&&(l=(l?l+";":"")+S.css),S.startStyle&&T.from==h&&(c+=" "+S.startStyle),S.endStyle&&T.to==v&&(y||(y=[])).push(S.endStyle,T.to),S.title&&((m||(m={})).title=S.title),S.attributes)for(var x in S.attributes)(m||(m={}))[x]=S.attributes[x];S.collapsed&&(!p||De(p.marker,S)<0)&&(p=T)}else T.from>h&&v>T.from&&(v=T.from)}if(y)for(var O=0;O<y.length;O+=2)y[O+1]==v&&(u+=" "+y[O]);if(!p||p.from==h)for(var I=0;I<b.length;++I)Ye(t,0,b[I]);if(p&&(p.from||0)==h){if(Ye(t,(null==p.to?f+1:p.to)-h,p.marker,null==p.from),null==p.to)return;p.to==h&&(p=!1)}}if(h>=f)break;for(var A=Math.min(f,v);;){if(_){var C=h+_.length;if(!p){var D=C>A?_.slice(0,A-h):_;t.addToken(t,D,s?s+d:d,c,h+D.length==v?u:"",l,m)}if(C>=A){_=_.slice(A-h),h=A;break}h=C,c=""}_=r.slice(a,a=n[g++]),s=Ge(n[g++],t.cm.options)}}}(o,i,pe(e,o,t!=e.display.externalMeasured&&Z(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=l(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=l(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild($(e.display.measure))),0==a?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(qr){var d=i.content.lastChild;(/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return D(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=l(i.pre.className,i.textClass||"")),i}function Ve(e){var t=i("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function qe(e,t,n,r,a,o,s){if(t){var l,d=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var a=e.charAt(r);" "!=a||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(a=""),i+=a,n=" "==a}return i}(t,e.trailingSpace):t,u=e.cm.state.specialChars,c=!1;if(u.test(t)){l=document.createDocumentFragment();for(var p=0;;){u.lastIndex=p;var m=u.exec(t),h=m?m.index-p:t.length-p;if(h){var g=document.createTextNode(d.slice(p,p+h));Wr&&Vr<9?l.appendChild(i("span",[g])):l.appendChild(g),e.map.push(e.pos,e.pos+h,g),e.col+=h,e.pos+=h}if(!m)break;p+=h+1;var _=void 0;if("\t"==m[0]){var v=e.cm.options.tabSize,b=v-e.col%v;(_=l.appendChild(i("span",f(b),"cm-tab"))).setAttribute("role","presentation"),_.setAttribute("cm-text","\t"),e.col+=b}else"\r"==m[0]||"\n"==m[0]?((_=l.appendChild(i("span","\r"==m[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",m[0]),e.col+=1):((_=e.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),Wr&&Vr<9?l.appendChild(i("span",[_])):l.appendChild(_),e.col+=1);e.map.push(e.pos,e.pos+1,_),e.pos++}}else e.col+=t.length,l=document.createTextNode(d),e.map.push(e.pos,e.pos+t.length,l),Wr&&Vr<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==d.charCodeAt(t.length-1),n||r||a||c||o||s){var y=n||"";r&&(y+=r),a&&(y+=a);var E=i("span",[l],y,o);if(s)for(var T in s)s.hasOwnProperty(T)&&"style"!=T&&"class"!=T&&E.setAttribute(T,s[T]);return e.content.appendChild(E)}e.content.appendChild(l)}}function Ye(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function Xe(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Ne(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Z(h(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Fe(e,t)}function Ke(e,t,n){for(var i,r=[],a=t;a<n;a=i){var o=new Xe(e.doc,Y(e.doc,a),a);i=a+o.size,r.push(o)}return r}function Je(e,t){var n=A(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Wa?i=Wa.delayedCallbacks:Va?i=Va:(i=Va=[],setTimeout(Ze,0));for(var a=function(e){i.push(function(){return n[e].apply(null,r)})},o=0;o<n.length;++o)a(o)}}function Ze(){var e=Va;Va=null;for(var t=0;t<e.length;++t)e[t]()}function Qe(t,n,i,r){for(var a=0;a<n.changes.length;a++){var o=n.changes[a];"text"==o?function(e,t){var n=t.text.className,i=tt(e,t);t.text==t.node&&(t.node=i.pre);t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,nt(e,t)):n&&(t.text.className=n)}(t,n):"gutter"==o?it(t,n,i,r):"class"==o?nt(t,n):"widget"==o&&function(t,n,i){n.alignable&&(n.alignable=null);for(var r=e("CodeMirror-linewidget"),a=n.node.firstChild,o=void 0;a;a=o)o=a.nextSibling,r.test(a.className)&&n.node.removeChild(a);at(t,n,i)}(t,n,r)}n.changes=null}function et(e){return e.node==e.text&&(e.node=i("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Wr&&Vr<8&&(e.node.style.zIndex=2)),e.node}function tt(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):We(e,t)}function nt(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=et(t);t.background=r.insertBefore(i("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?et(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function it(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var a=et(t);t.gutterBackground=i("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),a.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=et(t),l=t.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),s.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(i("div",te(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var d=0;d<e.display.gutterSpecs.length;++d){var u=e.display.gutterSpecs[d].className,c=o.hasOwnProperty(u)&&o[u];c&&l.appendChild(i("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function rt(e,t,n,i){var r=tt(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),nt(e,t),it(e,t,n,i),at(e,t,i),t.node}function at(e,t,n){if(ot(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)ot(e,t.rest[i],t,n,!1)}function ot(e,t,n,r,a){if(t.widgets)for(var o=et(n),s=0,l=t.widgets;s<l.length;++s){var d=l[s],u=i("div",[d.node],"CodeMirror-linewidget"+(d.className?" "+d.className:""));d.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),function(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}(d,u,n,r),e.display.input.setUneditable(u),a&&d.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),Je(d,"redraw")}}function st(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!a(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),n(t.display.measure,i("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function lt(e,t){for(var n=F(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function dt(e){return e.lineSpace.offsetTop}function ut(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ct(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=n(e.measure,i("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,a={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(a.left)||isNaN(a.right)||(e.cachedPaddingH=a),a}function pt(e){return ha-e.display.nativeBarWidth}function mt(e){return e.display.scroller.clientWidth-pt(e)-e.display.barWidth}function ft(e){return e.display.scroller.clientHeight-pt(e)-e.display.barHeight}function ht(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Z(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function gt(e,t,n,i){return bt(e,vt(e,t),n,i)}function _t(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Wt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function vt(e,t){var i=Z(t),r=_t(e,i);r&&!r.text?r=null:r&&r.changes&&(Qe(e,r,i,$t(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var i=Z(t=Me(t)),r=e.display.externalMeasured=new Xe(e.doc,t,i);r.lineN=i;var a=r.built=We(e,r);return r.text=a.pre,n(e.display.lineMeasure,a.pre),r}(e,t));var a=ht(r,t,i);return{line:t,view:r,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function bt(e,t,r,a,o){t.before&&(r=-1);var s,l=r+(a||"");return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var i=e.options.lineWrapping,r=i&&mt(e);if(!t.measure.heights||i&&t.measure.width!=r){var a=t.measure.heights=[];if(i){t.measure.width=r;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],d=o[s+1];Math.abs(l.bottom-d.bottom)>2&&a.push((l.bottom+d.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,r,a){var o,s=yt(t.map,r,a),l=s.node,d=s.start,u=s.end,c=s.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;d&&T(t.line.text.charAt(s.coverStart+d));)--d;for(;s.coverStart+u<s.coverEnd&&T(t.line.text.charAt(s.coverStart+u));)++u;if((o=Wr&&Vr<9&&0==d&&u==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():Et(sa(l,d,u).getClientRects(),a)).left||o.right||0==d)break;u=d,d-=1,c="right"}Wr&&Vr<11&&(o=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ra)return Ra;var t=n(e,i("span","x")),r=t.getBoundingClientRect(),a=sa(t,0,1).getBoundingClientRect();return Ra=Math.abs(r.left-a.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*a,bottom:t.bottom*a}}(e.display.measure,o))}else{d>0&&(c=a="right");var m;o=e.options.lineWrapping&&(m=l.getClientRects()).length>1?m["right"==a?m.length-1:0]:l.getBoundingClientRect()}if(Wr&&Vr<9&&!d&&(!o||!o.left&&!o.right)){var f=l.parentNode.getClientRects()[0];o=f?{left:f.left,right:f.left+Ut(e.display),top:f.top,bottom:f.bottom}:qa}for(var h=o.top-t.rect.top,g=o.bottom-t.rect.top,_=(h+g)/2,v=t.view.measure.heights,b=0;b<v.length-1&&!(_<v[b]);b++);var y=b?v[b-1]:0,E=v[b],S={left:("right"==c?o.right:o.left)-t.rect.left,right:("left"==c?o.left:o.right)-t.rect.left,top:y,bottom:E};o.left||o.right||(S.bogus=!0);e.options.singleCursorHeightPerLine||(S.rtop=h,S.rbottom=g);return S}(e,t,r,a)).bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:o?s.rtop:s.top,bottom:o?s.rbottom:s.bottom}}function yt(e,t,n){for(var i,r,a,o,s,l,d=0;d<e.length;d+=3)if(s=e[d],l=e[d+1],t<s?(r=0,a=1,o="left"):t<l?a=(r=t-s)+1:(d==e.length-3||t==l&&e[d+3]>t)&&(r=(a=l-s)-1,t>=l&&(o="right")),null!=r){if(i=e[d+2],s==l&&n==(i.insertLeft?"left":"right")&&(o=n),"left"==n&&0==r)for(;d&&e[d-2]==e[d-3]&&e[d-1].insertLeft;)i=e[2+(d-=3)],o="left";if("right"==n&&r==l-s)for(;d<e.length-3&&e[d+3]==e[d+4]&&!e[d+5].insertLeft;)i=e[(d+=3)+2],o="right";break}return{node:i,start:r,end:a,collapse:o,coverStart:s,coverEnd:l}}function Et(e,t){var n=qa;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function Tt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function St(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)Tt(e.display.view[n])}function xt(e){St(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ot(){return Xr&&ta?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function It(){return Xr&&ta?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function At(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=st(e.widgets[n]));return t}function Ct(e,t,n,i,r){if(!r){var a=At(t);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var o=$e(t);if("local"==i?o+=dt(e.display):o-=e.display.viewOffset,"page"==i||"window"==i){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==i?0:It());var l=s.left+("window"==i?0:Ot());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function Dt(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Ot(),r-=It();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,r+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:i-o.left,top:r-o.top}}function wt(e,t,n,i,r){return i||(i=Y(e.doc,t.line)),Ct(e,i,gt(e,i,t.ch,r),n)}function Rt(e,t,n,i,r,a){function o(t,o){var s=bt(e,r,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,Ct(e,i,s,n)}function s(e,t,n){var i=1==l[t].level;return o(n?e-1:e,i!=n)}i=i||Y(e.doc,t.line),r||(r=vt(e,i));var l=I(i,e.doc.direction),d=t.ch,u=t.sticky;if(d>=i.text.length?(d=i.text.length,u="before"):d<=0&&(d=0,u="after"),!l)return o("before"==u?d-1:d,"before"==u);var c=O(l,d,u),p=Sa,m=s(d,c,"before"==u);return null!=p&&(m.other=s(d,p,"before"!=u)),m}function Nt(e,t){var n=0;t=de(e.doc,t),e.options.lineWrapping||(n=Ut(e.display)*t.ch);var i=Y(e.doc,t.line),r=$e(i)+dt(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function kt(e,t,n,i,r){var a=ne(e,t,n);return a.xRel=r,i&&(a.outside=i),a}function Lt(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return kt(i.first,0,null,-1,-1);var r=Q(i,n),a=i.first+i.size-1;if(r>a)return kt(i.first+i.size-1,Y(i,a).text.length,null,1,1);t<0&&(t=0);for(var o=Y(i,r);;){var s=function(e,t,n,i,r){r-=$e(t);var a=vt(e,t),o=At(t),s=0,l=t.text.length,d=!0,u=I(t,e.doc.direction);if(u){var c=(e.options.lineWrapping?function(e,t,n,i,r,a,o){var s=Mt(e,t,i,o),l=s.begin,d=s.end;/\s/.test(t.text.charAt(d-1))&&d--;for(var u=null,c=null,p=0;p<r.length;p++){var m=r[p];if(!(m.from>=d||m.to<=l)){var f=1!=m.level,h=bt(e,i,f?Math.min(d,m.to)-1:Math.max(l,m.from)).right,g=h<a?a-h+1e9:h-a;(!u||c>g)&&(u=m,c=g)}}u||(u=r[r.length-1]);u.from<l&&(u={from:l,to:u.to,level:u.level});u.to>d&&(u={from:u.from,to:d,level:u.level});return u}:function(e,t,n,i,r,a,o){var s=x(function(s){var l=r[s],d=1!=l.level;return Bt(Rt(e,ne(n,d?l.to:l.from,d?"before":"after"),"line",t,i),a,o,!0)},0,r.length-1),l=r[s];if(s>0){var d=1!=l.level,u=Rt(e,ne(n,d?l.from:l.to,d?"after":"before"),"line",t,i);Bt(u,a,o,!0)&&u.top>o&&(l=r[s-1])}return l})(e,t,n,a,u,i,r);d=1!=c.level,s=d?c.from:c.to-1,l=d?c.to:c.from-1}var p,m,f=null,h=null,g=x(function(t){var n=bt(e,a,t);return n.top+=o,n.bottom+=o,!!Bt(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(f=t,h=n),!0)},s,l),_=!1;if(h){var v=i-h.left<h.right-i,b=v==d;g=f+(b?0:1),m=b?"after":"before",p=v?h.left:h.right}else{d||g!=l&&g!=s||g++,m=0==g?"after":g==t.text.length?"before":bt(e,a,g-(d?1:0)).bottom+o<=r==d?"after":"before";var y=Rt(e,ne(n,g,m),"line",t,a);p=y.left,_=r<y.top?-1:r>=y.bottom?1:0}return g=S(t.text,g,1),kt(n,g,m,_,i-p)}(e,o,r,t,n),l=ke(o,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var d=l.find(1);if(d.line==r)return d;o=Y(i,r=d.line)}}function Mt(e,t,n,i){i-=At(t);var r=t.text.length,a=x(function(t){return bt(e,n,t-1).bottom<=i},r,0);return r=x(function(t){return bt(e,n,t).top>i},a,r),{begin:a,end:r}}function Pt(e,t,n,i){n||(n=vt(e,t));return Mt(e,t,n,Ct(e,t,bt(e,n,i),"line").top)}function Bt(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function Ft(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ha){Ha=i("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)Ha.appendChild(document.createTextNode("x")),Ha.appendChild(i("br"));Ha.appendChild(document.createTextNode("x"))}n(e.measure,Ha);var a=Ha.offsetHeight/50;return a>3&&(e.cachedTextHeight=a),t(e.measure),a||1}function Ut(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=i("span","xxxxxxxxxx"),r=i("pre",[t],"CodeMirror-line-like");n(e.measure,r);var a=t.getBoundingClientRect(),o=(a.right-a.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function $t(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o){var s=e.display.gutterSpecs[o].className;n[s]=a.offsetLeft+a.clientLeft+r,i[s]=a.clientWidth}return{fixedPos:zt(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function zt(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ht(e){var t=Ft(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Ut(e.display)-3);return function(r){if(Fe(e.doc,r))return 0;var a=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(a+=r.widgets[o].height);return n?a+(Math.ceil(r.text.length/i)||1)*t:a+t}}function jt(e){var t=e.doc,n=Ht(e);t.iter(function(e){var t=n(e);t!=e.height&&J(e,t)})}function Gt(e,t,n,i){var r=e.display;if(!n&&"true"==F(t).getAttribute("cm-not-content"))return null;var a,o,s=r.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,o=t.clientY-s.top}catch(e){return null}var l,d=Lt(e,a,o);if(i&&d.xRel>0&&(l=Y(e.doc,d.line).text).length==d.ch){var u=c(l,l.length,e.options.tabSize)-l.length;d=ne(d.line,Math.max(0,Math.round((a-ct(e.display).left)/Ut(e.display))-u))}return d}function Wt(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function Vt(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)$a&&Pe(e.doc,t)<r.viewTo&&Yt(e);else if(n<=r.viewFrom)$a&&Be(e.doc,n+i)>r.viewFrom?Yt(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Yt(e);else if(t<=r.viewFrom){var a=Xt(e,n,n+i,1);a?(r.view=r.view.slice(a.index),r.viewFrom=a.lineN,r.viewTo+=i):Yt(e)}else if(n>=r.viewTo){var o=Xt(e,t,t,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):Yt(e)}else{var s=Xt(e,t,t,-1),l=Xt(e,n,n+i,1);s&&l?(r.view=r.view.slice(0,s.index).concat(Ke(e,s.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):Yt(e)}var d=r.externalMeasured;d&&(n<d.lineN?d.lineN+=i:t<d.lineN+d.size&&(r.externalMeasured=null))}function qt(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[Wt(e,t)];if(null!=a.node){var o=a.changes||(a.changes=[]);-1==p(o,n)&&o.push(n)}}}function Yt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Xt(e,t,n,i){var r,a=Wt(e,t),o=e.display.view;if(!$a||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var s=e.display.viewFrom,l=0;l<a;l++)s+=o[l].size;if(s!=t){if(i>0){if(a==o.length-1)return null;r=s+o[a].size-t,a++}else r=s-t;t+=r,n+=r}for(;Pe(e.doc,n)!=n;){if(a==(i<0?0:o.length-1))return null;n+=i*o[a-(i<0?1:0)].size,a+=i}return{index:a,lineN:n}}function Kt(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Jt(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Zt(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},a=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var l=n.sel.ranges[s];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var d=l.empty();(d||e.options.showCursorWhenSelecting)&&Qt(e,l.head,a),d||function(e,t,n){function r(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),l.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?c-e:n)+"px;\n                             height: "+(r-t)+"px"))}function a(t,n,i){function a(n,i){return wt(e,ne(t,n),"div",m,i)}function o(t,n,i){var r=Pt(e,m,null,t),o="ltr"==n==("after"==i)?"left":"right",s="after"==i?r.begin:r.end-(/\s/.test(m.text.charAt(r.end-1))?2:1);return a(s,o)[o]}var l,d,m=Y(s,t),f=m.text.length,h=I(m,s.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,a=0;a<e.length;++a){var o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(i(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr",a),r=!0)}r||i(t,n,"ltr")}(h,n||0,null==i?f:i,function(e,t,s,m){var g="ltr"==s,_=a(e,g?"left":"right"),v=a(t-1,g?"right":"left"),b=null==n&&0==e,y=null==i&&t==f,E=0==m,T=!h||m==h.length-1;if(v.top-_.top<=3){var S=(p?b:y)&&E,x=(p?y:b)&&T,O=S?u:(g?_:v).left,I=x?c:(g?v:_).right;r(O,_.top,I-O,_.bottom)}else{var A,C,D,w;g?(A=p&&b&&E?u:_.left,C=p?c:o(e,s,"before"),D=p?u:o(t,s,"after"),w=p&&y&&T?c:v.right):(A=p?o(e,s,"before"):u,C=!p&&b&&E?c:_.right,D=!p&&y&&T?u:v.left,w=p?o(t,s,"after"):c),r(A,_.top,C-A,_.bottom),_.bottom<v.top&&r(u,_.bottom,null,v.top),r(D,v.top,w-D,v.bottom)}(!l||en(_,l)<0)&&(l=_),en(v,l)<0&&(l=v),(!d||en(_,d)<0)&&(d=_),en(v,d)<0&&(d=v)}),{start:l,end:d}}var o=e.display,s=e.doc,l=document.createDocumentFragment(),d=ct(e.display),u=d.left,c=Math.max(o.sizerWidth,mt(e)-o.sizer.offsetLeft)-d.right,p="ltr"==s.direction;var m=t.from(),f=t.to();if(m.line==f.line)a(m.line,m.ch,f.ch);else{var h=Y(s,m.line),g=Y(s,f.line),_=Me(h)==Me(g),v=a(m.line,m.ch,_?h.text.length+1:null).end,b=a(f.line,_?0:null,f.ch).start;_&&(v.top<b.top-2?(r(v.right,v.top,null,v.bottom),r(u,b.top,b.left,b.bottom)):r(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&r(u,v.bottom,null,b.top)}n.appendChild(l)}(e,l,o)}}return r}function Qt(e,t,n){var r=Rt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),a=n.appendChild(i("div","","CodeMirror-cursor"));if(a.style.left=r.left+"px",a.style.top=r.top+"px",a.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(i("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function en(e,t){return e.top-t.top||e.left-t.left}function tn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||on(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function nn(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||an(e))}function rn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&on(e))},100)}function an(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(D(e,"focus",e,t),e.state.focused=!0,s(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),qr&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),tn(e))}function on(e,t){e.state.delayingBlurEvent||(e.state.focused&&(D(e,"blur",e,t),e.state.focused=!1,ua(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function sn(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],a=e.options.lineWrapping,o=void 0,s=0;if(!r.hidden){if(Wr&&Vr<8){var l=r.node.offsetTop+r.node.offsetHeight;o=l-n,n=l}else{var d=r.node.getBoundingClientRect();o=d.bottom-d.top,!a&&r.text.firstChild&&(s=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var u=r.line.height-o;if((u>.005||u<-.005)&&(J(r.line,o),ln(r.line),r.rest))for(var c=0;c<r.rest.length;c++)ln(r.rest[c]);if(s>e.display.sizerWidth){var p=Math.ceil(s/Ut(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function ln(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function dn(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-dt(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=Q(t,i),o=Q(t,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<a?(a=s,o=Q(t,$e(Y(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(a=Q(t,$e(Y(t,l))-e.wrapper.clientHeight),o=l)}return{from:a,to:Math.max(o,a+1)}}function un(e,t){var n=e.display,i=Ft(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=ft(e),o={};t.bottom-t.top>a&&(t.bottom=t.top+a);var s=e.doc.height+ut(n),l=t.top<i,d=t.bottom>s-i;if(t.top<r)o.scrollTop=l?0:t.top;else if(t.bottom>r+a){var u=Math.min(t.top,(d?s:t.bottom)-a);u!=r&&(o.scrollTop=u)}var c=e.options.fixedGutter?0:n.gutters.offsetWidth,p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-c,m=mt(e)-n.gutters.offsetWidth,f=t.right-t.left>m;return f&&(t.right=t.left+m),t.left<10?o.scrollLeft=0:t.left<p?o.scrollLeft=Math.max(0,t.left+c-(f?0:10)):t.right>m+p-3&&(o.scrollLeft=t.right+(f?0:10)-m),o}function cn(e,t){null!=t&&(fn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function pn(e){fn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function mn(e,t,n){null==t&&null==n||fn(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function fn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;hn(e,Nt(e,t.from),Nt(e,t.to),t.margin)}}function hn(e,t,n,i){var r=un(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});mn(e,r.scrollLeft,r.scrollTop)}function gn(e,t){Math.abs(e.doc.scrollTop-t)<2||(zr||kn(e,{top:t}),_n(e,t,!0),zr&&kn(e),Dn(e,100))}function _n(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function vn(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,Pn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function bn(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+ut(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+pt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function yn(e,t){t||(t=bn(e));var n=e.display.barWidth,i=e.display.barHeight;En(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&sn(e),En(e,bn(e)),n=e.display.barWidth,i=e.display.barHeight}function En(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function Tn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&ua(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ka[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ia(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?vn(e,t):gn(e,t)},e),e.display.scrollbars.addClass&&s(e.display.wrapper,e.display.scrollbars.addClass)}function Sn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ja},function(e){Wa?Wa.ops.push(e):e.ownsGroup=Wa={ops:[e],delayedCallbacks:[]}}(e.curOp)}function xn(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{Wa=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)!function(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=pt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=pt(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&He(t);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Za(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}(t[n]);for(var r=0;r<t.length;r++)!function(e){e.updatedDisplay=e.mustUpdate&&Rn(e.cm,e.update)}(t[r]);for(var a=0;a<t.length;a++)!function(e){var t=e.cm,n=t.display;e.updatedDisplay&&sn(t);e.barMeasure=bn(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=gt(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+pt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-mt(t)));(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}(t[a]);for(var s=0;s<t.length;s++)!function(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&vn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==o();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n);(e.updatedDisplay||e.startHeight!=t.doc.height)&&yn(t,e.barMeasure);e.updatedDisplay&&Mn(t,e.barMeasure);e.selectionChanged&&tn(t);t.state.focused&&e.updateInput&&t.display.input.reset(e.typing);n&&nn(e.cm)}(t[s]);for(var l=0;l<t.length;l++)!function(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Nn(t,e.update);null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null);null!=e.scrollTop&&_n(t,e.scrollTop,e.forceScroll);null!=e.scrollLeft&&vn(t,e.scrollLeft,!0,!0);if(e.scrollToPos){var a=function(e,t,n,i){null==i&&(i=0);var r;e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?ne(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ne(t.line,t.ch+1,"before"):t);for(var a=0;a<5;a++){var o=!1,s=Rt(e,t),l=n&&n!=t?Rt(e,n):s,d=un(e,r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i}),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=d.scrollTop&&(gn(e,d.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=d.scrollLeft&&(vn(e,d.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)break}return r}(t,de(r,e.scrollToPos.from),de(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!w(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),a=null;if(t.top+r.top<0?a=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(a=!1),null!=a&&!Qr){var o=i("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-dt(e.display))+"px;\n                         height: "+(t.bottom-t.top+pt(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(a),e.display.lineSpace.removeChild(o)}}}(t,a)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)o[l].lines.length||D(o[l],"hide");if(s)for(var d=0;d<s.length;++d)s[d].lines.length&&D(s[d],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop);e.changeObjs&&D(t,"changes",t,e.changeObjs);e.update&&e.update.finish()}(t[l])}(e)})}function On(e,t){if(e.curOp)return t();Sn(e);try{return t()}finally{xn(e)}}function In(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Sn(e);try{return t.apply(e,arguments)}finally{xn(e)}}}function An(e){return function(){if(this.curOp)return e.apply(this,arguments);Sn(this);try{return e.apply(this,arguments)}finally{xn(this)}}}function Cn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Sn(t);try{return e.apply(this,arguments)}finally{xn(t)}}}function Dn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,d(wn,e))}function wn(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=me(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(i.line>=e.display.viewFrom){var o=a.styles,s=a.text.length>e.options.maxHighlightLength?W(t.mode,i.state):null,l=ce(e,a,i,!0);s&&(i.state=s),a.styles=l.styles;var d=a.styleClasses,u=l.classes;u?a.styleClasses=u:d&&(a.styleClasses=null);for(var c=!o||o.length!=a.styles.length||d!=u&&(!d||!u||d.bgClass!=u.bgClass||d.textClass!=u.textClass),p=0;!c&&p<o.length;++p)c=o[p]!=a.styles[p];c&&r.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&fe(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Dn(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&On(e,function(){for(var t=0;t<r.length;t++)qt(e,r[t],"text")})}}function Rn(e,n){var i=e.display,r=e.doc;if(n.editorIsHidden)return Yt(e),!1;if(!n.force&&n.visible.from>=i.viewFrom&&n.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Kt(e))return!1;Bn(e)&&(Yt(e),n.dims=$t(e));var s=r.first+r.size,l=Math.max(n.visible.from-e.options.viewportMargin,r.first),d=Math.min(s,n.visible.to+e.options.viewportMargin);i.viewFrom<l&&l-i.viewFrom<20&&(l=Math.max(r.first,i.viewFrom)),i.viewTo>d&&i.viewTo-d<20&&(d=Math.min(s,i.viewTo)),$a&&(l=Pe(e.doc,l),d=Be(e.doc,d));var u=l!=i.viewFrom||d!=i.viewTo||i.lastWrapHeight!=n.wrapperHeight||i.lastWrapWidth!=n.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Ke(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Ke(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Wt(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Ke(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Wt(e,n)))),i.viewTo=n}(e,l,d),i.viewOffset=$e(Y(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var c=Kt(e);if(!u&&0==c&&!n.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var m=function(e){if(e.hasFocus())return null;var t=o();if(!t||!a(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&a(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return c>4&&(i.lineDiv.style.display="none"),function(e,n,i){function r(t){var n=t.nextSibling;return qr&&ia&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}var a=e.display,o=e.options.lineNumbers,s=a.lineDiv,l=s.firstChild;for(var d=a.view,u=a.viewFrom,c=0;c<d.length;c++){var m=d[c];if(m.hidden);else if(m.node&&m.node.parentNode==s){for(;l!=m.node;)l=r(l);var f=o&&null!=n&&n<=u&&m.lineNumber;m.changes&&(p(m.changes,"gutter")>-1&&(f=!1),Qe(e,m,u,i)),f&&(t(m.lineNumber),m.lineNumber.appendChild(document.createTextNode(te(e.options,u)))),l=m.node.nextSibling}else{var h=rt(e,m,u,i);s.insertBefore(h,l)}u+=m.size}for(;l;)l=r(l)}(e,i.updateLineNumbers,n.dims),c>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(e){if(e&&e.activeElt&&e.activeElt!=o()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&a(document.body,e.anchorNode)&&a(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(m),t(i.cursorDiv),t(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,u&&(i.lastWrapHeight=n.wrapperHeight,i.lastWrapWidth=n.wrapperWidth,Dn(e,400)),i.updateLineNumbers=null,!0}function Nn(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=mt(e))i&&(t.visible=dn(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+ut(e.display)-ft(e),n.top)}),t.visible=dn(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Rn(e,t))break;sn(e);var r=bn(e);Jt(e),yn(e,r),Mn(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function kn(e,t){var n=new Za(e,t);if(Rn(e,n)){sn(e),Nn(e,n);var i=bn(e);Jt(e),yn(e,i),Mn(e,i),n.finish()}}function Ln(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function Mn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+pt(e)+"px"}function Pn(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=zt(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,a=i+"px",o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&(n[o].gutter&&(n[o].gutter.style.left=a),n[o].gutterBackground&&(n[o].gutterBackground.style.left=a));var s=n[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function Bn(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=te(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var a=r.measure.appendChild(i("div",[i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=a.firstChild.offsetWidth,s=a.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Ln(e.display),!0}return!1}function Fn(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var a=e[r],o=null;if("string"!=typeof a&&(o=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;i=!0}n.push({className:a,style:o})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Un(e){var n=e.gutters,r=e.gutterSpecs;t(n),e.lineGutter=null;for(var a=0;a<r.length;++a){var o=r[a],s=o.className,l=o.style,d=n.appendChild(i("div",null,"CodeMirror-gutter "+s));l&&(d.style.cssText=l),"CodeMirror-linenumbers"==s&&(e.lineGutter=d,d.style.width=(e.lineNumWidth||1)+"px")}n.style.display=r.length?"":"none",Ln(e)}function $n(e){Un(e.display),Vt(e),Pn(e)}function zn(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Hn(e){var t=zn(e);return t.x*=eo,t.y*=eo,t}function jn(e,t){var n=zn(t),i=n.x,r=n.y,a=e.display,o=a.scroller,s=o.scrollWidth>o.clientWidth,l=o.scrollHeight>o.clientHeight;if(i&&s||r&&l){if(r&&ia&&qr)e:for(var d=t.target,u=a.view;d!=o;d=d.parentNode)for(var c=0;c<u.length;c++)if(u[c].node==d){e.display.currentWheelTarget=d;break e}if(i&&!zr&&!Kr&&null!=eo)return r&&l&&gn(e,Math.max(0,o.scrollTop+r*eo)),vn(e,Math.max(0,o.scrollLeft+i*eo)),(!r||r&&l)&&L(t),void(a.wheelStartX=null);if(r&&null!=eo){var p=r*eo,m=e.doc.scrollTop,f=m+a.wrapper.clientHeight;p<0?m=Math.max(0,m+p-50):f=Math.min(e.doc.height,f+p+50),kn(e,{top:m,bottom:f})}Qa<20&&(null==a.wheelStartX?(a.wheelStartX=o.scrollLeft,a.wheelStartY=o.scrollTop,a.wheelDX=i,a.wheelDY=r,setTimeout(function(){if(null!=a.wheelStartX){var e=o.scrollLeft-a.wheelStartX,t=o.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(eo=(eo*Qa+n)/(Qa+1),++Qa)}},200)):(a.wheelDX+=i,a.wheelDY+=r))}}function Gn(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort(function(e,t){return ie(e.from(),t.from())}),n=p(t,r);for(var a=1;a<t.length;a++){var o=t[a],s=t[a-1],l=ie(s.to(),o.from());if(i&&!o.empty()?l>0:l>=0){var d=se(s.from(),o.from()),u=oe(s.to(),o.to()),c=s.empty()?o.from()==o.head:s.from()==s.head;a<=n&&--n,t.splice(--a,2,new no(c?u:d,c?d:u))}}return new to(t,n)}function Wn(e,t){return new to([new no(e,t||e)],0)}function Vn(e){return e.text?ne(e.from.line+e.text.length-1,h(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function qn(e,t){if(ie(e,t.from)<0)return e;if(ie(e,t.to)<=0)return Vn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Vn(t).ch-t.to.ch),ne(n,i)}function Yn(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new no(qn(r.anchor,t),qn(r.head,t)))}return Gn(e.cm,n,e.sel.primIndex)}function Xn(e,t,n){return e.line==t.line?ne(n.line,e.ch-t.ch+n.ch):ne(n.line+(e.line-t.line),e.ch)}function Kn(e){e.doc.mode=j(e.options,e.doc.modeOption),Jn(e)}function Jn(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Dn(e,100),e.state.modeGen++,e.curOp&&Vt(e)}function Zn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==h(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Qn(e,t,n,i){function r(e){return n?n[e]:null}function a(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Oe(e),Ie(e,n);var r=i?i(e):1;r!=e.height&&J(e,r)}(e,n,r,i),Je(e,"change",e,t)}function o(e,t){for(var n=[],a=e;a<t;++a)n.push(new za(d[a],r(a),i));return n}var s=t.from,l=t.to,d=t.text,u=Y(e,s.line),c=Y(e,l.line),p=h(d),m=r(d.length-1),f=l.line-s.line;if(t.full)e.insert(0,o(0,d.length)),e.remove(d.length,e.size-d.length);else if(Zn(e,t)){var g=o(0,d.length-1);a(c,c.text,m),f&&e.remove(s.line,f),g.length&&e.insert(s.line,g)}else if(u==c)if(1==d.length)a(u,u.text.slice(0,s.ch)+p+u.text.slice(l.ch),m);else{var _=o(1,d.length-1);_.push(new za(p+u.text.slice(l.ch),m,i)),a(u,u.text.slice(0,s.ch)+d[0],r(0)),e.insert(s.line+1,_)}else if(1==d.length)a(u,u.text.slice(0,s.ch)+d[0]+c.text.slice(l.ch),r(0)),e.remove(s.line+1,f);else{a(u,u.text.slice(0,s.ch)+d[0],r(0)),a(c,p+c.text.slice(l.ch),m);var v=o(1,d.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,v)}Je(e,"change",e,t)}function ei(e,t,n){function i(e,r,a){if(e.linked)for(var o=0;o<e.linked.length;++o){var s=e.linked[o];if(s.doc!=r){var l=a&&s.sharedHist;n&&!l||(t(s.doc,l),i(s.doc,e,l))}}}i(e,null,!0)}function ti(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,jt(e),Kn(e),ni(e),e.options.lineWrapping||He(e),e.options.mode=t.modeOption,Vt(e)}function ni(e){("rtl"==e.doc.direction?s:ua)(e.display.lineDiv,"CodeMirror-rtl")}function ii(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ri(e,t){var n={from:ae(t.from),to:Vn(t),text:X(e,t.from,t.to)};return di(e,n,t.from.line,t.to.line+1),ei(e,function(e){return di(e,n,t.from.line,t.to.line+1)},!0),n}function ai(e){for(;e.length;){if(!h(e).ranges)break;e.pop()}}function oi(e,t,n,i){var r=e.history;r.undone.length=0;var a,o,s=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(a=function(e,t){return t?(ai(e.done),h(e.done)):e.done.length&&!h(e.done).ranges?h(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),h(e.done)):void 0}(r,r.lastOp==i)))o=h(a.changes),0==ie(t.from,t.to)&&0==ie(t.from,o.to)?o.to=Vn(t):a.changes.push(ri(e,t));else{var l=h(r.done);for(l&&l.ranges||li(e.sel,r.done),a={changes:[ri(e,t)],generation:r.generation},r.done.push(a);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,o||D(e,"historyAdded")}function si(e,t,n,i){var r=e.history,a=i&&i.origin;n==r.lastSelOp||a&&r.lastSelOrigin==a&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==a||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,h(r.done),t))?r.done[r.done.length-1]=t:li(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=a,r.lastSelOp=n,i&&!1!==i.clearRedo&&ai(r.undone)}function li(e,t){var n=h(t);n&&n.ranges&&n.equals(e)||t.push(e)}function di(e,t,n,i){var r=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[a]=n.markedSpans),++a})}function ui(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ci(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(ui(n[r]));return i}(e,t),i=Se(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var a=n[r],o=i[r];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],d=0;d<a.length;++d)if(a[d].marker==l.marker)continue e;a.push(l)}else o&&(n[r]=o)}return n}function pi(e,t,n){for(var i=[],r=0;r<e.length;++r){var a=e[r];if(a.ranges)i.push(n?to.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];i.push({changes:s});for(var l=0;l<o.length;++l){var d=o[l],u=void 0;if(s.push({from:d.from,to:d.to,text:d.text}),t)for(var c in d)(u=c.match(/^spans_(\d+)$/))&&p(t,Number(u[1]))>-1&&(h(s)[c]=d[c],delete d[c])}}}return i}function mi(e,t,n,i){if(i){var r=e.anchor;if(n){var a=ie(t,r)<0;a!=ie(n,r)<0?(r=t,t=n):a!=ie(t,n)<0&&(t=n)}return new no(r,t)}return new no(n||t,t)}function fi(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),bi(e,new to([mi(e.sel.primary(),t,n,r)],0),i)}function hi(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=mi(e.sel.ranges[a],t[a],null,r);bi(e,Gn(e.cm,i,e.sel.primIndex),n)}function gi(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,bi(e,Gn(e.cm,r,e.sel.primIndex),i)}function _i(e,t,n,i){bi(e,Wn(t,n),i)}function vi(e,t,n){var i=e.history.done,r=h(i);r&&r.ranges?(i[i.length-1]=t,yi(e,t,n)):bi(e,t,n)}function bi(e,t,n){yi(e,t,n),si(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function yi(e,t,n){(N(e,"beforeSelectionChange")||e.cm&&N(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new no(de(e,t[n].anchor),de(e,t[n].head))},origin:n&&n.origin};return D(e,"beforeSelectionChange",e,i),e.cm&&D(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Gn(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));Ei(e,Si(e,t,n&&n.bias||(ie(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||pn(e.cm)}function Ei(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,R(e.cm)),Je(e,"cursorActivity",e))}function Ti(e){Ei(e,Si(e,e.sel,null,!1))}function Si(e,t,n,i){for(var r,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],l=Oi(e,o.anchor,s&&s.anchor,n,i),d=Oi(e,o.head,s&&s.head,n,i);(r||l!=o.anchor||d!=o.head)&&(r||(r=t.ranges.slice(0,a)),r[a]=new no(l,d))}return r?Gn(e.cm,r,t.primIndex):t}function xi(e,t,n,i,r){var a=Y(e,t.line);if(a.markedSpans)for(var o=0;o<a.markedSpans.length;++o){var s=a.markedSpans[o],l=s.marker,d="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(d?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(u?s.to>=t.ch:s.to>t.ch))){if(r&&(D(l,"beforeCursorEnter"),l.explicitlyCleared)){if(a.markedSpans){--o;continue}break}if(!l.atomic)continue;if(n){var c=l.find(i<0?1:-1),p=void 0;if((i<0?u:d)&&(c=Ii(e,c,-i,c&&c.line==t.line?a:null)),c&&c.line==t.line&&(p=ie(c,n))&&(i<0?p<0:p>0))return xi(e,c,t,i,r)}var m=l.find(i<0?-1:1);return(i<0?d:u)&&(m=Ii(e,m,i,m.line==t.line?a:null)),m?xi(e,m,t,i,r):null}}return t}function Oi(e,t,n,i,r){var a=i||1,o=xi(e,t,n,a,r)||!r&&xi(e,t,n,a,!0)||xi(e,t,n,-a,r)||!r&&xi(e,t,n,-a,!0);return o||(e.cantEdit=!0,ne(e.first,0))}function Ii(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?de(e,ne(t.line-1)):null:n>0&&t.ch==(i||Y(e,t.line)).text.length?t.line<e.first+e.size-1?ne(t.line+1,0):null:new ne(t.line,t.ch+n)}function Ai(e){e.setSelection(ne(e.firstLine(),0),ne(e.lastLine()),_a)}function Ci(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,a){t&&(i.from=de(e,t)),n&&(i.to=de(e,n)),r&&(i.text=r),void 0!==a&&(i.origin=a)}),D(e,"beforeChange",e,i),e.cm&&D(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Di(e,t,n){if(e.cm){if(!e.cm.curOp)return In(e.cm,Di)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(N(e,"beforeChange")||e.cm&&N(e.cm,"beforeChange"))||(t=Ci(e,t,!0))){var i=Ua&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=p(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],a=0;a<i.length;++a)for(var o=i[a],s=o.find(0),l=0;l<r.length;++l){var d=r[l];if(!(ie(d.to,s.from)<0||ie(d.from,s.to)>0)){var u=[l,1],c=ie(d.from,s.from),m=ie(d.to,s.to);(c<0||!o.inclusiveLeft&&!c)&&u.push({from:d.from,to:s.from}),(m>0||!o.inclusiveRight&&!m)&&u.push({from:s.to,to:d.to}),r.splice.apply(r,u),l+=u.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)wi(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else wi(e,t)}}function wi(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ie(t.from,t.to)){var n=Yn(e,t);oi(e,t,n,e.cm?e.cm.curOp.id:NaN),ki(e,t,n,Se(e,t));var i=[];ei(e,function(e,n){n||-1!=p(i,e.history)||(Bi(e.history,t),i.push(e.history)),ki(e,t,null,Se(e,t))})}}function Ri(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,a=e.history,o=e.sel,s="undo"==t?a.done:a.undone,l="undo"==t?a.undone:a.done,d=0;d<s.length&&(r=s[d],n?!r.ranges||r.equals(e.sel):r.ranges);d++);if(d!=s.length){for(a.lastOrigin=a.lastSelOrigin=null;;){if(!(r=s.pop()).ranges){if(i)return void s.push(r);break}if(li(r,l),n&&!r.equals(e.sel))return void bi(e,r,{clearRedo:!1});o=r}var u=[];li(o,l),l.push({changes:u,generation:a.generation}),a.generation=r.generation||++a.maxGeneration;for(var c=N(e,"beforeChange")||e.cm&&N(e.cm,"beforeChange"),m=function(n){var i=r.changes[n];if(i.origin=t,c&&!Ci(e,i,!1))return s.length=0,{};u.push(ri(e,i));var a=n?Yn(e,i):h(s);ki(e,i,a,ci(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Vn(i)});var o=[];ei(e,function(e,t){t||-1!=p(o,e.history)||(Bi(e.history,i),o.push(e.history)),ki(e,i,null,ci(e,i))})},f=r.changes.length-1;f>=0;--f){var g=m(f);if(g)return g.v}}}}function Ni(e,t){if(0!=t&&(e.first+=t,e.sel=new to(g(e.sel.ranges,function(e){return new no(ne(e.anchor.line+t,e.anchor.ch),ne(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Vt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)qt(e.cm,i,"gutter")}}function ki(e,t,n,i){if(e.cm&&!e.cm.curOp)return In(e.cm,ki)(e,t,n,i);if(t.to.line<e.first)Ni(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Ni(e,r),t={from:ne(e.first,0),to:ne(t.to.line+r,t.to.ch),text:[h(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:ne(a,Y(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=X(e,t.from,t.to),n||(n=Yn(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,a=t.from,o=t.to,s=!1,l=a.line;e.options.lineWrapping||(l=Z(Me(Y(i,a.line))),i.iter(l,o.line+1,function(e){if(e==r.maxLine)return s=!0,!0}));i.sel.contains(t.from,t.to)>-1&&R(e);Qn(i,t,n,Ht(e)),e.options.lineWrapping||(i.iter(l,a.line+t.text.length,function(e){var t=ze(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Y(e,i).stateAfter;if(r&&(!(r instanceof Pa)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}})(i,a.line),Dn(e,400);var d=t.text.length-(o.line-a.line)-1;t.full?Vt(e):a.line!=o.line||1!=t.text.length||Zn(e.doc,t)?Vt(e,a.line,o.line+1,d):qt(e,a.line,"text");var u=N(e,"changes"),c=N(e,"change");if(c||u){var p={from:a,to:o,text:t.text,removed:t.removed,origin:t.origin};c&&Je(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,i):Qn(e,t,i),yi(e,n,_a),e.cantEdit&&Oi(e,ne(e.firstLine(),0))&&(e.cantEdit=!1)}}function Li(e,t,n,i,r){var a;i||(i=n),ie(i,n)<0&&(n=(a=[i,n])[0],i=a[1]),"string"==typeof t&&(t=e.splitLines(t)),Di(e,{from:n,to:i,text:t,origin:r})}function Mi(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Pi(e,t,n,i){for(var r=0;r<e.length;++r){var a=e[r],o=!0;if(a.ranges){a.copied||((a=e[r]=a.deepCopy()).copied=!0);for(var s=0;s<a.ranges.length;s++)Mi(a.ranges[s].anchor,t,n,i),Mi(a.ranges[s].head,t,n,i)}else{for(var l=0;l<a.changes.length;++l){var d=a.changes[l];if(n<d.from.line)d.from=ne(d.from.line+i,d.from.ch),d.to=ne(d.to.line+i,d.to.ch);else if(t<=d.to.line){o=!1;break}}o||(e.splice(0,r+1),r=0)}}}function Bi(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;Pi(e.done,n,i,r),Pi(e.undone,n,i,r)}function Fi(e,t,n,i){var r=t,a=t;return"number"==typeof t?a=Y(e,le(e,t)):r=Z(t),null==r?null:(i(a,r)&&e.cm&&qt(e.cm,r,n),a)}function Ui(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function $i(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}function zi(e,t,n){$e(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&cn(e,n)}function Hi(e,t,n,i,a){if(i&&i.shared)return function(e,t,n,i,r){(i=u(i)).shared=!1;var a=[Hi(e,t,n,i,r)],o=a[0],s=i.widgetNode;return ei(e,function(e){s&&(i.widgetNode=s.cloneNode(!0)),a.push(Hi(e,de(e,t),de(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=h(a)}),new oo(a,o)}(e,t,n,i,a);if(e.cm&&!e.cm.curOp)return In(e.cm,Hi)(e,t,n,i,a);var o=new ao(e,a),s=ie(t,n);if(i&&u(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=r("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Le(e,t.line,t,n,o)||t.line!=n.line&&Le(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");$a=!0}o.addToHistory&&oi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,d=t.line,c=e.cm;if(e.iter(d,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Me(e)==c.display.maxLine&&(l=!0),o.collapsed&&d!=t.line&&J(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new ye(o,d==t.line?t.ch:null,d==n.line?n.ch:null)),++d}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Fe(e,t)&&J(t,0)}),o.clearOnEnter&&Ia(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Ua=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ro,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)Vt(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var p=t.line;p<=n.line;p++)qt(c,p,"text");o.atomic&&Ti(c.doc),Je(c,"markerAdded",c,o)}return o}function ji(e){return e.findMarks(ne(e.first,0),e.clipPos(ne(e.lastLine())),function(e){return e.parent})}function Gi(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];ei(n.primary.doc,function(e){return i.push(e)});for(var r=0;r<n.markers.length;r++){var a=n.markers[r];-1==p(i,a.doc)&&(a.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}function Wi(e){var t=this;if(Vi(t),!w(t,e)&&!lt(t.display,e)){L(e),Wr&&(uo=+new Date);var n=Gt(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,a=Array(r),o=0,s=function(){++o==r&&In(t,function(){var e={from:n=de(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(e){return null!=e}).join(t.doc.lineSeparator())),origin:"paste"};Di(t.doc,e),vi(t.doc,Wn(de(t.doc,n),de(t.doc,Vn(e))))})()},l=function(e,n){if(t.options.allowDropFileTypes&&-1==p(t.options.allowDropFileTypes,e.type))s();else{var i=new FileReader;i.onerror=function(){return s()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)?s():(a[n]=e,s())},i.readAsText(e)}},d=0;d<i.length;d++)l(i[d],d);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var c;if(t.state.draggingText&&!t.state.draggingText.copy&&(c=t.listSelections()),yi(t.doc,Wn(n,n)),c)for(var m=0;m<c.length;++m)Li(t.doc,"",c[m].anchor,c[m].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Vi(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function qi(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}function Yi(){co||(!function(){var e;Ia(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,qi(Xi)},100))}),Ia(window,"blur",function(){return qi(on)})}(),co=!0)}function Xi(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}function Ki(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,r,a,o=0;o<t.length-1;o++){var s=t[o];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Ji(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=g(n.split(" "),Ki),a=0;a<r.length;a++){var o=void 0,s=void 0;a==r.length-1?(s=r.join(" "),o=i):(s=r.slice(0,a+1).join(" "),o="...");var l=t[s];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+s)}else t[s]=o}delete e[n]}for(var d in t)e[d]=t[d];return e}function Zi(e,t,n,i){var r=(t=nr(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Zi(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var o=Zi(e,t.fallthrough[a],n,i);if(o)return o}}}function Qi(e){var t="string"==typeof e?e:po[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function er(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(la?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(la?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function tr(e,t){if(Kr&&34==e.keyCode&&e.char)return!1;var n=po[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),er(n,e,t))}function nr(e){return"string"==typeof e?go[e]:e}function ir(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var a=t(n[r]);i.length&&ie(a.from,h(i).to)<=0;){var o=i.pop();if(ie(o.from,a.from)<0){a.from=o.from;break}}i.push(a)}On(e,function(){for(var t=i.length-1;t>=0;t--)Li(e.doc,"",i[t].from,i[t].to,"+delete");pn(e)})}function rr(e,t,n){var i=S(e.text,t+n,n);return i<0||i>e.text.length?null:i}function ar(e,t,n){var i=rr(e,t.ch,n);return null==i?null:new ne(t.line,i,n<0?"after":"before")}function or(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var a=I(n,t.doc.direction);if(a){var o,s=r<0?h(a):a[0],l=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var d=vt(t,n);o=r<0?n.text.length-1:0;var u=bt(t,d,o).top;o=x(function(e){return bt(t,d,e).top==u},r<0==(1==s.level)?s.from:s.to-1,o),"before"==l&&(o=rr(n,o,1))}else o=r<0?s.to:s.from;return new ne(i,o,l)}}return new ne(i,r<0?n.text.length:0,r<0?"before":"after")}function sr(e,t){var n=Y(e.doc,t),i=Me(n);return i!=n&&(t=Z(i)),or(!0,e,i,t,1)}function lr(e,t){var n=Y(e.doc,t),i=function(e){for(var t;t=Ne(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=Z(i)),or(!0,e,n,t,-1)}function dr(e,t){var n=sr(e,t.line),i=Y(e.doc,n.line),r=I(i,e.doc.direction);if(!r||0==r[0].level){var a=Math.max(n.ch,i.text.search(/\S/)),o=t.line==n.line&&t.ch<=a&&t.ch;return ne(n.line,o?0:a,n.sticky)}return n}function ur(e,t,n){if("string"==typeof t&&!(t=_o[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=ga}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function cr(e,t,n,i){var r=e.state.keySeq;if(r){if(Qi(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:vo.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),pr(e,r+" "+t,n,i))return!0}return pr(e,t,n,i)}function pr(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Zi(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Zi(t,e.options.extraKeys,n,e)||Zi(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&Je(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(L(n),tn(e)),!!r}function mr(e,t){var n=tr(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?cr(e,"Shift-"+n,t,function(t){return ur(e,t,!0)})||cr(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ur(e,t)}):cr(e,n,t,function(t){return ur(e,t)}))}function fr(e){if(!(e.target&&e.target!=this.display.input.getField()||(this.curOp.focus=o(),w(this,e)))){Wr&&Vr<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var n=mr(this,e);Kr&&(bo=n?t:null,!n&&88==t&&!wa&&(ia?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),zr&&!ia&&!n&&46==t&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){function t(e){18!=e.keyCode&&e.altKey||(ua(n,"CodeMirror-crosshair"),C(document,"keyup",t),C(document,"mouseover",t))}var n=e.display.lineDiv;s(n,"CodeMirror-crosshair");Ia(document,"keyup",t),Ia(document,"mouseover",t)}(this)}}function hr(e){16==e.keyCode&&(this.doc.sel.shift=!1),w(this,e)}function gr(e){if(!(e.target&&e.target!=this.display.input.getField()||lt(this.display,e)||w(this,e)||e.ctrlKey&&!e.altKey||ia&&e.metaKey)){var t=e.keyCode,n=e.charCode;if(Kr&&t==bo)return bo=null,void L(e);if(!Kr||e.which&&!(e.which<10)||!mr(this,e)){var i=String.fromCharCode(null==n?t:n);"\b"!=i&&(function(e,t,n){return cr(e,"'"+n+"'",t,function(t){return ur(e,t,!0)})}(this,e,i)||this.display.input.onKeyPress(e))}}}function _r(e){var t=this.display;if(!(w(this,e)||t.activeTouch&&t.input.supportsTouch()))if(t.input.ensurePolled(),t.shift=e.shiftKey,lt(t,e))qr||(t.scroller.draggable=!1,setTimeout(function(){return t.scroller.draggable=!0},100));else if(!yr(this,e)){var n=Gt(this,e),i=U(e),r=n?function(e,t){var n=+new Date;return To&&To.compare(n,e,t)?(Eo=To=null,"triple"):Eo&&Eo.compare(n,e,t)?(To=new yo(n,e,t),Eo=null,"double"):(Eo=new yo(n,e,t),To=null,"single")}(n,i):"single";window.focus(),1==i&&this.state.selectingText&&this.state.selectingText(e),n&&function(e,t,n,i,r){var a="Click";"double"==i?a="Double"+a:"triple"==i&&(a="Triple"+a);return a=(1==t?"Left":2==t?"Middle":"Right")+a,cr(e,er(a,r),r,function(t){if("string"==typeof t&&(t=_o[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=ga}finally{e.state.suppressEdits=!1}return i})}(this,i,n,r,e)||(1==i?n?function(e,t,n,i){Wr?setTimeout(d(nn,e),0):e.curOp.focus=o();var r,a=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var a=ra?n.shiftKey&&n.metaKey:n.altKey;r.unit=a?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey);null==r.addNew&&(r.addNew=ia?n.metaKey:n.ctrlKey);null==r.moveOnDrag&&(r.moveOnDrag=!(ia?n.altKey:n.ctrlKey));return r}(e,n,i),s=e.doc.sel;e.options.dragDrop&&Aa&&!e.isReadOnly()&&"single"==n&&(r=s.contains(t))>-1&&(ie((r=s.ranges[r]).from(),t)<0||t.xRel>0)&&(ie(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,a=!1,o=In(e,function(t){qr&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:rn(e)),C(r.wrapper.ownerDocument,"mouseup",o),C(r.wrapper.ownerDocument,"mousemove",s),C(r.scroller,"dragstart",l),C(r.scroller,"drop",o),a||(L(t),i.addNew||fi(e.doc,n,null,null,i.extend),qr&&!Jr||Wr&&9==Vr?setTimeout(function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()},20):r.input.focus())}),s=function(e){a=a||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},l=function(){return a=!0};qr&&(r.scroller.draggable=!0);e.state.draggingText=o,o.copy=!i.moveOnDrag,Ia(r.wrapper.ownerDocument,"mouseup",o),Ia(r.wrapper.ownerDocument,"mousemove",s),Ia(r.scroller,"dragstart",l),Ia(r.scroller,"drop",o),e.state.delayingBlurEvent=!0,setTimeout(function(){return r.input.focus()},20),r.scroller.dragDrop&&r.scroller.dragDrop()}(e,i,t,a):function(e,t,n,i){function r(t){if(0!=ie(_,t))if(_=t,"rectangle"==i.unit){for(var r=[],a=e.options.tabSize,o=c(Y(d,n.line).text,n.ch,a),s=c(Y(d,t.line).text,t.ch,a),l=Math.min(o,s),h=Math.max(o,s),g=Math.min(n.line,t.line),v=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=v;g++){var b=Y(d,g).text,y=m(b,l,a);l==h?r.push(new no(ne(g,y),ne(g,y))):b.length>y&&r.push(new no(ne(g,y),ne(g,m(b,h,a))))}r.length||r.push(new no(n,n)),bi(d,Gn(e,f.ranges.slice(0,p).concat(r),p),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var E,T=u,S=vr(e,t,i.unit),x=T.anchor;ie(S.anchor,x)>0?(E=S.head,x=se(T.from(),S.anchor)):(E=S.anchor,x=oe(T.to(),S.head));var A=f.ranges.slice(0);A[p]=function(e,t){var n=t.anchor,i=t.head,r=Y(e.doc,n.line);if(0==ie(n,i)&&n.sticky==i.sticky)return t;var a=I(r);if(!a)return t;var o=O(a,n.ch,n.sticky),s=a[o];if(s.from!=n.ch&&s.to!=n.ch)return t;var l=o+(s.from==n.ch==(1!=s.level)?0:1);if(0==l||l==a.length)return t;var d;if(i.line!=n.line)d=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=O(a,i.ch,i.sticky),c=u-o||(i.ch-n.ch)*(1==s.level?-1:1);d=u==l-1||u==l?c<0:c>0}var p=a[l+(d?-1:0)],m=d==(1==p.level),f=m?p.from:p.to,h=m?"after":"before";return n.ch==f&&n.sticky==h?t:new no(new ne(n.line,f,h),i)}(e,new no(de(d,x),E)),bi(d,Gn(e,A,p),va)}}function a(t){var n=++b,s=Gt(e,t,!0,"rectangle"==i.unit);if(s)if(0!=ie(s,_)){e.curOp.focus=o(),r(s);var u=dn(l,d);(s.line>=u.to||s.line<u.from)&&setTimeout(In(e,function(){b==n&&a(t)}),150)}else{var c=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;c&&setTimeout(In(e,function(){b==n&&(l.scroller.scrollTop+=c,a(t))}),50)}}function s(t){e.state.selectingText=!1,b=1/0,t&&(L(t),l.input.focus()),C(l.wrapper.ownerDocument,"mousemove",y),C(l.wrapper.ownerDocument,"mouseup",E),d.history.lastSelOrigin=null}Wr&&rn(e);var l=e.display,d=e.doc;L(t);var u,p,f=d.sel,h=f.ranges;i.addNew&&!i.extend?(p=d.sel.contains(n),u=p>-1?h[p]:new no(n,n)):(u=d.sel.primary(),p=d.sel.primIndex);if("rectangle"==i.unit)i.addNew||(u=new no(n,n)),n=Gt(e,t,!0,!0),p=-1;else{var g=vr(e,n,i.unit);u=i.extend?mi(u,g.anchor,g.head,i.extend):g}i.addNew?-1==p?(p=h.length,bi(d,Gn(e,h.concat([u]),p),{scroll:!1,origin:"*mouse"})):h.length>1&&h[p].empty()&&"char"==i.unit&&!i.extend?(bi(d,Gn(e,h.slice(0,p).concat(h.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),f=d.sel):gi(d,p,u,va):(p=0,bi(d,new to([u],0),va),f=d.sel);var _=n;var v=l.wrapper.getBoundingClientRect(),b=0;var y=In(e,function(e){0!==e.buttons&&U(e)?a(e):s(e)}),E=In(e,s);e.state.selectingText=E,Ia(l.wrapper.ownerDocument,"mousemove",y),Ia(l.wrapper.ownerDocument,"mouseup",E)}(e,i,t,a)}(this,n,r,e):F(e)==t.scroller&&L(e):2==i?(n&&fi(this.doc,n),setTimeout(function(){return t.input.focus()},20)):3==i&&(da?this.display.input.onContextMenu(e):rn(this)))}}function vr(e,t,n){if("char"==n)return new no(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new no(ne(t.line,0),de(e.doc,ne(t.line+1,0)));var i=n(e,t);return new no(i.from,i.to)}function br(e,t,n,i){var r,a;if(t.touches)r=t.touches[0].clientX,a=t.touches[0].clientY;else try{r=t.clientX,a=t.clientY}catch(e){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&L(t);var o=e.display,s=o.lineDiv.getBoundingClientRect();if(a>s.bottom||!N(e,n))return P(t);a-=s.top-o.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var d=o.gutters.childNodes[l];if(d&&d.getBoundingClientRect().right>=r){return D(e,n,e,Q(e.doc,a),e.display.gutterSpecs[l].className,t),P(t)}}}function yr(e,t){return br(e,t,"gutterClick",!0)}function Er(e,t){lt(e.display,t)||function(e,t){if(!N(e,"gutterContextMenu"))return!1;return br(e,t,"gutterContextMenu",!1)}(e,t)||w(e,t,"contextmenu")||da||e.display.input.onContextMenu(t)}function Tr(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),xt(e)}function Sr(e,t,n){if(!t!=!(n&&n!=So)){var i=e.display.dragFunctions,r=t?Ia:C;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function xr(e){e.options.lineWrapping?(s(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(ua(e.display.wrapper,"CodeMirror-wrap"),He(e)),jt(e),Vt(e),xt(e),setTimeout(function(){return yn(e)},100)}function Or(e,t){var a=this;if(!(this instanceof Or))return new Or(e,t);this.options=t=t?u(t):{},u(xo,t,!1);var o=t.value;"string"==typeof o?o=new lo(o,t.mode,null,t.lineSeparator,t.direction):t.mode&&(o.modeOption=t.mode),this.doc=o;var s=new Or.inputStyles[t.inputStyle](this),l=this.display=new function(e,t,n,a){this.input=n,this.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=r("div",null,"CodeMirror-code"),this.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=i("div",null,"CodeMirror-cursors"),this.measure=i("div",null,"CodeMirror-measure"),this.lineMeasure=i("div",null,"CodeMirror-measure"),this.lineSpace=r("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var o=r("div",[this.lineSpace],"CodeMirror-lines");this.mover=i("div",[o],null,"position: relative"),this.sizer=i("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=i("div",null,null,"position: absolute; height: "+ha+"px; width: 1px;"),this.gutters=i("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=i("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=i("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),Wr&&Vr<8&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),qr||zr&&na||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.viewFrom=this.viewTo=t.first,this.reportedViewFrom=this.reportedViewTo=t.first,this.view=[],this.renderedView=null,this.externalMeasured=null,this.viewOffset=0,this.lastWrapHeight=this.lastWrapWidth=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLine=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.selForContextMenu=null,this.activeTouch=null,this.gutterSpecs=Fn(a.gutters,a.lineNumbers),Un(this),n.init(this)}(e,o,s,t);l.wrapper.CodeMirror=this,Tr(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Tn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new pa,keySeq:null,specialChars:null},t.autofocus&&!na&&l.input.focus(),Wr&&Vr<11&&setTimeout(function(){return a.display.input.reset(!0)},20),function(e){function t(){a.activeTouch&&(o=setTimeout(function(){return a.activeTouch=null},1e3),(s=a.activeTouch).end=+new Date)}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}var a=e.display;Ia(a.scroller,"mousedown",In(e,_r)),Wr&&Vr<11?Ia(a.scroller,"dblclick",In(e,function(t){if(!w(e,t)){var n=Gt(e,t);if(n&&!yr(e,t)&&!lt(e.display,t)){L(t);var i=e.findWordAt(n);fi(e.doc,i.anchor,i.head)}}})):Ia(a.scroller,"dblclick",function(t){return w(e,t)||L(t)});Ia(a.scroller,"contextmenu",function(t){return Er(e,t)}),Ia(a.input.getField(),"contextmenu",function(t){a.scroller.contains(t.target)||Er(e,t)});var o,s={end:0};Ia(a.scroller,"touchstart",function(t){if(!w(e,t)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(t)&&!yr(e,t)){a.input.ensurePolled(),clearTimeout(o);var n=+new Date;a.activeTouch={start:n,moved:!1,prev:n-s.end<=300?s:null},1==t.touches.length&&(a.activeTouch.left=t.touches[0].pageX,a.activeTouch.top=t.touches[0].pageY)}}),Ia(a.scroller,"touchmove",function(){a.activeTouch&&(a.activeTouch.moved=!0)}),Ia(a.scroller,"touchend",function(n){var i=a.activeTouch;if(i&&!lt(a,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(a.activeTouch,"page");o=!i.prev||r(i,i.prev)?new no(s,s):!i.prev.prev||r(i,i.prev.prev)?e.findWordAt(s):new no(ne(s.line,0),de(e.doc,ne(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),L(n)}t()}),Ia(a.scroller,"touchcancel",t),Ia(a.scroller,"scroll",function(){a.scroller.clientHeight&&(gn(e,a.scroller.scrollTop),vn(e,a.scroller.scrollLeft,!0),D(e,"scroll",e))}),Ia(a.scroller,"mousewheel",function(t){return jn(e,t)}),Ia(a.scroller,"DOMMouseScroll",function(t){return jn(e,t)}),Ia(a.wrapper,"scroll",function(){return a.wrapper.scrollTop=a.wrapper.scrollLeft=0}),a.dragFunctions={enter:function(t){w(e,t)||B(t)},over:function(t){w(e,t)||(!function(e,t){var r=Gt(e,t);if(r){var a=document.createDocumentFragment();Qt(e,r,a),e.display.dragCursor||(e.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),n(e.display.dragCursor,a)}}(e,t),B(t))},start:function(t){return function(e,t){if(Wr&&(!e.state.draggingText||+new Date-uo<100))B(t);else if(!w(e,t)&&!lt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Jr)){var n=i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Kr&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Kr&&n.parentNode.removeChild(n)}}(e,t)},drop:In(e,Wi),leave:function(t){w(e,t)||Vi(e)}};var l=a.input.getField();Ia(l,"keyup",function(t){return hr.call(e,t)}),Ia(l,"keydown",In(e,fr)),Ia(l,"keypress",In(e,gr)),Ia(l,"focus",function(t){return an(e,t)}),Ia(l,"blur",function(t){return on(e,t)})}(this),Yi(),Sn(this),this.curOp.forceUpdate=!0,ti(this,o),t.autofocus&&!na||this.hasFocus()?setTimeout(function(){a.hasFocus()&&!a.state.focused&&an(a)},20):on(this);for(var d in Oo)Oo.hasOwnProperty(d)&&Oo[d](this,t[d],So);Bn(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Io.length;++c)Io[c](this);xn(this),qr&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(l.lineDiv).textRendering&&(l.lineDiv.style.textRendering="auto")}function Ir(e,t,n,i){var r,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?r=me(e,t).state:n="prev");var o=e.options.tabSize,s=Y(a,t),l=c(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var d,u=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((d=a.mode.indent(r,s.text.slice(u.length),s.text))==ga||d>150)){if(!i)return;n="prev"}}else d=0,n="not";"prev"==n?d=t>a.first?c(Y(a,t-1).text,null,o):0:"add"==n?d=l+e.options.indentUnit:"subtract"==n?d=l-e.options.indentUnit:"number"==typeof n&&(d=l+n),d=Math.max(0,d);var p="",m=0;if(e.options.indentWithTabs)for(var h=Math.floor(d/o);h;--h)m+=o,p+="\t";if(m<d&&(p+=f(d-m)),p!=u)return Li(a,p,ne(t,0),ne(t,u.length),"+input"),s.stateAfter=null,!0;for(var g=0;g<a.sel.ranges.length;g++){var _=a.sel.ranges[g];if(_.head.line==t&&_.head.ch<u.length){var v=ne(t,u.length);gi(a,g,new no(v,v));break}}}function Ar(e){Ao=e}function Cr(e,t,n,i,r){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var o=+new Date-200,s="paste"==r||e.state.pasteIncoming>o,l=Ca(t),d=null;if(s&&i.ranges.length>1)if(Ao&&Ao.text.join("\n")==t){if(i.ranges.length%Ao.text.length==0){d=[];for(var u=0;u<Ao.text.length;u++)d.push(a.splitLines(Ao.text[u]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(d=g(l,function(e){return[e]}));for(var c=e.curOp.updateInput,p=i.ranges.length-1;p>=0;p--){var m=i.ranges[p],f=m.from(),_=m.to();m.empty()&&(n&&n>0?f=ne(f.line,f.ch-n):e.state.overwrite&&!s?_=ne(_.line,Math.min(Y(a,_.line).text.length,_.ch+h(l).length)):s&&Ao&&Ao.lineWise&&Ao.text.join("\n")==l.join("\n")&&(f=_=ne(f.line,0)));var v={from:f,to:_,text:d?d[p%d.length]:l,origin:r||(s?"paste":e.state.cutIncoming>o?"cut":"+input")};Di(e.doc,v),Je(e,"inputRead",e,v)}t&&!s&&wr(e,t),pn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=c),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Dr(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||On(t,function(){return Cr(t,n,0,null,"paste")}),!0}function wr(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var a=e.getModeAt(r.head),o=!1;if(a.electricChars){for(var s=0;s<a.electricChars.length;s++)if(t.indexOf(a.electricChars.charAt(s))>-1){o=Ir(e,r.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Y(e.doc,r.head.line).text.slice(0,r.head.ch))&&(o=Ir(e,r.head.line,"smart"));o&&Je(e,"electricInput",e,r.head.line)}}}function Rr(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,a={anchor:ne(r,0),head:ne(r+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Nr(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function kr(){var e=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=i("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return qr?e.style.width="1000px":e.setAttribute("wrap","off"),ea&&(e.style.border="1px solid black"),Nr(e),t}function Lr(e,t,n,i,r){function a(a){var o;if("codepoint"==i){var s=l.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(s))o=null;else{var u=n>0?s>=55296&&s<56320:s>=56320&&s<57343;o=new ne(t.line,Math.max(0,Math.min(l.text.length,t.ch+n*(u?2:1))),-n)}}else o=r?function(e,t,n,i){var r=I(t,e.doc.direction);if(!r)return ar(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=O(r,n.ch,n.sticky),o=r[a];if("ltr"==e.doc.direction&&o.level%2==0&&(i>0?o.to>n.ch:o.from<n.ch))return ar(t,n,i);var s,l=function(e,n){return rr(t,e instanceof ne?e.ch:e,n)},d=function(n){return e.options.lineWrapping?(s=s||vt(e,t),Pt(e,t,s,n)):{begin:0,end:t.text.length}},u=d("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==o.level){var c=1==o.level==i<0,p=l(n,c?1:-1);if(null!=p&&(c?p<=o.to&&p<=u.end:p>=o.from&&p>=u.begin)){var m=c?"before":"after";return new ne(n.line,p,m)}}var f=function(e,t,i){for(var a=function(e,t){return t?new ne(n.line,l(e,1),"before"):new ne(n.line,e,"after")};e>=0&&e<r.length;e+=t){var o=r[e],s=t>0==(1!=o.level),d=s?i.begin:l(i.end,-1);if(o.from<=d&&d<o.to)return a(d,s);if(d=s?o.from:l(o.to,-1),i.begin<=d&&d<i.end)return a(d,s)}},h=f(a+i,i,u);if(h)return h;var g=i>0?u.end:l(u.begin,-1);return null==g||i>0&&g==t.text.length||!(h=f(i>0?0:r.length-1,i,d(g)))?null:h}(e.cm,l,t,n):ar(l,t,n);if(null==o){if(a||!function(){var n=t.line+d;return!(n<e.first||n>=e.first+e.size)&&(t=new ne(n,t.ch,t.sticky),l=Y(e,n))}())return!1;t=or(r,e.cm,l,t.line,d)}else t=o;return!0}var o=t,s=n,l=Y(e,t.line),d=r&&"rtl"==e.direction?-n:n;if("char"==i||"codepoint"==i)a();else if("column"==i)a(!0);else if("word"==i||"group"==i)for(var u=null,c="group"==i,p=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(n<0)||a(!m);m=!1){var f=l.text.charAt(t.ch)||"\n",h=y(f,p)?"w":c&&"\n"==f?"n":!c||/\s/.test(f)?null:"p";if(!c||m||h||(h="s"),u&&u!=h){n<0&&(n=1,a(),t.sticky="after");break}if(h&&(u=h),n>0&&!a(!m))break}var g=Oi(e,t,o,s,!0);return re(o,g)&&(g.hitSide=!0),g}function Mr(e,t,n,i){var r,a=e.doc,o=t.left;if("page"==i){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*Ft(e.display),3);r=(n>0?t.bottom:t.top)+n*l}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(var d;(d=Lt(e,o,r)).outside;){if(n<0?r<=0:r>=a.height){d.hitSide=!0;break}r+=5*n}return d}function Pr(e,t){var n=_t(e,t.line);if(!n||n.hidden)return null;var i=Y(e.doc,t.line),r=ht(n,i,t.line),a=I(i,e.doc.direction),o="left";if(a){o=O(a,t.ch)%2?"right":"left"}var s=yt(r.map,t.ch,o);return s.offset="right"==s.collapse?s.end:s.start,s}function Br(e,t){return t&&(e.bad=!0),e}function Fr(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Br(e.clipPos(ne(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return function(e,t,n){function i(t,n,i){for(var r=-1;r<(c?c.length:0);r++)for(var a=r<0?u.map:c[r],o=0;o<a.length;o+=3){var s=a[o+2];if(s==t||s==n){var l=Z(r<0?e.line:e.rest[r]),d=a[o]+i;return(i<0||s!=t)&&(d=a[o+(i?1:0)]),ne(l,d)}}}var r=e.text.firstChild,o=!1;if(!t||!a(r,t))return Br(ne(Z(e.line),0),!0);if(t==r&&(o=!0,t=r.childNodes[n],n=0,!t)){var s=e.rest?h(e.rest):e.line;return Br(ne(Z(s),s.text.length),o)}var l=3==t.nodeType?t:null,d=t;l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,n&&(n=l.nodeValue.length));for(;d.parentNode!=r;)d=d.parentNode;var u=e.measure,c=u.maps;var p=i(l,d,n);if(p)return Br(p,o);for(var m=d.nextSibling,f=l?l.nodeValue.length-n:0;m;m=m.nextSibling){if(p=i(m,m.firstChild,0))return Br(ne(p.line,p.ch-f),o);f+=m.textContent.length}for(var g=d.previousSibling,_=n;g;g=g.previousSibling){if(p=i(g,g.firstChild,-1))return Br(ne(p.line,p.ch+_),o);_+=g.textContent.length}}(o,t,n)}}var Ur=navigator.userAgent,$r=navigator.platform,zr=/gecko\/\d/i.test(Ur),Hr=/MSIE \d/.test(Ur),jr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ur),Gr=/Edge\/(\d+)/.exec(Ur),Wr=Hr||jr||Gr,Vr=Wr&&(Hr?document.documentMode||6:+(Gr||jr)[1]),qr=!Gr&&/WebKit\//.test(Ur),Yr=qr&&/Qt\/\d+\.\d+/.test(Ur),Xr=!Gr&&/Chrome\//.test(Ur),Kr=/Opera\//.test(Ur),Jr=/Apple Computer/.test(navigator.vendor),Zr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Ur),Qr=/PhantomJS/.test(Ur),ea=Jr&&(/Mobile\/\w+/.test(Ur)||navigator.maxTouchPoints>2),ta=/Android/.test(Ur),na=ea||ta||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Ur),ia=ea||/Mac/.test($r),ra=/\bCrOS\b/.test(Ur),aa=/win/i.test($r),oa=Kr&&Ur.match(/Version\/(\d*\.\d*)/);oa&&(oa=Number(oa[1])),oa&&oa>=15&&(Kr=!1,qr=!0);var sa,la=ia&&(Yr||Kr&&(null==oa||oa<12.11)),da=zr||Wr&&Vr>=9,ua=function(t,n){var i=t.className,r=e(n).exec(i);if(r){var a=i.slice(r.index+r[0].length);t.className=i.slice(0,r.index)+(a?r[1]+a:"")}};sa=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var ca=function(e){e.select()};ea?ca=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Wr&&(ca=function(e){try{e.select()}catch(e){}});var pa=function(){this.id=null,this.f=null,this.time=0,this.handler=d(this.onTimeout,this)};pa.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},pa.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var ma,fa,ha=50,ga={toString:function(){return"CodeMirror.Pass"}},_a={scroll:!1},va={origin:"*mouse"},ba={origin:"+move"},ya=[""],Ea=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ta=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Sa=null,xa=function(){function e(e){return e<=247?n.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?i.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,l=/[1n]/;return function(n,i){var d="ltr"==i?"L":"R";if(0==n.length||"ltr"==i&&!r.test(n))return!1;for(var u=n.length,c=[],p=0;p<u;++p)c.push(e(n.charCodeAt(p)));for(var m=0,f=d;m<u;++m){var g=c[m];"m"==g?c[m]=f:f=g}for(var _=0,v=d;_<u;++_){var b=c[_];"1"==b&&"r"==v?c[_]="n":o.test(b)&&(v=b,"r"==b&&(c[_]="R"))}for(var y=1,E=c[0];y<u-1;++y){var T=c[y];"+"==T&&"1"==E&&"1"==c[y+1]?c[y]="1":","!=T||E!=c[y+1]||"1"!=E&&"n"!=E||(c[y]=E),E=T}for(var S=0;S<u;++S){var x=c[S];if(","==x)c[S]="N";else if("%"==x){var O=void 0;for(O=S+1;O<u&&"%"==c[O];++O);for(var I=S&&"!"==c[S-1]||O<u&&"1"==c[O]?"1":"N",A=S;A<O;++A)c[A]=I;S=O-1}}for(var C=0,D=d;C<u;++C){var w=c[C];"L"==D&&"1"==w?c[C]="L":o.test(w)&&(D=w)}for(var R=0;R<u;++R)if(a.test(c[R])){var N=void 0;for(N=R+1;N<u&&a.test(c[N]);++N);for(var k="L"==(R?c[R-1]:d),L=k==("L"==(N<u?c[N]:d))?k?"L":"R":d,M=R;M<N;++M)c[M]=L;R=N-1}for(var P,B=[],F=0;F<u;)if(s.test(c[F])){var U=F;for(++F;F<u&&s.test(c[F]);++F);B.push(new t(0,U,F))}else{var $=F,z=B.length,H="rtl"==i?1:0;for(++F;F<u&&"L"!=c[F];++F);for(var j=$;j<F;)if(l.test(c[j])){$<j&&(B.splice(z,0,new t(1,$,j)),z+=H);var G=j;for(++j;j<F&&l.test(c[j]);++j);B.splice(z,0,new t(2,G,j)),z+=H,$=j}else++j;$<F&&B.splice(z,0,new t(1,$,F))}return"ltr"==i&&(1==B[0].level&&(P=n.match(/^\s+/))&&(B[0].from=P[0].length,B.unshift(new t(0,0,P[0].length))),1==h(B).level&&(P=n.match(/\s+$/))&&(h(B).to-=P[0].length,B.push(new t(0,u-P[0].length,u)))),"rtl"==i?B.reverse():B}}(),Oa=[],Ia=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||Oa).concat(n)}},Aa=function(){if(Wr&&Vr<9)return!1;var e=i("div");return"draggable"in e||"dragDrop"in e}(),Ca=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var a=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),o=a.indexOf("\r");-1!=o?(n.push(a.slice(0,o)),t+=o+1):(n.push(a),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Da=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},wa=function(){var e=i("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ra=null,Na={},ka={},La={},Ma=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Ma.prototype.eol=function(){return this.pos>=this.string.length},Ma.prototype.sol=function(){return this.pos==this.lineStart},Ma.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ma.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ma.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ma.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ma.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ma.prototype.skipToEnd=function(){this.pos=this.string.length},Ma.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ma.prototype.backUp=function(e){this.pos-=e},Ma.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=c(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?c(this.string,this.lineStart,this.tabSize):0)},Ma.prototype.indentation=function(){return c(this.string,null,this.tabSize)-(this.lineStart?c(this.string,this.lineStart,this.tabSize):0)},Ma.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Ma.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ma.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ma.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ma.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Pa=function(e,t){this.state=e,this.lookAhead=t},Ba=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};Ba.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Ba.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Ba.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ba.fromSaved=function(e,t,n){return t instanceof Pa?new Ba(e,W(e.mode,t.state),n,t.lookAhead):new Ba(e,W(e.mode,t),n)},Ba.prototype.save=function(e){var t=!1!==e?W(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Pa(t,this.maxLookAhead):t};var Fa=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n},Ua=!1,$a=!1,za=function(e,t,n){this.text=e,Ie(this,t),this.height=n?n(this):1};za.prototype.lineNo=function(){return Z(this)},k(za);var Ha,ja={},Ga={},Wa=null,Va=null,qa={left:0,right:0,top:0,bottom:0},Ya=function(e,t,n){this.cm=n;var r=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),a=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=a.tabIndex=-1,e(r),e(a),Ia(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Ia(a,"scroll",function(){a.clientWidth&&t(a.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Wr&&Vr<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ya.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Ya.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ya.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ya.prototype.zeroWidthHack=function(){var e=ia&&!Zr?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new pa,this.disableVert=new pa},Ya.prototype.enableZeroWidthBar=function(e,t,n){function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}e.style.pointerEvents="auto",t.set(1e3,i)},Ya.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Xa=function(){};Xa.prototype.update=function(){return{bottom:0,right:0}},Xa.prototype.setScrollLeft=function(){},Xa.prototype.setScrollTop=function(){},Xa.prototype.clear=function(){};var Ka={native:Ya,null:Xa},Ja=0,Za=function(e,t,n){var i=e.display;this.viewport=t,this.visible=dn(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=mt(e),this.force=n,this.dims=$t(e),this.events=[]};Za.prototype.signal=function(e,t){N(e,t)&&this.events.push(arguments)},Za.prototype.finish=function(){for(var e=0;e<this.events.length;e++)D.apply(null,this.events[e])};var Qa=0,eo=null;Wr?eo=-.53:zr?eo=15:Xr?eo=-.7:Jr&&(eo=-1/3);var to=function(e,t){this.ranges=e,this.primIndex=t};to.prototype.primary=function(){return this.ranges[this.primIndex]},to.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!re(n.anchor,i.anchor)||!re(n.head,i.head))return!1}return!0},to.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new no(ae(this.ranges[t].anchor),ae(this.ranges[t].head));return new to(e,this.primIndex)},to.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},to.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ie(t,i.from())>=0&&ie(e,i.to())<=0)return n}return-1};var no=function(e,t){this.anchor=e,this.head=t};no.prototype.from=function(){return se(this.anchor,this.head)},no.prototype.to=function(){return oe(this.anchor,this.head)},no.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ui.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,je(r),Je(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},$i.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var a=Math.min(t,r-e),o=i.height;if(i.removeInner(e,a),this.height-=o-i.height,r==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ui))){var s=[];this.collapse(s),this.children=[new Ui(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(e<=a){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var o=r.lines.length%25+25,s=o;s<r.lines.length;){var l=new Ui(r.lines.slice(s,s+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,o),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new $i(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=p(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new $i(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(e<a){var o=Math.min(t,a-e);if(r.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var io=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};io.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Z(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var a=st(this);J(n,Math.max(0,n.height-a)),e&&(On(e,function(){zi(e,n,-a),qt(e,i,"widget")}),Je(e,"lineWidgetCleared",e,this,i))}},io.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=st(this)-t;r&&(Fe(this.doc,i)||J(i,i.height+r),n&&On(n,function(){n.curOp.forceUpdate=!0,zi(n,i,r),Je(n,"lineWidgetChanged",n,e,Z(i))}))},k(io);var ro=0,ao=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ro};ao.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Sn(e),N(this,"clear")){var n=this.find();n&&Je(this,"clear",n.from,n.to)}for(var i=null,r=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Ee(o.markedSpans,this);e&&!this.collapsed?qt(e,Z(o),"text"):e&&(null!=s.to&&(r=Z(o)),null!=s.from&&(i=Z(o))),o.markedSpans=Te(o.markedSpans,s),null==s.from&&this.collapsed&&!Fe(this.doc,o)&&e&&J(o,Ft(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var d=Me(this.lines[l]),u=ze(d);u>e.display.maxLineLength&&(e.display.maxLine=d,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&Vt(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ti(e.doc)),e&&Je(e,"markerCleared",e,this,i,r),t&&xn(e),this.parent&&this.parent.clear()}},ao.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,r=0;r<this.lines.length;++r){var a=this.lines[r],o=Ee(a.markedSpans,this);if(null!=o.from&&(n=ne(t?a:Z(a),o.from),-1==e))return n;if(null!=o.to&&(i=ne(t?a:Z(a),o.to),1==e))return i}return n&&{from:n,to:i}},ao.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&On(i,function(){var r=t.line,a=Z(t.line),o=_t(i,a);if(o&&(Tt(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Fe(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=st(n)-s;l&&J(r,r.height+l)}Je(i,"markerChanged",i,e)})},ao.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=p(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ao.prototype.detachLine=function(e){if(this.lines.splice(p(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},k(ao);var oo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};oo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Je(this,"clear")}},oo.prototype.find=function(e,t){return this.primary.find(e,t)},k(oo);var so=0,lo=function(e,t,n,i,r){if(!(this instanceof lo))return new lo(e,t,n,i,r);null==n&&(n=0),$i.call(this,[new Ui([new za("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=ne(n,0);this.sel=Wn(a),this.history=new ii(null),this.id=++so,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Qn(this,{from:a,to:a,text:e}),bi(this,Wn(a),_a)};lo.prototype=v($i.prototype,{constructor:lo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=K(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Cn(function(e){var t=ne(this.first,0),n=this.first+this.size-1;Di(this,{from:t,to:ne(n,Y(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&mn(this.cm,0,0),bi(this,Wn(t),_a)}),replaceRange:function(e,t,n,i){Li(this,e,t=de(this,t),n=n?de(this,n):t,i)},getRange:function(e,t,n){var i=X(this,de(this,e),de(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ee(this,e))return Y(this,e)},getLineNumber:function(e){return Z(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Y(this,e)),Me(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return de(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Cn(function(e,t,n){_i(this,de(this,"number"==typeof e?ne(e,t||0):e),null,n)}),setSelection:Cn(function(e,t,n){_i(this,de(this,e),de(this,t||e),n)}),extendSelection:Cn(function(e,t,n){fi(this,de(this,e),t&&de(this,t),n)}),extendSelections:Cn(function(e,t){hi(this,ue(this,e),t)}),extendSelectionsBy:Cn(function(e,t){hi(this,ue(this,g(this.sel.ranges,e)),t)}),setSelections:Cn(function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new no(de(this,e[r].anchor),de(this,e[r].head||e[r].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),bi(this,Gn(this.cm,i,t),n)}}),addSelection:Cn(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new no(de(this,e),de(this,t||e))),bi(this,Gn(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=X(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=X(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Cn(function(e,t,n){for(var i=[],r=this.sel,a=0;a<r.ranges.length;a++){var o=r.ranges[a];i[a]={from:o.from(),to:o.to(),text:this.splitLines(e[a]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var i=[],r=ne(e.first,0),a=r,o=0;o<t.length;o++){var s=t[o],l=Xn(s.from,r,a),d=Xn(Vn(s),r,a);if(r=s.to,a=d,"around"==n){var u=e.sel.ranges[o],c=ie(u.head,u.anchor)<0;i[o]=new no(c?d:l,c?l:d)}else i[o]=new no(l,l)}return new to(i,e.sel.primIndex)}(this,i,t),l=i.length-1;l>=0;l--)Di(this,i[l]);s?vi(this,s):this.cm&&pn(this.cm)}),undo:Cn(function(){Ri(this,"undo")}),redo:Cn(function(){Ri(this,"redo")}),undoSelection:Cn(function(){Ri(this,"undo",!0)}),redoSelection:Cn(function(){Ri(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new ii(this.history),ei(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:pi(this.history.done),undone:pi(this.history.undone)}},setHistory:function(e){var t=this.history=new ii(this.history);t.done=pi(e.done.slice(0),null,!0),t.undone=pi(e.undone.slice(0),null,!0)},setGutterMarker:Cn(function(e,t,n){return Fi(this,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&E(i)&&(e.gutterMarkers=null),!0})}),clearGutter:Cn(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&Fi(t,n,"gutter",function(){return n.gutterMarkers[e]=null,E(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!ee(this,e))return null;if(t=e,!(e=Y(this,e)))return null}else if(null==(t=Z(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Cn(function(t,n,i){return Fi(this,t,"gutter"==n?"gutter":"class",function(t){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[r]){if(e(i).test(t[r]))return!1;t[r]+=" "+i}else t[r]=i;return!0})}),removeLineClass:Cn(function(t,n,i){return Fi(this,t,"gutter"==n?"gutter":"class",function(t){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",a=t[r];if(!a)return!1;if(null==i)t[r]=null;else{var o=a.match(e(i));if(!o)return!1;var s=o.index+o[0].length;t[r]=a.slice(0,o.index)+(o.index&&s!=a.length?" ":"")+a.slice(s)||null}return!0})}),addLineWidget:Cn(function(e,t,n){return function(e,t,n,i){var r=new io(e,n,i),a=e.cm;return a&&r.noHScroll&&(a.display.alignWidgets=!0),Fi(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,a&&!Fe(e,t)){var i=$e(t)<e.scrollTop;J(t,t.height+st(r)),i&&cn(a,r.height),a.curOp.forceUpdate=!0}return!0}),a&&Je(a,"lineWidgetAdded",a,r,"number"==typeof t?t:Z(t)),r}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Hi(this,de(this,e),de(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=de(this,e),Hi(this,e,e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Y(this,(e=de(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=de(this,e),t=de(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(r){var a=r.text.length+i;if(a>e)return t=e,!0;e-=a,++n}),de(this,ne(n,t))},indexFromPos:function(e){var t=(e=de(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new lo(K(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new lo(K(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),a=e.clipPos(r.from),o=e.clipPos(r.to);if(ie(a,o)){var s=Hi(e,a,o,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,ji(this)),i},unlinkDoc:function(e){if(e instanceof Or&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Gi(ji(this));break}}if(e.history==this.history){var n=[e.id];ei(e,function(e){return n.push(e.id)},!0),e.history=new ii(null),e.history.done=pi(this.history.done,n),e.history.undone=pi(this.history.undone,n)}},iterLinkedDocs:function(e){ei(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ca(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Cn(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&function(e){On(e,function(){ni(e),Vt(e)})}(this.cm))})}),lo.prototype.eachLine=lo.prototype.iter;for(var uo=0,co=!1,po={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},mo=0;mo<10;mo++)po[mo+48]=po[mo+96]=String(mo);for(var fo=65;fo<=90;fo++)po[fo]=String.fromCharCode(fo);for(var ho=1;ho<=12;ho++)po[ho+111]=po[ho+63235]="F"+ho;var go={};go.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},go.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},go.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},go.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},go.default=ia?go.macDefault:go.pcDefault;var _o={selectAll:Ai,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),_a)},killLine:function(e){return ir(e,function(t){if(t.empty()){var n=Y(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ne(t.head.line+1,0)}:{from:t.head,to:ne(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return ir(e,function(t){return{from:ne(t.from().line,0),to:de(e.doc,ne(t.to().line+1,0))}})},delLineLeft:function(e){return ir(e,function(e){return{from:ne(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return ir(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return ir(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ne(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ne(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return sr(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return dr(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return lr(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},ba)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},ba)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?dr(e,t.head):i},ba)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var a=n[r].from(),o=c(e.getLine(a.line),a.ch,i);t.push(f(i-o%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return On(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,a=Y(e.doc,r.line).text;if(a)if(r.ch==a.length&&(r=new ne(r.line,r.ch-1)),r.ch>0)r=new ne(r.line,r.ch+1),e.replaceRange(a.charAt(r.ch-1)+a.charAt(r.ch-2),ne(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var o=Y(e.doc,r.line-1).text;o&&(r=new ne(r.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),ne(r.line-1,o.length-1),r,"+transpose"))}n.push(new no(r,r))}e.setSelections(n)})},newlineAndIndent:function(e){return On(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);pn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},vo=new pa,bo=null,yo=function(e,t,n){this.time=e,this.pos=t,this.button=n};yo.prototype.compare=function(e,t,n){return this.time+400>e&&0==ie(t,this.pos)&&n==this.button};var Eo,To,So={toString:function(){return"CodeMirror.Init"}},xo={},Oo={};Or.defaults=xo,Or.optionHandlers=Oo;var Io=[];Or.defineInitHook=function(e){return Io.push(e)};var Ao=null,Co=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new pa,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Co.prototype.init=function(e){function t(e){for(var t=e.target;t;t=t.parentNode){if(t==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function n(e){if(t(e)&&!w(a,e)){if(a.somethingSelected())Ar({lineWise:!1,text:a.getSelections()}),"cut"==e.type&&a.replaceSelection("",null,"cut");else{if(!a.options.lineWiseCopyCut)return;var n=Rr(a);Ar({lineWise:!0,text:n.text}),"cut"==e.type&&a.operation(function(){a.setSelections(n.ranges,0,_a),a.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var i=Ao.text.join("\n");if(e.clipboardData.setData("Text",i),e.clipboardData.getData("Text")==i)return void e.preventDefault()}var s=kr(),l=s.firstChild;a.display.lineSpace.insertBefore(s,a.display.lineSpace.firstChild),l.value=Ao.text.join("\n");var d=document.activeElement;ca(l),setTimeout(function(){a.display.lineSpace.removeChild(s),d.focus(),d==o&&r.showPrimarySelection()},50)}}var i=this,r=this,a=r.cm,o=r.div=e.lineDiv;o.contentEditable=!0,Nr(o,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize),Ia(o,"paste",function(e){!t(e)||w(a,e)||Dr(e,a)||Vr<=11&&setTimeout(In(a,function(){return i.updateFromDOM()}),20)}),Ia(o,"compositionstart",function(e){i.composing={data:e.data,done:!1}}),Ia(o,"compositionupdate",function(e){i.composing||(i.composing={data:e.data,done:!1})}),Ia(o,"compositionend",function(e){i.composing&&(e.data!=i.composing.data&&i.readFromDOMSoon(),i.composing.done=!0)}),Ia(o,"touchstart",function(){return r.forceCompositionEnd()}),Ia(o,"input",function(){i.composing||i.readFromDOMSoon()}),Ia(o,"copy",n),Ia(o,"cut",n)},Co.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Co.prototype.prepareSelection=function(){var e=Zt(this.cm,!1);return e.focus=document.activeElement==this.div,e},Co.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Co.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Co.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),r=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||r.line<t.display.viewFrom)e.removeAllRanges();else{var a=Fr(t,e.anchorNode,e.anchorOffset),o=Fr(t,e.focusNode,e.focusOffset);if(!a||a.bad||!o||o.bad||0!=ie(se(a,o),i)||0!=ie(oe(a,o),r)){var s=t.display.view,l=i.line>=t.display.viewFrom&&Pr(t,i)||{node:s[0].measure.map[2],offset:0},d=r.line<t.display.viewTo&&Pr(t,r);if(!d){var u=s[s.length-1].measure,c=u.maps?u.maps[u.maps.length-1]:u.map;d={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}if(l&&d){var p,m=e.rangeCount&&e.getRangeAt(0);try{p=sa(l.node,l.offset,d.offset,d.node)}catch(e){}p&&(!zr&&t.state.focused?(e.collapse(l.node,l.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),m&&null==e.anchorNode?e.addRange(m):zr&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Co.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Co.prototype.showMultipleSelections=function(e){n(this.cm.display.cursorDiv,e.cursors),n(this.cm.display.selectionDiv,e.selection)},Co.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Co.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return a(this.div,t)},Co.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Co.prototype.blur=function(){this.div.blur()},Co.prototype.getField=function(){return this.div},Co.prototype.supportsTouch=function(){return!0},Co.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():On(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},Co.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Co.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(ta&&Xr&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Fr(t,e.anchorNode,e.anchorOffset),i=Fr(t,e.focusNode,e.focusOffset);n&&i&&On(t,function(){bi(t.doc,Wn(n,i),_a),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},Co.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),r=n.to();if(0==i.ch&&i.line>e.firstLine()&&(i=ne(i.line-1,Y(e.doc,i.line-1).length)),r.ch==Y(e.doc,r.line).text.length&&r.line<e.lastLine()&&(r=ne(r.line+1,0)),i.line<t.viewFrom||r.line>t.viewTo-1)return!1;var a,o,s;i.line==t.viewFrom||0==(a=Wt(e,i.line))?(o=Z(t.view[0].line),s=t.view[0].node):(o=Z(t.view[a].line),s=t.view[a-1].node.nextSibling);var l,d,u=Wt(e,r.line);if(u==t.view.length-1?(l=t.viewTo-1,d=t.lineDiv.lastChild):(l=Z(t.view[u+1].line)-1,d=t.view[u+1].node.previousSibling),!s)return!1;for(var c=e.doc.splitLines(function(e,t,n,i,r){function a(){d&&(l+=u,c&&(l+=u),d=c=!1)}function o(e){e&&(a(),l+=e)}function s(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void o(n);var l,p=t.getAttribute("cm-marker");if(p){var m=e.findMarks(ne(i,0),ne(r+1,0),function(e){return function(t){return t.id==e}}(+p));return void(m.length&&(l=m[0].find(0))&&o(X(e.doc,l.from,l.to).join(u)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&a();for(var h=0;h<t.childNodes.length;h++)s(t.childNodes[h]);/^(pre|p)$/i.test(t.nodeName)&&(c=!0),f&&(d=!0)}else 3==t.nodeType&&o(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var l="",d=!1,u=e.doc.lineSeparator(),c=!1;s(t),t!=n;)t=t.nextSibling,c=!1;return l}(e,s,d,o,l)),p=X(e.doc,ne(o,0),ne(l,Y(e.doc,l).text.length));c.length>1&&p.length>1;)if(h(c)==h(p))c.pop(),p.pop(),l--;else{if(c[0]!=p[0])break;c.shift(),p.shift(),o++}for(var m=0,f=0,g=c[0],_=p[0],v=Math.min(g.length,_.length);m<v&&g.charCodeAt(m)==_.charCodeAt(m);)++m;for(var b=h(c),y=h(p),E=Math.min(b.length-(1==c.length?m:0),y.length-(1==p.length?m:0));f<E&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==c.length&&1==p.length&&o==i.line)for(;m&&m>i.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)m--,f++;c[c.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),c[0]=c[0].slice(m).replace(/\u200b+$/,"");var T=ne(o,m),S=ne(l,p.length?h(p).length-f:0);return c.length>1||c[0]||ie(T,S)?(Li(e.doc,c,T,S,"+input"),!0):void 0},Co.prototype.ensurePolled=function(){this.forceCompositionEnd()},Co.prototype.reset=function(){this.forceCompositionEnd()},Co.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Co.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Co.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||On(this.cm,function(){return Vt(e.cm)})},Co.prototype.setUneditable=function(e){e.contentEditable="false"},Co.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||In(this.cm,Cr)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Co.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Co.prototype.onContextMenu=function(){},Co.prototype.resetPosition=function(){},Co.prototype.needsContentAttribute=!0;var Do=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new pa,this.hasSelection=!1,this.composing=null};Do.prototype.init=function(e){function t(e){if(!w(r,e)){if(r.somethingSelected())Ar({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Rr(r);Ar({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,_a):(i.prevInput="",a.value=t.text.join("\n"),ca(a))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}var n=this,i=this,r=this.cm;this.createField(e);var a=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),ea&&(a.style.width="0px"),Ia(a,"input",function(){Wr&&Vr>=9&&n.hasSelection&&(n.hasSelection=null),i.poll()}),Ia(a,"paste",function(e){w(r,e)||Dr(e,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())}),Ia(a,"cut",t),Ia(a,"copy",t),Ia(e.scroller,"paste",function(t){if(!lt(e,t)&&!w(r,t)){if(!a.dispatchEvent)return r.state.pasteIncoming=+new Date,void i.focus();var n=new Event("paste");n.clipboardData=t.clipboardData,a.dispatchEvent(n)}}),Ia(e.lineSpace,"selectstart",function(t){lt(e,t)||L(t)}),Ia(a,"compositionstart",function(){var e=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Ia(a,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Do.prototype.createField=function(e){this.wrapper=kr(),this.textarea=this.wrapper.firstChild},Do.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Do.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=Zt(e);if(e.options.moveInputWithCursor){var r=Rt(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-a.left))}return i},Do.prototype.showSelection=function(e){var t=this.cm.display;n(t.cursorDiv,e.cursors),n(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Do.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&ca(this.textarea),Wr&&Vr>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",Wr&&Vr>=9&&(this.hasSelection=null))}},Do.prototype.getField=function(){return this.textarea},Do.prototype.supportsTouch=function(){return!1},Do.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!na||o()!=this.textarea))try{this.textarea.focus()}catch(e){}},Do.prototype.blur=function(){this.textarea.blur()},Do.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Do.prototype.receivedFocus=function(){this.slowPoll()},Do.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Do.prototype.fastPoll=function(){function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},Do.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Da(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(Wr&&Vr>=9&&this.hasSelection===r||ia&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=r.charCodeAt(0);if(8203!=a||i||(i=""),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var o=0,s=Math.min(i.length,r.length);o<s&&i.charCodeAt(o)==r.charCodeAt(o);)++o;return On(t,function(){Cr(t,r.slice(o),i.length-o,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Do.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Do.prototype.onKeyPress=function(){Wr&&Vr>=9&&(this.hasSelection=null),this.fastPoll()},Do.prototype.onContextMenu=function(e){function t(){if(null!=o.selectionStart){var e=r.somethingSelected(),t=""+(e?o.value:"");o.value="",o.value=t,i.prevInput=e?"":"",o.selectionStart=1,o.selectionEnd=t.length,a.selForContextMenu=r.doc.sel}}function n(){if(i.contextMenuPending==n&&(i.contextMenuPending=!1,i.wrapper.style.cssText=u,o.style.cssText=d,Wr&&Vr<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=l),null!=o.selectionStart)){(!Wr||Wr&&Vr<9)&&t();var e=0,s=function(){a.selForContextMenu==r.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&""==i.prevInput?In(r,Ai)(r):e++<10?a.detectingSelectAll=setTimeout(s,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(s,200)}}var i=this,r=i.cm,a=r.display,o=i.textarea;i.contextMenuPending&&i.contextMenuPending();var s=Gt(r,e),l=a.scroller.scrollTop;if(s&&!Kr){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(s)&&In(r,bi)(r.doc,Wn(s),_a);var d=o.style.cssText,u=i.wrapper.style.cssText,c=i.wrapper.offsetParent.getBoundingClientRect();i.wrapper.style.cssText="position: static",o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-c.top-5)+"px; left: "+(e.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(Wr?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var p;if(qr&&(p=window.scrollY),a.input.focus(),qr&&window.scrollTo(null,p),a.input.reset(),r.somethingSelected()||(o.value=i.prevInput=" "),i.contextMenuPending=n,a.selForContextMenu=r.doc.sel,clearTimeout(a.detectingSelectAll),Wr&&Vr>=9&&t(),da){B(e);var m=function(){C(window,"mouseup",m),setTimeout(n,20)};Ia(window,"mouseup",m)}else setTimeout(n,50)}},Do.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Do.prototype.setUneditable=function(){},Do.prototype.needsContentAttribute=!1,function(e){function t(t,i,r,a){e.defaults[t]=i,r&&(n[t]=a?function(e,t,n){n!=So&&r(e,t,n)}:r)}var n=e.optionHandlers;e.defineOption=t,e.Init=So,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,Kn(e)},!0),t("indentUnit",2,Kn,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){Jn(e),xt(e),Vt(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var a=e.text.indexOf(t,r);if(-1==a)break;r=a+t.length,n.push(ne(i,a))}i++});for(var r=n.length-1;r>=0;r--)Li(e.doc,t,n[r],ne(n[r].line,n[r].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=So&&e.refresh()}),t("specialCharPlaceholder",Ve,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",na?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),t("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),t("rtlMoveVisually",!aa),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){Tr(e),$n(e)},!0),t("keyMap","default",function(e,t,n){var i=nr(t),r=n!=So&&nr(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)}),t("extraKeys",null),t("configureMouse",null),t("lineWrapping",!1,xr,!0),t("gutters",[],function(e,t){e.display.gutterSpecs=Fn(t,e.options.lineNumbers),$n(e)},!0),t("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?zt(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return yn(e)},!0),t("scrollbarStyle","native",function(e){Tn(e),yn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e,t){e.display.gutterSpecs=Fn(e.options.gutters,t),$n(e)},!0),t("firstLineNumber",1,$n,!0),t("lineNumberFormatter",function(e){return e},$n,!0),t("showCursorWhenSelecting",!1,Jt,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("pasteLinesPerSelection",!0),t("selectionsMayTouch",!1),t("readOnly",!1,function(e,t){"nocursor"==t&&(on(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),t("screenReaderLabel",null,function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,Sr),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,Jt,!0),t("singleCursorHeightPerLine",!0,Jt,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,Jn,!0),t("addModeClass",!1,Jn,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,Jn,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null),t("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),t("phrases",null)}(Or),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&In(this,t[e])(this,n,r),D(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](nr(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:An(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Vt(this)}),removeOverlay:An(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void Vt(this)}}),indentLine:An(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ee(this.doc,e)&&Ir(this,e,t,n)}),indentSelection:An(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ir(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&pn(this));else{var a=r.from(),o=r.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=s;l<n;++l)Ir(this,l,e);var d=this.doc.sel.ranges;0==a.ch&&t.length==d.length&&d[i].from().ch>0&&gi(this.doc,i,new no(a,d[i].to()),_a)}}}),getTokenAt:function(e,t){return _e(this,e,t)},getLineTokens:function(e,t){return _e(this,ne(e),t,!0)},getTokenTypeAt:function(e){e=de(this.doc,e);var t,n=pe(this,Y(this.doc,e.line)),i=0,r=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var o=i+r>>1;if((o?n[2*o-1]:0)>=a)r=o;else{if(!(n[2*o+1]<a)){t=n[2*o+2];break}i=o+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],a=this.getModeAt(e);if("string"==typeof a[t])r[a[t]]&&i.push(r[a[t]]);else if(a[t])for(var o=0;o<a[t].length;o++){var s=r[a[t][o]];s&&i.push(s)}else a.helperType&&r[a.helperType]?i.push(r[a.helperType]):r[a.name]&&i.push(r[a.name]);for(var l=0;l<r._global.length;l++){var d=r._global[l];d.pred(a,this)&&-1==p(i,d.val)&&i.push(d.val)}return i},getStateAfter:function(e,t){var n=this.doc;return e=le(n,null==e?n.first+n.size-1:e),me(this,e+1,t).state},cursorCoords:function(e,t){var n,i=this.doc.sel.primary();return n=null==e?i.head:"object"==typeof e?de(this.doc,e):e?i.from():i.to(),Rt(this,n,t||"page")},charCoords:function(e,t){return wt(this,de(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Dt(this,e,t||"page"),Lt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Dt(this,{top:e,left:0},t||"page").top,Q(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,r=!0),i=Y(this.doc,e)}else i=e;return Ct(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-$e(i):0)},defaultTextHeight:function(){return Ft(this.display)},defaultCharWidth:function(){return Ut(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var a=this.display,o=(e=Rt(this,de(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==i)o=e.top;else if("above"==i||"near"==i){var l=Math.max(a.wrapper.clientHeight,this.doc.height),d=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),s+t.offsetWidth>d&&(s=d-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==r?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&function(e,t){var n=un(e,t);null!=n.scrollTop&&gn(e,n.scrollTop),null!=n.scrollLeft&&vn(e,n.scrollLeft)}(this,{left:s,top:o,right:s+t.offsetWidth,bottom:o+t.offsetHeight})},triggerOnKeyDown:An(fr),triggerOnKeyPress:An(gr),triggerOnKeyUp:hr,triggerOnMouseDown:An(_r),execCommand:function(e){if(_o.hasOwnProperty(e))return _o[e].call(null,this)},triggerElectric:An(function(e){wr(this,e)}),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var a=de(this.doc,e),o=0;o<t&&!(a=Lr(this.doc,a,r,n,i)).hitSide;++o);return a},moveH:An(function(e,t){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Lr(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()},ba)}),deleteH:An(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):ir(this,function(n){var r=Lr(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(e,t,n,i){var r=1,a=i;t<0&&(r=-1,t=-t);for(var o=de(this.doc,e),s=0;s<t;++s){var l=Rt(this,o,"div");if(null==a?a=l.left:l.left=a,(o=Mr(this,l,r,n)).hitSide)break}return o},moveV:An(function(e,t){var n=this,i=this.doc,r=[],a=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(o){if(a)return e<0?o.from():o.to();var s=Rt(n,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),r.push(s.left);var l=Mr(n,s,e,t);return"page"==t&&o==i.sel.primary()&&cn(n,wt(n,l,"div").top-s.top),l},ba),r.length)for(var o=0;o<i.sel.ranges.length;o++)i.sel.ranges[o].goalColumn=r[o]}),findWordAt:function(e){var t=Y(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var a=t.charAt(n),o=y(a,r)?function(e){return y(e,r)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!y(e)};n>0&&o(t.charAt(n-1));)--n;for(;i<t.length&&o(t.charAt(i));)++i}return new no(ne(e.line,n),ne(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?s(this.display.cursorDiv,"CodeMirror-overwrite"):ua(this.display.cursorDiv,"CodeMirror-overwrite"),D(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==o()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:An(function(e,t){mn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-pt(this)-this.display.barHeight,width:e.scrollWidth-pt(this)-this.display.barWidth,clientHeight:ft(this),clientWidth:mt(this)}},scrollIntoView:An(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ne(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){fn(e),e.curOp.scrollToPos=t}(this,e):hn(this,e.from,e.to,e.margin)}),setSize:An(function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&St(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){qt(n,r,"widget");break}++r}),this.curOp.forceUpdate=!0,D(this,"refresh",this)}),operation:function(e){return On(this,e)},startOperation:function(){return Sn(this)},endOperation:function(){return xn(this)},refresh:An(function(){var e=this.display.cachedTextHeight;Vt(this),this.curOp.forceUpdate=!0,xt(this),mn(this,this.doc.scrollLeft,this.doc.scrollTop),Ln(this.display),(null==e||Math.abs(e-Ft(this.display))>.5||this.options.lineWrapping)&&jt(this),D(this,"refresh",this)}),swapDoc:An(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),ti(this,e),xt(this),this.display.input.reset(),mn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Je(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},k(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,a){e.registerHelper(t,i,a),n[t]._global.push({pred:r,val:a})}}(Or);var wo="iter insert remove copy getEditor constructor".split(" ");for(var Ro in lo.prototype)lo.prototype.hasOwnProperty(Ro)&&p(wo,Ro)<0&&(Or.prototype[Ro]=function(e){return function(){return e.apply(this.doc,arguments)}}(lo.prototype[Ro]));return k(lo),Or.inputStyles={textarea:Do,contenteditable:Co},Or.defineMode=function(e){Or.defaults.mode||"null"==e||(Or.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Na[e]=t}.apply(this,arguments)},Or.defineMIME=function(e,t){ka[e]=t},Or.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Or.defineMIME("text/plain","null"),Or.defineExtension=function(e,t){Or.prototype[e]=t},Or.defineDocExtension=function(e,t){lo.prototype[e]=t},Or.fromTextArea=function(e,t){function n(){e.value=l.getValue()}if(t=t?u(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=o();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}var r;if(e.form&&(Ia(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var a=e.form;r=a.submit;try{var s=a.submit=function(){n(),a.submit=r,a.submit(),a.submit=s}}catch(e){}}t.finishInit=function(i){i.save=n,i.getTextArea=function(){return e},i.toTextArea=function(){i.toTextArea=isNaN,n(),e.parentNode.removeChild(i.getWrapperElement()),e.style.display="",e.form&&(C(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var l=Or(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l},function(e){e.off=C,e.on=Ia,e.wheelEventPixels=Hn,e.Doc=lo,e.splitLines=Ca,e.countColumn=c,e.findColumn=m,e.isWordChar=b,e.Pass=ga,e.signal=D,e.Line=za,e.changeEnd=Vn,e.scrollbarModel=Ka,e.Pos=ne,e.cmpPos=ie,e.modes=Na,e.mimeModes=ka,e.resolveMode=H,e.getMode=j,e.modeExtensions=La,e.extendMode=G,e.copyState=W,e.startState=q,e.innerMode=V,e.commands=_o,e.keyMap=go,e.keyName=tr,e.isModifierKey=Qi,e.lookupKey=Zi,e.normalizeKeyMap=Ji,e.StringStream=Ma,e.SharedTextMarker=oo,e.TextMarker=ao,e.LineWidget=io,e.e_preventDefault=L,e.e_stopPropagation=M,e.e_stop=B,e.addClass=s,e.contains=a,e.rmClass=ua,e.keyNames=po}(Or),Or.version="5.60.0",Or}),define("codemirror",["codemirror/lib/codemirror"],function(e){return e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function i(e,t,n){return Le=e,Me=n,t}function r(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=function(e){return function(t,n){var a,o=!1;if(Fe&&"@"==t.peek()&&t.match(Ge))return n.tokenize=r,i("jsonld-keyword","meta");for(;null!=(a=t.next())&&(a!=e||o);)o=!o&&"\\"==a;return o||(n.tokenize=r),i("string","string")}}(n),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return i("number","number");if("."==n&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&e.eat(">"))return i("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return i("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),i("number","number");if("/"==n)return e.eat("*")?(t.tokenize=a,a(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):ke(e,t,1)?(function(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),i("regexp","string-2")):(e.eat("="),i("operator","operator",e.current()));if("`"==n)return t.tokenize=o,o(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),i("meta","meta");if("#"==n&&e.eatWhile(ze))return i("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),i("comment","comment");if(je.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?i("."):i("operator","operator",e.current());if(ze.test(n)){e.eatWhile(ze);var s=e.current();if("."!=t.lastType){if(He.propertyIsEnumerable(s)){var l=He[s];return i(l.type,l.style,s)}if("async"==s&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return i("async","keyword",s)}return i("variable","variable",s)}}function a(e,t){for(var n,a=!1;n=e.next();){if("/"==n&&a){t.tokenize=r;break}a="*"==n}return i("comment","comment")}function o(e,t){for(var n,a=!1;null!=(n=e.next());){if(!a&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=r;break}a=!a&&"\\"==n}return i("quasi","string-2",e.current())}function s(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if($e){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var r=0,a=!1,o=n-1;o>=0;--o){var s=e.string.charAt(o),l=We.indexOf(s);if(l>=0&&l<3){if(!r){++o;break}if(0==--r){"("==s&&(a=!0);break}}else if(l>=3&&l<6)++r;else if(ze.test(s))a=!0;else if(/["'\/`]/.test(s))for(;;--o){if(0==o)return;if(e.string.charAt(o-1)==s&&"\\"!=e.string.charAt(o-2)){o--;break}}else if(a&&!r){++o;break}}a&&!r&&(t.fatArrowAt=o)}}function l(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}function u(){for(var e=arguments.length-1;e>=0;e--)qe.cc.push(arguments[e])}function c(){return u.apply(null,arguments),!0}function p(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function m(e){var t=qe.state;if(qe.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=f(e,t.context);if(null!=i)return void(t.context=i)}else if(!p(e,t.localVars))return void(t.localVars=new _(e,t.localVars));n.globalVars&&!p(e,t.globalVars)&&(t.globalVars=new _(e,t.globalVars))}function f(e,t){if(t){if(t.block){var n=f(e,t.prev);return n?n==t.prev?t:new g(n,t.vars,!0):null}return p(e,t.vars)?t:new g(t.prev,new _(e,t.vars),!1)}return null}function h(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function g(e,t,n){this.prev=e,this.vars=t,this.block=n}function _(e,t){this.name=e,this.next=t}function v(){qe.state.context=new g(qe.state.context,qe.state.localVars,!1),qe.state.localVars=Ye}function b(){qe.state.context=new g(qe.state.context,qe.state.localVars,!0),qe.state.localVars=null}function y(){qe.state.localVars=qe.state.context.vars,qe.state.context=qe.state.context.prev}function E(e,t){var n=function(){var n=qe.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new l(i,qe.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function T(){var e=qe.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function S(e){function t(n){return n==e?c():";"==e||"}"==n||")"==n||"]"==n?u():c(t)}return t}function x(e,t){return"var"==e?c(E("vardef",t),re,S(";"),T):"keyword a"==e?c(E("form"),C,x,T):"keyword b"==e?c(E("form"),x,T):"keyword d"==e?qe.stream.match(/^\s*$/,!1)?c():c(E("stat"),w,S(";"),T):"debugger"==e?c(S(";")):"{"==e?c(E("}"),b,G,T,y):";"==e?c():"if"==e?("else"==qe.state.lexical.info&&qe.state.cc[qe.state.cc.length-1]==T&&qe.state.cc.pop()(),c(E("form"),C,x,T,ue)):"function"==e?c(fe):"for"==e?c(E("form"),ce,x,T):"class"==e||$e&&"interface"==t?(qe.marked="keyword",c(E("form","class"==e?e:t),be,T)):"variable"==e?$e&&"declare"==t?(qe.marked="keyword",c(x)):$e&&("module"==t||"enum"==t||"type"==t)&&qe.stream.match(/^\s*\w/,!1)?(qe.marked="keyword","enum"==t?c(Re):"type"==t?c(ge,S("operator"),X,S(";")):c(E("form"),ae,S("{"),E("}"),G,T,T)):$e&&"namespace"==t?(qe.marked="keyword",c(E("form"),I,x,T)):$e&&"abstract"==t?(qe.marked="keyword",c(x)):c(E("stat"),B):"switch"==e?c(E("form"),C,S("{"),E("}","switch"),b,G,T,T,y):"case"==e?c(I,S(":")):"default"==e?c(S(":")):"catch"==e?c(E("form"),v,O,x,T,y):"export"==e?c(E("stat"),Se,T):"import"==e?c(E("stat"),Oe,T):"async"==e?c(x):"@"==t?c(I,x):u(E("stat"),I,S(";"),T)}function O(e){if("("==e)return c(_e,S(")"))}function I(e,t){return D(e,t,!1)}function A(e,t){return D(e,t,!0)}function C(e){return"("!=e?u():c(E(")"),w,S(")"),T)}function D(e,t,n){if(qe.state.fatArrowAt==qe.stream.start){var i=n?P:M;if("("==e)return c(v,E(")"),H(_e,")"),T,S("=>"),i,y);if("variable"==e)return u(v,ae,S("=>"),i,y)}var r=n?N:R;return Ve.hasOwnProperty(e)?c(r):"function"==e?c(fe,r):"class"==e||$e&&"interface"==t?(qe.marked="keyword",c(E("form"),ve,T)):"keyword c"==e||"async"==e?c(n?A:I):"("==e?c(E(")"),w,S(")"),T,r):"operator"==e||"spread"==e?c(n?A:I):"["==e?c(E("]"),we,T,r):"{"==e?j(U,"}",null,r):"quasi"==e?u(k,r):"new"==e?c(function(e){return function(t){return"."==t?c(e?function(e,t){if("target"==t)return qe.marked="keyword",c(N)}:function(e,t){if("target"==t)return qe.marked="keyword",c(R)}):"variable"==t&&$e?c(te,e?N:R):u(e?A:I)}}(n)):c()}function w(e){return e.match(/[;\}\)\],]/)?u():u(I)}function R(e,t){return","==e?c(w):N(e,t,!1)}function N(e,t,n){var i=0==n?R:N,r=0==n?I:A;return"=>"==e?c(v,n?P:M,y):"operator"==e?/\+\+|--/.test(t)||$e&&"!"==t?c(i):$e&&"<"==t&&qe.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?c(E(">"),H(X,">"),T,i):"?"==t?c(I,S(":"),r):c(r):"quasi"==e?u(k,i):";"!=e?"("==e?j(A,")","call",i):"."==e?c(F,i):"["==e?c(E("]"),w,S("]"),T,i):$e&&"as"==t?(qe.marked="keyword",c(X,i)):"regexp"==e?(qe.state.lastType=qe.marked="operator",qe.stream.backUp(qe.stream.pos-qe.stream.start-1),c(r)):void 0:void 0}function k(e,t){return"quasi"!=e?u():"${"!=t.slice(t.length-2)?c(k):c(I,L)}function L(e){if("}"==e)return qe.marked="string-2",qe.state.tokenize=o,c(k)}function M(e){return s(qe.stream,qe.state),u("{"==e?x:I)}function P(e){return s(qe.stream,qe.state),u("{"==e?x:A)}function B(e){return":"==e?c(T,x):u(R,S(";"),T)}function F(e){if("variable"==e)return qe.marked="property",c()}function U(e,t){if("async"==e)return qe.marked="property",c(U);if("variable"==e||"keyword"==qe.style){if(qe.marked="property","get"==t||"set"==t)return c($);var n;return $e&&qe.state.fatArrowAt==qe.stream.start&&(n=qe.stream.match(/^\s*:\s*/,!1))&&(qe.state.fatArrowAt=qe.stream.pos+n[0].length),c(z)}return"number"==e||"string"==e?(qe.marked=Fe?"property":qe.style+" property",c(z)):"jsonld-keyword"==e?c(z):$e&&h(t)?(qe.marked="keyword",c(U)):"["==e?c(I,W,S("]"),z):"spread"==e?c(A,z):"*"==t?(qe.marked="keyword",c(U)):":"==e?u(z):void 0}function $(e){return"variable"!=e?u(z):(qe.marked="property",c(fe))}function z(e){return":"==e?c(A):"("==e?u(fe):void 0}function H(e,t,n){function i(r,a){if(n?n.indexOf(r)>-1:","==r){var o=qe.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),c(function(n,i){return n==t||i==t?u():u(e)},i)}return r==t||a==t?c():n&&n.indexOf(";")>-1?u(e):c(S(t))}return function(n,r){return n==t||r==t?c():u(e,i)}}function j(e,t,n){for(var i=3;i<arguments.length;i++)qe.cc.push(arguments[i]);return c(E(t,n),H(e,t),T)}function G(e){return"}"==e?c():u(x,G)}function W(e,t){if($e){if(":"==e)return c(X);if("?"==t)return c(W)}}function V(e,t){if($e&&(":"==e||"in"==t))return c(X)}function q(e){if($e&&":"==e)return qe.stream.match(/^\s*\w+\s+is\b/,!1)?c(I,Y,X):c(X)}function Y(e,t){if("is"==t)return qe.marked="keyword",c()}function X(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(qe.marked="keyword",c("typeof"==t?A:X)):"variable"==e||"void"==t?(qe.marked="type",c(ee)):"|"==t||"&"==t?c(X):"string"==e||"number"==e||"atom"==e?c(ee):"["==e?c(E("]"),H(X,"]",","),T,ee):"{"==e?c(E("}"),J,T,ee):"("==e?c(H(Q,")"),K,ee):"<"==e?c(H(X,">"),X):void 0}function K(e){if("=>"==e)return c(X)}function J(e){return e.match(/[\}\)\]]/)?c():","==e||";"==e?c(J):u(Z,J)}function Z(e,t){return"variable"==e||"keyword"==qe.style?(qe.marked="property",c(Z)):"?"==t||"number"==e||"string"==e?c(Z):":"==e?c(X):"["==e?c(S("variable"),V,S("]"),Z):"("==e?u(he,Z):e.match(/[;\}\)\],]/)?void 0:c()}function Q(e,t){return"variable"==e&&qe.stream.match(/^\s*[?:]/,!1)||"?"==t?c(Q):":"==e?c(X):"spread"==e?c(Q):u(X)}function ee(e,t){return"<"==t?c(E(">"),H(X,">"),T,ee):"|"==t||"."==e||"&"==t?c(X):"["==e?c(X,S("]"),ee):"extends"==t||"implements"==t?(qe.marked="keyword",c(X)):"?"==t?c(X,S(":"),X):void 0}function te(e,t){if("<"==t)return c(E(">"),H(X,">"),T,ee)}function ne(){return u(X,ie)}function ie(e,t){if("="==t)return c(X)}function re(e,t){return"enum"==t?(qe.marked="keyword",c(Re)):u(ae,W,le,de)}function ae(e,t){return $e&&h(t)?(qe.marked="keyword",c(ae)):"variable"==e?(m(t),c()):"spread"==e?c(ae):"["==e?j(se,"]"):"{"==e?j(oe,"}"):void 0}function oe(e,t){return"variable"!=e||qe.stream.match(/^\s*:/,!1)?("variable"==e&&(qe.marked="property"),"spread"==e?c(ae):"}"==e?u():"["==e?c(I,S("]"),S(":"),oe):c(S(":"),ae,le)):(m(t),c(le))}function se(){return u(ae,le)}function le(e,t){if("="==t)return c(A)}function de(e){if(","==e)return c(re)}function ue(e,t){if("keyword b"==e&&"else"==t)return c(E("form","else"),x,T)}function ce(e,t){return"await"==t?c(ce):"("==e?c(E(")"),pe,T):void 0}function pe(e){return"var"==e?c(re,me):"variable"==e?c(me):u(me)}function me(e,t){return")"==e?c():";"==e?c(me):"in"==t||"of"==t?(qe.marked="keyword",c(I,me)):u(I,me)}function fe(e,t){return"*"==t?(qe.marked="keyword",c(fe)):"variable"==e?(m(t),c(fe)):"("==e?c(v,E(")"),H(_e,")"),T,q,x,y):$e&&"<"==t?c(E(">"),H(ne,">"),T,fe):void 0}function he(e,t){return"*"==t?(qe.marked="keyword",c(he)):"variable"==e?(m(t),c(he)):"("==e?c(v,E(")"),H(_e,")"),T,q,y):$e&&"<"==t?c(E(">"),H(ne,">"),T,he):void 0}function ge(e,t){return"keyword"==e||"variable"==e?(qe.marked="type",c(ge)):"<"==t?c(E(">"),H(ne,">"),T):void 0}function _e(e,t){return"@"==t&&c(I,_e),"spread"==e?c(_e):$e&&h(t)?(qe.marked="keyword",c(_e)):$e&&"this"==e?c(W,le):u(ae,W,le)}function ve(e,t){return"variable"==e?be(e,t):ye(e,t)}function be(e,t){if("variable"==e)return m(t),c(ye)}function ye(e,t){return"<"==t?c(E(">"),H(ne,">"),T,ye):"extends"==t||"implements"==t||$e&&","==e?("implements"==t&&(qe.marked="keyword"),c($e?X:I,ye)):"{"==e?c(E("}"),Ee,T):void 0}function Ee(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||$e&&h(t))&&qe.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(qe.marked="keyword",c(Ee)):"variable"==e||"keyword"==qe.style?(qe.marked="property",c(Te,Ee)):"number"==e||"string"==e?c(Te,Ee):"["==e?c(I,W,S("]"),Te,Ee):"*"==t?(qe.marked="keyword",c(Ee)):$e&&"("==e?u(he,Ee):";"==e||","==e?c(Ee):"}"==e?c():"@"==t?c(I,Ee):void 0}function Te(e,t){if("?"==t)return c(Te);if(":"==e)return c(X,le);if("="==t)return c(A);var n=qe.state.lexical.prev;return u(n&&"interface"==n.info?he:fe)}function Se(e,t){return"*"==t?(qe.marked="keyword",c(De,S(";"))):"default"==t?(qe.marked="keyword",c(I,S(";"))):"{"==e?c(H(xe,"}"),De,S(";")):u(x)}function xe(e,t){return"as"==t?(qe.marked="keyword",c(S("variable"))):"variable"==e?u(A,xe):void 0}function Oe(e){return"string"==e?c():"("==e?u(I):"."==e?u(R):u(Ie,Ae,De)}function Ie(e,t){return"{"==e?j(Ie,"}"):("variable"==e&&m(t),"*"==t&&(qe.marked="keyword"),c(Ce))}function Ae(e){if(","==e)return c(Ie,Ae)}function Ce(e,t){if("as"==t)return qe.marked="keyword",c(Ie)}function De(e,t){if("from"==t)return qe.marked="keyword",c(I)}function we(e){return"]"==e?c():u(H(A,"]"))}function Re(){return u(E("form"),ae,S("{"),E("}"),H(Ne,"}"),T,T)}function Ne(){return u(ae,le)}function ke(e,t,n){return t.tokenize==r&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}var Le,Me,Pe=t.indentUnit,Be=n.statementIndent,Fe=n.jsonld,Ue=n.json||Fe,$e=n.typescript,ze=n.wordCharacters||/[\w$\xa1-\uffff]/,He=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("keyword d"),a=e("operator"),o={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),je=/[+\-*&%=<>!?|~^@]/,Ge=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,We="([{}])",Ve={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0},qe={state:null,column:null,marked:null,cc:null},Ye=new _("this",new _("arguments",null));return y.lex=!0,T.lex=!0,{startState:function(e){var t={tokenize:r,lastType:"sof",cc:[],lexical:new l((e||0)-Pe,0,"block",!1),localVars:n.localVars,context:n.localVars&&new g(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),s(e,t)),t.tokenize!=a&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==Le?n:(t.lastType="operator"!=Le||"++"!=Me&&"--"!=Me?Le:"incdec",function(e,t,n,i,r){var a=e.cc;for(qe.state=e,qe.stream=r,qe.marked=null,qe.cc=a,qe.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():Ue?I:x)(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return qe.marked?qe.marked:"variable"==n&&d(e,i)?"variable-2":t}}(t,n,Le,Me,e))},indent:function(t,i){if(t.tokenize==a||t.tokenize==o)return e.Pass;if(t.tokenize!=r)return 0;var s,l=i&&i.charAt(0),d=t.lexical;if(!/^\s*else\b/.test(i))for(var u=t.cc.length-1;u>=0;--u){var c=t.cc[u];if(c==T)d=d.prev;else if(c!=ue)break}for(;("stat"==d.type||"form"==d.type)&&("}"==l||(s=t.cc[t.cc.length-1])&&(s==R||s==N)&&!/^[,\.=+\-*:?[\(]/.test(i));)d=d.prev;Be&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);var p=d.type,m=l==p;return"vardef"==p?d.indented+("operator"==t.lastType||","==t.lastType?d.info.length+1:0):"form"==p&&"{"==l?d.indented:"form"==p?d.indented+Pe:"stat"==p?d.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||je.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,i)?Be||Pe:0):"switch"!=d.info||m||0==n.doubleIndentSwitch?d.align?d.column+(m?0:1):d.indented+(m?0:Pe):d.indented+(/^(?:case|default)\b/.test(i)?Pe:2*Pe)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ue?null:"/*",blockCommentEnd:Ue?null:"*/",blockCommentContinue:Ue?null:" * ",lineComment:Ue?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ue?"json":"javascript",jsonldMode:Fe,jsonMode:Ue,expressionAllowed:ke,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=I&&t!=A||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/xml/xml",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(i,r){function a(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();if("<"==i)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(s("atom","]]>")):null:e.match("--")?n(s("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(l(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=s("meta","?>"),"meta"):(x=e.eat("/")?"closeTag":"openTag",t.tokenize=o,"tag bracket");if("&"==i){return(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error"}return e.eatWhile(/[^&<]/),null}function o(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=a,x=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return x="equals",null;if("<"==n){t.tokenize=a,t.state=c,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=function(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=o;break}return"string"};return t.isInAttribute=!0,t}(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function s(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=a;break}n.next()}return e}}function l(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=l(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=a;break}return n.tokenize=l(e-1),n.tokenize(t,n)}}return"meta"}}function d(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!E.contextGrabbers.hasOwnProperty(n)||!E.contextGrabbers[n].hasOwnProperty(t))return;d(e)}}function c(e,t,n){return"openTag"==e?(n.tagStart=t.column(),p):"closeTag"==e?m:c}function p(e,t,n){return"word"==e?(n.tagName=t.current(),O="tag",g):E.allowMissingTagName&&"endTag"==e?(O="tag bracket",g(e,t,n)):(O="error",p)}function m(e,t,n){if("word"==e){var i=t.current();return n.context&&n.context.tagName!=i&&E.implicitlyClosed.hasOwnProperty(n.context.tagName)&&d(n),n.context&&n.context.tagName==i||!1===E.matchClosing?(O="tag",f):(O="tag error",h)}return E.allowMissingTagName&&"endTag"==e?(O="tag bracket",f(e,t,n)):(O="error",h)}function f(e,t,n){return"endTag"!=e?(O="error",f):(d(n),c)}function h(e,t,n){return O="error",f(e,0,n)}function g(e,t,n){if("word"==e)return O="attribute",_;if("endTag"==e||"selfcloseTag"==e){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||E.autoSelfClosers.hasOwnProperty(i)?u(n,i):(u(n,i),n.context=new function(e,t,n){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=n,(E.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}(n,i,r==n.indented)),c}return O="error",g}function _(e,t,n){return"equals"==e?v:(E.allowMissing||(O="error"),g(e,0,n))}function v(e,t,n){return"string"==e?b:"word"==e&&E.allowUnquoted?(O="string",g):(O="error",g(e,0,n))}function b(e,t,n){return"string"==e?b:g(e,0,n)}var y=i.indentUnit,E={},T=r.htmlMode?t:n;for(var S in T)E[S]=T[S];for(var S in r)E[S]=r[S];var x,O;return a.isInText=!0,{startState:function(e){var t={tokenize:a,state:c,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;x=null;var n=t.tokenize(e,t);return(n||x)&&"comment"!=n&&(O=null,t.state=t.state(x||n,e,t),O&&(n="error"==O?n+" error":O)),n},indent:function(t,n,i){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+y;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=o&&t.tokenize!=a)return i?i.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==E.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+y*(E.multilineTagIndentFactor||1);if(E.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;r;){if(r.tagName==s[2]){r=r.prev;break}if(!E.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(s)for(;r;){var l=E.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(s[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+y:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:E.htmlMode?"html":"xml",helperType:E.htmlMode?"html":"xml",skipAttribute:function(e){e.state==v&&(e.state=g)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)t.push(n.tagName);return t.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}function n(e,t){for(var n,i=!1;null!=(n=e.next());){if(i&&"/"==n){t.tokenize=null;break}i="*"==n}return["comment","comment"]}e.defineMode("css",function(t,n){function i(e,t){return m=t,e}function r(e){return function(t,n){for(var r,a=!1;null!=(r=t.next());){if(r==e&&!a){")"==e&&t.backUp(1);break}a=!a&&"\\"==r}return(r==e||!a&&")"!=e)&&(n.tokenize=null),i("string","string")}}function a(e,t){return e.next(),e.match(/^\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=r(")"),i(null,"(")}function o(e,t,n){this.type=e,this.indent=t,this.prev=n}function s(e,t,n,i){return e.context=new o(n,t.indentation()+(!1===i?0:h),e.context),n}function l(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function d(e,t,n){return R[n.context.type](e,t,n)}function u(e,t,n,i){for(var r=i||1;r>0;r--)n.context=n.context.prev;return d(e,t,n)}function c(e){var t=e.current().toLowerCase();f=I.hasOwnProperty(t)?"atom":O.hasOwnProperty(t)?"keyword":"variable"}var p=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var m,f,h=t.indentUnit,g=n.tokenHooks,_=n.documentTypes||{},v=n.mediaTypes||{},b=n.mediaFeatures||{},y=n.mediaValueKeywords||{},E=n.propertyKeywords||{},T=n.nonStandardPropertyKeywords||{},S=n.fontProperties||{},x=n.counterDescriptors||{},O=n.colorKeywords||{},I=n.valueKeywords||{},A=n.allowNested,C=n.lineComment,D=!0===n.supportsAtComponent,w=!1!==t.highlightNonStandardPropertyKeywords,R={};return R.top=function(e,t,n){if("{"==e)return s(n,t,"block");if("}"==e&&n.context.prev)return l(n);if(D&&/@component/i.test(e))return s(n,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return s(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return s(n,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return s(n,t,"at");if("hash"==e)f="builtin";else if("word"==e)f="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return s(n,t,"interpolation");if(":"==e)return"pseudo";if(A&&"("==e)return s(n,t,"parens")}return n.context.type},R.block=function(e,t,n){if("word"==e){var i=t.current().toLowerCase();return E.hasOwnProperty(i)?(f="property","maybeprop"):T.hasOwnProperty(i)?(f=w?"string-2":"property","maybeprop"):A?(f=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(f+=" error","maybeprop")}return"meta"==e?"block":A||"hash"!=e&&"qualifier"!=e?R.top(e,t,n):(f="error","block")},R.maybeprop=function(e,t,n){return":"==e?s(n,t,"prop"):d(e,t,n)},R.prop=function(e,t,n){if(";"==e)return l(n);if("{"==e&&A)return s(n,t,"propBlock");if("}"==e||"{"==e)return u(e,t,n);if("("==e)return s(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)c(t);else if("interpolation"==e)return s(n,t,"interpolation")}else f+=" error";return"prop"},R.propBlock=function(e,t,n){return"}"==e?l(n):"word"==e?(f="property","maybeprop"):n.context.type},R.parens=function(e,t,n){return"{"==e||"}"==e?u(e,t,n):")"==e?l(n):"("==e?s(n,t,"parens"):"interpolation"==e?s(n,t,"interpolation"):("word"==e&&c(t),"parens")},R.pseudo=function(e,t,n){return"meta"==e?"pseudo":"word"==e?(f="variable-3",n.context.type):d(e,t,n)},R.documentTypes=function(e,t,n){return"word"==e&&_.hasOwnProperty(t.current())?(f="tag",n.context.type):R.atBlock(e,t,n)},R.atBlock=function(e,t,n){if("("==e)return s(n,t,"atBlock_parens");if("}"==e||";"==e)return u(e,t,n);if("{"==e)return l(n)&&s(n,t,A?"block":"top");if("interpolation"==e)return s(n,t,"interpolation");if("word"==e){var i=t.current().toLowerCase();f="only"==i||"not"==i||"and"==i||"or"==i?"keyword":v.hasOwnProperty(i)?"attribute":b.hasOwnProperty(i)?"property":y.hasOwnProperty(i)?"keyword":E.hasOwnProperty(i)?"property":T.hasOwnProperty(i)?w?"string-2":"property":I.hasOwnProperty(i)?"atom":O.hasOwnProperty(i)?"keyword":"error"}return n.context.type},R.atComponentBlock=function(e,t,n){return"}"==e?u(e,t,n):"{"==e?l(n)&&s(n,t,A?"block":"top",!1):("word"==e&&(f="error"),n.context.type)},R.atBlock_parens=function(e,t,n){return")"==e?l(n):"{"==e||"}"==e?u(e,t,n,2):R.atBlock(e,t,n)},R.restricted_atBlock_before=function(e,t,n){return"{"==e?s(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(f="variable","restricted_atBlock_before"):d(e,t,n)},R.restricted_atBlock=function(e,t,n){return"}"==e?(n.stateArg=null,l(n)):"word"==e?(f="@font-face"==n.stateArg&&!S.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!x.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},R.keyframes=function(e,t,n){return"word"==e?(f="variable","keyframes"):"{"==e?s(n,t,"top"):d(e,t,n)},R.at=function(e,t,n){return";"==e?l(n):"{"==e||"}"==e?u(e,t,n):("word"==e?f="tag":"hash"==e&&(f="builtin"),"at")},R.interpolation=function(e,t,n){return"}"==e?l(n):"{"==e||";"==e?u(e,t,n):("word"==e?f="variable":"variable"!=e&&"("!=e&&")"!=e&&(f="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:p?"block":"top",stateArg:null,context:new o(p?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||function(e,t){var n=e.next();if(g[n]){var o=g[n](e,t);if(!1!==o)return o}return"@"==n?(e.eatWhile(/[\w\\\-]/),i("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?i(null,"compare"):'"'==n||"'"==n?(t.tokenize=r(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),i("atom","hash")):"!"==n?(e.match(/^\s*\w*/),i("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),i("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?i(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?i("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?i(null,n):e.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(e.current())&&(t.tokenize=a),i("variable callee","variable")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),i("property","word")):i(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),i("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?i("variable-2","variable-definition"):i("variable-2","variable")):e.match(/^\w+-/)?i("meta","meta"):void 0})(e,t);return n&&"object"==typeof n&&(m=n[1],n=n[0]),f=n,"comment"!=m&&(t.state=R[t.state](m,e,t)),f},indent:function(e,t){var n=e.context,i=t&&t.charAt(0),r=n.indent;return"prop"!=n.type||"}"!=i&&")"!=i||(n=n.prev),n.prev&&("}"!=i||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=i||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=i||"at"!=n.type&&"atBlock"!=n.type)||(r=Math.max(0,n.indent-h)):r=(n=n.prev).indent),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:C,fold:"brace"}});var i=["domain","regexp","url","url-prefix"],r=t(i),a=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(a),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],l=t(s),d=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],u=t(d),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],p=t(c),m=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],f=t(m),h=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),g=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(_),b=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],y=t(b),E=i.concat(a).concat(s).concat(d).concat(c).concat(m).concat(_).concat(b);e.registerHelper("hintWords","css",E),e.defineMIME("text/css",{documentTypes:r,mediaTypes:o,mediaFeatures:l,mediaValueKeywords:u,propertyKeywords:p,nonStandardPropertyKeywords:f,fontProperties:h,counterDescriptors:g,colorKeywords:v,valueKeywords:y,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=n,n(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:l,mediaValueKeywords:u,propertyKeywords:p,nonStandardPropertyKeywords:f,colorKeywords:v,valueKeywords:y,fontProperties:h,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return!!e.match(/^\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:l,mediaValueKeywords:u,propertyKeywords:p,nonStandardPropertyKeywords:f,colorKeywords:v,valueKeywords:y,fontProperties:h,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:o,mediaFeatures:l,propertyKeywords:p,nonStandardPropertyKeywords:f,fontProperties:h,counterDescriptors:g,colorKeywords:v,valueKeywords:y,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=n,n(e,t))}},name:"css",helperType:"gss"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){var n=e.match(function(e){var t=a[e];return t||(a[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(t));return n?/^\s*(.*?)\s*$/.exec(n[2])[1]:""}function n(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function i(e,t){for(var n in e)for(var i=t[n]||(t[n]=[]),r=e[n],a=r.length-1;a>=0;a--)i.unshift(r[a])}var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},a={};e.defineMode("htmlmixed",function(a,o){function s(i,r){var o,u=l.token(i,r.htmlState),c=/\btag\b/.test(u);if(c&&!/[<>\s\/]/.test(i.current())&&(o=r.htmlState.tagName&&r.htmlState.tagName.toLowerCase())&&d.hasOwnProperty(o))r.inTag=o+" ";else if(r.inTag&&c&&/>$/.test(i.current())){var p=/^([\S]+) (.*)/.exec(r.inTag);r.inTag=null;var m=">"==i.current()&&function(e,n){for(var i=0;i<e.length;i++){var r=e[i];if(!r[0]||r[1].test(t(n,r[0])))return r[2]}}(d[p[1]],p[2]),f=e.getMode(a,m),h=n(p[1],!0),g=n(p[1],!1);r.token=function(e,t){return e.match(h,!1)?(t.token=s,t.localState=t.localMode=null,null):function(e,t,n){var i=e.current(),r=i.search(t);return r>-1?e.backUp(i.length-r):i.match(/<\/?$/)&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}(e,g,t.localMode.token(e,t.localState))},r.localMode=f,r.localState=e.startState(f,l.indent(r.htmlState,"",""))}else r.inTag&&(r.inTag+=i.current(),i.eol()&&(r.inTag+=" "));return u}var l=e.getMode(a,{name:"xml",htmlMode:!0,multilineTagIndentFactor:o.multilineTagIndentFactor,multilineTagIndentPastTag:o.multilineTagIndentPastTag,allowMissingTagName:o.allowMissingTagName}),d={},u=o&&o.tags,c=o&&o.scriptTypes;if(i(r,d),u&&i(u,d),c)for(var p=c.length-1;p>=0;p--)d.script.unshift(["type",c[p].matches,c[p].mode]);return{startState:function(){return{token:s,inTag:null,localMode:null,localState:null,htmlState:e.startState(l)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(l,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,i){return!t.localMode||/^\s*<\//.test(n)?l.indent(t.htmlState,n,i):t.localMode.indent?t.localMode.indent(t.localState,n,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||l}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/mode/overlay",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,n,i){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:e.copyState(t,i.base),overlay:e.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(e,r){return(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start)&&(r.streamSeen=e,r.basePos=r.overlayPos=e.start),e.start==r.basePos&&(r.baseCur=t.token(e,r.base),r.basePos=e.pos),e.start==r.overlayPos&&(e.pos=e.start,r.overlayCur=n.token(e,r.overlay),r.overlayPos=e.pos),e.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||i&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:t.indent&&function(e,n,i){return t.indent(e.base,n,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var r,a;return t.blankLine&&(r=t.blankLine(e.base)),n.blankLine&&(a=n.blankLine(e.overlay)),null==a?r:i&&null!=r?r+" "+a:a}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/overlay")):"function"==typeof define&&define.amd?define("codemirror/mode/django/django",["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/overlay"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("django:inner",function(){function e(e,t){if(e.match("{{"))return t.tokenize=n,"tag";if(e.match("{%"))return t.tokenize=i,"tag";if(e.match("{#"))return t.tokenize=r,"comment";for(;null!=e.next()&&!e.match(/\{[{%#]/,!1););return null}function t(e,t){return function(n,i){if(!i.escapeNext&&n.eat(e))i.tokenize=t;else{i.escapeNext&&(i.escapeNext=!1);"\\"==n.next()&&(i.escapeNext=!0)}return"string"}}function n(n,i){if(i.waitDot){if(i.waitDot=!1,"."!=n.peek())return"null";if(n.match(/\.\W+/))return"error";if(n.eat("."))return i.waitProperty=!0,"null";throw Error("Unexpected error while waiting for property.")}if(i.waitPipe){if(i.waitPipe=!1,"|"!=n.peek())return"null";if(n.match(/\.\W+/))return"error";if(n.eat("|"))return i.waitFilter=!0,"null";throw Error("Unexpected error while waiting for filter.")}return i.waitProperty&&(i.waitProperty=!1,n.match(/\b(\w+)\b/))?(i.waitDot=!0,i.waitPipe=!0,"property"):i.waitFilter&&(i.waitFilter=!1,n.match(s))?"variable-2":n.eatSpace()?(i.waitProperty=!1,"null"):n.match(/\b\d+(\.\d+)?\b/)?"number":n.match("'")?(i.tokenize=t("'",i.tokenize),"string"):n.match('"')?(i.tokenize=t('"',i.tokenize),"string"):n.match(/\b(\w+)\b/)&&!i.foundVariable?(i.waitDot=!0,i.waitPipe=!0,"variable"):n.match("}}")?(i.waitProperty=null,i.waitFilter=null,i.waitDot=null,i.waitPipe=null,i.tokenize=e,"tag"):(n.next(),"null")}function i(n,i){if(i.waitDot){if(i.waitDot=!1,"."!=n.peek())return"null";if(n.match(/\.\W+/))return"error";if(n.eat("."))return i.waitProperty=!0,"null";throw Error("Unexpected error while waiting for property.")}if(i.waitPipe){if(i.waitPipe=!1,"|"!=n.peek())return"null";if(n.match(/\.\W+/))return"error";if(n.eat("|"))return i.waitFilter=!0,"null";throw Error("Unexpected error while waiting for filter.")}if(i.waitProperty&&(i.waitProperty=!1,n.match(/\b(\w+)\b/)))return i.waitDot=!0,i.waitPipe=!0,"property";if(i.waitFilter&&(i.waitFilter=!1,n.match(s)))return"variable-2";if(n.eatSpace())return i.waitProperty=!1,"null";if(n.match(/\b\d+(\.\d+)?\b/))return"number";if(n.match("'"))return i.tokenize=t("'",i.tokenize),"string";if(n.match('"'))return i.tokenize=t('"',i.tokenize),"string";if(n.match(l))return"operator";if(n.match(d))return"keyword";var r=n.match(o);return r?("comment"==r[0]&&(i.blockCommentTag=!0),"keyword"):n.match(/\b(\w+)\b/)?(i.waitDot=!0,i.waitPipe=!0,"variable"):n.match("%}")?(i.waitProperty=null,i.waitFilter=null,i.waitDot=null,i.waitPipe=null,i.blockCommentTag?(i.blockCommentTag=!1,i.tokenize=a):i.tokenize=e,"tag"):(n.next(),"null")}function r(t,n){return t.match(/^.*?#\}/)?n.tokenize=e:t.skipToEnd(),"comment"}function a(e,t){return e.match(/\{%\s*endcomment\s*%\}/,!1)?(t.tokenize=i,e.match("{%"),"tag"):(e.next(),"comment")}var o=["block","endblock","for","endfor","true","false","filter","endfilter","loop","none","self","super","if","elif","endif","as","else","import","with","endwith","without","context","ifequal","endifequal","ifnotequal","endifnotequal","extends","include","load","comment","endcomment","empty","url","static","trans","blocktrans","endblocktrans","now","regroup","lorem","ifchanged","endifchanged","firstof","debug","cycle","csrf_token","autoescape","endautoescape","spaceless","endspaceless","ssi","templatetag","verbatim","endverbatim","widthratio"],s=["add","addslashes","capfirst","center","cut","date","default","default_if_none","dictsort","dictsortreversed","divisibleby","escape","escapejs","filesizeformat","first","floatformat","force_escape","get_digit","iriencode","join","last","length","length_is","linebreaks","linebreaksbr","linenumbers","ljust","lower","make_list","phone2numeric","pluralize","pprint","random","removetags","rjust","safe","safeseq","slice","slugify","stringformat","striptags","time","timesince","timeuntil","title","truncatechars","truncatechars_html","truncatewords","truncatewords_html","unordered_list","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap","yesno"],l=["==","!=","<",">","<=",">="],d=["in","not","or","and"];return o=new RegExp("^\\b("+o.join("|")+")\\b"),s=new RegExp("^\\b("+s.join("|")+")\\b"),l=new RegExp("^\\b("+l.join("|")+")\\b"),d=new RegExp("^\\b("+d.join("|")+")\\b"),{startState:function(){return{tokenize:e}},token:function(e,t){return t.tokenize(e,t)},blockCommentStart:"{% comment %}",blockCommentEnd:"{% endcomment %}"}}),e.defineMode("django",function(t){var n=e.getMode(t,"text/html"),i=e.getMode(t,"django:inner");return e.overlayMode(n,i)}),e.defineMIME("text/x-django","django")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/meta",["../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.mime==t)return i;if(i.mimes)for(var r=0;r<i.mimes.length;r++)if(i.mimes[r]==t)return i}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.ext)for(var r=0;r<i.ext.length;r++)if(i.ext[r]==t)return i}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.file&&i.file.test(t))return i}var r=t.lastIndexOf("."),a=r>-1&&t.substring(r+1,t.length);if(a)return e.findModeByExtension(a)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.name.toLowerCase()==t)return i;if(i.alias)for(var r=0;r<i.alias.length;r++)if(i.alias[r].toLowerCase()==t)return i}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define("codemirror/mode/markdown/markdown",["../../lib/codemirror","../xml/xml","../meta"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function i(e,t,n){return t.f=t.inline=n,n(e,t)}function r(e,t,n){return t.f=t.block=n,n(e,t)}function a(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==s){var n=v;if(!n){var i=e.innerMode(_,t.htmlState);n="xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText}n&&(t.f=c,t.block=o,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function o(r,a){var o=r.column()===a.indentation,s=function(e){return!e||!/\S/.test(e.string)}(a.prevLine.stream),u=a.indentedCode,c=a.prevLine.hr,p=!1!==a.list,m=(a.listStack[a.listStack.length-1]||0)+3;a.indentedCode=!1;var h=a.indentation;if(null===a.indentationDiff&&(a.indentationDiff=a.indentation,p)){for(a.list=null;h<a.listStack[a.listStack.length-1];)a.listStack.pop(),a.listStack.length?a.indentation=a.listStack[a.listStack.length-1]:a.list=!1;!1!==a.list&&(a.indentationDiff=h-a.listStack[a.listStack.length-1])}var g=!(s||c||a.prevLine.header||p&&u||a.prevLine.fencedCodeEnd),_=(!1===a.list||c||s)&&a.indentation<=m&&r.match(E),v=null;if(a.indentationDiff>=4&&(u||a.prevLine.fencedCodeEnd||a.prevLine.header||s))return r.skipToEnd(),a.indentedCode=!0,b.code;if(r.eatSpace())return null;if(o&&a.indentation<=m&&(v=r.match(x))&&v[1].length<=6)return a.quote=0,a.header=v[1].length,a.thisLine.header=!0,n.highlightFormatting&&(a.formatting="header"),a.f=a.inline,d(a);if(a.indentation<=m&&r.eat(">"))return a.quote=o?1:a.quote+1,n.highlightFormatting&&(a.formatting="quote"),r.eatSpace(),d(a);if(!_&&!a.setext&&o&&a.indentation<=m&&(v=r.match(T))){var y=v[1]?"ol":"ul";return a.indentation=h+r.current().length,a.list=!0,a.quote=0,a.listStack.push(a.indentation),a.em=!1,a.strong=!1,a.code=!1,a.strikethrough=!1,n.taskLists&&r.match(S,!1)&&(a.taskList=!0),a.f=a.inline,n.highlightFormatting&&(a.formatting=["list","list-"+y]),d(a)}return o&&a.indentation<=m&&(v=r.match(A,!0))?(a.quote=0,a.fencedEndRE=new RegExp(v[1]+"+ *$"),a.localMode=n.fencedCodeBlockHighlighting&&function(n){if(e.findModeByName){var i=e.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=e.getMode(t,n);return"null"==r.name?null:r}(v[2]||n.fencedCodeBlockDefaultMode),a.localMode&&(a.localState=e.startState(a.localMode)),a.f=a.block=l,n.highlightFormatting&&(a.formatting="code-block"),a.code=-1,d(a)):a.setext||!(g&&p||a.quote||!1!==a.list||a.code||_||C.test(r.string))&&(v=r.lookAhead(1))&&(v=v.match(O))?(a.setext?(a.header=a.setext,a.setext=0,r.skipToEnd(),n.highlightFormatting&&(a.formatting="header")):(a.header="="==v[0].charAt(0)?1:2,a.setext=a.header),a.thisLine.header=!0,a.f=a.inline,d(a)):_?(r.skipToEnd(),a.hr=!0,a.thisLine.hr=!0,b.hr):"["===r.peek()?i(r,a,f):i(r,a,a.inline)}function s(t,n){var i=_.token(t,n.htmlState);if(!v){var r=e.innerMode(_,n.htmlState);("xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=c,n.block=o,n.htmlState=null)}return i}function l(e,t){var i=t.listStack[t.listStack.length-1]||0,a=t.indentation<i,s=i+3;if(t.fencedEndRE&&t.indentation<=s&&(a||e.match(t.fencedEndRE))){n.highlightFormatting&&(t.formatting="code-block");var l;return a||(l=d(t)),t.localMode=t.localState=null,t.block=o,t.f=c,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,a?r(e,t,t.block):l}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),b.code)}function d(e){var t=[];if(e.formatting){t.push(b.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)t.push(b.formatting+"-"+e.formatting[i]),"header"===e.formatting[i]&&t.push(b.formatting+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(b.formatting+"-"+e.formatting[i]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(b.linkHref,"url"):(e.strong&&t.push(b.strong),e.em&&t.push(b.em),e.strikethrough&&t.push(b.strikethrough),e.emoji&&t.push(b.emoji),e.linkText&&t.push(b.linkText),e.code&&t.push(b.code),e.image&&t.push(b.image),e.imageAltText&&t.push(b.imageAltText,"link"),e.imageMarker&&t.push(b.imageMarker)),e.header&&t.push(b.header,b.header+"-"+e.header),e.quote&&(t.push(b.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(b.quote+"-"+e.quote):t.push(b.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(b.list2):t.push(b.list3):t.push(b.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function u(e,t){if(e.match(I,!0))return d(t)}function c(t,i){var a=i.text(t,i);if(void 0!==a)return a;if(i.list)return i.list=null,d(i);if(i.taskList){return" "===t.match(S,!0)[1]?i.taskOpen=!0:i.taskClosed=!0,n.highlightFormatting&&(i.formatting="task"),i.taskList=!1,d(i)}if(i.taskOpen=!1,i.taskClosed=!1,i.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(i.formatting="header"),d(i);var o=t.next();if(i.linkTitle){i.linkTitle=!1;var l=o;"("===o&&(l=")");var u="^\\s*(?:[^"+(l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(u),!0))return b.linkHref}if("`"===o){var f=i.formatting;n.highlightFormatting&&(i.formatting="code"),t.eatWhile("`");var h=t.current().length;if(0!=i.code||i.quote&&1!=h){if(h==i.code){var g=d(i);return i.code=0,g}return i.formatting=f,d(i)}return i.code=h,d(i)}if(i.code)return d(i);if("\\"===o&&(t.next(),n.highlightFormatting)){var v=d(i),y=b.formatting+"-escape";return v?v+" "+y:y}if("!"===o&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return i.imageMarker=!0,i.image=!0,n.highlightFormatting&&(i.formatting="image"),d(i);if("["===o&&i.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return i.imageMarker=!1,i.imageAltText=!0,n.highlightFormatting&&(i.formatting="image"),d(i);if("]"===o&&i.imageAltText){n.highlightFormatting&&(i.formatting="image");v=d(i);return i.imageAltText=!1,i.image=!1,i.inline=i.f=m,v}if("["===o&&!i.image)return i.linkText&&t.match(/^.*?\]/)?d(i):(i.linkText=!0,n.highlightFormatting&&(i.formatting="link"),d(i));if("]"===o&&i.linkText){n.highlightFormatting&&(i.formatting="link");v=d(i);return i.linkText=!1,i.inline=i.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?m:c,v}if("<"===o&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=p,n.highlightFormatting&&(i.formatting="link");return(v=d(i))?v+=" ":v="",v+b.linkInline}if("<"===o&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=p,n.highlightFormatting&&(i.formatting="link");return(v=d(i))?v+=" ":v="",v+b.linkEmail}if(n.xml&&"<"===o&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var E=t.string.indexOf(">",t.pos);if(-1!=E){var T=t.string.substring(t.start,E);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(T)&&(i.md_inside=!0)}return t.backUp(1),i.htmlState=e.startState(_),r(t,i,s)}if(n.xml&&"<"===o&&t.match(/^\/\w*?>/))return i.md_inside=!1,"tag";if("*"===o||"_"===o){for(var x=1,O=1==t.pos?" ":t.string.charAt(t.pos-2);x<3&&t.eat(o);)x++;var I=t.peek()||" ",A=!/\s/.test(I)&&(!D.test(I)||/\s/.test(O)||D.test(O)),C=!/\s/.test(O)&&(!D.test(O)||/\s/.test(I)||D.test(I)),w=null,R=null;if(x%2&&(i.em||!A||"*"!==o&&C&&!D.test(O)?i.em!=o||!C||"*"!==o&&A&&!D.test(I)||(w=!1):w=!0),x>1&&(i.strong||!A||"*"!==o&&C&&!D.test(O)?i.strong!=o||!C||"*"!==o&&A&&!D.test(I)||(R=!1):R=!0),null!=R||null!=w){n.highlightFormatting&&(i.formatting=null==w?"strong":null==R?"em":"strong em"),!0===w&&(i.em=o),!0===R&&(i.strong=o);g=d(i);return!1===w&&(i.em=!1),!1===R&&(i.strong=!1),g}}else if(" "===o&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return d(i);t.backUp(1)}if(n.strikethrough)if("~"===o&&t.eatWhile(o)){if(i.strikethrough){n.highlightFormatting&&(i.formatting="strikethrough");g=d(i);return i.strikethrough=!1,g}if(t.match(/^[^\s]/,!1))return i.strikethrough=!0,n.highlightFormatting&&(i.formatting="strikethrough"),d(i)}else if(" "===o&&t.match("~~",!0)){if(" "===t.peek())return d(i);t.backUp(2)}if(n.emoji&&":"===o&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){i.emoji=!0,n.highlightFormatting&&(i.formatting="emoji");var N=d(i);return i.emoji=!1,N}return" "===o&&(t.match(/^ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),d(i)}function p(e,t){if(">"===e.next()){t.f=t.inline=c,n.highlightFormatting&&(t.formatting="link");var i=d(t);return i?i+=" ":i="",i+b.linkInline}return e.match(/^[^>]+/,!0),b.linkInline}function m(e,t){if(e.eatSpace())return null;var i=e.next();return"("===i||"["===i?(t.f=t.inline=function(e){return function(t,i){var r=t.next();if(r===e){i.f=i.inline=c,n.highlightFormatting&&(i.formatting="link-string");var a=d(i);return i.linkHref=!1,a}return t.match(w[e]),i.linkHref=!0,d(i)}}("("===i?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,d(t)):"error"}function f(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=h,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,d(t)):i(e,t,c)}function h(e,t){if(e.match("]:",!0)){t.f=t.inline=g,n.highlightFormatting&&(t.formatting="link");var i=d(t);return t.linkText=!1,i}return e.match(/^([^\]\\]|\\.)+/,!0),b.linkText}function g(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),t.f=t.inline=c,b.linkHref+" url")}var _=e.getMode(t,"text/html"),v="null"==_.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode="text/plain"),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var b={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var y in b)b.hasOwnProperty(y)&&n.tokenTypeOverrides[y]&&(b[y]=n.tokenTypeOverrides[y]);var E=/^([*\-_])(?:\s*\1){2,}\s*$/,T=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,S=/^\[(x| )\](?=\s)/i,x=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,O=/^ {0,3}(?:\={1,}|-{2,})\s*$/,I=/^[^#!\[\]*_\\<>` "'(~:]+/,A=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,C=/^\s*\[[^\]]+?\]:.*$/,D=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,w={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},R={startState:function(){return{f:o,prevLine:{stream:null},thisLine:{stream:null},block:o,htmlState:null,indentation:0,inline:c,text:u,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(_,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return a(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=s)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==s?{state:e.htmlState,mode:_}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:R}},indent:function(t,n,i){return t.block==s&&_.indent?_.indent(t.htmlState,n,i):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,i):e.Pass},blankLine:a,getType:d,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return R},"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/fold/xml-fold",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function n(e,t,n,i){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=i?Math.max(i.from,e.firstLine()):e.firstLine(),this.max=i?Math.min(i.to-1,e.lastLine()):e.lastLine()}function i(e,t){var n=e.cm.getTokenTypeAt(p(e.line,t));return n&&/\btag\b/.test(n)}function r(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function a(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function o(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(r(e))continue;return}{if(i(e,t+1)){var n=e.text.lastIndexOf("/",t),a=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,a?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(i(e,t+1)){f.lastIndex=t,e.ch=t;var n=f.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function l(e){for(;;){f.lastIndex=e.ch;var t=f.exec(e.text);if(!t){if(r(e))continue;return}{if(i(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function d(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(a(e))continue;return}{if(i(e,t+1)){var n=e.text.lastIndexOf("/",t),r=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}}function u(e,t){for(var n=[];;){var i,r=l(e),a=e.line,s=e.ch-(r?r[0].length:0);if(!r||!(i=o(e)))return;if("selfClose"!=i)if(r[1]){for(var d=n.length-1;d>=0;--d)if(n[d]==r[2]){n.length=d;break}if(d<0&&(!t||t==r[2]))return{tag:r[2],from:p(a,s),to:p(e.line,e.ch)}}else n.push(r[2])}}function c(e,t){for(var n=[];;){var i=d(e);if(!i)return;if("selfClose"!=i){var r=e.line,a=e.ch,o=s(e);if(!o)return;if(o[1])n.push(o[2]);else{for(var l=n.length-1;l>=0;--l)if(n[l]==o[2]){n.length=l;break}if(l<0&&(!t||t==o[2]))return{tag:o[2],from:p(e.line,e.ch),to:p(r,a)}}}else s(e)}}var p=e.Pos,m="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=new RegExp("<(/?)(["+m+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");e.registerHelper("fold","xml",function(e,i){for(var r=new n(e,i.line,0);;){var a=l(r);if(!a||r.line!=i.line)return;var s=o(r);if(!s)return;if(!a[1]&&"selfClose"!=s){var d=p(r.line,r.ch),c=u(r,a[2]);return c&&t(c.from,d)>0?{from:d,to:c.from}:null}}}),e.findMatchingTag=function(e,i,r){var a=new n(e,i.line,i.ch,r);if(-1!=a.text.indexOf(">")||-1!=a.text.indexOf("<")){var l=o(a),d=l&&p(a.line,a.ch),m=l&&s(a);if(l&&m&&!(t(a,i)>0)){var f={from:p(a.line,a.ch),to:d,tag:m[2]};return"selfClose"==l?{open:f,close:null,at:"open"}:m[1]?{open:c(a,m[2]),close:f,at:"close"}:(a=new n(e,d.line,d.ch,r),{open:f,close:u(a,m[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,i,r){for(var a=new n(e,t.line,t.ch,i);;){var o=c(a,r);if(!o)break;var s=u(new n(e,t.line,t.ch,i),o.tag);if(s)return{open:o,close:s}}},e.scanForClosingTag=function(e,t,i,r){return u(new n(e,t.line,t.ch,r?{from:0,to:r}:null),i)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define("codemirror/addon/edit/matchtags",["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function n(n){n.state.failedTagMatch=!1,n.operation(function(){if(t(n),!n.somethingSelected()){var i=n.getCursor(),r=n.getViewport();r.from=Math.min(r.from,i.line),r.to=Math.max(i.line+1,r.to);var a=e.findMatchingTag(n,i,r);if(a){if(n.state.matchBothTags){var o="open"==a.at?a.open:a.close;o&&(n.state.tagHit=n.markText(o.from,o.to,{className:"CodeMirror-matchingtag"}))}var s="close"==a.at?a.open:a.close;s?n.state.tagOther=n.markText(s.from,s.to,{className:"CodeMirror-matchingtag"}):n.state.failedTagMatch=!0}}})}function i(e){e.state.failedTagMatch&&n(e)}e.defineOption("matchTags",!1,function(r,a,o){o&&o!=e.Init&&(r.off("cursorActivity",n),r.off("viewportChange",i),t(r)),a&&(r.state.matchBothTags="object"==typeof a&&a.bothTags,r.on("cursorActivity",n),r.on("viewportChange",i),n(r))}),e.commands.toMatchingTag=function(t){var n=e.findMatchingTag(t,t.getCursor());if(n){var i="close"==n.at?n.open:n.close;i&&t.extendSelection(i.to,i.from)}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/fold/foldcode",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,i,r,a){function o(e){var n=s(t,i);if(!n||n.to.line-n.from.line<l)return null;for(var r=t.findMarksAt(n.from),o=0;o<r.length;++o)if(r[o].__isFold&&"fold"!==a){if(!e)return null;n.cleared=!0,r[o].clear()}return n}if(r&&r.call){var s=r;r=null}else s=n(t,r,"rangeFinder");"number"==typeof i&&(i=e.Pos(i,0));var l=n(t,r,"minFoldSize"),d=o(!0);if(n(t,r,"scanUp"))for(;!d&&i.line>t.firstLine();)i=e.Pos(i.line-1,0),d=o(!1);if(d&&!d.cleared&&"unfold"!==a){var u=function(e,t,i){var r=n(e,t,"widget");"function"==typeof r&&(r=r(i.from,i.to));if("string"==typeof r){var a=document.createTextNode(r);(r=document.createElement("span")).appendChild(a),r.className="CodeMirror-foldmarker"}else r&&(r=r.cloneNode(!0));return r}(t,r,d);e.on(u,"mousedown",function(t){c.clear(),e.e_preventDefault(t)});var c=t.markText(d.from,d.to,{replacedWith:u,clearOnEnter:n(t,r,"clearOnEnter"),__isFold:!0});c.on("clear",function(n,i){e.signal(t,"unfold",t,n,i)}),e.signal(t,"fold",t,d.from,d.to)}}function n(e,t,n){if(t&&void 0!==t[n])return t[n];var r=e.options.foldOptions;return r&&void 0!==r[n]?r[n]:i[n]}e.newFoldFunction=function(e,n){return function(i,r){t(i,r,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,i){t(this,e,n,i)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),i=t.lastLine();n<=i;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),i=t.lastLine();n<=i;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var i=0;i<e.length;++i){var r=e[i](t,n);if(r)return r}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),i=0;i<n.length;i++){var r=n[i](e,t);if(r)return r}});var i={rangeFinder:e.fold.auto,widget:"",minFoldSize:0,scanUp:!1,clearOnEnter:!0};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return n(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define("codemirror/addon/fold/foldgutter",["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){for(var n=e.findMarks(u(t,0),u(t+1,0)),i=0;i<n.length;++i)if(n[i].__isFold){var r=n[i].find(-1);if(r&&r.line===t)return n[i]}}function n(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function i(e,i,a){var o=e.state.foldGutter.options,s=i-1,l=e.foldOption(o,"minFoldSize"),d=e.foldOption(o,"rangeFinder"),c="string"==typeof o.indicatorFolded&&r(o.indicatorFolded),p="string"==typeof o.indicatorOpen&&r(o.indicatorOpen);e.eachLine(i,a,function(i){++s;var r=null,a=i.gutterMarkers;if(a&&(a=a[o.gutter]),t(e,s)){if(c&&a&&c.test(a.className))return;r=n(o.indicatorFolded)}else{var m=u(s,0),f=d&&d(e,m);if(f&&f.to.line-f.from.line>=l){if(p&&a&&p.test(a.className))return;r=n(o.indicatorOpen)}}(r||a)&&e.setGutterMarker(i,o.gutter,r)})}function r(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function a(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){i(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function o(e,n,i){var r=e.state.foldGutter;if(r){var a=r.options;if(i==a.gutter){var o=t(e,n);o?o.clear():e.foldCode(u(n,0),a)}}}function s(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){a(e)},n.foldOnChangeTimeSpan||600)}}function l(e){var t=e.state.foldGutter;if(t){var n=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?a(e):e.operation(function(){n.from<t.from&&(i(e,n.from,t.from),t.from=n.from),n.to>t.to&&(i(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}}function d(e,t){var n=e.state.foldGutter;if(n){var r=t.line;r>=n.from&&r<n.to&&i(e,r,r+1)}}e.defineOption("foldGutter",!1,function(t,n,i){i&&i!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",o),t.off("changes",s),t.off("viewportChange",l),t.off("fold",d),t.off("unfold",d),t.off("swapDoc",s)),n&&(t.state.foldGutter=new function(e){this.options=e,this.from=this.to=0}(function(e){return!0===e&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}(n)),a(t),t.on("gutterClick",o),t.on("changes",s),t.on("viewportChange",l),t.on("fold",d),t.on("unfold",d),t.on("swapDoc",s))});var u=e.Pos}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/fold/brace-fold",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(t,n){function i(i){for(var a=n.ch,o=0;;){var s=a<=0?-1:d.lastIndexOf(i,a-1);if(-1!=s){if(1==o&&s<n.ch)break;if(r=t.getTokenTypeAt(e.Pos(l,s+1)),!/^(comment|string)/.test(r))return s+1;a=s-1}else{if(1==o)break;o=1,a=d.length}}}var r,a,o,s,l=n.line,d=t.getLine(l),u=i("{"),c=i("[");if(null!=u&&(null==c||c>u))s=u,a="{",o="}";else{if(null==c)return;s=c,a="[",o="]"}var p,m,f=1,h=t.lastLine();e:for(var g=l;g<=h;++g)for(var _=t.getLine(g),v=g==l?s:0;;){var b=_.indexOf(a,v),y=_.indexOf(o,v);if(b<0&&(b=_.length),y<0&&(y=_.length),(v=Math.min(b,y))==_.length)break;if(t.getTokenTypeAt(e.Pos(g,v+1))==r)if(v==b)++f;else if(!--f){p=g,m=v;break e}++v}if(null!=p&&l!=p)return{from:e.Pos(l,s),to:e.Pos(p,m)}}),e.registerHelper("fold","import",function(t,n){function i(n){if(n<t.firstLine()||n>t.lastLine())return null;var i=t.getTokenAt(e.Pos(n,1));if(/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(n,i.end+1))),"keyword"!=i.type||"import"!=i.string)return null;for(var r=n,a=Math.min(t.lastLine(),n+10);r<=a;++r){var o=t.getLine(r).indexOf(";");if(-1!=o)return{startCh:i.end,end:e.Pos(r,o)}}}var r,a=n.line,o=i(a);if(!o||i(a-1)||(r=i(a-2))&&r.end.line==a-1)return null;for(var s=o.end;;){var l=i(s.line+1);if(null==l)break;s=l.end}return{from:t.clipPos(e.Pos(a,o.startCh+1)),to:s}}),e.registerHelper("fold","include",function(t,n){function i(n){if(n<t.firstLine()||n>t.lastLine())return null;var i=t.getTokenAt(e.Pos(n,1));return/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(n,i.end+1))),"meta"==i.type&&"#include"==i.string.slice(0,8)?i.start+8:void 0}var r=n.line,a=i(r);if(null==a||null!=i(r-1))return null;for(var o=r;;){if(null==i(o+1))break;++o}return{from:e.Pos(r,a+1),to:t.clipPos(e.Pos(o))}})}),function(e,t,n){"function"==typeof define&&define.amd?define("codemirroreditor",["codemirror","codemirror/mode/javascript/javascript","codemirror/mode/django/django","codemirror/mode/css/css","codemirror/mode/markdown/markdown","codemirror/mode/meta","codemirror/addon/edit/matchtags","codemirror/addon/fold/foldcode","codemirror/addon/fold/foldgutter","codemirror/addon/fold/xml-fold","codemirror/addon/fold/brace-fold"],n):e.codemirroreditor=n.apply(null,["codemirror","codemirror/mode/javascript/javascript","codemirror/mode/django/django","codemirror/mode/css/css","codemirror/mode/markdown/markdown","codemirror/mode/meta","codemirror/addon/edit/matchtags","codemirror/addon/fold/foldcode","codemirror/addon/fold/foldgutter","codemirror/addon/fold/xml-fold","codemirror/addon/fold/brace-fold"])}(this,0,function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(t,n,i,r){if(r){var a,o=e(function(e){(a=document.createElement("div")).id=r,a.appendChild(e),$D.insertAfter(a,t)},n);this.wrapper_element=a}else o=e.fromTextArea(t,n);i&&i.forEach(function(e){o.on(e.event,e.handler)}),this.cm=o}[{id:"codemirrorStyle",url:"/codemirror/lib/codemirror.css"},{id:"foldGutter",url:"/codemirror/addon/fold/foldgutter.css"}].forEach(function(e){if(null===$D.getById(e.id)){var t=document.createElement("link");t.id=e.id,t.href=app.configs.data.versionCdnUrl+"/zs-site/assets/v1"+e.url,t.rel="stylesheet",t.type="text/css",document.head.appendChild(t)}});var i={lineNumbers:!0,lineWrapping:!0,lineSeparator:"\n",matchBrackets:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],indentUnit:4,matchTags:{bothTags:!0},showSearchButton:!0,highlightMatches:!0,autoFormatOnStart:!0,extraKeys:{"Ctrl-J":"toMatchingTag","Ctrl-Y":"redo","Cmd-Y":"redo"}};return n.prototype.setSize=function(e,t){this.cm.setSize(e,t)},n.prototype.setOption=function(e,t){this.cm.setOption(e,t)},n.prototype.setOptions=function(e){for(var t in e)this.setOption(t,e[t])},n.prototype.setMode=function(e){this.cm.setOption("mode",e)},n.prototype.addEvent=function(e,t){this.cm.on(e,t)},n.prototype.focus=function(){this.cm.focus()},n.prototype.read=function(){return this.cm.getValue()},n.prototype.setValue=function(e){this.cm.setValue(e)},n.prototype.refresh=function(){this.cm.refresh()},n.prototype.clearUndoStack=function(){this.cm.clearHistory()},n.prototype.getHistory=function(){return this.cm.getHistory()},n.prototype.setHistory=function(e){this.cm.setHistory(e)},n.prototype.setCursor=function(e,t){this.cm.setCursor(e,t)},n.prototype.lineCount=function(){return this.cm.lineCount()},function(e,r,a,o){var s=i;if(r)for(var l in r)s[l]="extraKeys"===l?t(s[l],r[l]):r[l];return new n(e,s,a,o)}}),define("edit_html",["hbDialog","notify","error_codes","mask","resource","utils","CONST","hbValidate","confirmDialog","codemirroreditor"],function(e,t,n,i,r,a,o,s,l,d){"use strict";function u(){O={module:o.EDITOR_MODULE.FILES,target:"",escClose:!0,offsetTop:"0px",offsetLeft:"150px",mask:!0,dialogClass:"domain-dialog"}}function c(){var t=JSON.parse(this.responseText);if(0==t.status_code){var i=t.content.content,a=t.content.resource_url;if(!b||b&&"closed"===b.state){var s=cms_i18n("ui.resource.file.edit")+" - "+a;b=new e.Dialog({dialogClass:O.dialogClass,header:!0,headingText:s,footer:!1,escClose:O.escClose,type:"fullscreen",offsetTop:O.offsetTop,offsetLeft:O.offsetLeft,closeBtn:!0,mask:O.mask,onClose:function(){O.module!=o.EDITOR_MODULE.ROOT?app.goBack():g()},beforeClose:function(e){E?e():function(e){_(v)?(E=!0,f(e)):e()}(e)}})}x=b.content,app.render({template:"sites_v2:files:t_edit_html/t_edit_html_dialog",target:x,context:{edit_html:I},models:{resource_name:a},bindCtx:I,callback:function(){b.open(),$E.bind($D.get("#save_file",x),"hbValidate:submit",p.bind(null,v)),I.bindObj={},function(e){var t,n="";n=$D.get("#content_editor_files",x),t=$D.get("#edit_html_files",x);var i=d(n,{mode:"text/html",height:"auto",extraKeys:{"Cmd-S":function(){return p(v),!1},"Ctrl-S":function(){return p(v),!1}}},[{event:"change",handler:function(e,t){"+input"!==t.origin&&"+delete"!==t.origin&&"paste"!==t.origin&&"cut"!==t.origin&&"undo"!==t.origin&&"redo"!==t.origin||(I.bindObj.file_content_cache||(I.bindObj.file_content_cache={}),I.bindObj.file_content_cache[v]=e.getValue())}}],"editor_"+v);i.setValue(e),i.setSize(null,t.offsetHeight+"px"),i.clearUndoStack(),setTimeout(function(){i.refresh()},1)}(i),app.next()}})}else if(t.status_code==n.ERROR_COMMON.NOT_AUTHORIZED)return void r.blockUser(cms_i18n("ui.resource.file.edit"))}function p(e){if(!y){if(y=!0,!_(v))return y=!1,m("failure"),void t(cms_i18n("ui.common.nochangetosave")).info();var i={content:I.bindObj.file_content_cache[e]};r.saveFile(e,i,function(){var e=JSON.parse(this.responseText);if(y=!1,0==e.status_code)m("success"),t(cms_i18n("ui.resource.file.update.successmessage")).success(),I.bindObj.file_content_cache={};else{var i;m("failure"),i=e.status_code==n.ERROR_COMMON.NOT_AUTHORIZED?cms_i18n("ui.settings.contributors.action.notallowed"):e.developer_message,t(i).error(),O.module==o.EDITOR_MODULE.FILES&&b.close()}})}}function m(e){var t="";(t=$D.get("#saveFileBtnFile",x)).removeAttribute("disabled"),t.setAttribute("data-hb-submit",e)}function f(e){l.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:cms_i18n("ui.common.save.unsavedchanges"),okText:cms_i18n("ui.common.save"),cancelText:cms_i18n("ui.common.discard"),closeBtn:!1,okBtnClass:"",confirmIcon:"info",ok:function(){var n={content:I.bindObj.file_content_cache[v]};r.saveFile(v,n,function(){0==JSON.parse(this.responseText).status_code&&(t(cms_i18n("ui.resource.file.update.successmessage")).success(),h(e))})},cancel:function(){h(e)},close:function(){E=!1}})}function h(e){I.bindObj.file_content_cache={},E=!1,O.module==o.EDITOR_MODULE.ROOT?app.navigate("/zcms/editor"):(b&&b.close(),e&&e(),b=null,T&&T(),T=null)}function g(){E=!0,_(v)?f():(O.module==o.EDITOR_MODULE.ROOT?app.navigate(app.data.sitesBaseUrl+app.getSubSiteUrl()):b&&b.close(),I.bindObj.file_content_cache={},E=!1,u())}function _(e){return void 0!=I.bindObj&&void 0!=I.bindObj.file_content_cache&&void 0!=I.bindObj.file_content_cache[e]&&I.bindObj.file_content_cache[e]!={}}var v,b=null,y=!1,E=!1,T=null,S=app.getHeaders(),x="",O={module:o.EDITOR_MODULE.FILES,target:"",escClose:!0},I={init:function(e){u(),b=null,Object.keys(e).forEach(function(t){O[t]=e[t]})},resetToDefaults:u,getFileContent:function(e){v=e,$X.get({url:app.data.api_url+"/resources/"+e+"/content",headers:S,handler:c})},saveFile:p,cancelChanges:g,isUnsavedFileEdit:_,getResourceContent:function(e){return I.bindObj.file_content_cache[e]},onExit:function(e,t){_(v)?T=t:t&&t(),u(),E=!1,b&&b.dismiss()}};return I}),define("uploadProgress",["hbDialog"],function(e){"use strict";function t(e,t,n){l(),app.render({template:"sites:files:t_files/progressContainer",target:$D.getById("fileUploadProgress"),models:{files:e,opts:t},context:{uploadProgress:f},callback:function(){$D.getById("fileUploadProgress").style.display="block",$D.getByClass("file-upload-file-name",$D.getById("fileProgress_0"))[0].style["white-space"]="",1==e.length&&n?($D.getByClass("file-upload-file-name",$D.getById("fileProgress_0"))[0].style["white-space"]="normal",$D.getById("progressListCont").style.minHeight="0px"):1==e.length&&($D.getById("progressListCont").style.minHeight="0px"),m=!0,$E.bind($D.getById("progressListCont"),"wheel",function(){m=!1,$E.unbind($D.getById("progressListCont"),"wheel")})}})}function n(e,t){c||(f.modelObj.files[e].status="error",f.modelObj.files[e].error_msg=t,r(e),t!=p&&(i(e),f.modelObj.errorCount++))}function i(e){!f.modelObj.errorIndexList&&(f.modelObj.errorIndexList=[]),f.modelObj.errorIndexList.push(e)}function r(e){f.modelObj.files[e].index=e;var t=document.getElementById("fileProgress_"+e);m&&t.scrollIntoView();app.view.renderPartial({partial:"sites:progressContainer.progressPartial",args:[f.modelObj.files[e]],context:{uploadProgress:f},refEl:t,insertType:"replace"})}function a(e){if(e.length>0){for(var t=o(),n=$D.getById("fileProgress_"+(t-1)),i=0;i<e.length;i++){var r=e[i];if(r!=t-1){var a=$D.getById("fileProgress_"+r);$D.insertAfter(a,n),n=a}}(n=$D.getById("fileProgress_"+e[0])).scrollIntoView()}}function o(){return f.modelObj.files.length}function s(){c&&$D.getById("fileUploadMask")&&($D.getById("fileUploadMask").style.display="none")}function l(){$D.getById("fileUploadProgress").style.display="none"}function d(){f.modelObj={},f.modelObj.files={},f.modelObj.errorCount=0,f.modelObj.cancelCount=0,f.modelObj.errorIndexList=[],f.modelObj.cancelIndexList=[],c=!0}function u(e,t,n){var i=new CustomEvent(t,{detail:n});i.initEvent(t,!0,!0),e.dispatchEvent(i)}var c=!0,p="Cancelled",m=!1,f={showUploadProgress:function(e,n){if(0!=e.files.length){d(),f.modelObj.files=e.files,c=!1;for(var r=0;r<f.modelObj.files.length;r++)f.modelObj.files[r].status&&"error"==f.modelObj.files[r].status&&(i(r),f.modelObj.errorCount++);t(e.files,n)}},hideUploadProgress:l,showSuccessDialog:function(e,n){t([{name:e,index:0,status:"success"}],n,!0)},showErrorDialog:function(e,n,i,r){if(0!=e.length){for(var a=0;a<e.length;a++)e[a].status="error",e[a].error_msg=e[a][n],e[a].name=e[a][i];t(e,r)}},changeStatusToLoading:function(e){if(!c){var t=e.detail.index;f.modelObj.files[t].status="going",r(t),document.getElementById("fileProgress_"+t).getElementsByClassName("file-upload-progress-status")[0].style.width="100%"}},changeStatusToSuccess:function(e,t){c||(f.modelObj.files[e].status="success",f.modelObj.files[e].name=t,r(e))},changeStatusToError:n,setRequestCompleted:function(e,t){c=!0,$D.getById("fileUploadProgress")&&"block"==$D.getById("fileUploadProgress").style.display&&($D.getById("file-upload-title").innerHTML=e,$D.getById("file-upload-status").innerHTML=t,a(f.modelObj.errorIndexList),a(f.modelObj.cancelIndexList)),s(),$E.unbind($D.getById("progressListCont"),"wheel")},getErrorCount:function(){return f.modelObj.errorCount},getSuccessCount:function(){return o()-f.modelObj.cancelCount},getFilesCount:o,minimizeProgress:function(){"block"==$D.getById("fileUploadProgress").style.display&&($D.getById("uploadMinimize").style.display="none",$D.getById("uploadMaximize").style.display="block",$D.getById("progressListCont").style.display="none")},maximizeProgress:function(){"block"==$D.getById("fileUploadProgress").style.display&&($D.getById("uploadMaximize").style.display="none",$D.getById("uploadMinimize").style.display="block",$D.getById("progressListCont").style.display="block")},abortRequest:function(){var e=this.getAttribute("data-file-index");u(document.body,"hbDropzone:abortRequest",{index:e}),n(e,p),f.modelObj.cancelCount++,function(e){!f.modelObj.cancelIndexList&&(f.modelObj.cancelIndexList=[]),f.modelObj.cancelIndexList.push(e)}(e)},abortAll:function(){if(c)l(),d();else{var t=new e.Dialog({dialogClass:"demo-dialog",headingText:cms_i18n("ui.files.upload.cancel.title"),onOk:function(){u(document.body,"hbDropzone:abortAll"),l(),d(),s(),t.close()},onClose:function(){t.close()}}),n={msg:cms_i18n("ui.files.upload.cancel.msg")};app.render({template:"sites:files:t_confirmDialog/t_confirmDialog",target:t.content,callback:function(){t.open()},models:{opts:n},context:{handler:f}})}},openMask:function(){!c&&$D.getById("fileUploadMask")&&($D.getById("fileUploadMask").style.display="block")}};return f}),define("publish",["notify","mask","CONST","resource","error_codes","edit_html","hbDialog","planFeature","confirmDialog","utils","uploadProgress"],function(e,t,n,i,r,a,o,s,l,d,u){"use strict";function c(){var i="page"==N?app.data.resource_role:app.data.role;if(N||app.data.root_resource_id!=app.data.sub_site_id&&(N="sub_site"),i==n.ROLE.OWNER||i==n.ROLE.ADMIN||i==n.ROLE.DEVELOPER||i==n.ROLE.STORE_ADMIN||i==n.ROLE.GUEST_PUBLISH||i==n.ROLE.AUTHOR_PUBLISH){var r=$D.getById("pagecanvas");if(!isStore&&!R&&!app.data.is_preview_page&&r)return R=!0,void m(!0,null,null,!0,null,null,N);R=!1;var a={};3==app.data.site_type&&r&&(a.site_resources=[r.contentWindow.zs_resource_id],a.recursive_publish=!0);var o=app.data.api_url+"/publish",s=app.getRootHeaders();if(N&&"sub_site"==N)(a={}).recursive_publish=!1,s=app.getHeaders();else if(N&&"page"==N){a={};var l;l=app.data.is_preview_page?$D.getById("previewframe").contentWindow.window.zs_resource_id:r.contentWindow.zs_resource_id,o=app.data.api_url+"/resources/"+l+"/publish",s=app.getHeaders()}app.data.has_sub_site&&(a.recursive_publish=!1),N=null;t.show(function(){$X.post({url:o,bodyJSON:a,headers:s,handler:b})})}else e(cms_i18n("ui.settings.contributors.action.notallowed")).error(),N=null}function p(e,t,n){var i=n.getChildKey(n.elements[e.type]).key;return i&&e[i]&&$IS.array(e[i])&&(e[i]=e[i].map(function(e){return p(t.elements[e],t,n)})),e}function m(t,o,s,l,u,m,g,_){l||S();var v=$D.getById("pagecanvas").contentWindow,b=v.window.resource_id,E="none";$D.getById("editHtmlDialog")&&(E=$D.getById("editHtmlDialog").style.display);{if("none"==E||!a.isUnsavedFileEdit(b)){var T=null,x=i.getResourceProperty();if((v.zs_resource_type==n.RESOURCE_TYPE.BLOG||v.zs_resource_type==n.RESOURCE_TYPE.BLOG_POST)&&x.enable_editor){if(v.zs_resource_type==n.RESOURCE_TYPE.BLOG_POST){var O={};return O.next=f,O.skip_notify=t,O.isSync=o,O.next_route=s,O.cancel=u,R&&(R=O.save_and_publish=!1),w&&(w=O.save_and_preview=!1),O.auto_save=l,dndBuilder.dataHelper.saveContainerApps(O),!0}return R&&c(),w&&y(),s&&s(),!0}if(D)return!1;var I=!0;if((T=dndBuilder.dataHelper.getPatch()).Clog&&Object.keys(T.Clog).length>0){var A=dndBuilder.dataHelper.getContent(),N=d.deepClone(v.zs_content_json),k=new jsonDiff;try{var L=k.apply_patch(T.Clog,N);I=d.deepEqual(L,A)}catch(e){I=!1}I||(T.Clog=A)}var M=v.zs_resource_id;if(i.getResourceName(M),T.Clog&&Object.keys(T.Clog).length>0&&x.enable_editor){D=!0;var P={isPatch:I?"true":"false",user_save:null==l||0==l,ssi_data:{}};!function(e,t){for(var n,i,r,a=e.Clog,o=d.deepClone(e.MO),s=dndBuilder.getElementInstance(),l=s.ssiElementIds,u=s.getSSIElementIds(o,!0),c="",m=Object.keys(s.ssi),f=[],h=0;r=m[h];h++)h>0&&(c+=","),c+='[data-element-type="'+r+'"]';var g,_={};for(var v in a){n=a[v];for(var b in n.elements){if(l[b]||u[b])g=b;else{var y=$D.getByDataId(b,$("#pagecanvas").contentDocument);if(!y){g=b;continue}var E=""!=c&&y.closest(c);if(g=b,!E)continue;g=E.getAttribute("data-element-id")}i=o[v].elements[g],f.indexOf(g)>-1||((l[g]||u[g])&&null===n.elements[g]?(_[l[g]]=_[l[g]]||{},_[l[g]][g]=null,f.push(g)):u[g]&&i&&(_[u[g]]=_[u[g]]||{},_[u[g]][g]=i,p(i,o[v],s),f.push(g)))}}t.ssi_data=_}(T,P),Object.keys(T.Clog).forEach(function(e){P[e]=T.Clog[e]}),$D.removeClass($D.getById("zp_save_icon_loading"),"hide_icon"),$D.addClass($D.getById("zp_save_icon"),"hide_icon"),$X.put({url:app.data.api_url+"/pages/"+M+"/save",headers:C,bodyJSON:P,sync:o,handler:h,args:{skip_notify:t,sync:o,next:s,lpCallbacks:m,resource_id:M,readypublishCallback:g,callback:_}}),dndBuilder.dataHelper.preSaveActions(),dndBuilder.dataHelper.clearChangeLog()}else R&&c(),w&&y(),t||e(cms_i18n("ui.common.nochangetosave")).info(),m&&m.noChangesCallback&&m.noChangesCallback(),g&&g.successCallback&&g.successCallback(),s&&s(),_&&_();return!0}!function(e){var t={content:a.getResourceContent(e)};i.saveFile(e,t,function(){var e=JSON.parse(this.responseText);0==e.status_code?(R&&c(),w&&y(),a.bindObj.file_content_cache={}):e.status_code==r.ERROR_COMMON.NOT_AUTHORIZED&&i.blockUser(cms_i18n("ui.resource.file.edit"))})}(b)}}function f(e){if(R=e.save_and_publish,w=e.save_and_preview,e.next_route&&e.next_route(),e.isSync)return!1;e.save_and_publish&&c(),e.save_and_preview&&y()}function h(t){$D.addClass($D.getById("zp_save_icon_loading"),"hide_icon"),$D.removeClass($D.getById("zp_save_icon"),"hide_icon"),D=!1;var i;try{i=JSON.parse(this.responseText)}catch(t){return t&&t.lpCallbacks&&t.lpCallbacks.failureCallback&&t.lpCallbacks.failureCallback(),void dndBuilder.dataHelper.builderSaveFailed()}if("0"===i.status_code&&"success"===i.status_message){if((a=$D.getById("pagecanvas").contentWindow).zs_content_json=d.deepClone(dndBuilder.dataHelper.getContent()),t&&t.lpCallbacks&&t.lpCallbacks.successCallback&&t.lpCallbacks.successCallback(),t&&t.readypublishCallback&&t.readypublishCallback.successCallback&&t.readypublishCallback.successCallback(),dndBuilder.getElementInstance().getSSIElementIds(dndBuilder.dataHelper.getContent()),dndBuilder.dataHelper.builderSaveSuccess(),t.skip_notify||e(cms_i18n("ui.resource.saved")).success(),$E.dispatch(document.body,"content:saved",i),t&&t.next&&t.next(),t&&t.sync)return!1;R&&c(),w&&y();var a=$D.getById("pagecanvas").contentWindow,o=i.save_page&&i.save_page.pagereview_state&&i.save_page.pagereview_state.content_state?i.save_page.pagereview_state.content_state:-1;if(app.data.pg_review&&(app.data.pg_review.curr_contentstate=o),app.data.sub_site_map[app.data.root_resource_id].settings.flag_draft_state&&a.zs_resource_type==n.RESOURCE_TYPE.PAGE&&o==n.CONTENT_STATE.DRAFT){var s=a.zs_resource_id;require(["pages"],function(e){app.data.pg_review&&app.data.pg_review.prev_contentstate!=app.data.pg_review.curr_contentstate&&e.notifyPageStatusMsg(n.CONTENT_STATE.DRAFT),e.renderPageStatus(n.CONTENT_STATE.DRAFT,s,!0)})}t.callback&&t.callback()}else if(t&&t.lpCallbacks&&t.lpCallbacks.failureCallback&&t.lpCallbacks.failureCallback(),dndBuilder.dataHelper.builderSaveFailed(),i.status_code==r.ERROR_COMMON.PROBLEM_WHILE_SAVING_PATCH_FILE){var l={isPatch:"false"},u=i.save_page;Object.keys(u).forEach(function(e){switch(e){case"page":l.page_content=dndBuilder.dataHelper.getContentByType("page_content");break;case"sidebar":l.sidebar_content=dndBuilder.dataHelper.getContentByType("sidebar_content");break;case"footer":l.footer_content=dndBuilder.dataHelper.getContentByType("footer_content");break;case"banner":l.banner_content=dndBuilder.dataHelper.getContentByType("banner_content")}}),Object.keys(l).length>0&&function(e,t){$X.put({url:app.data.api_url+"/pages/"+t.resource_id+"/save",headers:C,bodyJSON:e,sync:t.sync,handler:_,args:t})}(l,t)}else i.status_code==r.ERROR_PAGES.PAGE_NOT_FOUND?e(cms_i18n("ui.noroute.page.notfound")).error():e(cms_i18n("ui.common.save.error")+" "+cms_i18n("ui.common.please.try.again.later")).error()}function g(){0==JSON.parse(this.responseText).status_code?e(cms_i18n("ui.cms.feedback.sent")).success():e(cms_i18n("ui.cms.feedback.notSent")).warning()}function _(t){var n=JSON.parse(this.responseText);if("0"===n.status_code&&"success"===n.status_message){var i=$D.getById("pagecanvas").contentWindow;if(i&&(i.zs_content_json=d.deepClone(dndBuilder.dataHelper.getContent())),dndBuilder.dataHelper.clearChangeLog(),t.skip_notify||e(cms_i18n("ui.resource.saved")).success(),$E.dispatch(document.body,"content:saved",n),t&&t.next&&t.next(),t&&t.sync)return!1;R&&c(),w&&y()}else v()}function v(){l.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:cms_i18n("ui.content.saved.error"),cancelText:cms_i18n("ui.feature.reports.name",1),closeBtn:!1,okText:cms_i18n("ui.common.reload"),okBtnClass:"",confirmIcon:"info",okBtn:!0,ok:function(){window.location.reload()},cancel:function(){var e={feedbackType:n.FEED_BACK_TYPE.EMERGENCY,feedbackContent:"Error reported for Site ID: "+app.data.siteId+", Page Resource ID: "+$("#pagecanvas").contentWindow.zs_resource_id+"  while saving the content."};$X.post({url:"/zs-site/api/v1/feedback",bodyJSON:e,handler:g})}})}function b(){var a=JSON.parse(this.responseText);if(t.close(),a.status_code==r.ERROR_PUBLISH.SITE_NOT_PUBLISHED_YET||a.status_code==r.ERROR_PUBLISH.INHERITED_SITE_NOT_PUBLISHED_YET){var o=cms_i18n(a.status_code==r.ERROR_PUBLISH.SITE_NOT_PUBLISHED_YET?"ui.dashboard.notpublished":"ui.publish.errmessage.mainsitenotpublished");l.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",contentMsg:o,cancelText:cms_i18n("ui.common.close"),closeBtn:!1,confirmIcon:"info",okBtn:!1,cancel:function(){}})}else if(a.status_code==r.ERROR_PUBLISH.NO_DOMAIN_ASSOCIATED)require(["domains"],function(e){e.showAddDomain(!0)});else if(0==a.status_code){var s=a.publish_details,d=s.publish_status;if(app.data.isSitePublished=!0,app.data.isPortalEnabled&&(app.data.isPortalPublished=!0),101!=d&&102!=d&&103!=d||(require(["domain"],function(e){101==d?(s.subDomainPrimary=!0,s.hasCustomDomain=!!s.secondary_domain,s.customDomainDNS=s.hasCustomDomain&&(s.secondary_dns_status||s.secondary_forward_status)):102==d?(s.subDomainPrimary=!1,s.hasCustomDomain=!0,s.customDomainDNS=!1):103==d&&(s.subDomainPrimary=!1,s.hasCustomDomain=!0,s.customDomainDNS=!0),L.publish_details=s,e.showPublishDialog(!1,s),app.data.publishedDomain=s.primary_domain}),$D.getById("unpublishDiv")&&$D.getById("helpDiv")&&($D.css($D.getById("helpDiv"),"display","none"),$D.css($D.getById("unpublishDiv"),"display","flex")),$D.getById("viewstore_span")&&$D.css($D.getById("viewstore_span").parentNode,"display",""),$D.getById("publish_todo_btn")&&$D.getById("view_store_todo_btn")&&($D.getById("publish_todo_btn").style.display="none",$D.getById("view_store_todo_btn").style.display="")),!app.data.is_preview_page){var u=$D.getById("pagecanvas").contentWindow;if(app.data.sub_site_map[app.data.root_resource_id].settings.flag_draft_state&&u.zs_resource_type==n.RESOURCE_TYPE.PAGE){var c=u.zs_resource_id;if("publish_resource"==a.api_kind)require(["pages"],function(e){e.renderPageStatus(n.CONTENT_STATE.PUBLISHED,c,!0)});else{var p=i.getResourceObj(c);if(null!=p){p.content_state==n.CONTENT_STATE.READY_TO_PUBLISH&&require(["pages"],function(e){e.renderPageStatus(n.CONTENT_STATE.PUBLISHED,c,!0)})}}}}}else if(a.status_code==r.ERROR_PUBLISH.SPAM_SITE||a.status_code==r.ERROR_PUBLISH.SITE_BLOCKED){var m=cms_i18n("ui.publish.blockedsite")+" "+cms_i18n("ui.common.contact.support",app.data.support_mail,app.data.support_mail);app.data.product_title;!function(e,t,n,i){l.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,title:app.data.product_title,contentMsg:t,confirmIcon:"info",closeBtn:!0,okBtn:!1,escClose:!0,cancelText:cms_i18n("ui.common.close")})}(0,m)}else a.status_code==r.ERROR_PUBLISH.USER_EMAIL_NOT_CONFIRMED?(require(["domain"],function(e){e.closeDomainDialog()}),T(a.developer_message)):a.status_code==r.ERROR_PUBLISH.FIRST_TIME_PUBLISH_OWNER_ONLY?e(cms_i18n("ui.settings.domains.firstPublish.authorizationMsg")).warning():a.status_code==r.ERROR_PUBLISH.PUBLISH_NOT_ALLOWED?require(["planFeature"],function(e){e.showUpgradeDialog("publish",-1)}):a.status_code==r.ERROR_PUBLISH.PUBLISH_IS_ONGOING?l.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentMsg:cms_i18n("ui.publish.publish.ongoing"),okText:cms_i18n("ui.dialog.ok"),confirmIcon:"info",okBtnClass:"mo-btn__ok",cancelBtn:!1}):a.status_code==r.ERROR_DOMAIN.GENERATED_SUB_DOMAIN_EXPIRED?l.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentMsg:cms_i18n("ui.upgrade.subdomain_expired"),okText:cms_i18n("ui.dialog.ok"),confirmIcon:"info",okBtnClass:"mo-btn__ok",cancelBtn:!1}):a.status_code==r.ERROR_PUBLISH.DOMAINS_NOT_VERIFIED?require(["domains"],function(e){e.showAddDomain(!0,{hasUnverifiedDomains:!0})}):a.status_code==r.ERROR_PUBLISH.NO_CHANGES_MADE?e(cms_i18n("ui.common.nochangetosave")).info():a.status_code==r.ERROR_PUBLISH.RESOURCE_NOT_READY_TO_PUBLISH?(app.data.is_preview_page||require(["pages"],function(e){e.renderPageStatus(n.CONTENT_STATE.DRAFT,$D.getById("pagecanvas").contentWindow.zs_resource_id,!0)}),e(cms_i18n("ui.publish.error.indraftstate")).error()):a.status_code==r.ERROR_TRANSLATION.SUBSITE_LIMIT_REACHED?require(["planFeature"],function(e){e.showUpgradeDialog("subsite",!1,null,null,cms_i18n("ui.upgrade.subsite.publish.limitreached"))}):e(a.status_message).error()}function y(){if(w){if(w){var e=window.location.href.split("?")[0].split("editor"),t="";e.length>0&&(t=e[1]);var n=window.zsData.content_domain_prefix?window.zsData.content_domain_prefix:"",i=window.location.protocol+"//"+n+"sitepreview-"+window.zsData.siteId+"."+window.zsData.content_domain+"/zcms/preview"+t;I.location.href=i,w=!1}}else w=!0,I=window.open("about:blank","_blank"),m(!0,null,null,!0,null)}function E(e){"0"==e.detail.status_code?"false"==app.data.plan_feature.Custom_Domain?function(e){$X.put({url:app.data.api_url+"/domains/"+e+"/markPrimary",headers:C,handler:function(){c()}})}(e.detail.domain_list[0].domain_id):c():alert(response.developer_message)}function T(e){var t={dialogClass:"demo-dialog sites-alert h-info",header:!1,contentClass:"hb-mo-content-dobuleline",escClose:!0,closeBtn:!1,cancelBtn:!1,focus:"ok",okText:cms_i18n("ui.dialog.ok.gotit"),onOk:function(){k.dismiss()}};k=new o.Dialog(t),app.render({template:"sites_v2:publish:t_mailunconfirm/t_mailunconfirm",target:k.content,models:{mailid:e,accounts_url:app.data.thumbnail.accounts_url,app_data:app.data},context:{publish:L},callback:function(){k.open()}})}function S(){n.AUTO_SAVE.IS_ENABLED&&(window.clearInterval(A),A=setInterval(function(){m(!0,null,null,!0,null)},n.AUTO_SAVE.DELAY))}function x(e,t,n){var i=new Set,r=[];if(e.forEach(function(e){i.add(e.code),r.push(e.resource_name)}),1==i.size){var a="";return a=n?cms_i18n("ui.resources.mulitpleresourcespublish.errormessage",t,e[0].message):cms_i18n("ui.resources.mulitpleresourcesunpublish.errormessage",t,e[0].message),O(a),!0}return!1}function O(e){l.open({dialogClass:"demo-dialog sites-alert",header:!1,okBtnClass:"mo-error",contentMsg:e,okText:cms_i18n("ui.dialog.ok"),cancelBtn:!1})}var I,A,C=app.getHeaders(),D=!1,w=!1,R=!1,N=null;$E.bind(window,"beforeunload",function(e){return m(!0,!function(){var e=window.chrome,t=window.navigator,n=t.vendor,i=void 0!==window.opr,r=t.userAgent.indexOf("Edge")>-1,a=!1;return null!==e&&void 0!==e&&"Google Inc."===n&&!1===i&&!1===r&&(a=!0),a}(),null,!0,null),null});var k;$E.bind(document.body,"domain:added",E);var L={init:function(e,t){$E.bind($D.get("button",e),"click",c)},save:function(){m(!1)},saveContent:m,publishSite:c,publishSubSite:function(){N="sub_site",c()},publishPage:function(){N="page",c()},publishRoute:f,showPreview:y,showLiveSite:function(){""!=app.data.publishedDomain&&window.open("http://"+app.data.publishedDomain,"_blank")},saveMobileAppContent:function(e,t,n,i){var r=$D.getById("mobileappcanvas").contentWindow;if(D)return!1;var a=dndBuilder.dataHelper.getPatch(),o=r.zs_resource_id;if(a.Clog&&Object.keys(a.Clog).length>0){D=!0,a.Clog.isPatch="true";var s=null==n||0==n;a.Clog.user_save=s,$CX.put({url:app.data.api_url+"/pages/"+o+"/save",headers:C,bodyJSON:a.Clog,sync:e,handler:h,args:{sync:e,next:t,resource_id:o}})}else t&&t();return!0},closeMailUnconfirmedDialog:function(e){13==e.keyCode&&k.close()},initializeAutoSave:S,stopAutoSave:function(){window.clearInterval(A)},showPreviewWithoutSave:function(e){I=window.open("about:blank","_blank");var t=window.zsData.content_domain_prefix?window.zsData.content_domain_prefix:"",n=window.location.protocol+"//"+t+"sitepreview-"+window.zsData.siteId+"."+window.zsData.content_domain+"/zcms/preview";I.location.href=n+app.data.sub_site_url},openMail:T,publishResources:function(n,i,a){t.show(function(){$X.post({url:n,bodyJSON:i,headers:app.getRootHeaders(),handler:function(){t.close();var i=JSON.parse(this.responseText);if("0"==i.status_code){if("photoset"==a)return void require([a],function(e){e.publishResourcesHandler(n,i)});var o=i.publish_details,s=o.success_list,l=o.error_list;!function(t,n,i){if(t.length>0&&0==n.length)e(cms_i18n("ui.common.items.selected.publish",t.length)).success();else if(0==t.length&&n.length>0){if(1==n.length){var a=n[0];a.code==r.ERROR_PUBLISH.RESOURCE_TYPE_NOT_SUPPORTED?e(cms_i18n("ui.resource.individualpublish.errormessage",a.resource_name)).error():e(a.message).warning()}else if(!x(n,i,!0)){var o={title:cms_i18n("ui.publish.status")};u.showErrorDialog(n,"message","resource_name",o)}}else{var o={title:cms_i18n("ui.publish.status"),status:cms_i18n("ui.resources.mulitpleresourcespublish.errormessage",i)};u.showResponseDialog(t,n,o,!0)}}(s,l,a),require([a],function(e){e.publishResourcesHandler(s)})}else O(i.status_code==r.ERROR_PUBLISH.SITE_BLOCKED?cms_i18n("ui.publish.blockedsite")+" "+cms_i18n("ui.common.contact.support",app.data.support_mail,app.data.support_mail):i.status_message)}})})},unPublishResources:function(n,i,a){t.show(function(){$X.del({url:n,bodyJSON:i,headers:app.getRootHeaders(),handler:function(){t.close();var i=JSON.parse(this.responseText);if("0"==i.status_code){if("photoset"==a)return void require([a],function(e){e.unPublishResourcesHandler(n,i)});var o=i.publish_details,s=o.success_list,l=o.error_list;!function(t,n,i){if(t.length>0&&0==n.length)e(cms_i18n("ui.common.items.selected.unpublish",t.length)).success();else if(0==t.length&&n.length>0)if(1==n.length){var a=n[0];a.code==r.ERROR_PUBLISH.RESOURCE_TYPE_NOT_SUPPORTED?e(cms_i18n("ui.resource.individualunpublish.errormessage",a.resource_name)).error():e(a.message).warning()}else x(n,i,!1);else{var o={title:cms_i18n("ui.publish.status"),status:cms_i18n("ui.resources.mulitpleresourcesunpublish.errormessage",i)};u.showResponseDialog(t,n,o,!1)}}(s,l,a),require([a],function(e){e.unPublishResourcesHandler(s)})}else O(i.status_message)}})})},showFullContentFailureDialog:v,isResourceModified:function(){var t=dndBuilder.dataHelper.getPatch();if(t.Clog&&Object.keys(t.Clog).length>0)return m(!0,null,null,!1,null,null,null,function(){var t=cms_i18n("ui.reviewtask.movingtodraft.message",n.RESOURCE_TYPE.PAGE,cms_i18n("ui.settings.blogs.posts.status.draft"));e(t).success()}),!0;return!1}};return L}),define("previewsite",["hbDialog","utils","notify","appHeader","publish","feedback"],function(e,t,n,i,r,a){function o(e){if(!$D.hasClass(e.srcElement,"theme-sub-li-menu")){e.preventDefault();this.hasAttribute("href")&&(!function(e){return s(location.href)!==s(e)}(this.href)&&this.href!==$D.getById("previewframe").contentWindow.zs_resource_full_path?($E.purge($("#previewframe").contentWindow.document),app.navigate("/zcms/preview"+this.pathname)):n(cms_i18n("ui.site.preview.nolinkwork")).warning())}}function s(e){return e.replace("http://","").replace("https://","").split("/")[0]}function l(e){var t=window.location.pathname;if(e){var n=app.data.preview_url+(app.data.sub_site_map[app.data.sub_site_id]&&app.data.sub_site_map[app.data.sub_site_id].full_path);return t==n||t==n+"/"}return t==app.data.preview_url||t==app.data.preview_url+"/"}function d(e){if(-1!=e.indexOf("/")){for(var t=Object.keys(app.data.sub_site_map),n=0;n<t.length;n++){var i=t[n];if(app.data.sub_site_map[i].full_path==e)return void(app.data.sub_site_id=i)}d(e=e.substring(0,e.lastIndexOf("/")))}}var u=["/signin","/signup","/forgotpassword"],c=["/signin","/forgotpassword"],p={initPreviewSite:function(e){"string"!=typeof e&&(e="/");var t=$D.getById("previewframe");t?t.src=e:app.render({template:"common:preview:t_preview/t_preview",target:"zp_preview_page",models:{data:app.data,page_to_load:e},context:{previewsite:p,publish:r,appHeader:i},callback:function(){app.render({template:"common:app_header:t_app_header/t_app_header_userthumbnail_jsp",target:"user-thumbnail-holder",models:{data:app.data},callback:function(){}})}})},onIframeLoad:function(){!function(){for(var e=$D.get("#previewframe").contentWindow.body,t=$D.getAll("a",e),n=t.length-1;n>=0;n--)$E.bind(t[n],"click",o)}();var e=$D.getById("previewframe");if(e.contentWindow.window.zs_site_resource_id&&app.data.sub_site_id!=e.contentWindow.window.zs_site_resource_id&&(app.data.sub_site_id=e.contentWindow.window.zs_site_resource_id),e.contentWindow.window.zs_response_status&&"404"==e.contentWindow.window.zs_response_status)d(e.contentWindow.window.location.pathname),app.data.root_resource_id==app.data.sub_site_id?u.includes(e.contentWindow.window.location.pathname)?(app.render({template:"sites_v2:root:t_nopageinfo/errorPortalFile",target:"errorDialog",models:{app:app},callback:function(){$D.getById("manage_btn").style.display="none"}}),app.next()):(app.render({template:"sites_v2:root:t_nopageinfo/errorFile",target:"errorDialog",models:{app:app,is_home_page_notfound:l(!1)},callback:function(){$D.getById("manage_btn").style.display="none"}}),app.next()):function(e){app.render({template:"sites_v2:root:t_nopageinfo/errorFile_subsite_page",target:"errorDialog",models:{sub_site_id:e,app:app,is_home_page_notfound:l(!0)},callback:function(){$D.getById("manage_subsite_btn").style.display="none"}}),app.next()}(app.data.sub_site_id);else if(c.includes(e.contentWindow.window.location.pathname)){var t=e.contentDocument.querySelector(".zpsigninframe.signin-iframe")||e.contentDocument.querySelector(".zpforgotpasswordframe.signin-iframe"),n=t&&t.contentDocument.body;n&&(t.style.height=n.offsetHeight+"px",n.style.overflow="hidden",t.style.height=n.offsetHeight+"px",new MutationObserver(function(e){t.style.height="",t.style.height=n.offsetHeight+"px"}).observe(n,{attributes:!0,childList:!0,subtree:!0}))}i.handlePublishBtns("1"==e.contentWindow.window.zs_resource_type)},setPreviewMode:function(){var e=$("#previewframe");"desktop_preview"==this.id?(e.style.insetInlineStart="0px",e.style.width="100%"):"ipad_preview"==this.id?(e.style.insetInlineStart="calc((100vw - 768px)/2)",e.style.width="768px"):"mobile_preview"==this.id&&(e.style.insetInlineStart="calc((100vw - 460px)/2)",e.style.width="460px"),function(e){for(var t=$D.getByTag("li",$D.getById("preview_mode")),n=t.length-1;n>=0;n--)$D.removeClass(t[n],"is-selected"),t[n].id===e.id&&$D.addClass(t[n],"is-selected")}(this)}};return p}),function(e,t){"function"==typeof define&&define.amd?define("hbCurrencyFormatter",[],t):"object"==typeof module?module.exports=t():e.formatCurrency=t()}(this,function(){"use strict";function e(e){return"#"===e||"0"===e}return function(t){var n,i,r=!1;void 0===t.val?(i=this.value+"",r=!0):i=t.val+"";var a=function(t){for(var n={precision:0,repeatPart:""},i=!1,r=0,a=t.length;r<a;r++){if(e(t[r]))void 0!==n.groupSeparator||i||(n.repeatPart+="#");else{if(void 0===n.groupSeparator){n.groupSeparator=t[r];continue}t[r]!==n.groupSeparator&&void 0===n.decimalSeparator&&(n.decimalSeparator=t[r]),i=!0}void 0!==n.decimalSeparator&&e(t[r])&&n.precision++}return void 0===n.decimalSeparator&&(n.decimalSeparator=""),n}(n=t.format),o="-"===i.charAt(0);o&&(i=i.substr(1)),n=""!==a.decimalSeparator?n.split(a.decimalSeparator):[n];var s,l=(i=function(e){for(var t=0;"0"===e[t];)t++;return 0!==t&&(e=e.substr(t)),e}(i).toString().split("."))[0].split("").reverse().join(""),d=i[1],u=n[0].split("").reverse().join(""),c=n[1],p=0,m=0,f="",h=(u.length,l.length),g=a.repeatPart;if(!1!==t.with_integer_part)for(;;){switch(s=a.groupSeparator,void 0===u[p]&&(f[0]===s&&(s=""),u=""===u?s+u+g:u+s+g,g.length),u[p]){case"#":case"0":"0"===u[p]&&void 0===l[m]&&(f+="0"),void 0!==l[m]&&(f=l[m]+f,m++);break;default:void 0!==u[p]&&(f=u[p]+f)}if(p++,m>h-1)break}if(!1!==t.with_decimal_separator&&(f+=a.decimalSeparator),void 0===d&&(d=""),!1!==t.with_fractional_part)for(var _=0;_<a.precision;_++)f+=void 0===d[_]?"0"===c[_]?"0":"":d[_];return!1!==t.with_symbol&&(!1===t.symbol_on_left?f+=""+t.symbol:f=t.symbol+""+f),o&&0!==Number(f.replace(t.symbol,""))&&(f="-"+f),!0===t.with_code&&(!0===t.code_on_left?f=t.code+" "+f:f+=" "+t.code),r?(this.value=f,this):f}}),function(e,t){"function"==typeof define&&define.amd?define("commonManifest",t):"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():e.commonManifest=t()}(this,function(){return{font:{size:{values:[{value:"",label:cms_i18n("ui.common.default")},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"16",label:"16"},{value:"18",label:"18"},{value:"20",label:"20"},{value:"22",label:"22"},{value:"24",label:"24"},{value:"26",label:"26"},{value:"28",label:"28"},{value:"30",label:"30"},{value:"32",label:"32"},{value:"36",label:"36"},{value:"40",label:"40"},{value:"48",label:"48"},{value:"56",label:"56"},{value:"64",label:"64"},{value:"72",label:"72"}]}},text_transform:{values:[{value:"none",label:cms_i18n("ui.common.none")},{value:"uppercase",label:cms_i18n("ui.element.styleeditor.typography.uppercase")},{value:"lowercase",label:cms_i18n("ui.element.styleeditor.typography.lowercase")},{value:"capitalize",label:cms_i18n("ui.element.styleeditor.typography.capitalize")}]}}}),function(e,t){"function"==typeof define&&define.amd?define("elementPlugins",["commonManifest"],t):"object"==typeof exports&&"undefined"!=typeof module?module.exports=t:e.elementPlugins=t(commonManifest)}(this,function(e){function t(){}function n(e,t,n,i){var r={type:"attr",sel:".zpelement",attr_name:t,depends:e.prop+".event_type:["+t+"]",custom_func:"elementSettingsHandlers.checkFnName",prop:{error:cms_i18n("ui.element.property.table.width.error"),screen:"jsevents",option_type:"input",label:cms_i18n("ui.element.jsevents.event.label"),placeholder:cms_i18n("ui.element.jsevents.event.placeholder")}};return e.group&&(r.prop.group=e.group),r}var i={PREMIUM_ELEMENTS:"premium_elements",CODESNIPPET:"codeSnippet",SECTION_MENU:"section_menu",SECTION_SHAPER:"section_shaper",AUDIOPLAYER:"audioplayer",NEWSLETTER:"newsletter",ANIMATION:"animation",GALLERY:"Gallery",ADD_HERO_SLIDE:"NumberOfHeroSlides",CSS_JS_EVENTS:"CssAndJsEditor"};t.prototype.setDefSelectors=function(e,t,n){e.forEach(function(e){n[e]=n[e]||t})},t.prototype.exclude=function(e,t){e&&t&&e.forEach(function(e){delete t[e]})};var r=new t;return r.deviceview=function(e){var t=cms_i18n("ui.elementsettings.hideorviewelements");e.message&&(t=e.message);var n=e.screen,i=e.elem_sel,r=e.disable_when?e.disable_when:"",a=e.else_msg_when_disable?e.else_msg_when_disable:"",o=e.dont_need?e.dont_need:[],s=[{value:"desktop",icon:"zs-laptop-view",tooltip:cms_i18n("ui.common.desktop")},{value:"tablet",icon:"zs-tablet-view",tooltip:cms_i18n("ui.common.tablet")},{value:"mobile",icon:"zs-mobile-view",tooltip:cms_i18n("ui.common.mobile")}];o.forEach(function(e){delete s[e]});for(var l=[],d=0,u=0;u<s.length;u++)s[u]&&(l[d++]=s[u]);return{type:"attr",sel:i,stop_here:!0,message:t,insert:!0,disable_when:r,def_val:{desktop:!0,tablet:!0,mobile:!0},prop:{else_msg_when_disable:a,option_type:"checkbox",label:cms_i18n("ui.element.property.style.deviceview"),screen:n,initialise:!0,values:l}}},r.background=function(e){var t=e.prop,n=e.elem_sel,i=e.exclude||[],r=e.sel||{},a=e.def_val||{},o=e.affects_dom_tree||!1,s=e.screen,l=e.group,d=!1!==e.reset;this.setDefSelectors(["video","overlay_color1","overlay_color2","image","color","theme"],n,r);var u=/linear-gradient\(to ([a-zA-Z]+)\s*,\s*(rgba\([^;]*\))\s*,\s*(rgba\([^;]*\))\s*\)/,c={propObject:!0,affects_dom_tree:o,type:{sel:n,type:"attr",attr_name:"data-background-type",def_val:"none",prop:{values:[{label:cms_i18n("ui.common.none"),value:"none"},{label:cms_i18n("ui.content.section.background.type.color"),value:"color"},{label:cms_i18n("ui.content.section.background.type.image"),value:"image"},{label:cms_i18n("ui.content.section.background.type.video"),value:"video"}],label:cms_i18n("ui.element.property.background.type"),group:l,screen:s,option_type:"select"}},theme:{sel:n,type:"class",pattern:/([\w-_]+)-section$/,def_val:"zpdefault",prop:{values:[{label:cms_i18n("ui.common.default"),value:"zpdefault"},{label:cms_i18n("ui.content.section.background.theme.lightfordark"),value:"zpdark"},{label:cms_i18n("ui.content.section.background.theme.darkforlight"),value:"zplight"}],label:cms_i18n("ui.element.property.theme.type"),group:l,screen:s,option_type:"select"}},color:{propObject:!0,background_color:{sel:r.color,type:"attr",depends:t+".type:color",attr_name:"style",def_val:a.color||"#34495E",pattern:/background-color:(.*?);/,prop:{label:cms_i18n("ui.element.property.background.color.select"),group:l,screen:s,option_type:"color"}}},image:{propObject:!0,image_url:{type:"attr",depends:t+".type:image",sel:r.image,attr_name:"style",def_val:a.image||"stock-images://stock-images/images/zpstock-image-08.jpg",pattern:/background-image:[^;]*url\((.*?)\)/,prop:{label:cms_i18n("ui.common.image.change"),group:l,screen:s,preview:!0,option_type:"image"}},image_position:{type:"class",sel:r.image,depends:t+".type:image",pattern:/zpbackground-position-([\w-]+)/,def_val:"center-center",prop:{values:[{value:"left-top",label:cms_i18n("ui.element.property.image.position.lefttop")},{value:"center-top",label:cms_i18n("ui.element.property.image.position.centertop")},{value:"right-top",label:cms_i18n("ui.element.property.image.position.righttop")},{value:"left-center",label:cms_i18n("ui.element.property.image.position.leftcenter")},{value:"center-center",label:cms_i18n("ui.element.property.image.position.centercenter")},{value:"right-center",label:cms_i18n("ui.element.property.image.position.rightcenter")},{value:"left-bottom",label:cms_i18n("ui.element.property.image.position.leftbottom")},{value:"center-bottom",label:cms_i18n("ui.content.element.carousel.arrow.position.bottomcenter")},{value:"right-bottom",label:cms_i18n("ui.element.property.image.position.rightbottom")}],label:cms_i18n("ui.common.position"),group:l,screen:s,option_type:"select"}},image_size:{type:"class",sel:r.image,depends:t+".type:image",pattern:/zpbackground-size-([\w-]+)/,def_val:"cover",prop:{values:[{value:"auto",label:cms_i18n("ui.element.property.image.size.auto")},{value:"cover",label:cms_i18n("ui.element.property.image.size.cover")},{value:"contain",label:cms_i18n("ui.element.property.image.size.contain")}],label:cms_i18n("ui.common.size"),group:l,screen:s,option_type:"select"}},image_align:{type:"class",sel:r.image,depends:t+".type:image",pattern:/zpbackground-repeat-([\w-]+)/,def_val:"all",prop:{values:[{value:"no",label:cms_i18n("ui.element.property.image.size.auto")},{value:"horizontal",label:cms_i18n("ui.common.horizontal")},{value:"vertical",label:cms_i18n("ui.common.vertical")},{value:"all",label:cms_i18n("ui.common.repeat")}],label:cms_i18n("ui.element.property.align"),group:l,screen:s,option_type:"select"}},image_attachment:{type:"class",sel:r.image,depends:t+".type:image",pattern:/zpbackground-attachment-([\w-]+)/,def_val:"scroll",prop:{values:[{value:"fixed",label:cms_i18n("ui.element.property.image.attachment.fixed")},{value:"scroll",label:cms_i18n("ui.element.property.image.attachment.scroll")}],label:cms_i18n("ui.element.property.image.attachment"),screen:s,option_type:"radiotxt"}}},overlay:{propObject:!0,type:{sel:n,type:"attr",depends:t+".type:[image, video]",attr_name:"data-overlay-type",def_val:"none",prop:{values:[{label:cms_i18n("ui.common.none"),value:"none"},{label:cms_i18n("ui.element.property.overlay.type.single"),value:"single"},{label:cms_i18n("ui.element.property.overlay.type.linear"),value:"linear"}],label:cms_i18n("ui.element.property.overlay.type"),group:l,screen:s,option_type:"select"}},direction:{sel:r.overlay,type:"attr",pattern:u,pattern_group:1,depends:t+".overlay.type:linear",attr_name:"style",def_val:"bottom",prop:{values:[{label:cms_i18n("ui.common.left"),value:"left"},{label:cms_i18n("ui.common.right"),value:"right"},{label:cms_i18n("ui.common.bottom"),value:"bottom"},{label:cms_i18n("ui.common.top"),value:"top"}],label:cms_i18n("ui.element.property.overlay.direction"),group:l,screen:s,option_type:"select"}},color_1:{sel:r.overlay||r.overlay_color1,type:"attr",pattern:u,pattern_group:2,depends:t+".overlay.type:^none",attr_name:"style",def_val:a.overlay_color1||"rgba(30,34,45,0.8)",prop:{label:cms_i18n("ui.element.property.overlay.color1"),group:l,screen:s,option_type:"color"}},color_2:{sel:r.overlay||r.overlay_color2,type:"attr",pattern:u,pattern_group:3,depends:t+".overlay.type:linear",attr_name:"style",def_val:a.overlay_color2||"rgba(30,34,45,0.8)",prop:{label:cms_i18n("ui.element.property.overlay.color2"),group:l,screen:s,option_type:"color"}}},video:{propObject:!0,video_url:{type:"attr",sel:r.video,depends:t+".type:video",def_val:a.video||"stock-images://stock-images/videos/zpstock-video-01.mp4",attr_name:"src",prop:{label:cms_i18n("ui.element.property.video.url"),group:l,screen:s,option_type:"video"}},muted:{type:"attr",sel:r.video,attr_name:"muted",def_val:!0,depends:t+".type:video",data_type:"boolean",val_opt:!0,prop:{option_type:"toggle",group:l,screen:s,label:cms_i18n("ui.element.property.video.mute")}},video_loop:{type:"attr",sel:r.video,attr_name:"loop",def_val:!0,data_type:"boolean",depends:t+".type:video",val_opt:!0,prop:{option_type:"toggle",group:l,screen:s,label:cms_i18n("ui.element.property.video.loop")}},autoplay:{type:"attr",sel:r.video,attr_name:"autoplay",def_val:!0,data_type:"boolean",depends:t+".type:video",val_opt:!0,prop:{option_type:"toggle",group:l,screen:s,label:cms_i18n("ui.element.property.video.autoplay")}},video_image_fallback:{type:"attr",sel:".zpvideo-fallback-image",attr_name:"style",depends:t+".type:video",prop:{heading:cms_i18n("ui.element.property.video.fallback.image.heading"),label:cms_i18n("ui.common.image.change"),preview:!0,empty_msg:cms_i18n("ui.element.property.video.fallback.image"),remove:!0,group:l,screen:s,option_type:"image"},message:cms_i18n("ui.element.property.video.fallback.image.note")}},prop:{reset:d}};return d&&(c.prop.screen=s,c.prop.group=l),c.type.prop.values=c.type.prop.values.filter(function(e){return-1===i.indexOf(e.value)}),this.exclude(i,c),c},r.custom_icon_prop=function(e){var t={sel:e.elem_sel,type:"attr",attr_name:"data-custom-icon",data_type:"boolean"};if(e.key){var n={key:e.key,values:{true:"org",false:"md"}};t.affects=n}return t},r.slider_interval=function(e){var t=e.elem_sel,n=e.depends,i=e.style_editor,r={type:"attr",sel:t,attr_name:"data-slider-interval",def_val:"5000",prop:{label:cms_i18n("ui.element.property.hero.slide.sliderinterval"),option_type:"slider_interval",autocomplete:!0,notfoundmsg:!1,input_type:"number",min:1,max:30,step:1,multiple:1e3,style_editor:i,unit:"sec",values:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"}]}};return n&&(r.depends=n),r},r.resize=function(e){var t=e.elem_sel;return{propObject:!0,height:{sel:t,type:"attr",attr_name:"style",pattern:/.*/},width:{sel:t,type:"attr",attr_name:"style",pattern:/.*/}}},r.bg_color=function(e){var t=e.depends,n=e.exclude||[],i=e.message?e.message:"",r={propObject:!0,color:{type:"attr",sel:e.elem_sel,attr_name:"data-button-bg",depends:t,def_val:"",prop:{group:e.title,screen:"styleeditor",label:cms_i18n("ui.element.property.divider.text.bg.color"),option_type:"color"}},color_hover:{type:"attr",sel:e.elem_sel,attr_name:"data-button-bg-hover",depends:t,def_val:"",message:i,prop:{group:e.title,screen:"styleeditor",label:cms_i18n("ui.element.property.color.hover_active"),option_type:"color"}},prop:{reset:!0,group:e.title,screen:"styleeditor"}};cms_i18n("ui.element.styleeditor.background");return this.exclude(n,r),r},r.text_shadow=function(e){var t=e.prop,n=e.elem_sel,i=e.exclude||[],r=e.def_val||{},a=e.screen,o=e.group,s=(e.label,{propObject:!0,enabled:{type:"attr",sel:n,attr_name:"data-text-shadow",data_type:"boolean",depends:e.depends,insert:!0,def_val:r.enabled||!1,prop:{option_type:"toggle",screen:a,group:o,label:cms_i18n("ui.element.property.textshadow.label")}},offset_x:{type:"attr",sel:n,depends:t+".enabled",insert:!0,def_val:r.offset_x||"1",prop:{label:cms_i18n("ui.element.property.offsetx"),option_type:"range",unit:cms_i18n("ui.common.units.px"),min:-50,max:50,group:o,screen:a}},offset_y:{type:"attr",sel:n,depends:t+".enabled",insert:!0,def_val:r.offset_y||"1",prop:{label:cms_i18n("ui.element.property.offsety"),option_type:"range",unit:cms_i18n("ui.common.units.px"),min:-50,max:50,group:o,screen:a}},blur:{type:"attr",sel:n,depends:t+".enabled",insert:!0,def_val:r.blur||"1",prop:{label:cms_i18n("ui.element.property.blur"),option_type:"range",unit:cms_i18n("ui.common.units.px"),min:0,max:100,group:o,screen:a}},color:{type:"attr",sel:n,depends:t+".enabled",insert:!0,def_val:r.color||"#000000",attr_name:"data-text-shadow-color",prop:{option_type:"se_color",group:o,screen:a,width:"50"}}});return this.exclude(i,s),s},r.font=function(t){var n=t.prop,i=t.elem_sel,r=t.exclude||[],a=(t.def_val,t.group),o=t.depends,s=t.screen,l={propObject:!0,family:{type:"class",sel:i,pattern:/zptext-align-([\w-_]+)/,depends:o,affects:{key:n+".weight",dynamic:!0},prop:{values:[],icon:"zs-se-font-family",option_type:"font",group:a,screen:s}},weight:{type:"class",sel:i,pattern:/zptext-weight-([\w-_]+)/,depends:o,prop:{values:[],icon:"zs-se-font-weight",option_type:"fontweight",width:"50",group:a,screen:s}},size:{type:"class",sel:i,pattern:/zptext-size-([\w-_]+)/,depends:o,prop:{option_type:"number_select",values:e.font.size.values,group:a,screen:s,icon:"zs-se-font-size",width:"50",autocomplete:!0,notfoundmsg:!1,input_type:"number",min:8,max:400,step:1,allow_new_value:!0,unit:"px",style_editor:!0}}};return this.exclude(r,l),l},r.shaper_type=function(e){var t=e.type,n=e.svg_color_depends,i=e.svg_change_grad_depends,r=e.svg_stretch_depends,a=e.def_val,o=e.exclude||[],s=new RegExp("^zpshape-divider-"+t+"-hide-mobile$"),l={propObject:!0,position_content:{type:"attr",attr_name:"data-shaper-"+t,depends:"element.shaper.shaper_type:"+t,insert:!0,sel:".zpshape-divider",def_val:a,prop:{label:cms_i18n("ui.element.property.section.shaper.change"),template:"sites:element-html:t_shaper_svg/t_shaper_"+t+"_svg",empty_label:cms_i18n("ui.element.property.section.shaper.set"),highlight:!0,empty_value:"00",group:cms_i18n("ui.element.property.section.shaper"),option_type:"custompicker"}},flip:{type:"class",sel:".zpshape-divider",pattern:/zpshape-divider-flip-([\w-_]+)/,def_val:{left:!1,bottom:!1},insert:!0,depends:"element.shaper."+t+".position_content:^00 && element.shaper.shaper_type:"+t,prop:{values:[{value:"left",icon:"zs-flip-horizontal"},{value:"bottom",icon:"zs-flip-vertical"}],label:"Flip",option_type:"checkbox",size:"small",group:cms_i18n("ui.element.property.section.shaper")}},opacity:{type:"attr",sel:".zpshape-divider-svg",attr_name:"data-svg-wave-opacity",depends:"element.shaper."+t+".position_content:^00 && element.shaper.shaper_type:"+t,def_val:"1",prop:{label:"Transparency",option_type:"number",step:.1,min:0,max:1,group:cms_i18n("ui.element.property.section.shaper")}},svg_color:{type:"attr",sel:".zpshape-divider",attr_name:"data-svg-blob_color",depends:"element.shaper."+t+".position_content:["+n+"] && element.shaper.shaper_type:"+t,def_val:"#009EFB",prop:{label:"Choose color",group:cms_i18n("ui.element.property.section.shaper"),option_type:"color"}},svg_change_gradinet_apply:{sel:".zpshape-divider",type:"attr",attr_name:"data-shaper-"+t+"-color-apply",depends:"element.shaper."+t+".position_content:["+i+"] && element.shaper.shaper_type:"+t,data_type:"boolean",def_val:!1,insert:!0,pattern:/^zpshape-change-grad-to-color$/,prop:{option_type:"toggle",label:"Solid color",group:cms_i18n("ui.element.property.section.shaper")}},svg_change_gradinet_to_color:{type:"attr",sel:".zpshape-divider",attr_name:"data-svg-"+t+"-grad-color",depends:"element.shaper."+t+".svg_change_gradinet_apply",def_val:"#009EFB",prop:{label:"Choose color",option_type:"color",group:cms_i18n("ui.element.property.section.shaper")}},shaper_hide_mobile:{sel:".zpshape-divider",type:"attr",attr_name:"data-shaper-"+t+"-hide-mobile",depends:"element.shaper."+t+".position_content:^00 && element.shaper.shaper_type:"+t,data_type:"boolean",def_val:!0,insert:!0,pattern:s,prop:{option_type:"toggle",label:"Show in small devices",group:cms_i18n("ui.element.property.section.shaper")}},opacity_mobile:{type:"attr",sel:".zpshape-divider-svg",attr_name:"data-svg-"+t+"-mobile-opacity",depends:"element.shaper."+t+".shaper_hide_mobile",def_val:"1",prop:{label:"Transparency in small devices",group:cms_i18n("ui.element.property.section.shaper"),option_type:"number",step:.1,min:0,max:1}},shaper_full_stretch:{sel:".zpshape-divider",type:"attr",attr_name:"data-shaper-"+t+"-stretch",depends:"element.shaper."+t+".position_content:["+r+"] && element.shaper.shaper_type:"+t,data_type:"boolean",def_val:!1,insert:!0,pattern:/^zpshape-divider-common-full-stretch$/,prop:{option_type:"toggle",group:cms_i18n("ui.element.property.section.shaper"),label:"Full stretch"}}};return this.exclude(o,l),l},r.typography=function(e){var t=e.prop,n=e.elem_sel,i=e.exclude||[],a=e.def_val||{},o=e.depends,s=e.group,l=e.screen,d={propObject:!0,font:r.font({elem_sel:n,prop:t+".font",depends:o,group:s,screen:l}),color:{type:"attr",sel:".zptext",attr_name:"data-typo-color",depends:o,prop:{option_type:"se_color",screen:l,group:s,width:"50"}},line_height:{type:"class",sel:n,pattern:/zptext-line-height-([\w-_]+)/,depends:o,prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:s,screen:l,icon:"zs-se-line-height",width:"50"}},letter_spacing:{type:"class",sel:n,pattern:/zptext-letter-spacing-([\w-_]+)/,depends:o,prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:s,screen:l,icon:"zs-se-letter-space",width:"50"}},text_transform:{type:"class",sel:n,insert:!0,depends:o,pattern:/zptext-transofmr-([\w-_]+)/,def_val:a.text_transform,prop:{values:[{value:"none",label:cms_i18n("ui.common.none")},{value:"uppercase",label:cms_i18n("ui.element.styleeditor.typography.uppercase")},{value:"lowercase",label:cms_i18n("ui.element.styleeditor.typography.lowercase")},{value:"capitalize",label:cms_i18n("ui.element.styleeditor.typography.capitalize")}],icon:"zs-se-text-transform",label:cms_i18n("ui.element.property.align"),option_type:"se_select",width:"50",group:s,screen:l}},text_decoration:{type:"class",sel:n,insert:!0,depends:o,pattern:/zptext-transofmr-([\w-_]+)/,def_val:a.text_decoration,prop:{values:[{value:"none",label:cms_i18n("ui.common.none")},{value:"underline",label:cms_i18n("ui.content.element.tabs.outlined.style2")},{value:"overline",label:cms_i18n("ui.element.styleeditor.typography.overline")},{value:"line-through",label:cms_i18n("ui.element.styleeditor.typography.linethrough")},{value:"underline overline",label:cms_i18n("ui.element.styleeditor.typography.underlineoverline")}],icon:"zs-se-text-decoration",option_type:"se_select",width:"50",group:s,screen:l}},color_hover:{type:"attr",sel:".zptext",attr_name:"data-typo-color-hover",depends:o,prop:{label:cms_i18n("ui.element.property.color.hover_active"),option_type:"color",screen:l,group:s,width:"100"}},text_shadow:r.text_shadow({elem_sel:n,prop:t+".text_shadow",depends:o,def_val:a.text_shadow,group:s,screen:l})};return d.prop=d.prop||{},d.prop.reset=!0,d.prop.screen=l,d.prop.group=s,e.label&&(d.prop.label=e.label),e.removePropObject&&delete d.propObject,this.exclude(i,d),d},r.border=function(e){var t=e.prop,n=e.elem_sel,i=e.exclude||[],r=e.def_val||{},a=e.depends,o=e.screen,s=r.width||{},l=r.radius||{},d=e.group,u=e.message?e.message:"",c={propObject:!0,style:{type:"attr",sel:n,insert:!0,depends:a,def_val:r.style,prop:{values:[{value:"none",label:cms_i18n("ui.common.none")},{value:"solid",label:cms_i18n("ui.element.property.style.solid")},{value:"dashed",label:cms_i18n("ui.element.property.style.dashed")},{value:"dotted",label:cms_i18n("ui.element.property.style.dotted")}],pattern:/^zpimage-carousel-slide$/,icon:"zs-se-border-style",label:cms_i18n("ui.element.property.align"),group:d,option_type:"se_select",width:"50",screen:o}},color:{type:"attr",sel:n,insert:!0,def_val:s.color||"#000000",depends:t+".style:[solid,dashed,dotted]",attr_name:"data-border-color",prop:{option_type:"se_color",group:d,screen:o,width:"50"}},color_hover:{type:"attr",sel:n,insert:!0,def_val:"",depends:t+".style:[solid,dashed,dotted]",attr_name:"data-border-color-hover",message:u,prop:{option_type:"color",group:d,screen:o,width:"100",label:cms_i18n("ui.element.property.color.hover_active")}},width:{propObject:!0,even:{type:"attr",sel:n,attr_name:"data-even-border",depends:t+".style:[solid,dashed,dotted]",data_type:"boolean",insert:!0,def_val:!(0==s.even),prop:{option_type:"toggle",group:d,screen:o,label:cms_i18n("ui.element.property.border.width.even")}},even_width:{type:"attr",sel:n,insert:!0,def_val:s.even_width||"1",depends:t+".width.even",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-width",width:"50"}},top:{type:"attr",sel:n,insert:!0,depends:t+".width.even:^",def_val:s.top||"1",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-top-width",width:"50"}},right:{type:"attr",sel:n,insert:!0,depends:t+".width.even:^",def_val:s.right||"1",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-right-width",width:"50"}},bottom:{type:"attr",sel:n,insert:!0,depends:t+".width.even:^",def_val:s.bottom||"1",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-bottom-width",width:"50"}},left:{type:"attr",sel:n,insert:!0,depends:t+".width.even:^",def_val:s.left||"1",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-left-width",width:"50"}}},radius:{propObject:!0,even:{type:"attr",sel:n,attr_name:"data-even-border-radius",data_type:"boolean",insert:!0,def_val:!(0==l.even),prop:{option_type:"toggle",group:d,screen:o,label:cms_i18n("ui.element.property.border.radius.even")}},size:{type:"attr",sel:n,insert:!0,depends:t+".radius.even",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-radius",width:"50"}},top_left:{type:"attr",sel:n,depends:t+".radius.even:^",insert:!0,prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-top-left-radius",width:"50"}},top_right:{type:"attr",sel:n,depends:t+".radius.even:^",insert:!0,prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-top-right-radius",width:"50"}},bottom_left:{type:"attr",sel:n,depends:t+".radius.even:^",insert:!0,prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-bottom-left-radius",width:"50"}},bottom_right:{type:"attr",sel:n,depends:t+".radius.even:^",insert:!0,prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:d,screen:o,icon:"zs-se-border-bottom-right-radius",width:"50"}}},prop:{reset:!0,screen:o,group:d,save:!0}};return this.exclude(i,c),c},r.spacing=function(e){var t=e.prop,n=e.elem_sel,i=e.exclude||[],r=e.def_val||{},a=e.screen,o=r.padding||{},s=r.margin||{},l=e.group,d=void 0===e.resize||e.resize,u={propObject:!0,padding:{propObject:!0,even:{type:"attr",sel:n,attr_name:"data-even-padding",data_type:"boolean",insert:!0,def_val:!(0==o.even),prop:{option_type:"toggle",group:l,screen:a,label:cms_i18n("ui.element.property.border.padding.even")}},size:{type:"attr",sel:n,insert:!0,depends:t+".padding.even",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-padding",width:"50"}},top:{type:"attr",sel:n,insert:!0,depends:t+".padding.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-padding-top",width:"50"}},right:{type:"attr",sel:n,insert:!0,depends:t+".padding.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-padding-right",width:"50"}},bottom:{type:"attr",sel:n,insert:!0,depends:t+".padding.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-padding-bottom",width:"50"}},left:{type:"attr",sel:n,depends:t+".padding.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-padding-left",width:"50"}}},margin:{propObject:!0,even:{type:"attr",sel:n,attr_name:"data-even-margin",data_type:"boolean",insert:!0,def_val:!(0==s.even),prop:{option_type:"toggle",group:l,screen:a,label:cms_i18n("ui.element.property.border.margin.even")}},size:{type:"attr",sel:n,insert:!0,depends:t+".margin.even",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-margin",width:"50"}},top:{type:"attr",sel:n,insert:!0,depends:t+".margin.even:^",prop:{option_type:"se_number",min:-500,max:500,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-margin-top",width:"50"}},right:{type:"attr",sel:n,insert:!0,depends:t+".margin.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-margin-right",width:"50"}},bottom:{type:"attr",sel:n,insert:!0,depends:t+".margin.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-margin-bottom",width:"50"}},left:{type:"attr",sel:n,insert:!0,depends:t+".margin.even:^",prop:{option_type:"se_number",min:0,max:100,error:cms_i18n("ui.element.property.table.width.error"),group:l,screen:a,icon:"zs-se-margin-left",width:"50"}}},prop:{reset:!0,screen:a,group:l,resize:d,save:!0}};return this.exclude(i,u),u},r.box_shadow=function(e){e.prop;var t=e.elem_sel,n=e.exclude||[],i=(e.def_val,[{propObject:!0,color:{type:"attr",sel:t,insert:!0,attr_name:"data-box-shadow-color",prop:{option_type:"se_color",width:"50"}},inset:{type:"attr",sel:t,attr_name:"data-box-shadow-inset",data_type:"boolean",insert:!0,def_val:!1,prop:{option_type:"toggle",width:"50",label:cms_i18n("ui.element.property.boxshadow.inset")}},offset_x:{type:"attr",sel:t,insert:!0,def_val:"0",prop:{label:cms_i18n("ui.element.property.offsetx"),option_type:"range",unit:"px",min:-50,max:50}},offset_y:{type:"attr",sel:t,insert:!0,def_val:"0",prop:{label:cms_i18n("ui.element.property.offsety"),option_type:"range",unit:"px",min:-50,max:50}},blur:{type:"attr",sel:t,insert:!0,def_val:"0",prop:{label:cms_i18n("ui.element.property.blur"),option_type:"range",unit:"px",min:0,max:100}},spread:{type:"attr",sel:t,insert:!0,def_val:"0",prop:{label:cms_i18n("ui.element.property.boxshadow.spread"),option_type:"range",unit:"px",min:-50,max:50}},prop:{add:cms_i18n("ui.element.property.boxshadow.addshadow"),reset:!0,group:e.group,min:1,screen:e.screen,remove:cms_i18n("ui.element.property.boxshadow.removeshadow")}}]);return this.exclude(n,i),i},r.link=function(e){var t=e.def_val||{},n={type:"link",sel:e.elem_sel,href:{def_val:t.href||"javascript:;"},href_identifier:{def_val:t.href_identifier||""},link_type:{def_val:t.type||""},target:{def_val:t.target||""},alt:{def_val:t.alt||""},rel:{def_val:t.rel||""},title:{def_val:t.title||""},download:{def_val:t.download||!1},prop:{group:e.group||cms_i18n("ui.common.link"),subTypes:e.subTypes,option_type:"link"}};return e.depends&&(n.depends=e.depends),this.exclude(e.exclude,n),n},r.animation=function(e){var t=e.def_val||{};return{propObject:!0,name:{type:"attr",sel:e.elem_sel,attr_name:"data-animation-name",def_val:t.href||"",prop:{label:cms_i18n("ui.element.property.animation.type"),option_type:"select",def_val:"",screen:"animation",values:[{value:"",label:cms_i18n("ui.common.none")},{value:"slideInDown",label:cms_i18n("ui.common.slidedown")},{value:"slideInLeft",label:cms_i18n("ui.common.slideleft")},{value:"slideInRight",label:cms_i18n("ui.common.slideright")},{value:"slideInUp",label:cms_i18n("ui.common.slideup")},{value:"bounceIn",label:cms_i18n("ui.element.property.animation.bounceIn")},{value:"bounceInDown",label:cms_i18n("ui.element.property.animation.bounceInDown")},{value:"bounceInLeft",label:cms_i18n("ui.element.property.animation.bounceInLeft")},{value:"bounceInRight",label:cms_i18n("ui.element.property.animation.bounceInRight")},{value:"bounceInUp",label:cms_i18n("ui.element.property.animation.bounceInUp")},{value:"fadeIn",label:cms_i18n("ui.element.property.animation.fadeIn")},{value:"fadeInDown",label:cms_i18n("ui.element.property.animation.fadeInDown")},{value:"fadeInLeft",label:cms_i18n("ui.element.property.animation.fadeInLeft")},{value:"fadeInUp",label:cms_i18n("ui.element.property.animation.fadeInUp")},{value:"fadeInRight",label:cms_i18n("ui.element.property.animation.fadeInRight")}]}},duration:{type:"attr",sel:e.elem_sel,attr_name:"data-animation-duration",def_val:t.title||"",prop:{label:cms_i18n("ui.element.property.animation.duration"),option_type:"select",screen:"animation",values:[{value:"0.5s",label:"0.5s"},{value:"1s",label:"1s"},{value:"1.5s",label:"1.5s"},{value:"2s",label:"2s"},{value:"2.5s",label:"2.5s"},{value:"3s",label:"3s"}]}},repeat:{type:"attr",sel:e.elem_sel,attr_name:"data-animation-repeat",data_type:"boolean",def_val:!1,prop:{option_type:"toggle",label:cms_i18n("ui.element.property.animation.repeat"),screen:"animation"}},previewAnimation:{prop:{option_type:"click_action",onClickFuntion:"previewAnimation",holderType:"button",clickText:cms_i18n("ui.element.property.animation.preview"),screen:"animation",skip_save:!0}}}},r.grid_animation=function(e){e.def_val;return{propObject:!0,grid_animation_name:{type:"attr",sel:e.elem_sel,attr_name:"data-grid-animation-name",depends:e.depends,def_val:"",prop:{values:[{value:"",label:cms_i18n("ui.common.none")},{value:"zoomIn",label:cms_i18n("ui.element.property.gridanimation.zoomIn")},{value:"rollIn",label:cms_i18n("ui.element.property.gridanimation.rollIn")},{value:"flipInX",label:cms_i18n("ui.element.imagecaption.effect.flip-horz")},{value:"flipInY",label:cms_i18n("ui.element.property.animation.flipVertical")},{value:"bounceIn",label:cms_i18n("ui.element.property.animation.bounceIn")},{value:"fadeIn",label:cms_i18n("ui.element.property.animation.fadeIn")},{value:"rotateIn",label:cms_i18n("ui.element.property.gridanimation.rotateIn")},{value:"bounce",label:cms_i18n("ui.element.property.gridanimation.bounce")},{value:"shake",label:cms_i18n("ui.element.property.gridanimation.shake")},{value:"swing",label:cms_i18n("ui.element.property.gridanimation.swing")},{value:"lightSpeedIn",label:cms_i18n("ui.element.property.gridanimation.lightSpeedIn")}],screen:"animation",label:cms_i18n("ui.element.property.animation.type"),option_type:"select"}},grid_animation_timing:{type:"attr",sel:e.elem_sel,attr_name:"data-grid-animation-timing",depends:e.depends,def_val:"same",prop:{values:[{value:"same",label:cms_i18n("ui.element.property.gridanimation.sequence.same")},{value:"linear",label:cms_i18n("ui.element.property.gridanimation.sequence.linear")},{value:"random",label:cms_i18n("ui.element.property.gridanimation.sequence.random")}],screen:"animation",label:cms_i18n("ui.element.property.gridanimation.sequence"),option_type:"select"}},grid_animation_duration:{type:"attr",sel:e.elem_sel,attr_name:"data-grid-animation-duration",depends:e.depends,def_val:"1.5s",prop:{label:cms_i18n("ui.element.property.animation.duration"),option_type:"select",screen:"animation",values:[{value:"0.5s",label:"0.5s"},{value:"1s",label:"1s"},{value:"1.5s",label:"1.5s"},{value:"2s",label:"2s"},{value:"2.5s",label:"2.5s"},{value:"3s",label:"3s"}]}},previewGridAnimation:{prop:{option_type:"click_action",onClickFuntion:"previewGridAnim",holderType:"button",clickText:cms_i18n("ui.element.property.animation.preview"),screen:"animation",skip_save:!0}}}},r.feature_msg=function(e){var t="undefined"!=typeof app?app.data.subscription_url:"",n={screens:{animation:r.keyAndMsg(i.ANIMATION,cms_i18n("ui.upgrade.elementsettings.feature_msg",t,cms_i18n("ui.upgrade.viewplans"))),css:r.keyAndMsg(i.CSS_JS_EVENTS,cms_i18n("ui.upgrade.elementsettings.feature_msg",t,cms_i18n("ui.upgrade.viewplans"))),jsevents:r.keyAndMsg(i.CSS_JS_EVENTS,cms_i18n("ui.upgrade.elementsettings.feature_msg",t,cms_i18n("ui.upgrade.viewplans")))}};if(e){Object.keys(e).forEach(function(t){n.screens[t]=e[t]})}return n},r.keyAndMsg=function(e,t){return{key:e,message:t}},r.featureTabMap=function(e){for(var t,n={},i=0;t=e[i];i++)n[t.key]=t.value;return n},r.sticky=function(e){var t=e.prop,n=(e.elem_sel,e.exclude||[]),i=(e.def_val,{propObject:!0,enable_stickiness:{sel:".zpsticky-enabled",type:"class",data_type:"boolean",def_val:!1,pattern:/^zpsticky-enabled$/,prop:{group:cms_i18n("ui.element.property.sticky"),option_type:"toggle",label:cms_i18n("ui.element.property.sticky.enableStickiness")}},sticky_top_spacing:{sel:".zpsticky-enabled",type:"class",depends:t+".enable_stickiness",pattern:/zpsticky-top-([\w-_]+)/,insert:!0,def_val:"0",prop:{group:cms_i18n("ui.element.property.sticky"),label:cms_i18n("ui.element.property.sticky.topSpacing"),option_type:"se_number",unit:"px",width:"50",min:-250,max:500}},sticky_zindex:{sel:".zpsticky-enabled",type:"class",depends:t+".enable_stickiness",pattern:/zpsticky-zindex-([\w-_]+)/,insert:!0,def_val:"1",prop:{group:cms_i18n("ui.element.property.sticky"),label:cms_i18n("ui.element.property.sticky.zindex"),option_type:"se_number",unit:" ",width:"50",min:1,max:500}},warning_message:{sel:"zpsticky-enabled",viewOnly:!0,prop:{group:cms_i18n("ui.element.property.sticky"),value:cms_i18n("ui.element.property.sticky.message"),msg_type:"info",option_type:"note_message"}}});return this.exclude(n,i),i},r.jsevents=function(e){var t={propObject:!0,event_type:{sel:".zpelement",insert:!0,type:"attr",def_val:"onclick",prop:{label:"Event type",option_type:"select",screen:"jsevents",values:[{value:"onclick",label:"onclick"},{value:"onmouseover",label:"onmouseover"},{value:"onmouseout",label:"onmouseout"},{value:"ondblclick",label:"ondblclick"},{value:"onmouseenter",label:"onmouseenter"},{value:"onmouseleave",label:"onmouseleave"}]}},click_fn:n(e,"onclick"),dblclick_fn:n(e,"ondblclick"),mouseover_fn:n(e,"onmouseover"),mouseout_fn:n(e,"onmouseout"),mouseenter_fn:n(e,"onmouseenter"),mouseleave_fn:n(e,"onmouseleave"),warning_message:{sel:"zpelement",viewOnly:!0,prop:{screen:"jsevents",i18nKey:"ui.element.property.jsevents.message",msg_type:"info",option_type:"note_message"}}};return e.group&&(t.event_type.prop.group=e.group),t},r.filmstrip=function(e){var t=e.prop,n=e.elem_sel,i=e.depends,r=e.exclude||[],a=(e.def_val,{propObject:!0,filmstrip_itemcount:{type:"attr",sel:n,depends:i,attr_name:"data-filmstrip-itemcount",def_val:e.def_val.filmstrip_itemcount,prop:{values:["1","2","3","4","5","6"],label:e.def_val.filmstrip_itemcountlabel,option_type:"select"}},filmstrip_gutter:{type:"attr",sel:n,attr_name:"data-grid__gutter",depends:i,def_val:e.def_val.filmstrip_gutter,prop:{values:e.def_val.filmstrip_gutter_value,label:e.def_val.filmstrip_gutterlabel,option_type:"select"}},filmstrip_title:{type:"class",sel:".zpfilmstrip-title",pattern:/filmstrip-title-([\w-_]+)/,data_type:"boolean",depends:i,def_val:e.def_val.filmstrip_title,prop:{option_type:"toggle",label:cms_i18n("ui.element.property.menu.heading.toggle")}},filmstrip_viewall_button:{type:"class",sel:".zpfilmstrip-title",data_type:"boolean",depends:i,def_val:e.def_val.filmstrip_viewall_button,prop:{option_type:"toggle",label:cms_i18n("ui.element.property.filmstrip.viewall_button")}},filmstrip_arrow_position:{type:"class",sel:".zpcarousel-container",pattern:/zpcarousel-style-([\w-_]+)/,depends:i,def_val:e.def_val.filmstrip_arrow_position,prop:{values:[{value:"05",label:cms_i18n("ui.common.top")},{value:"01",label:cms_i18n("ui.content.element.carousel.arrow.position.middle")},{value:"04",label:cms_i18n("ui.common.bottom")}],label:cms_i18n("ui.element.property.carousel.arrow.position"),option_type:"select"}},filmstrip_arrow_outward:{type:"class",sel:".zpfilmstrip-title",data_type:"boolean",depends:t+".filmstrip_arrow_position:[01]",def_val:e.def_val.filmstrip_arrow_outward,prop:{option_type:"toggle",label:cms_i18n("ui.element.property.filmstrip.arrow_outward")}},filmstrip_title_align:{type:"class",sel:".zpfilmstrip-title-container",pattern:/zpfilmstrip-title-style-([\w-_]+)/,depends:t+".filmstrip_title && "+t+".filmstrip_arrow_position:[05]",def_val:e.def_val.filmstrip_title_align,prop:{values:[{value:"01",label:cms_i18n("ui.element.property.style.one")},{value:"02",label:cms_i18n("ui.element.property.style.two")},{value:"03",label:cms_i18n("ui.element.property.style.three")},{value:"04",label:cms_i18n("ui.element.property.style.four")}],label:cms_i18n("ui.element.property.style.heading.align"),option_type:"select"}},filmstrip_arrow_type:{type:"class",sel:".zpcarousel-arrows-container",pattern:/zpcarousel-arrow-type-([\w-_]+)/,depends:i,def_val:e.def_val.filmstrip_arrow_type,prop:{values:[{value:"01",icon:"zs-icon-style-carousel-none"},{value:"02",icon:"zs-icon-style-carousel-circle"},{value:"03",icon:"zs-icon-style-carousel-square"}],label:cms_i18n("ui.element.property.carousel.arrow.type"),option_type:"radio"}},filmstrip_arrow_style:{type:"attr",sel:".zpcarousel-arrows-container",attr_name:"data-arrow-style",depends:i,def_val:e.def_val.filmstrip_arrow_style,prop:{values:[{value:"1",icon:"zs-icon-style-chevron"},{value:"2",icon:"zs-icon-long-arrow"},{value:"3",icon:"zs-icon-style-dobule-arrow"},{value:"4",icon:"zs-icon-style-caret"}],label:cms_i18n("ui.element.property.style.arrow"),option_type:"radio"}}});return this.exclude(r,a),a},{PLUGIN:r,FEATURE_MSG:i}}),function(e,t){"function"==typeof define&&define.amd&&"undefined"==typeof zs_rendering_mode?define("appManifest",["elementPlugins"],t):"object"==typeof exports&&"undefined"!=typeof module?module.exports=t:e.app_manifest=t(elementPlugins)}(this,function(e){"use strict";var t=e.PLUGIN,n=(this||("undefined"!=typeof window?window:global)).cms_i18n||function(){return""};return{commentbox:{label:"Comment Box",version:"1.0.0",module:"CommentBox",options:{multiple_instance:!1,allowed_containers:["page"],multiple_sub_type:{allowed:!1}},assets:{js:{builder:"commentbox/commentbox_builder.js",site:"commentbox/commentbox_site.js"},css:["commentbox/comment-box.scss","forms.scss"]},model:{elementId:{type:"data-element-id"},element:{commentingtoggle:{def_val:!1,data_type:"boolean",prop:{label:"Turn off commenting",option_type:"toggle"}}}},settings:{actions:{cbAppState:{values:[{id:"cbState",methods:{cbSettings:{label:"Save",method:"saveCBAppSettings",type:"primary"}}}]}}}},creator_form:{label:"Form",version:"1.0.0",module:"CreatorForms",options:{multiple_sub_type:{allowed:!1,message:n("ui.forms.add.formexists")}},assets:{js:{builder:"forms/form_drop.js",site:["forms/form_render.js","datepicker.js"]},css:"forms.scss",css_rtl:"forms-rtl.scss"},settings:{actions:{formSettings:{values:[{id:"formDataSettings",methods:{form:{label:n("ui.settings.forms"),method:"openFormSettings",type:"primary"}}}],message:n("ui.forms.message")},setupFormSettings:{values:[{id:"setupForm",methods:{form:{label:n("ui.forms.setup"),method:"setupForm",type:"primary"}}}],message:n("ui.forms.setup.message")}}},model:{elementId:{type:"data-element-id"},element:{width:{sel:".zpelem-creator",def_val:"100",prop:{option_type:"se_number",min:0,max:100,unit:"%",label:n("ui.common.width"),width:"50"}},height:{sel:".zpelem-creator",def_val:"500",prop:{option_type:"se_number",min:0,label:n("ui.common.height"),max:2e3,width:"50"}}}}},partnerapp:{label:"Partner App",version:"1.0.0",module:"PartnerApp",assets:{js:{builder:"partnerapp/partner_drop.js",site:["partnerapp/partner_render.js"]}},iscustomsettings:!0,model:{elementId:{type:"data-element-id"},element:{}}},crm_form:{label:"CRM Form",version:"1.0.0",module:"CrmForms",assets:{js:{builder:"crmforms/crmFormCreation.js",site:["crmforms/crmform_render.js","datepicker.js"]},css:"forms.scss",css_rtl:"forms-rtl.scss"},settings:{actions:{Reload:{values:[{id:"formReload",methods:{reloadFn:{label:n("ui.elementsettings.crm.reloadform.label"),method:"reloadForm",type:"primary"}}}]},ThankYouPage:{values:[{id:"thankYouPage",methods:{setThankYouFn:{label:n("ui.elementsettings.crm.setthankyou.label"),method:"openSetThankYouDialog",type:"primary"}}}],message:n("ui.crm.setthankyou.message",n("ui.feature.crm_form.name"))}}},model:{elementId:{type:"data-element-id"},element:{warning_message:{prop:{msg_type:"warning",option_type:"note_message",value:n("ui.common.note.withcolon")+" "+n("ui.crm.warning.message",n("ui.feature.crm_form.name"))}}}}},bigin_form:{label:"Bigin Form",version:"1.0.0",module:"CrmForms",assets:{js:{builder:"crmforms/crmFormCreation.js",site:["crmforms/crmform_render.js","datepicker.js"]},css:"forms.scss",css_rtl:"forms-rtl.scss"},settings:{actions:{Reload:{values:[{id:"formReload",methods:{reloadFn:{label:n("ui.elementsettings.crm.reloadform.label"),method:"reloadForm",type:"primary"}}}]},ThankYouPage:{values:[{id:"thankYouPage",methods:{setThankYouFn:{label:n("ui.elementsettings.crm.setthankyou.label"),method:"openSetThankYouDialog",type:"primary"}}}],message:n("ui.crm.setthankyou.message",n("ui.common.bigin"))}}},model:{elementId:{type:"data-element-id"}}},recommendationengine:{label:"Recommendation Engine",version:"1.0.0",serviceType:"ecommerce",module:"Recommendationengine",assets:{js:{site:"recommendationengine/recommendationengine.js"},css:""}},social_share:{label:n("ui.feature.social_share.name"),version:"1.0.0",module:"socialShare",assets:{js:{builder:"socialShare/socialShareBuilder.js",site:"socialShare/socialShareSite.js"},css:"socialShare/socialShare.scss",css_rtl:"socialShare/socialShare-rtl.scss"},settings:{actions:{globalSettings:{values:[{id:"socialShareSettings",methods:{global:{label:n("ui.settings.socialshare.socialsharesettings"),method:"openSettings",type:"primary"}}}]}}},model:{elementId:{type:"data-element-id"},element:{halign:{attr:"data-halign",def_val:"left",prop:{values:[{value:"left",icon:"zs-left-align"},{value:"center",icon:"zs-center-align"},{value:"right",icon:"zs-right-align"}],label:n("ui.elementsettings.socialshare.Icon.align"),option_type:"radio"}},count:{def_val:!1},align:{attr:"data-align",def_val:"top"},style:{attr:"data-style",def_val:"01",prop:{values:[{value:"01",label:n("ui.common.default")},{value:"03",label:n("ui.common.icon.withname")},{value:"05",label:n("ui.common.icon")},{value:"06",label:n("ui.common.black")},{value:"07",label:n("ui.common.white")}],datasource:!0,label:n("ui.common.style"),option_type:"select"}}}}},dcapp:{label:"Dynamic Content",version:"1.0.0",module:"dcapp",assets:{js:{builder:"dynamiccontent/dc_drop.js",site:"dynamiccontent/dc_render.js"}},settings:{actions:{dcappSettings:{values:[{id:"dcappEditSettings",methods:{dcapp:{label:n("ui.common.edit"),method:"openDcEditor",type:"primary"}}},{id:"publishDc",methods:{publishDc:{label:n("ui.feature.publish.name"),method:"publishDC",type:"primary"}}}]}}},model:{elementId:{type:"data-element-id"},element:{dc_label:{attr:"data-dc-label",prop:{option_type:"custom_label"}},"dc-default-view":{attr:"data-dc-default-view",def_val:"main",prop:{values:[],label:"Load view",option_type:"select"}}}}},blogs:{label:n("ui.settings.blogs.preferences"),version:"1.0.0",module:"blogs",containerApp:!0,assets:{js:{builder:"blogs/blogs.js"}},settings:{actions:{Blog_new_post:{values:[{id:"addNewPost",methods:{addNewPost:{label:n("ui.settings.blogs.posts.addpost"),method:"addNewPost",type:"primary"}}}]},Blog_Settings:{values:[{id:"blogSettings",methods:{blogSettings:{label:n("ui.settings.blogs.preferences"),method:"blogSettings",type:"primary"}}}]},Upgrade_Settings:{values:[{id:"upgradeSettings",methods:{upgradeSettings:{label:n("ui.upgrade.viewplans"),method:"upgradeSettings",type:"primary"}}}],message:n("ui.upgrade.message")}}},model:{elementId:{type:"data-element-id"},element:{}}},blogpost:{label:n("ui.common.post.preferences"),version:"1.0.0",module:"blogpost",containerApp:!0,assets:{js:{builder:"blogPost/blogpost.js"}},settings:{actions:{BlogPost:{values:[{id:"publishPost",methods:{publishPost:{label:n("ui.common.post.publish"),method:"publishPost",type:"primary"},updatePost:{label:n("ui.common.post.update"),method:"publishPost",type:"primary"},schedulePost:{label:n("ui.settings.blogs.posts.schedule"),method:"publishPost",type:"primary"}}},{id:"saveDraft",methods:{saveDraft:{label:n("ui.settings.blogs.post.save"),method:"saveDraft",type:"primary"}}}],group:"footer"},Upgrade_Settings:{values:[{id:"upgradeSettings",methods:{upgradeSettings:{label:n("ui.upgrade.viewplans"),method:"upgradeSettings",type:"primary"}}}],message:n("ui.upgrade.message")}}},model:{elementId:{type:"data-element-id"},element:{url:{type:"innerHTML",sel:".zpPost_Url",prop:{option_type:"input",label:n("ui.settings.blogs.post.url"),error:!0}},category:{type:"Category",sel:".zpCategory",def_val:"",prop:{values:[],label:n("ui.common.category"),option_type:"select",add_option:n("ui.common.category.add")}},tags:{type:"innerHTML",sel:".zpTag",prop:{values:[],label:n("ui.common.tags"),option_type:"tags"}},closeComments:{def_val:!1,data_type:"boolean",sel:".zpClose-comments",prop:{label:n("ui.settings.blogs.post.comment"),option_type:"toggle"}},user_summary:{type:"innerHTML",sel:".zpPost_summary",prop:{option_type:"textarea",label:n("ui.settings.blogs.post.summary"),placeholder:n("ui.settings.blogs.post.summary.defaulttext"),error:!0}},ScheduledPost:{def_val:!1,type:"attr",data_type:"boolean",sel:".zpscheduled-post",prop:{label:n("ui.settings.blogs.posts.schedule"),option_type:"toggle"}},scheduleDate:{type:"attr",sel:".zpscheduled-post",data_type:"datetime",depends:"element.ScheduledPost",prop:{label:n("ui.settings.blogs.post.datetime"),option_type:"datetime",disable_old_dates:!0,disable_new_dates:!1}},publishTime:{type:"attr",data_type:"datetime",sel:".zppublishedtime-post",prop:{label:n("ui.settings.blogs.post.publishtime"),option_type:"datetime",disable_old_dates:!1,disable_new_dates:!0}},coverimage:{type:"image",sel:".zpimage",prop:{label:n("ui.common.image.change"),preview:!0,empty_msg:n("ui.settings.blogs.post.coverimage"),remove:!0,option_type:"image"}}}}},blog_comments:{label:n("ui.content.element.blog_comments"),version:"1.0.0",module:"blog_comments",assets:{js:{site:"blogComments/blogCommentsSite.js"}}},server_entities_comments:{label:n("ui.content.element.server_entities_comments"),version:"1.0.0",serviceType:"ecommerce",module:"server_entities_comments",assets:{js:{site:"serverEntitiesComments/serverEntitiesComments.js"}}},product_review:{label:n("ui.content.element.product_review"),version:"1.0.0",serviceType:"ecommerce",module:"product_review",assets:{js:{site:"product_review/product_review.js"}}},search_products:{label:n("ui.content.element.server_entities_comments"),version:"1.0.0",serviceType:"ecommerce",module:"search_products",assets:{js:{site:"search_products/search_products.js"}}},search:{label:n("ui.common.search"),version:"1.0.0",module:"search",assets:{js:{site:"search/search.js"}}},product_coupons:{label:n("ui.content.element.product_coupons"),version:"1.0.0",serviceType:"ecommerce",module:"product_coupons",assets:{js:{site:"product_coupons/product_coupons.js"}}},menu_app:{label:n("ui.feature.multiple_menu.name"),version:"1.0.0",module:"menu_app",feature_msg:{key:"menu_app",message:n("ui.upgrade.elementsettings.feature_msg")},options:{allowed_containers:["page","sidebar","footer","banner"]},assets:{js:{builder:"menu/menu_builder.js",site:"menu/menu_site.js"},css:"menu/menuApp.scss",css_rtl:"menu/menuApp-rtl.scss"},settings:{actions:{globalSettings:{values:[{id:"menuSettings",methods:{open_menu:{label:n("ui.element.property.menu.link.label"),method:"openMenuSettings",type:"primary"}}}]}}},model:{elementId:{type:"data-element-id"},element:{align:{attr:"data-align",def_val:"left",prop:{values:[{value:"left",icon:"zs-left-align"},{value:"center",icon:"zs-center-align"},{value:"right",icon:"zs-right-align"}],label:n("ui.element.property.align"),option_type:"radio"}},type:{attr:"data-type",def_val:"horizontal",prop:{values:[{value:"horizontal",label:n("ui.common.horizontal")},{value:"vertical",label:n("ui.common.vertical")}],label:n("ui.element.property.type"),option_type:"select"}},horizontal_style:{attr:"data-horizontal_style",def_val:"none",depends:"element.type:horizontal",prop:{values:[{value:"none",icon:"zs-icon-style-none"},{value:"01",icon:"zs-link-circle"},{value:"02",icon:"zs-link-dash"},{value:"03",icon:"zs-link-line"},{value:"04",icon:"zs-link-slash"}],label:n("ui.element.property.horizontal.style"),option_type:"radio"}},vertical_style:{attr:"data-vertical_style",def_val:"none",depends:"element.type:vertical",prop:{values:[{value:"none",icon:"zs-icon-style-none"},{value:"01",icon:"zs-link-circle"},{value:"02",icon:"zs-link-arrow"},{value:"03",icon:"zs-link-chevron"},{value:"04",icon:"zs-link-tick"},{value:"05",icon:"zs-link-linearrow"}],label:n("ui.element.property.vertical.style"),option_type:"radio"}},heading_toggle:{attr:"data-heading_toggle",def_val:!0,data_type:"boolean",prop:{label:n("ui.element.property.menu.heading.toggle"),option_type:"toggle"}},tag:{attr:"data-tag",def_val:"h4",depends:"element.heading_toggle",prop:{values:[{value:"h1",label:n("ui.element.property.heading1")},{value:"h2",label:n("ui.element.property.heading2")},{value:"h3",label:n("ui.element.property.heading3")},{value:"h4",label:n("ui.element.property.heading4")},{value:"h5",label:n("ui.element.property.heading5")},{value:"h6",label:n("ui.element.property.heading6")}],label:n("ui.common.tag"),option_type:"select"}},hide_submenu_toggle:{attr:"data-hide_submenu_toggle",def_val:!0,data_type:"boolean",prop:{label:n("ui.element.property.menu.submenu.toggle"),option_type:"toggle"}},menu_label:{type:"innerHTML",sel:".zplink-heading",depends:"element.heading_toggle",def_val:n("ui.element.property.menu.defaulttext"),prop:{option_type:"input",label:n("ui.element.property.menu.label")}}}}},datepicker_app:{label:"datepicker APP",version:"1.0.0",serviceType:"ecommerce",module:"",assets:{js:{site:"datepicker.js"},css:""}},instagram:{label:n("ui.common.instagram"),version:"1.0.0",module:"Socialfeed",assets:{js:{builder:"socialfeed/socialfeed.js",site:["socialfeed/socialfeed_render.js"]}},settings:{actions:{connectSettings:{values:[{id:"connectDataSettings",methods:{connect:{label:n("ui.app.socialfeed.connect.instagram"),method:"invokeConnect",type:"primary"}}}],place:"top"},reloadSettings:{values:[{id:"reload",methods:{reload:{label:n("ui.app.socialfeed.instagram.refresh"),method:"reloadInstagram",type:"primary"}}}]},disconnectSettings:{values:[{id:"disconnect",methods:{disconnect:{label:n("ui.app.socialfeed.remove.instagram"),method:"disconnect",type:"danger-outline"}}}]}}},model:{elementId:{type:"data-element-id"},element:{apid:{type:"attr",attr_name:"data-apid",prop:{values:["0","1","2","3","4","5"],label:n("ui.common.account"),option_type:"select"}},gallery_type:{type:"attr",attr_name:"data-gallery_type",def_val:"1",prop:{values:[{value:"1",label:n("ui.element.property.gallery.style.square")},{value:"2",label:n("ui.element.property.gallery.style.rectangle")}],label:n("ui.element.property.gallery.style"),option_type:"select",group:n("ui.common.settings")}},grid_gutter:{type:"attr",attr_name:"data-grid_gutter",def_val:"1",prop:{values:["0","1","2","3","4","5"],label:n("ui.element.property.gallery.image.spacing"),option_type:"select",group:n("ui.common.settings")}},number_of_posts:{type:"attr",attr_name:"data-number_of_posts",def_val:"50",prop:{values:["25","50","75","100"],label:n("ui.app.socialfeed.numberofposts"),option_type:"number_select",max:100,min:1,input_type:"number",autocomplete:!1,unit:!1,group:n("ui.common.settings")}},is_link_enabled:{type:"attr",attr_name:"data-is_link_enabled",data_type:"boolean",def_val:!0,message:n("ui.app.socialfeed.linktointsa.help"),prop:{option_type:"toggle",label:n("ui.app.socialfeed.linktointsa"),group:n("ui.common.settings")}},captions:{type:"attr",attr_name:"data-captions",data_type:"boolean",def_val:!1,prop:{option_type:"toggle",label:n("ui.common.caption"),group:n("ui.common.caption")}},caption_align:{type:"attr",attr_name:"data-caption_align",def_val:"center",depends:"element.captions",system_prop:!0,sel:".zpapp",prop:{values:[{value:"start",icon:"zs-left-align"},{value:"center",icon:"zs-center-align"},{value:"end",icon:"zs-right-align"}],label:n("ui.element.property.align"),option_type:"radio",group:n("ui.common.caption")}},caption_style:{type:"attr",attr_name:"data-caption_style",depends:"element.captions",def_val:"hv-9",prop:{group:n("ui.common.caption"),values:[{value:"hv-9",label:n("ui.common.default")},{value:"hv-1",label:n("ui.element.property.style.1")},{value:"hv-2",label:n("ui.element.property.style.2")},{value:"hv-4",label:n("ui.element.property.style.4")},{value:"hv-5",label:n("ui.element.property.style.5")},{value:"hv-6",label:n("ui.element.property.style.6")},{value:"hv-7",label:n("ui.element.property.style.7")},{value:"hv-8",label:n("ui.element.property.style.8")}],label:n("ui.element.property.gallery.captionstyle"),option_type:"select"}},caption_bg:{type:"attr",attr_name:"data-caption_bg",depends:"element.captions",def_val:"",sel:".zpapp",prop:{label:n("ui.element.styleeditor.caption.background"),option_type:"color",group:n("ui.common.caption")},system_prop:!0},lightbox_theme:{type:"attr",attr_name:"data-lightbox_theme",def_val:"dark",depends:"element.is_link_enabled:^",prop:{values:[{value:"dark",label:n("ui.element.property.theme.type.dark")},{value:"light",label:n("ui.element.property.theme.type.light")}],label:n("ui.element.property.lightbox.theme"),option_type:"select",accordion:n("ui.element.property.lightbox.lightboxgroup"),group:n("ui.common.settings")}},lightbox_caption:{type:"attr",attr_name:"data-lightbox_caption",data_type:"boolean",def_val:!1,depends:"element.is_link_enabled:^",prop:{option_type:"toggle",label:n("ui.element.property.lightbox.lightbox.caption"),accordion:n("ui.element.property.lightbox.lightboxgroup"),group:n("ui.common.settings")}},style_typography:{label:n("ui.element.styleeditor.caption.typography"),type:"accordion",items:{typography:t.typography({elem_sel:".zpelem-text",prop:"element.typography",group:n("ui.common.caption"),depends:"element.captions",exclude:["color_hover"]})}}}}},youtube:{label:n("ui.common.youtube"),version:"1.0.0",module:"Socialfeed",assets:{js:{builder:"socialfeed/socialfeed.js",site:["socialfeed/socialfeed_render.js"]}},settings:{actions:{connectSettings:{values:[{id:"connectDataSettings",methods:{connect:{label:n("ui.app.socialfeed.youtube.connect"),method:"invokeConnect",type:"primary"}}}],place:"top"},reloadSettings:{values:[{id:"reload",methods:{reload:{label:n("ui.app.socialfeed.instagram.refresh"),method:"reloadInstagram",type:"primary"}}}]}}},model:{elementId:{type:"data-element-id"},element:{apid:{type:"attr",attr_name:"data-apid",prop:{values:["0","1","2","3","4","5"],label:n("ui.app.socialfeed.youtube.choose"),option_type:"select"}},gallery_type:{type:"attr",attr_name:"data-gallery_type",def_val:"1",prop:{values:[{value:"1",label:n("ui.element.property.gallery.style.square")},{value:"2",label:n("ui.element.property.gallery.style.rectangle")}],label:n("ui.element.property.gallery.style"),option_type:"select",group:n("ui.common.settings")}},grid_gutter:{type:"attr",attr_name:"data-grid_gutter",def_val:"1",prop:{values:["0","1","2","3","4","5"],label:n("ui.element.property.gallery.image.spacing"),option_type:"select",group:n("ui.common.settings")}},number_of_posts:{type:"attr",attr_name:"data-number_of_posts",def_val:"50",prop:{values:["25","50","75","100"],label:n("ui.app.socialfeed.numberofposts"),option_type:"number_select",max:100,min:1,input_type:"number",autocomplete:!1,unit:!1,group:n("ui.common.settings")}},is_link_enabled:{type:"attr",attr_name:"data-is_link_enabled",data_type:"boolean",def_val:!0,message:n("ui.app.socialfeed.linktoyoutube.help"),prop:{option_type:"toggle",label:n("ui.app.socialfeed.linktoyoutube"),group:n("ui.common.settings")}},captions:{type:"attr",attr_name:"data-captions",data_type:"boolean",def_val:!0,prop:{accordion:n("ui.common.caption"),option_type:"toggle",label:n("ui.common.caption"),group:n("ui.common.settings")}},caption_align:{type:"attr",attr_name:"data-caption_align",def_val:"left",depends:"element.captions",system_prop:!0,sel:".zpapp",prop:{accordion:n("ui.common.caption"),values:[{value:"left",icon:"zs-left-align"},{value:"center",icon:"zs-center-align"},{value:"right",icon:"zs-right-align"}],label:n("ui.element.property.align"),option_type:"radio",group:n("ui.common.settings")}},caption_style:{type:"attr",attr_name:"data-caption_style",depends:"element.captions",def_val:"hv-9",prop:{group:n("ui.common.settings"),values:[{value:"hv-9",label:n("ui.common.default")},{value:"hv-1",label:n("ui.element.property.style.1")},{value:"hv-2",label:n("ui.element.property.style.2")},{value:"hv-4",label:n("ui.element.property.style.4")},{value:"hv-5",label:n("ui.element.property.style.5")},{value:"hv-6",label:n("ui.element.property.style.6")},{value:"hv-7",label:n("ui.element.property.style.7")},{value:"hv-8",label:n("ui.element.property.style.8")}],label:n("ui.element.property.gallery.captionstyle"),option_type:"select",accordion:n("ui.common.caption")}},caption_bg:{type:"attr",attr_name:"data-caption_bg",depends:"element.captions",def_val:"",sel:".zpapp",prop:{accordion:n("ui.common.caption"),label:n("ui.element.styleeditor.caption.background"),option_type:"color",group:n("ui.common.settings")},system_prop:!0},typography:{prop:{option_type:"tabs",def_tab:"heading",screen:"styleeditor",accordion:"Typography",style01:"mini_tabs",tabs:{heading:t.typography({elem_sel:".zpimage-heading",removePropObject:!0,label:n("ui.common.heading"),prop:"element.typography.heading"}),paragraph:t.typography({elem_sel:".zpimage-heading",removePropObject:!0,label:n("ui.common.paragraph"),prop:"element.typography.paragraph"})}}}}}}}}),function(e){"function"==typeof define&&define.amd?require(["hbUI"],function(t){t.extend(e.call(null,t.utils,t._,t.KEYCODE,t.NODE_TYPE))}):hbUI.extend(e.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(e,t,n,i){function r(e){if(e.stopPropagation(),$E.unbind(document,"mouseup",a),$E.bind(document,"mouseup",a,{args:this}),$E.bind(window,"blur",a,{args:this}),$D.hasClass(this.btn,"hb-active"))$D.removeClass(this.btn,"hb-active"),hbAnimate(this.content).scaleOut({duration:"0.3s",direction:"down"});else{var t=this.content.attributes;if(t.dropup&&t.dropup.nodeValue&&function(e){return e.getBoundingClientRect().top+e.clientHeight>Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}(this.content)){var n=-(this.btn.offsetHeight+this.content.offsetHeight);this.content.style.insetBlockStart=Number(this.content.style.insetBlockStart.replace("px",""))+n+"px"}left=-this.content.clientWidth/2+this.btn.clientWidth/2+this.btn.offsetLeft,this.content.style.insetInlineStart=left+"px",$D.addClass(this.btn,"hb-active"),hbAnimate(this.content).scaleIn({duration:"0.3s",direction:"down"})}if(t&&t["close-dd"]&&t["close-dd"].nodeValue.includes("mouseleave")){$E.unbind(this.content,"mouseleave",a);var i=this;setTimeout(function(e){$E.bind(i.content,"mouseleave",a,{args:i})},300)}}function a(e,t){if(!($D.hasClass(e.target,"hb-dd-exclude")||e.target.closest&&e.target.closest(".hb-dd-exclude")))if("blur"==e.type)$D.removeClass(t.btn,"hb-active"),hbAnimate(t.content).scaleOut({duration:"0.3s",direction:"down"});else{e.target.closest(".hb-dd-btn")!=t.btn&&($D.removeClass(t.btn,"hb-active"),hbAnimate(t.content).scaleOut({duration:"0s",direction:"down"}))}}return{tag:["hb-dropdown"],init:function(e,t){var n=$D.get(".hb-dd-btn",e),i={btn:n,content:$D.get(".hb-dd-content ",e)};$E.bind(n,"click",r.bind(i))}}}),define("index",["hbDialog","utils","language","notify","csrf","mask","crmplusimpl"],function(e,t,n,i,r,a,o){function s(){var n=JSON.parse(this.responseText);if(n.extra&&n.extra.zohoOneRedirectionUrl)window.location.replace(n.extra.zohoOneRedirectionUrl);else{var i;if(zsData.isLiveServer&&n.extra&&n.extra.salesiq&&(i=n.extra.salesiq.site_id,app.data.ecommerce_server&&function(e){var t=document.createElement("iframe");t.src=zsData.appDomain+"/v1/salesiq?s="+e.site_id+"&t="+e.sign_up_type_id+"&frameorigin="+zsData.appDomain,t.id="salesiq_track",t.setAttribute("style","left:-1000px;top:-1000px;display:none;"),document.head.appendChild(t)}(n.extra.salesiq)),1==(g=n.index_details).is_invited)return app.navigate("/index/acceptInvite"),void a.close();var o=document.getElementById("one-launcher-icon");if(""!=g.oneLauncherUrl&&o){document.getElementById("index-href").href="javascript:;",window.onZDLibraryReady=function(){ZDLibrary.Launcher.init({icon:{element:document.getElementById("h-left"),is_product_icon_available:!0,is_hamburger_available:!1},menuBar:document.getElementById("index-sites-topbar"),csrfName:"csrfp",getCsrfValue:function(){return r.getCSRFToken()}})};var s=document.getElementById("down_arrow-index");$D.css(s,"display",""),o.src=g.oneLauncherUrl,$D.css(o,"display","")}var d,u=decodeURIComponent(document.location.search);if(/designId=ZS[0-9]+/.test(u)&&!app.data.ecommerce_server)if(_)d=window.location.origin+"/index?frameorigin="+app.data.iframe_origin,window.location.href=d;else{d="/v2/createsite?designId="+new URLSearchParams(u).get("designId"),i&&zsData.isLiveServer&&(d+="&site_id="+i),window.location.href=d,a.close()}else app.render({template:"sites_v2:index:t_index_details/zp_indexpagedetails",target:"zp_index_page_details",models:{sites_list:g.index_listing,site_create:g.site_create,app_data:app.data},context:{index:b},callback:function(){!function(n){if(g.index_listing){g.index_listing.my_sites&&l(g.index_listing.my_sites,"owner"),g.index_listing.shared_sites&&l(g.index_listing.shared_sites,"shared"),g.index_listing.group_sites&&l(g.index_listing.group_sites,"group"),g.index_listing.debug_sites&&l(g.index_listing.debug_sites,"debug");var i=g.index_listing.my_sites,r=0;if(i){for(var a=0;a<i.length;a++){var o=i[a];!1===o.cms_site&&(!0,r++)}r==i.length&&(v=!1,app.data.feedback=v,$D.getById("zs-help-container").style.display="none")}else 0!=g.cms_site_count||app.data.ecommerce_server||"true"==localStorage.getItem("v1_annoucement_dialog")||function(t,n){var i=new e.Dialog(n);app.render({template:t,target:i.content,context:{index:b},callback:function(){i.open(),localStorage.setItem("v1_annoucement_dialog",!0)}})}("sites_v2:index:t_annoucement/annoucement_dialog",{dialogClass:"domain-dialog-style zs-v1-annoucement",footer:!1,type:"modals",header:!1,closeBtn:!1,escClose:!1,closeBtn:".zs-dialog-close"})}else if(g.site_create)if(app.data.ecommerce_server)app.render({template:"sites_v2:index:t_index_details/t_index_createsite",target:"zp_index_page_details",models:{app_data:app.data}});else{var s=new URL(app.data.appDomain+"/v2/createsite");""!=app.data.iframe_origin&&"null"!=app.data.iframe_origin&&s.searchParams.append("frameorigin",app.data.iframe_origin),n&&zsData.isLiveServer&&s.searchParams.append("site_id",n);var d=t.mergeParams(window.location.href,s.toString(),["plan"]);s=d||s,window.location.href=s.toString()}else app.render({template:"sites_v2:index:t_index_details/t_index_permission",target:"zp_index_page_details",models:{app_data:app.data},callback:function(){$E.bind($D.getById("user_request_form"),"submit",c)}});if(g.soid_admin){$("#zs-accountusers")&&$D.css($("#zs-accountusers"),"display","");var u=$D.getById("request_count");null!=u&&(g.pending_user_count>0?($D.css(u,"display",""),u.innerText=g.pending_user_count):$D.css(u,"display","none"))}}(i),a.close()},nextRoute:!0});(app.data.ecommerce_server||g.index_listing)&&n.extra&&n.extra.phonebridge_config&&function(e){var t={};t.parts=location.hostname.split("."),t.subdomain=t.parts.shift(),t.uplvldom=t.parts.join("."),t.server="https://phonebridge."+t.uplvldom,void 0!=e.pbDomain&&""!=e.pbDomain&&(t.server=e.pbDomain);var n=document.createElement("script"),i=new XMLHttpRequest;i.open("GET",t.server+"/phonebridge/users/loadJS",!0),i.withCredentials=!0,i.send(null),i.onreadystatechange=function(){4===i.readyState&&(n.src="https:"+i.response,n.onload=function(){PB.jsurl=n.src.substring(0,n.src.lastIndexOf("/")),PB.init(e)},document.head.appendChild(n))}}(n.extra.phonebridge_config)}}function l(e,t){e.forEach(function(e){var n=$D.getById("img_"+t+"_"+e.zsite_id);e.cms_site?n.src="/v1/previewimage/desktop?siteId="+e.zsite_id:0==e.site_type?n.src="/previewImage?siteId="+e.zsite_id+"&size=L":n.src=app.data.assetsUrl+"/images/sites-128.png",n.onerror=function(){if(this.onerror=null,e.cms_site)n.src=app.data.assetsUrl+"/images/sites-128.png";else{var t=n.parentElement;$D.addClass(t,"text-center"),n.src=app.data.assetsUrl+"/images/sites-128.png"}}})}function d(){var e=JSON.parse(this.responseText).decline_transfer;if(e){var t=document.getElementById("transfer_site_"+e);$D.remove(t)}}function u(){var e=JSON.parse(this.responseText),t=e.decline_share||e.TOKEN;if(t){var n=document.getElementById("invite_"+t);$D.remove(n)}}function c(){$X.post({url:app.data.api_url+"/index/users/request",headers:r.getCSRFHeader(),handler:p})}function p(){var e=JSON.parse(this.responseText);"0"==e.status_code?app.render({template:"sites_v2:users:t_user_invitation/t_user_request_success",target:"zp_index_page_details",models:{email_id:e.email_id},context:{index:b}}):(!function(e){e.setAttribute("data-hb-submit","failure"),e.removeAttribute("disabled")}($("#user_request_form_submit")),i(e.status_message?e.status_message:e.developer_message).warning())}function m(){var e=JSON.parse(this.responseText);"0"==e.status_code?e.invalid?app.render({template:"sites_v2:users:t_user_invitation/t_user_request_invalid",target:"zp_index_page_details",context:{index:b}}):app.render({template:"sites_v2:users:t_user_invitation/t_user_invite_handle",target:"zp_index_page_details",context:{index:b}}):i(cms_i18n("ui.common.error")).error()}function f(e){$X.get({url:app.data.api_url+"/index/handleInvite",headers:r.getCSRFHeader(),params:{accept:e},handler:h})}function h(){var e=JSON.parse(this.responseText);"0"===e.status_code?!0===e.status?app.navigate("/index"):app.render({template:"sites_v2:users:t_user_invitation/t_user_invite_decline",target:"zp_index_page_details"}):i(cms_i18n("ui.common.error")).error()}var g,_=!1,v=!0,b={loadIndexDetails:function(){var e=decodeURIComponent(document.location.search),n=app.data.iframe_origin;if(_=!!window.CrmPlusLib&&window.CrmPlusLib.isLoadedinFrame,""!=n&&_){var i=$D.getById("index-topband"),r=$D.getById("index-bottomband");i&&($D.getById("index-topband").style.display="none"),r&&($D.getById("index-bottomband").style.display="none")}_&&(e=app.data.frameorigin_url);var o=$D.getById("back-button");null!=o&&$D.css(o,"display","none");var l={},d=document.referrer;void 0!=d&&""!=d||(d=app.data.appDomain);var u="";u=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mobile")>-1?"Mobile - Android":navigator.userAgent.indexOf("Android")>-1&&-1===navigator.userAgent.indexOf("Mobile")?"Tablet - Android":navigator.userAgent.indexOf("iPad")>-1?"Tablet - iPad":navigator.userAgent.indexOf("iPhone")>-1?"Mobile - iPhone":/webOS|iPod|BlackBerry|IEMobile|MeeGo|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",l.referer=d,l.device=u,l.iframeOrigin=n,l.isLoadedInCrmplusFrame=_;var c;/designId=ZS[0-9]+/.test(e)&&(c=new URLSearchParams(e).get("designId"),l.designId=c);!function(){var e=function(){var e=document.location.href;return new URL(e).searchParams.get("ref_value")}();e?t.setCookie("ZohoMarketingRefValue",encodeURIComponent(e),1):t.delCookie("ZohoMarketingRefValue")}(),a.indexPage(function(){$X.get({url:app.data.api_url+"/index",params:l,handler:s})})},checkInvite:function(){$X.get({url:app.data.api_url+"/index/invite",handler:m})},declineShare:function(){var e=this.id.replace("declineShare_",""),t=""==this.getAttribute("data-cms_site").replace("cms_","")?"/zs-site/api/v0/declineShare":"/contributors/declineShare";$X.get({url:app.data.api_url+t,params:{token:e},handler:u})},declineTransfer:function(){var e=this.id.replace("declineTransfer_","");$X.get({url:app.data.api_url+"/sites/declinetransfer",params:{token:e},handler:d})},acceptInvite:f.bind(null,!0),declineInvite:f.bind(null,!1),requestPermission:c,migrateRequest:function(e){var t=this,n=this.getAttribute("data-site-id");$X.post({url:app.data.api_url+"/migrationrequest",headers:r.getCSRFHeader(),params:{site_id:n},handler:function(){t.style.display="none",$D.getByClass("migration_status",t.parentElement)[0].style.display="block"}})},loadIndexDetailsInNewWindow:function(){var e=!!window.CrmPlusLib&&window.CrmPlusLib.isLoadedinFrame;app.data.iframe_origin&&""!=app.data.iframe_origin&&e&&(window.open("about:blank","_blank").location.href=app.data.appDomain+"/index")},loadMaskOnAccept:function(){a.show()}};return b}),define("subscriptions",["feedback","notify","csrf","confirmDialog","hbDialog","mask","crmplusimpl","asap_widget"],function(e,t,n,i,r,a,o,s){"use strict";function l(){var e=JSON.parse(this.responseText);if(e.subscriptionInfo.site_payment_info){for(var t=e.subscriptionInfo.site_payment_info,n=0,i=0;i<t.length;i++){!1===t[i].cms_site&&n++}n==t.length&&(P=!0,B=!1)}w=e.subscriptionInfo,(Q=w.admin)||(k=w.admin_email_id),R=w.zohoOne,N=!!w.agency_info,function(){var e=w.site_payment_info,t=!0,n=0;e=e.reduce(function(e,t){return t.addons&&t.addons.length>0&&(t.addons=t.addons.filter(function(e){return e.addon_id!=X})),t.addons&&t.addons.length>0?(d(t.addons,t),t.addon_available=!0):t.addon_available=!1,t.paid_site?(e.paid_sites.push(t),n++):t.agency_site?(e.agency_sites.push(t),n++):t.zohoone_site?(e.zohoone_sites.push(t),n++):e.free_sites.push(t),e},{paid_sites:[],free_sites:[],agency_sites:[],zohoone_sites:[]});var i=!1,r=!1;R&&(i=c(w.zoho_one_info),t=0==w.zoho_one_info.available_license);N&&(r=u(w.agency_info),t=t&&0==w.agency_info.available_license);var a=0==e.free_sites.length,o=0==e.paid_sites.length&&0==e.agency_sites.length&&0==e.zohoone_sites.length;if(a&&o)return void(window.location.href="/index");app.render({template:"sites_v2:subscriptions:t_subscriptions/unsubscribed",target:"zp_subscription_details",models:{data:app.data,serviceId:F,paid_sites:e.paid_sites,free_sites:e.free_sites,zohoone_sites:e.zohoone_sites,agency_sites:e.agency_sites,zoho_one_info:i,agency_info:r,subscribed_sites_count:n,unsubscribed_empty:a,subscribed_empty:o,nil_license:t,ASAP_CONSTANT:s.ASAP_CONSTANT,feedback:B},context:{subscriptions:ne,asap_widget:s},callback:m})}()}function d(e,t){if(t.pro_addon_applied=!1,e)for(var n=0;n<e.length;n++){var i=e[n],r=O(i.addon_id);i.addon_desc=cms_i18n("ui.addon."+r+".desc",i.addon_count),i.addon_id==z&&t&&(t.pro_addon_applied=!0)}}function u(e){for(var t=0;e.accountAddons&&t<e.accountAddons.length;t++){var n=e.accountAddons[t],i=O(n.addon_id);if(n.addon_name=cms_i18n("ui.addon."+i+".name"),n.addon_available=n.addon_purchased-n.addon_used,n.addon_id==H){var r=e.accountAddons[0];e.accountAddons[0]=n,e.accountAddons[t]=r,e.available_license=n.addon_purchased-n.addon_used,e.used_license=n.addon_used}else n.addon_id==z?e.pro_addon_remaining=n.addon_purchased-n.addon_used:e.manage_addons=!0}return e}function c(e){e.available_license=e.purchased_license-e.used_license,e.purchased_license-e.used_license<0&&(e.available_license=0);for(var t=0;e.accountAddons&&t<e.accountAddons.length;t++){var n=e.accountAddons[t],i=O(n.addon_id);n.addon_name=cms_i18n("ui.addon."+i+".name"),n.addon_available=n.addon_purchased-n.addon_used}return e}function p(){for(var e=w.site_payment_info,t=[],n=0;n<e.length;n++)e[n].agency_site&&t.push(e[n]);return t}function m(){app.render({template:"common:app_header:t_app_header/t_app_header_dropdown",target:"zs-help-container",models:{data:app.data,ASAP_CONSTANT:s.ASAP_CONSTANT,hide_tour:!0,hide_screen_record:!0},context:{feedback:e,asap_widget:s}}),app.render({template:"common:app_header:t_app_header/t_app_header_userthumbnail_jsp",target:"user-thumbnail-holder",models:{data:app.data},callback:function(){a.close()}})}function f(e){w.agency_info.accountAddons.find(function(e){return e.addon_id==H}).addon_used+=e}function h(e){a.close();var n=JSON.parse(this.responseText);if("0"===n.status_code){var i=n.siteInfo,r=i.site_id;e.use||function(e,t){var n=w.site_payment_info.filter(function(t){return t.site_id==e})[0];t==U?n.zohoone_site=!1:n.agency_site=!1;for(;0<n.addons.length;){var i=n.addons[0];t==U?function(e,t){var n=w.zoho_one_info;if(n&&n.accountAddons)for(var i=0;i<n.accountAddons.length;i++)if(n.accountAddons[i].addon_id==e){n.accountAddons[i].addon_used-=t;break}}(i.addon_id,i.addon_count):function(e,t){var n=w.agency_info;if(n)for(var i=0;i<n.accountAddons.length;i++)if(n.accountAddons[i].addon_id==e){n.accountAddons[i].addon_used-=t;break}}(i.addon_id,i.addon_count),n.addons.splice(0,1)}}(r,e.type);var o=w.site_payment_info.forEach(function(e,t){e.site_id==i.site_id&&(w.site_payment_info[t]=i)});o=i,function(e){var t=$D.getById(e+"_card");if(1==t.parentElement.childElementCount){var n=$D.findParent(t,"list_container");n&&(n.style.display="none")}$D.remove(t)}(r);var s=$D.get('[data-tab="subscribed"]');e.use?(e.type==$?(o.agency_site=!0,f(1),w.agency_info.used_license++,ne.modelObj.subscribed_empty?(ne.modelObj.subscribed_empty=!1,$D.removeClass(s,"display-none"),g({agency_sites:[o],agency_info:u(w.agency_info)})):y(),T()):e.type==U&&(o.zohoone_site=!0,o.addons&&o.addons.length>0&&(o.addons=o.addons.filter(function(e){return e.addon_id!=X})),w.zoho_one_info.used_license++,ne.modelObj.subscribed_empty?(ne.modelObj.subscribed_empty=!1,$D.removeClass(s,"display-none"),g({zohoone_sites:[o],zoho_one_info:c(w.zoho_one_info)})):function(e){$D.getByClass("zohoone_listcontainer")[0].style.display="block",app.view.renderPartial({partial:"sites_v2:subscribed_tab_content.zohooneSites",args:[e,w.zoho_one_info],context:{subscriptions:ne},refEl:$D.getById("zohoone_site_list"),insertType:"append"})}(o),S()),function(){var e=$D.getById("subscribed_sites_count");e&&(e.innerHTML=parseInt(e.innerHTML)+1)}()):(e.type==$?(w.agency_info.used_license--,f(-1),u(w.agency_info),y(),T()):e.type==U&&(w.zoho_one_info.used_license--,c(w.zoho_one_info),S()),w.agency_info&&0!=w.agency_info.used_license||w.zoho_one_info&&0!=w.zoho_one_info.used_license||0!=ne.modelObj.paid_sites.length||(ne.modelObj.subscribed_empty=!0,v(ee.UNSUBSCRIBED),$D.addClass(s,"display-none")),function(){var e=$D.getById("subscribed_sites_count");e&&(e.innerHTML=parseInt(e.innerHTML)-1)}()),function(e){var t=!1,n=!0;w.agency_info&&(t=u(w.agency_info),n=0==w.agency_info.available_license);w.zoho_one_info&&(c(w.zoho_one_info),n=n&&0==w.zoho_one_info.available_license);var i=function(){for(var e=w.site_payment_info,t=[],n=0;n<e.length;n++)e[n].agency_site||e[n].paid_site||e[n].zohoone_site||t.push(e[n]);return t}();$D.getByClass("unsubscribed_title")[0].style.display=i.length>0?"":"none",app.render({template:"sites_v2:subscriptions:t_subscriptions/free_sites",target:$D.getById("free_site_list"),context:{subscriptions:ne},models:{agency_info:t,free_sites:i,nil_license:n,data:app.data,serviceId:F},bindCtx:ne});var r=$D.get("[data-tab="+ee.UNSUBSCRIBED+"]");0==i.length?($D.addClass(r,"display-none"),v(ee.SUBSCRIBED)):e?v(ee.SUBSCRIBED):($D.removeClass(r,"display-none"),v(ee.UNSUBSCRIBED))}(e.use)}else"10011"==n.status_code?(L&&L.dismiss(),_(n.emailId)):t(cms_i18n("ui.common.error")).error();M&&M.close()}function g(e){app.render({template:"sites_v2:subscriptions:t_subscriptions/subscribed_tab_content",target:$D.getById("subscribed_tab"),context:{subscriptions:ne},models:e,bindCtx:ne})}function _(e){var t=cms_i18n("ui.index.subscriptions.modify.license",e=e||"");i.open({dialogClass:"demo-dialog h-info",header:!1,contentMsg:t,confirmIcon:"info",okText:cms_i18n("ui.common.close"),okBtnClass:"none",focus:"cancel",okBtn:!1,cancelText:cms_i18n("ui.common.close")})}function v(e){$D.addClass($D.get("[data-tab="+e+"]"),"is-selected");var t,n={unsubscribed_tab:$D.getById("unsubscribed_tab"),subscribed_tab:$D.getById("subscribed_tab"),agency_tab:$D.getById("agency_tab"),zohoone_tab:$D.getById("zohoone_tab")};$D.getByClass("sites-content")[0].scrollTo(0,0),e==ee.UNSUBSCRIBED?(t=n.unsubscribed_tab,delete n.unsubscribed_tab):e==ee.SUBSCRIBED?(t=n.subscribed_tab,delete n.subscribed_tab):e==ee.AGENCY?(t=n.agency_tab,delete n.agency_tab):e==ee.ZOHO_ONE&&(t=n.zohoone_tab,delete n.zohoone_tab),t&&$D.removeClass(t,"display-none");for(var i in n){$D.addClass(n[i],"display-none");var r=$D.get("[data-tab="+i+"]");r&&$D.removeClass(r,"is-selected")}}function b(e,t){var n=w.site_payment_info.filter(function(t){return t.site_id==e})[0].addons.filter(function(e){return e.addon_id==t});return n[0]&&n[0].addon_count||0}function y(){var e=$D.getById("agency_site_list"),t=$D.getByClass("agency_listcontainer")[0];p().length>0?app.render({template:"sites_v2:subscriptions:t_subscriptions/agency_sites",target:e,context:{subscriptions:ne},models:{data:app.data,serviceId:F,agency_info:u(w.agency_info),agency_sites:p()},bindCtx:ne,callback:function(){t.style.display=""}}):t.style.display="none"}function E(e,t,n){var i=!1,r=!1;e.map(function(e){var t;0==e.addon_associated_type?(t=w.agency_info,i=!0):(t=w.zoho_one_info,r=!0);for(var n=0;n<t.accountAddons.length;n++){t.accountAddons[n].addon_id==e.addon_id&&(t.accountAddons[n]=e)}}),i?(y(),T()):r&&(!function(e,t){app.render({template:"sites_v2:subscriptions:t_subscriptions/zohoone_site_card",target:t,context:{subscriptions:ne},models:{site:e,zoho_one_info:w.zoho_one_info},bindCtx:ne})}(t,n),S())}function T(){app.render({template:"sites_v2:subscriptions:t_subscriptions/agency_info",target:$D.getById("agency_info"),context:{subscriptions:ne},models:{agency_info:u(w.agency_info),serviceId:F,data:app.data},bindCtx:ne})}function S(){app.render({template:"sites_v2:subscriptions:t_subscriptions/zoho_one_info",target:$D.getById("zoho_one_info"),context:{subscriptions:ne},models:{zoho_one_info:c(w.zoho_one_info),serviceId:F},bindCtx:ne})}function x(e){return{119204:1e3,119205:200,119202:1,119208:1,119207:1e3,119215:1,50226:1,119213:1,50225:1,50223:1,50224:1,119209:200,119212:1,119216:1,50227:5,50228:5}[e]}function O(e){var t="";return j.includes(e)?t="pages":G.includes(e)?t="portal":W.includes(e)?t="contributor":z==e?t="pro":H==e?t="sites":Y.includes(e)?t="menus":V.includes(e)?t="megamenu":q.includes(e)?t="seotools":Z.includes(e)?t="subsites":J.includes(e)&&(t="dynamiccontent"),t}function I(e,t){var i=n.getCSRFHeader();i["X-Site-Id"]=e,a.show(),$X.put({url:app.data.api_url+"/subscriptions/addons",headers:i,bodyJSON:{addons:t},args:e,handler:A})}function A(e){a.close();var n=JSON.parse(this.responseText);if("0"===n.status_code){var i=$D.getById(e+"_card"),r=n.result.addons,o=n.result.removed_addon_ids;(r||o)&&function(e,t,n,i){var r,a=w.site_payment_info.filter(function(t){return t.site_id==e});t&&(r=t.reduce(function(e,t){return e[t.addon_id]=t,e},{}),a[0].addon_available=!0);for(var o=0;o<a[0].addons.length;){var s=a[0].addons[o].addon_id;n&&-1!=n.indexOf(s+"")?a[0].addons.splice(o,1):r&&r.hasOwnProperty(s)?(a[0].addons[o]=r[s],delete r[s],o++):o++}var l=r&&Object.keys(r);for(o=0;l&&o<l.length;o++)a[0].addons.push(r[l[o]]);d(a[0].addons,a[0]),i&&i(a[0].addons)}(e,r,o,function(t){var r=function(e){return w.site_payment_info.filter(function(t){return t.site_id==e})[0]}(e);E(n.result.accountAddons,r,i)})}else"10011"==n.status_code?(L&&L.dismiss(),_(n.emailId)):t(cms_i18n("ui.common.error")).error();L&&L.dismiss()}function C(e,t,n){var i=e.getAttribute("data-addon-id");$D.getById(i+"_available").innerHTML=function(e,t,n){var i=x(e),r=n*i-t*i,a=O(e);return cms_i18n("ui.common.balance.with.colon")+" "+cms_i18n("ui.addon."+a+".desc",r)}(Number(i),Number(t),Number(n));var r=$D.getByClass("zp_decrement_btn",e)[0],a=$D.getByClass("zp_increment_btn",e)[0];t>0?$D.removeClass(r,"is-disabled"):$D.addClass(r,"is-disabled"),t==n?$D.addClass(a,"is-disabled"):$D.removeClass(a,"is-disabled")}function D(e){var t=e.target;if(""!=te){var n=$D.getById(te);n.contains(t)||(n.style.display="none",te="")}}$E.bind(window,"message",function(e){event.origin+"/"==app.data.payment_url&&document.location.reload(!0)});var w,R,N,k,L,M,P=!1,B=!0,F=app.data.ecommerce_server?app.data.store_serviceId:app.data.service_id,U="1",$="0",z=119208,H=119203,j=[119205,119209],G=[119201,119204,119207],W=[119202],V=[119214,119215,50226],q=[119211,119213,50225],Y=[50227,50228],X=50210,K=50601,J=[119212,119216],Z=[50223,50224],Q=!1,ee={UNSUBSCRIBED:"unsubscribed_tab",SUBSCRIBED:"subscribed_tab",AGENCY:"agency_tab",ZOHO_ONE:"zohoone_tab"},te="",ne={getSubscriptionInfo:function(){var e=!!window.CrmPlusLib&&window.CrmPlusLib.isLoadedinFrame;if(app.data.iframe_origin&&""!=app.data.iframe_origin&&e)return window.open("about:blank","_blank").location.href=app.data.appDomain+"/subscriptions",void(window.location.href.indexOf("/subscriptions")>-1&&(window.location.href=app.data.appDomain+"/index?frameorigin="+app.data.iframe_origin));a.show(function(){$E.bind(document.body,"click",D),$X.get({url:app.data.api_url+"/subscriptions",handler:l})})},tabClick:function(e){v(e.target.closest(".sites-menuitem").getAttribute("data-tab"))},manageAddons:function(){if(Q){for(var e=this.getAttribute("data-site-id"),t=[],n=this.getAttribute("data-agency")?w.agency_info.accountAddons:w.zoho_one_info.accountAddons,i=0;i<n.length;i++){var o=n[i],s=o.addon_id;if(![H,z,X,K].includes(s)){var l=x(s),d={},u=O(s);d.addon_name=cms_i18n("ui.addon."+u+".name"),1!=l&&(d.addon_notes=cms_i18n("ui.addon.notes",l+" "+cms_i18n("ui.addon."+u+".desc",""))),d.addon_desc=cms_i18n("ui.addon."+u+".desc",o.addon_purchased),d.addon_id=s,d.addon_available=o.addon_purchased-o.addon_used,d.addon_used=b(e,s)/l,[V,q].includes(s)&&(d.addon_available>0&&0==d.addon_used?(d.addon_available=1,d.addon_used=0):0!=d.addon_used&&(d.addon_used=1,d.addon_available=0)),d.addon_available_in_unit=d.addon_available/l,d.addon_available_desc=cms_i18n("ui.common.balance.with.colon")+" "+cms_i18n("ui.addon."+u+".desc",d.addon_available),t.push(d)}}L=new r.Dialog({type:"modals",headingText:cms_i18n("ui.index.subscriptions.manageaddons"),onOk:function(){!function(e){for(var t=$D.getByClass("data-addon"),n=[],i=ne.modelObj.site_id,r=0;r<t.length;r++){var o=t[r],s={};s.id=o.getAttribute("data-addon-id");var l=$D.getByClass("zp_addon_used",o)[0];s.total=l.value*x(s.id),n.push(s)}(n=n.filter(function(t){for(var n=t.total,i=0;i<e.length;i++)if(t.id==e[i].addon_id&&n!=e[i].addon_used*x(e[i].addon_id))return t})).length>0?(a.show(),I(i,n)):L&&L.close()}(t)},onCancel:function(){},dialogClass:"demo-dialog"}),app.render({template:"sites_v2:subscriptions:t_subscriptions/manage_addons",target:L.content,callback:function(){L.open(),a.close()},context:{subscriptions:ne},models:{addons:t,site_id:e},bindCtx:ne})}else _(k)},incrementAddon:function(){var e=this.parentElement,t=$D.getByClass("zp_addon_used",e)[0],n=t.value,i=this.getAttribute("data-max"),r=parseInt(n)+1;r<=i&&(t.value=r,C(e,r,i))},decrementAddon:function(){var e=this.parentElement,t=$D.getByClass("zp_addon_used",e)[0],n=t.value,i=parseInt(n)-1,r=this.getAttribute("data-max");i>=0&&(t.value=i,C(e,i,r))},removeAddon:function(){if(Q){var e=this,t=e.getAttribute("data-addon-id"),r="ui.subscriptions.addons.remove";t==z&&(r="ui.subscriptions.proaddon.remove"),i.open({dialogClass:"demo-dialog",contentMsg:cms_i18n(r),okText:cms_i18n("ui.common.remove"),closeBtn:!0,ok:function(){var i=e.getAttribute("data-site-id");t==z?function(e){a.show();var t=n.getCSRFHeader();t["X-Site-Id"]=e,$X.del({url:app.data.api_url+"/subscriptions/addons",headers:t,args:e,handler:A})}(i):I(i,[{id:t,total:0}])}})}else _(k)},showUpgradeDialog:function(){var e={};if(e.data=app.data,e.zohoone_license_available=w.zoho_one_info?w.zoho_one_info.available_license:0,e.agency_license_available=w.agency_info?w.agency_info.available_license:0,e.site_id=this.getAttribute("data-site-id"),e.cms_version="true"==this.getAttribute("data-cmsversion"),e.cms_version||0!=e.zohoone_license_available){e.serviceId=F;var t="demo-dialog"+(e.zohoone_license_available>0?"med":"");M=new r.Dialog({type:"modals",headingText:cms_i18n("ui.common.upgrade"),footer:!1,dialogClass:t}),app.render({template:"sites_v2:subscriptions:t_subscriptions/subscription_upgrade_dialog",target:M.content,callback:function(){M.open()},context:{subscriptions:ne},models:e,bindCtx:ne})}else window.open("/blockNewPayment","")},addOrRemoveLicense:function(){if(Q){var e,t=this.getAttribute("data-site-id"),i=this.getAttribute("data-license-type"),r="true"==this.getAttribute("data-license-add");i==$?e="/subscriptions/agencyLicense":i==U&&(e="/subscriptions/zohoOneLicense"),a.show();var o=n.getCSRFHeader();o["X-Site-Id"]=t,$X.put({url:app.data.api_url+e,headers:o,bodyJSON:{use_license:r},args:{use:r,type:i},handler:h})}else _(k)},openPopup:function(e){var t=this.getAttribute("data-popup");""==te||te!=t?(""!=te&&($D.getById(te).style.display="none"),te=t,$D.getById(t).style.display="",e.preventDefault(),e.stopPropagation()):($D.getById(t).style.display="none",te="")},applyProAddon:function(){I(this.getAttribute("data-site-id"),[{id:z,total:1}])},inputNumber:function(e){var t=e.target,n=t.parentElement,i=t.value,r=Number(t.getAttribute("max"));i>r?t.value=r:i<Number(t.getAttribute("min"))&&(t.value=Number(t.getAttribute("min"))),C(n,t.value,r)},inputKeyDown:function(e){[187,189,171,173,107,109,69].indexOf(e.keyCode)>-1&&e.preventDefault()}};return ne}),define("users",["hbDialog","utils","language","notify","hbValidate","confirmDialog","csrf","crmplusimpl"],function(e,t,n,i,r,a,o,s){"use strict";function l(e,t){var n=app.data.iframe_origin,i=!!window.CrmPlusLib&&window.CrmPlusLib.isLoadedinFrame;if(""!=n&&i){t.frameorigin===n&&(t=null);var r=$D.getById("index-topband"),a=$D.getById("index-bottomband");r&&($D.getById("index-topband").style.display="none"),a&&($D.getById("index-bottomband").style.display="none")}var o=$("#back-button"),s=$("#zs-accountusers");o&&$D.css(o,"display",""),s&&$D.css(s,"display","none"),$X.get({url:app.data.api_url+"/index/users",handler:function(){var e=JSON.parse(this.responseText);v=e.user_info.user_details,""!=(_=e.user_info.zohoOneRedirectUrl)&&(S=!0),v.forEach(function(e){E[e.user_id]=e.user_sites}),T=!0,t?u(t):$X.get({url:app.data.api_url+"/index/users/pendingUsers",handler:function(){var e=JSON.parse(this.responseText);e.pending_users.forEach(function(e){e.type?y.push(e):b.push(e)}),x=!(0==v.length&&0==b.length),d()}})}})}function d(){x||0!=y.length?app.render({template:"sites_v2:users:t_users_list/t_users_list",target:"zp_index_page_details",models:{user_details:v,user_requests:y,user_invites:b,app_data:app.data},context:{users:O},callback:function(){x&&f(!0)},nextRoute:!0}):app.render({template:"sites_v2:users:t_users_list/t_no_existing_user",target:"zp_index_page_details",context:{users:O},nextRoute:!0})}function u(e){$D.css($("#back-button"),"display",""),$D.css($("#zs-accountusers"),"display","none"),T?app.render({template:"sites_v2:users:t_user_site_list/t_user_site_list",target:"zp_index_page_details",models:{user_id:e,sites_list:E[e],data:app.data},context:{users:O},callback:function(){}}):l(0,e)}function c(e){var t={},n=m();if($(".hb-field-error")[0]&&$D.remove($(".hb-field-error")[0]),0!=n.length)t.requestUserId=m(),t.type=e,$X.put({url:app.data.api_url+"/index/users/handleRequest",headers:o.getCSRFHeader(),bodyJSON:t,handler:p});else{var i=$D.getById("zs-user-list-container");r.showError(i,cms_i18n("ui.index.users.noselection"))}}function p(){var e=JSON.parse(this.responseText);if("0"==e.status_code){var t=e.user_request.userInfos,n=!0===e.user_request.type;n?(x||(x=!0,f(!0)),t.forEach(function(e){$D.remove($("#request_container_"+e.user_id)),E[e.user_id]=e.user_sites,app.view.renderPartial({partial:"sites_v2:t_users_list.usersPartial",args:[e],context:{users:O},refEl:$("#user_container"),insertType:"append"})}),i(cms_i18n("ui.index.users.accept.success",usersCount)).success()):(t.forEach(function(e){$D.remove($("#request_container_"+e.user_id))}),i(cms_i18n("ui.index.users.decline.success",usersCount)).success()),0==$(".zs-user-list-li").length&&(y=[],$D.remove($("#user-request-container")),n||x||d())}else i(cms_i18n("ui.common.error")).error()}function m(){var e=[];return $("#user-request-container").querySelectorAll("input:checked").forEach(function(t){e.push(t.id.replace("request_",""))}),e}function f(e){var t=$("#user_list_container");e?$D.css(t,"display",""):$D.css(t,"display","none")}function h(){0==$(".flex-table-data.more-space").length&&(x=!1,f(!1),d())}var g,_,v=[],b=[],y=[],E={},T=!1,S=!1,x=!0,O={loadUserDetails:l,inviteUser:function(){require(["crmplusimpl"],function(e){S?void 0!==e&&e.isLoadedInCrmplus()?e.trigger("addUser"):window.open(_,"_blank"):app.navigate("/index/users/invite")})},viewSiteDetails:u,acceptRequest:c.bind(null,!0),declineRequest:c.bind(null,!1),loadUserInvite:function(){$D.css($("#back-button"),"display",""),$D.css($("#zs-accountusers"),"display","none"),app.render({template:"sites_v2:users:t_user_invitation/t_user_invite",target:"zp_index_page_details",context:{users:O},models:{user:{}},callback:function(){$E.bind($D.getById("user_invite_form"),"hbValidate:submit",function(t){var n=t.detail.status;"success"===n?function(){var t=O.bindObj.user.user_email;$X.post({url:app.data.api_url+"/index/users/invite",headers:o.getCSRFHeader(),bodyJSON:{email_id:t},handler:function(){var t=JSON.parse(this.responseText);if(0==t.status_code)g=new e.Dialog({dialogClass:"demo-dialog",header:!1,footer:!0,type:"modals",offsetTop:"45px",offsetLeft:"200px",escClose:!0,okBtn:!1,closeBtn:!1,cancelText:"Close",onCancel:function(){app.goBack()}}),app.render({template:"sites_v2:users:t_user_invitation/t_user_invite_success",target:g.content,models:{email_id:O.bindObj.user.user_email},context:{users:O},callback:function(){g.open()}});else{var n=$D.getById("user_email");r.showError(n,t.status_message)}!function(e){e.setAttribute("data-hb-submit","failure"),e.removeAttribute("disabled")}($("#invite_user_button"))}})}():"failure"===n&&$("#invite_user_button").removeAttribute("disabled")})}})},removeUser:function(){var e=this.id.replace("remove_","");a.open({dialogClass:"demo-dialog sites-alert",header:!1,okBtnClass:"mo-error",contentMsg:cms_i18n("ui.index.users.removeUser.info"),okText:cms_i18n("ui.common.remove"),ok:function(){$X.post({url:app.data.api_url+"/index/users/delete",headers:o.getCSRFHeader(),bodyJSON:{userId:e},handler:function(){var e=JSON.parse(this.responseText);0==e.status_code?(i(cms_i18n("ui.common.users.remove.success")).success(),$D.remove($("#user_"+e.user_id)),h()):i(cms_i18n("ui.index.users.removeUser.failure")).error()}})}})},removeInvite:function(){var e=this.id.replace("removeInvite_","");a.open({dialogClass:"demo-dialog sites-alert",header:!1,okBtnClass:"mo-error",contentMsg:cms_i18n("ui.index.users.removeInvite.info"),okText:cms_i18n("ui.common.remove"),ok:function(){$X.post({url:app.data.api_url+"/index/users/deleteInvite",headers:o.getCSRFHeader(),bodyJSON:{userId:e},handler:function(){var e=JSON.parse(this.responseText);"0"==e.status_code?(i(cms_i18n("ui.common.invite.remove.success")).success(),$D.remove($("#user-invite_"+e.user_id)),h()):i(cms_i18n("ui.index.users.removeInvite.failure")).error()}})}})},resendInvite:function(){var e=this.id.replace("resendInvite_","");a.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,contentMsg:cms_i18n("ui.index.users.resendInvite.info"),okText:cms_i18n("ui.index.users.dialog.resend"),confirmIcon:"info",okBtnClass:"none",ok:function(){$X.post({url:app.data.api_url+"/index/users/resendInvite",headers:o.getCSRFHeader(),bodyJSON:{userId:e},handler:function(){"0"==JSON.parse(this.responseText).status_code?i(cms_i18n("ui.index.users.resendInvite.success")).success():i(cms_i18n("ui.common.error")).error()}})}})},removeUserDialog:function(){var e=this.id.replace("remove_",""),t=$("#user_email_"+e).innerText;siteTransfer(t,e)},transferAdmin:function(){var e=this.id.replace("linkMakeAdmin_","");a.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,title:cms_i18n("ui.index.users.dialog.transferadmin.heading"),contentMsg:cms_i18n("ui.index.users.dialog.transferadmin"),okText:cms_i18n("ui.common.change"),okBtnClass:"mo-btn__ok__danger",ok:function(){$X.put({url:app.data.api_url+"/index/users/transferadmin",headers:o.getCSRFHeader(),bodyJSON:{newuserid:e},handler:function(){0==JSON.parse(this.responseText).status_code?(app.navigate("/index"),i(cms_i18n("ui.index.users.transferadmin.success")).success()):function(e){a.open({dialogClass:"demo-dialog sites-alert h-info",header:!1,title:cms_i18n("ui.index.users.dialog.transferadmin.heading"),contentClass:"hb-mo-content-dobuleline",contentMsg:e,okText:cms_i18n("ui.dialog.ok"),cancelBtn:!1,ok:function(){}})}(cms_i18n("ui.index.users.transferadmin.fail"))}})}})},onUsersExit:function(){y=[],b=[]},goBack:function(){app.goBack()}};return O}),define("crmplusimpl",["index","subscriptions","users"],function(e,t,n){var i={handleUIChange:function(){},selectOption:function(e){require(["index","subscriptions"],function(t,n){"mySites"==e?t.loadIndexDetailsInNewWindow():"subscriptions"==e?n.getSubscriptionInfo():"accountsUser"==e&&(window.location.href=app.data.appDomain+"/index/users?frameorigin="+app.data.iframe_origin)})}};return i.isLoadedInCrmplus=function(){return!("undefined"==typeof CrmPlusLib||!CrmPlusLib.isLoadedInCrmplusFrame)},i.trigger=function(e,t){if("undefined"!=typeof CrmPlusLib){var n=CrmPlusLib[e];void 0!==n&&"function"==typeof n&&n.apply(CrmPlusLib,t)}},i}),define("previewbundle",function(){});
