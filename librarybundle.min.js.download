!function(){"use strict";var t,n="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),i=n&&navigator.userAgent.indexOf("MSIE")>-1,r=n?document:null,a=n?window:global,s=Object.prototype.toString;n&&(t=r.body,s=Object.prototype.toString);var o={};o.core={};var l=/^[a-z-_]$/i;o.is={array:function(t){return"[object Array]"===s.call(t)},date:function(t){return"[object Date]"===s.call(t)},function:function(t){return"[object Function]"===s.call(t)},regex:function(t){return"[object RegExp]"===s.call(t)},object:function(t){return"[object Object]"===s.call(t)},url:function(t){return/^https?:\/\/[\-A-Za-z0-9+&@#\/%?=~_|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_|]/.test(t)}},o.dom={isNode:function(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},selector:function(t,e){var n=t[0];return-1!==t.indexOf(" ")||-1!==t.indexOf(":")?this.getAll(t,e):"#"===n&&0===t.lastIndexOf("#")?this.getById(t.substr(1),e):"."===n&&0===t.lastIndexOf(".")?this.getByClass(t.substr(1),e):l.test(t)?this.getByTag(t,e):this.getAll(t,e)},get:function(t,e){return e||(e=r),e.querySelector(t)},getAll:function(t,e){return e||(e=r),e.querySelectorAll(t)},getByClass:function(t,e){return e||(e=r),e.getElementsByClassName(t)},getByTag:function(t,e){return e||(e=r),e.getElementsByTagName(t)},getById:function(t,e){return e||(e=r),e.getElementById(t)},getByDataId:function(t,e){return e||(e=r),e.querySelector('[data-element-id="'+t+'"]')},getClasses:function(t){var e=t.className.match(/[\w-]+/g),n=[];if(null===e)return[];for(var i=e.length-1;i>=0;i--)n.push(e[i]);return n},hasClass:function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");n.test(t.className)&&(t.className=t.className.replace(n," "))},innerDimension:function(t){return this._getBox(t,"client")},outerDimension:function(t){return this._getBox(t,"offset")},scrollDimension:function(t){return this._getBox(t,"scroll")},offset:function(t){var e=0,n=0;if(t.offsetParent)for(e=t.offsetLeft,n=t.offsetTop;t=t.offsetParent;)e+=t.offsetLeft,n+=t.offsetTop;return{left:e,top:n}},css:function(){var t=function(t,e){return e.toUpperCase()},e=function(e){return e.replace(/\-(\w)/g,t)};return function(t,n,i){if(void 0===i&&"string"==typeof n)return i="",r.defaultView&&r.defaultView.getComputedStyle?i=r.defaultView.getComputedStyle(t,"").getPropertyValue(n):t.currentStyle&&("float"==n&&(n="styleFloat"),i=t.currentStyle[e(n)]),i;if("object"==typeof n)for(var a in n){var s=n[a];"float"==a&&(a=t.currentStyle?"styleFloat":"cssFloat"),t.style[e(a)]=s}else"float"==n&&(n=t.currentStyle?"styleFloat":"cssFloat"),t.style[e(n)]=i}}(),parents:function(t){var e=[];for(t=t.parentNode;t;)e.push(t),t=t.parentNode;return e},isAncestor:function(t,e){return!(!o.dom.isNode(t)||!o.dom.isNode(e))&&("contains"in t?t.contains(e):t.compareDocumentPosition(e)%16)},findParent:function(t,e){for(t=t.parentNode;t;){if(this.hasClass(t,e))return t;t=t.parentNode}return!1},findParentByTag:function(t,e){for(t=t.parentNode;t;){if(t.tagName&&t.tagName.toUpperCase()===e.toUpperCase())return t;t=t.parentNode}return!1},append:function(t,e){t.appendChild(e)},prepend:function(t,e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},insertAfter:function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},insertBefore:function(t,e){t.parentNode.insertBefore(e,t)},remove:function(t){return t.parentNode.removeChild(t)},text:function(t,e){t.appendChild(t.ownerDocument.createTextNode(e))},_getBox:function(t,e){var n={width:t[e+"Width"],height:t[e+"Height"]};if(0===n.width&&0===n.height){var i,r,a=this.parents(t),s=[];for(i=0,r=a.length;i<r;i++){var o=a[i];o.style&&"none"==o.style.display&&s.push(o)}s.push(t);var l=[];for(i=0,r=s.length;i<r;i++){var u=s[i];l.push({position:u.style.position,display:u.style.display}),u.style.display="block"}for(n.width=t[e+"Width"],n.height=t[e+"Height"],i=0,r=s.length;i<r;i++){(u=s[i]).style.display=l[i].display}}return n},getChildConts:function(t,e){for(var n=[].slice.call(this.getAll(t,e)),i=[];n.length!=i.length;){for(var r=n.pop(),a=!1,s=n.length-1;s>=0;s--){var o=n[s];if(this.isAncestor(o,r)){a=!0;break}}a||(i.push(r),n.unshift(r))}return i},childrenByCont:function(t,e,n){for(var i=this.getChildConts(t,n),r=[],a=0;a<i.length;a++)i[a].childNodes.forEach(function(t){t.matches&&t.matches(e)&&r.push(t)});return r}},n?(o.event={listeners:[],unloadListeners:[],domreadyListeners:[],bind:function(t,e,n,i){if(t&&e&&n){var r={element:t,type:e,etype:e,handler:n,options:i=i||{}},a=i.scope||t,s=i.args;r.fn=function(t){n.call(a,t,s)};var o=e.indexOf(".");-1!=o&&(r.etype=e=e.substring(o+1)),"unload"===e&&this.unloadListener?this.unloadListeners.push(r):(t.addEventListener?t.addEventListener(e,r.fn,!1):t.attachEvent&&t.attachEvent("on"+e,r.fn),this.listeners.push(r),"unload"===e&&i.scope==this&&(this.unloadListener=r))}},unbind:function(t,e,n){if(t&&"string"==typeof e)if(n){var i="unload"===e?this.unloadListeners:this.listeners,r=this._getListenerIndex(i,t,e,n);r>-1&&this._removeListener(r,i)}else this._removeListeners(t,e)},purge:function(t){for(var e=this.listeners.length;e--;){var n=this.listeners[e];n&&(n.element===t||o.dom.isAncestor(t,n.element))&&this._removeListener(e,this.listeners)}},target:function(t){return this._getHTMLNode(t.target||t.srcElement)},relatedTarget:function(t){var e=t.relatedTarget;return e||("mouseout"==t.type?e=t.toElement:"mouseover"==t.type&&(e=t.fromElement)),this._getHTMLNode(e)},_getHTMLNode:function(t){for(;t&&3==t.nodeType;)t=t.parentNode;return t},dispatch:function(e,n,i,a){"string"==typeof e&&(a=i,i=n,n=e,e=t);var s=function(t){var e=null;return"function"==typeof CustomEvent?e=new CustomEvent(n,{detail:t,bubbles:!0,capture:!!a}):(e=r.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,t),e}(i);e.dispatchEvent(s)},fireEvent:function(t,e){if(document.createEventObject){var n=document.createEventObject();return t.fireEvent("on"+e,n)}return(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)},pageOffset:function(){if(r){var e=!r.compatMode||"CSS1Compat"==r.compatMode?r.documentElement:t;return function(t){return t.type.match(/(click|mouse|menu|drag)/i)?{x:t.pageX||t.clientX+e.scrollLeft,y:t.pageY||t.clientY+e.scrollTop}:null}}}(),clientOffset:function(){if(r){(!r.compatMode||"CSS1Compat"==r.compatMode)&&r.documentElement;return function(t){return t.type.match(/(click|mouse|menu)/i)?{x:t.pageX?t.pageX-a.pageXOffset:t.clientX,y:t.pageY?t.pageY-a.pageYOffset:t.clientY}:null}}}(),isRightClick:function(t){return t.button&&2==t.button||t.which&&3==t.which},mousescroll:function(t){},wheelDelta:function(){return type.match(/(dommousescroll|mousewheel)/i)?e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3:null},isDOMLoaded:function(t){t||(t=r);return(i&&-1!=navigator.userAgent.indexOf("MSIE 10")?/complete/:/interactive|loaded|complete/).test(t.readyState)},callOnLoad:function(t,e){e||(e=r),this.isDOMLoaded(e)?t():this.bind(e,"DOMContentLoaded",t)},checkDOMReady:function(){var t,e,n=function(e){if(!e||"DOMContentLoaded"!=e.type&&"load"!=e.type){if(r.readyState)if(/loaded|complete/.test(r.readyState))i();else if("function"==typeof r.documentElement.doScroll){try{t||r.documentElement.doScroll("left")}catch(e){return}i()}}else i()},i=function(){t||(t=!0,r.removeEventListener&&r.removeEventListener("DOMContentLoaded",n,!1),r.onreadystatechange=null,"undefined"!==e&&clearInterval(e),e=null,o.event._domready())};r&&(r.addEventListener?r.addEventListener("DOMContentLoaded",n,!1):(r.onreadystatechange=n,a.onload=n,e=setInterval(n,5)))},ready:function(t,e){this.domreadyListeners.push(function(){t.call(e||d)})},_domready:function(){for(var t=0,e=this.domreadyListeners.length;t<e;t++)try{this.domreadyListeners[t]()}catch(t){}},_getListenerIndex:function(t,e,n,i){for(var r=t.length;r--;){var a=t[r];if(a&&a.element===e&&n===a.type&&a.handler===i)return r}return-1},_removeListeners:function(t,e){for(var n=this.listeners.length;n--;){var i=this.listeners[n];i&&i.element===t&&("function"==typeof e&&i.handler===e||"string"==typeof e&&e===i.type)&&this._removeListener(n,this.listeners)}},_removeListener:function(t,e){var n=e[t];if(e.splice(t,1),"unload"!=n.etype){var i=n.element;i.removeEventListener?i.removeEventListener(n.etype,n.fn,!1):i.detachEvent&&i.detachEvent("on"+n.etype,n.fn)}n.fn=null,n.handler=null,n=null},_unload:function(t){t=t||a.event;var e,n;for(e=0,n=this.unloadListeners.length;e<n;e++){var i=this.unloadListeners[e];if(i)try{i.fn(t)}catch(t){}i.fn=null,i.handler=null}for(e=this.listeners.length;e--;)this._removeListener(e,this.listeners)}},o.ajax={error:function(t){o.ajax.errorOptions=t},setDynamicHeaderModifier:function(t){o.ajax.dynamicHeaderModifier=t},errorTest:null,post:function(t){return t.method="POST",this.request(t)},get:function(t){return t.method="GET",this.request(t)},put:function(t){return t.method="PUT",this.request(t)},del:function(t){return t.method="DELETE",this.request(t)},request:function(t){var e=t.url;if(e){var n=t.method||"GET",i=t.sync||!1,r=t.params||{},a=t.headers=t.headers||{},s=t.dynamicHeaderModifier||o.ajax.dynamicHeaderModifier;0!=t.dynamicHeaderModifier&&s&&s(t);var l=t.handler,u=t.error,d=t.errorHandler,c=u&&u.condition,h=t.args,f=this.listener,p=this._getTransport();p._handler=l,i||(p.onreadystatechange=function(){if(4==p.readyState){var t=!0;if(f&&(t=f.call(p)),t&&l)try{!function(t,e){var n=o.ajax.errorOptions;return e||(e=n&&n.condition&&n.condition),!(!e||!e.call(t))}(p,c)?l.call(p,h):d?d.call(p,h):o.ajax.errorOptions&&o.ajax.errorOptions.handler?o.ajax.errorOptions.handler.call(p,h):l.call(p,h)}catch(t){}p=null}});var g;if("object"==typeof r){var m=[];for(var v in r)m.push(encodeURIComponent(v)+"="+encodeURIComponent(r[v]));m.length>0&&(g=m.join("&"))}else"string"==typeof r&&(g=r);"GET"===n&&g&&(e+=(e.indexOf("?")+1?"&":"?")+g),p.open(n,e,!i);for(var b in a)p.setRequestHeader(b,a[b]);return"GET"!==n&&(t.bodyJSON?(p.setRequestHeader("Content-Type","application/json;charset=UTF-8"),g=JSON.stringify(t.bodyJSON)):t.formData?g=t.formData:p.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8")),t.credential&&(p.withCredentials=!0),p.send(g),i?p:void 0}},_getTransport:function(){if(a.XMLHttpRequest)return new XMLHttpRequest;if(a.ActiveXObject)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){throw new Exception("Browser not supported")}}}},o.event.bind(a,"unload",o.event._unload,{scope:o.event}),o.event.checkDOMReady(),o.CX=function(t,e){function n(t){return"String"===a(t)?t:JSON.stringify(t)}function i(t){var e=null;try{e=JSON.parse(t)}catch(e){return t}return e}function r(t){var e=a(t);if("HTMLIFrameElement"===e)return t.contentWindow;if("global"===e||"Window"===e||"Object"===e)return t;throw new Error("Provide a valid target !!")}function a(t){return Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1]}function s(e){this.ctx=e.ctx||t,this.origin=e.targetOrigin,this.target=e.target,this.winHandler=e.winHandler,this.handlers={},this.targetReady=-1!==o.indexOf(e.targetOrigin),this.queuedMsgs=[],this.initialise(),l.push(this)}var o=[],l=[];return t.addEventListener("load",function n(){var i=e.getElementsByTagName("iframe");parent&&parent!==t&&parent.postMessage("CX_load__"+this.location.origin,"*");for(var r=i.length-1;r>=0;r--)i[r].contentWindow.postMessage("CX_load__"+this.location.origin,"*");e.removeEventListener("DOMContentLoaded",n)}),t.addEventListener("message",function(t){if(s.defaultHandlers){var e=i(t.data);if($IS.object(e)){if(!s.defaultHandlers[e.requestId])return;if(!s.defaultHandlers[e.requestId].handler)return;!function(t,e){var n;return!(!(n=e&&e.condition?e.condition:s.errorOptions&&s.errorOptions.condition)||!n.call(t))}(e,s.defaultHandlers[e.requestId].error)?s.defaultHandlers[e.requestId].handler.call(e,s.defaultHandlers[e.requestId].args):s.defaultHandlers[e.requestId].errorHandler?s.defaultHandlers[e.requestId].errorHandler.call(e,s.defaultHandlers[e.requestId].args):s.errorOptions&&s.errorOptions.handler?s.errorOptions.handler.call(e,s.defaultHandlers[e.requestId].args):$E.dispatch(document,"lib:xhrError",{responseText:e.responseText})}else if(/^CX_load__/.test(t.data)){o.push(t.origin);for(var n=l.length-1;n>=0;n--)l[n].origin===t.origin&&(l[n].targetReady=!0,l[n].dispatchQueuedMsg(),l.splice(n,1))}}}),s.prototype._={},s.prototype.initialise=function(){this.ctx.addEventListener("message",function(t){var e=null;this.origin===t.origin&&(e=this._.unserialize(t.data),this.winHandler&&this.winHandler.call(this,t,e.data),"Object"===this._.getType(e)&&e.msgType&&this.handlers[e.msgType]&&this.handlers[e.msgType].forEach(function(n){n.call(this,t,e.data)}))}.bind(this))},s.prototype._.getType=a,s.prototype._.serialize=n,s.prototype._.unserialize=i,s.prototype._.getTargetWindow=function(t){var e=this.getType(t);if("HTMLIFrameElement"===e)return t.contentWindow;if("global"===e)return t;throw new Error("Provide a valid target !!")},s.prototype.dispatchQueuedMsg=function(){for(var t=0,e=this.queuedMsgs.length;t<e;t++)this.dispatchMessage(this.queuedMsgs[t].msgType,this.queuedMsgs[t].data);this.queuedMsgs=null},s.prototype.dispatchMessage=function(t,e){var n={msgType:t,data:e};this.targetReady?this._.getTargetWindow(this.target).postMessage(this._.serialize(n),this.origin):this.queuedMsgs.push(n)},s.prototype.bind=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},s.prototype.unbind=function(t,e){if(this.handlers[t]){for(var n=this.handlers[t].length-1;n>=0;n--)this.handlers[t][n]===e&&this.handlers[t].splice(n,1);0===this.handlers.messageType.length&&delete this.handlers.messageType}},s.initDefaultChannel=function(e,n,r){s.defaultChannel={target:e,targetOrigin:n,defaultHandler:r},s.defaultHandlers={},t.addEventListener("message",function(t){var e=i(t.data);-1!==s.defaultChannel.targetOrigin.indexOf(t.origin)&&"default-channel"===e.msgType&&s.defaultChannel.defaultHandler({method:e.cxType,data:e.data,requestId:e.requestId})}.bind(s.defaultChannel))},s.error=function(t){s.errorOptions=t},s.post=function(t){this.request(t,"post")},s.get=function(t){this.request(t,"get")},s.put=function(t){this.request(t,"put")},s.delete=function(t){this.request(t,"delete")},s.window_open=function(t){this.request(t,"window_open")},s.request=function(t,e){var i=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}();s.defaultHandlers[i]={handler:t.handler,error:t.error,errorHandler:t.error&&t.errorHandler,args:t.args};var a={cxType:e,requestId:i,msgType:"default-channel",data:t};r(s.defaultChannel.target).postMessage(n(a),s.defaultChannel.targetOrigin)},s.dispatch=function(t){r(s.defaultChannel.target).postMessage(n(t),s.defaultChannel.targetOrigin)},s}(a,document),null===a.$||void 0===a.$?a.$=o.dom.selector.bind(o.dom):o.dollar=a.$,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)}),o.dom.matches=function(t,e){if(void 0!==t&&1===t.nodeType){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(t){return-1!==[].slice.call(document.querySelectorAll(t)).indexOf(this)}).call(t,e)}},o.noConflict=function(){a.$=o.dollar},o.util={getQueryParams:function(t){var e=t||a.location.search;e=decodeURIComponent(e.replace(/\+/g," "));var n={};if(URLSearchParams){new URLSearchParams(e).forEach(function(t,e){n[e]=t})}else for(var i=/([^?=&]+?)=([^&]+)/g;null!==(param=i.exec(e));)n[param[1]]=param[2];return n}},a.$U=o.util,a.$D=o.dom,a.$E=o.event,a.$X=o.ajax,a.$CX=o.CX,a.$IS=o.is,a.$LIB=o):(a.$IS=o.is,a.$D=o.dom)}();var requirejs,require,define;!function(ba){function G(t){return"[object Function]"===K.call(t)}function H(t){return"[object Array]"===K.call(t)}function v(t,e){if(t){var n;for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}}function T(t,e){if(t){var n;for(n=t.length-1;-1<n&&(!t[n]||!e(t[n],n,t));n-=1);}}function t(t,e){return fa.call(t,e)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var i in e)if(t(e,i)&&n(e[i],i))break}function U(e,n,i,r){return n&&B(n,function(n,a){!i&&t(e,a)||(!r||"object"!=typeof n||!n||H(n)||G(n)||n instanceof RegExp?e[a]=n:(e[a]||(e[a]={}),U(e[a],n,i,r)))}),e}function u(t,e){return function(){return e.apply(t,arguments)}}function ca(t){throw t}function da(t){if(!t)return t;var e=ba;return v(t.split("."),function(t){e=e[t]}),e}function C(t,e,n,i){return e=Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t),e.requireType=t,e.requireModules=i,n&&(e.originalError=n),e}function ga(e){function n(t,e,n){e=e&&e.split("/");var i,r,a,s,o,l,u,d,c=k.map,h=c&&c["*"];if(t){for(r=(t=t.split("/")).length-1,k.nodeIdCompat&&Q.test(t[r])&&(t[r]=t[r].replace(Q,"")),"."===t[0].charAt(0)&&e&&(r=e.slice(0,e.length-1),t=r.concat(t)),r=t,a=0;a<r.length;a++)"."===(s=r[a])?(r.splice(a,1),a-=1):".."===s&&0!==a&&(1!=a||".."!==r[2])&&".."!==r[a-1]&&0<a&&(r.splice(a-1,2),a-=2);t=t.join("/")}if(n&&c&&(e||h)){a=(r=t.split("/")).length;t:for(;0<a;a-=1){if(o=r.slice(0,a).join("/"),e)for(s=e.length;0<s;s-=1)if((n=m(c,e.slice(0,s).join("/")))&&(n=m(n,o))){i=n,l=a;break t}!u&&h&&m(h,o)&&(u=m(h,o),d=a)}!i&&u&&(i=u,l=d),i&&(r.splice(0,l,i),t=r.join("/"))}return(i=m(k.pkgs,t))?i:t}function i(t){z&&v(document.getElementsByTagName("script"),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===_.contextName)return e.parentNode.removeChild(e),!0})}function r(t){var e=m(k.paths,t);if(e&&H(e)&&1<e.length)return e.shift(),_.require.undef(t),_.makeRequire(null,{skipMap:!0})([t]),!0}function a(t){var e,n=t?t.indexOf("!"):-1;return-1<n&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function s(t,e,i,r){var s,o,l=null,u=e?e.name:null,d=t,c=!0,h="";return t||(c=!1,t="_@r"+(P+=1)),t=a(t),l=t[0],t=t[1],l&&(l=n(l,u,r),o=m(O,l)),t&&(l?h=o&&o.normalize?o.normalize(t,function(t){return n(t,u,r)}):-1===t.indexOf("!")?n(t,u,r):t:(h=n(t,u,r),t=a(h),l=t[0],h=t[1],i=!0,s=_.nameToUrl(h))),i=!l||o||i?"":"_unnormalized"+(q+=1),{prefix:l,name:h,parentMap:e,unnormalized:!!i,url:s,originalName:d,isDefine:c,id:(l?l+"!"+h:h)+i}}function o(t){var e=t.id,n=m($,e);return n||(n=$[e]=new _.Module(t)),n}function l(e,n,i){var r=e.id,a=m($,r);!t(O,r)||a&&!a.defineEmitComplete?(a=o(e)).error&&"error"===n?i(a.error):a.on(n,i):"defined"===n&&i(O[r])}function d(t,e){var n=t.requireModules,i=!1;e?e(t):(v(n,function(e){(e=m($,e))&&(e.error=t,e.events.error&&(i=!0,e.emit("error",t)))}),i||g.onError(t))}function c(){R.length&&(ha.apply(S,[S.length,0].concat(R)),R=[])}function h(t){delete $[t],delete I[t]}function f(t,e,n){var i=t.map.id;t.error?t.emit("error",t.error):(e[i]=!0,v(t.depMaps,function(i,r){var a=i.id,s=m($,a);s&&!t.depMatched[r]&&!n[a]&&(m(e,a)?(t.defineDep(r,O[a]),t.check()):f(s,e,n))}),n[i]=!0)}function p(){var t,e,n=(t=1e3*k.waitSeconds)&&_.startTime+t<(new Date).getTime(),a=[],s=[],o=!1,l=!0;if(!x){if(x=!0,B(I,function(t){var u=t.map,d=u.id;if(t.enabled&&(u.isDefine||s.push(t),!t.error))if(!t.inited&&n)r(d)?o=e=!0:(a.push(d),i(d));else if(!t.inited&&t.fetched&&u.isDefine&&(o=!0,!u.prefix))return l=!1}),n&&a.length)return t=C("timeout","Load timeout for modules: "+a,null,a),t.contextName=_.contextName,d(t);l&&v(s,function(t){f(t,{},{})}),n&&!e||!o||!z&&!ea||A||(A=setTimeout(function(){A=0,p()},50)),x=!1}}function b(e){t(O,e[0])||o(s(e[0],null,!0)).init(e[1],e[2])}function y(t){t=t.currentTarget||t.srcElement;var e=_.onScriptLoad;return t.detachEvent&&!Y?t.detachEvent("onreadystatechange",e):t.removeEventListener("load",e,!1),e=_.onScriptError,(!t.detachEvent||Y)&&t.removeEventListener("error",e,!1),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function E(){var t;for(c();S.length;){if(null===(t=S.shift())[0])return d(C("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));b(t)}}var x,w,_,D,A,k={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},$={},I={},L={},S=[],O={},j={},F={},P=1,q=1;return D={require:function(t){return t.require?t.require:t.require=_.makeRequire(t.map)},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?O[t.map.id]=t.exports:t.exports=O[t.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return m(k.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},w=function(t){this.events=m(L,t.id)||{},this.map=t,this.shim=m(k.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(t,e,n,i){i=i||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=u(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;j[t]||(j[t]=!0,_.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id;e=this.depExports;var i=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(r)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{i=_.execCb(n,r,e,i)}catch(e){t=e}else i=_.execCb(n,r,e,i);if(this.map.isDefine&&void 0===i&&((e=this.module)?i=e.exports:this.usingExports&&(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",d(this.error=t)}else i=r;this.exports=i,this.map.isDefine&&!this.ignore&&(O[n]=i,g.onResourceLoad)&&g.onResourceLoad(_,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,r=s(e.prefix);this.depMaps.push(r),l(r,"defined",u(this,function(r){var a,c;c=m(F,this.map.id);var f=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,v=_.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(r.normalize&&(f=r.normalize(f,function(t){return n(t,p,!0)})||""),l(r=s(e.prefix+"!"+f,this.map.parentMap),"defined",u(this,function(t){this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),(c=m($,r.id))&&(this.depMaps.push(r),this.events.error&&c.on("error",u(this,function(t){this.emit("error",t)})),c.enable())):c?(this.map.url=_.nameToUrl(c),this.load()):(a=u(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),a.error=u(this,function(t){this.inited=!0,this.error=t,t.requireModules=[i],B($,function(t){0===t.map.id.indexOf(i+"_unnormalized")&&h(t.map.id)}),d(t)}),a.fromText=u(this,function(n,r){var l=e.name,u=s(l),c=M;r&&(n=r),c&&(M=!1),o(u),t(k.config,i)&&(k.config[l]=k.config[i]);try{g.exec(n)}catch(t){return d(C("fromtexteval","fromText eval for "+i+" failed: "+t,t,[i]))}c&&(M=!0),this.depMaps.push(u),_.completeLoad(l),v([l],a)}),r.load(e.name,v,a,k))})),_.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){I[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var i,r;if("string"==typeof e){if(e=s(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=m(D,e.id))return void(this.depExports[n]=i(this));this.depCount+=1,l(e,"defined",u(this,function(t){this.defineDep(n,t),this.check()})),this.errback&&l(e,"error",u(this,this.errback))}i=e.id,r=$[i],!t(D,i)&&r&&!r.enabled&&_.enable(e,this)})),B(this.pluginMaps,u(this,function(t){var e=m($,t.id);e&&!e.enabled&&_.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){v(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},_={config:k,contextName:e,registry:$,defined:O,urlFetched:j,defQueue:S,Module:w,makeModuleMap:s,nextTick:g.nextTick,onError:d,configure:function(t){t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/");var e=k.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(t,function(t,e){n[e]?(k[e]||(k[e]={}),U(k[e],t,!0,!0)):k[e]=t}),t.bundles&&B(t.bundles,function(t,e){v(t,function(t){t!==e&&(F[t]=e)})}),t.shim&&(B(t.shim,function(t,n){H(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=_.makeShimExports(t)),e[n]=t}),k.shim=e),t.packages&&v(t.packages,function(t){var e;e=(t="string"==typeof t?{name:t}:t).name,t.location&&(k.paths[e]=t.location),k.pkgs[e]=t.name+"/"+(t.main||"main").replace(ia,"").replace(Q,"")}),B($,function(t,e){!t.inited&&!t.map.unnormalized&&(t.map=s(e))}),(t.deps||t.callback)&&_.require(t.deps||[],t.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(ba,arguments)),e||t.exports&&da(t.exports)}},makeRequire:function(r,a){function l(n,i,u){var c,h;return a.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?d(C("requireargs","Invalid require call"),u):r&&t(D,n)?D[n]($[r.id]):g.get?g.get(_,n,r,l):(c=s(n,r,!1,!0),c=c.id,t(O,c)?O[c]:d(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(r?"":". Use require([])")))):(E(),_.nextTick(function(){E(),(h=o(s(null,r))).skipMap=a.skipMap,h.init(n,i,u,{enabled:!0}),p()}),l)}return a=a||{},U(l,{isBrowser:z,toUrl:function(t){var e,i=t.lastIndexOf("."),a=t.split("/")[0];return-1!==i&&("."!==a&&".."!==a||1<i)&&(e=t.substring(i,t.length),t=t.substring(0,i)),_.nameToUrl(n(t,r&&r.id,!0),e,!0)},defined:function(e){return t(O,s(e,r,!1,!0).id)},specified:function(e){return e=s(e,r,!1,!0).id,t(O,e)||t($,e)}}),r||(l.undef=function(t){c();var e=s(t,r,!0),n=m($,t);i(t),delete O[t],delete j[e.url],delete L[t],T(S,function(e,n){e[0]===t&&S.splice(n,1)}),n&&(n.events.defined&&(L[t]=n.events),h(t))}),l},enable:function(t){m($,t.id)&&o(t).enable()},completeLoad:function(e){var n,i,a=m(k.shim,e)||{},s=a.exports;for(c();S.length;){if(null===(i=S.shift())[0]){if(i[0]=e,n)break;n=!0}else i[0]===e&&(n=!0);b(i)}if(i=m($,e),!n&&!t(O,e)&&i&&!i.inited){if(k.enforceDefine&&(!s||!da(s)))return r(e)?void 0:d(C("nodefine","No define call for "+e,null,[e]));b([e,a.deps||[],a.exportsFn])}p()},nameToUrl:function(t,e,n){var i,r,a;if((i=m(k.pkgs,t))&&(t=i),i=m(F,t))return _.nameToUrl(i,e,n);if(g.jsExtRegExp.test(t))i=t+(e||"");else{for(i=k.paths,r=(t=t.split("/")).length;0<r;r-=1)if(a=t.slice(0,r).join("/"),a=m(i,a)){H(a)&&(a=a[0]),t.splice(0,r,a);break}i=t.join("/"),i=("/"===(i+=e||(/^data\:|\?/.test(i)||n?"":".js")).charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+i}return k.urlArgs?i+(-1===i.indexOf("?")?"?":"&")+k.urlArgs:i},load:function(t,e){g.load(_,t,e)},execCb:function(t,e,n,i){return e.apply(i,n)},onScriptLoad:function(t){("load"===t.type||ja.test((t.currentTarget||t.srcElement).readyState))&&(N=null,t=y(t),_.completeLoad(t.id))},onScriptError:function(t){var e=y(t);if(!r(e.id))return d(C("scripterror","Script error for: "+e.id,t,[e.id]))}},_.require=_.makeRequire(),_}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if(void 0===define){if(void 0!==requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}void 0!==require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(t,e,n,i){var r,a="_";return!H(t)&&"string"!=typeof t&&(r=t,H(e)?(t=e,e=n,n=i):t=[]),r&&r.context&&(a=r.context),(i=m(F,a))||(i=F[a]=g.s.newContext(a)),r&&i.configure(r),i.require(t,e,n)},g.config=function(t){return g(t)},g.nextTick="undefined"!=typeof setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=g),g.version="2.1.15",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(t){g[t]=function(){var e=F._;return e.require[t].apply(e,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(t){var e=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return e.type=t.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e},g.load=function(t,e,n){var i=t&&t.config||{};if(z)return(i=g.createNode(i,e,n)).setAttribute("data-requirecontext",t.contextName),i.setAttribute("data-requiremodule",e),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Y?(i.addEventListener("load",t.onScriptLoad,!1),i.addEventListener("error",t.onScriptError,!1)):(M=!0,i.attachEvent("onreadystatechange",t.onScriptLoad)),i.src=n,J=i,D?y.insertBefore(i,D):y.appendChild(i),J=null,i;if(ea)try{importScripts(n),t.completeLoad(e)}catch(i){t.onError(C("importscripts","importScripts failed for "+e+" at "+n,i,[e]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(t){if(y||(y=t.parentNode),I=t.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(t,e,n){var i,r;"string"!=typeof t&&(n=e,e=t,t=null),H(e)||(n=e,e=null),!e&&G(n)&&(e=[],n.length&&(n.toString().replace(ka,"").replace(la,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e))),M&&((i=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(t){if("interactive"===t.readyState)return N=t}),i=N),i&&(t||(t=i.getAttribute("data-requiremodule")),r=F[i.getAttribute("data-requirecontext")])),(r?r.defQueue:R).push([t,e,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this);var hbMessageFormat=function(){"use strict";function t(t){this.index=0,this.tokens=t,this.nodes=[],this.openString=!1,this.openCode=!1,this.isSubformat=!1}function e(t,e){this.input=e,this.str=[],this.nodes=t,this.formatters={}}t.prototype.codeOpen=function(t,e,n){t[n-1];this.openString?this.nodes.push({data:"{"}):this.openCode?this.isSubformat=!0:this.openCode=!0},t.prototype.codeClose=function(t,e,n){"'"===t[n-1].char||this.openString?this.nodes.push({data:"}"}):(this.openCode&&(this.isSubformat?this.isSubformat=!1:this.openCode=!1),this.openString=!1)},t.prototype.string=function(t,e,n){t[n-1];var i=t[n+1];this.openString?i&&"'"===i.char?(this.index++,this.nodes.push({data:"'"}),this.openString=!1):this.openString=!1:i&&"'"===i.char?(this.index++,this.nodes.push({data:"'"})):this.openString=!0},t.prototype.data=function(t,e,n){var i;this.openCode?(i={code:e.data},this.isSubformat&&(i.sub=!0),this.nodes.push(i)):this.nodes.push({data:e.data})};var n=e.prototype;n.add=function(t,e){this.formatters[t]=e},n.getFormatter=function(t,n){for(var r,a,s,o,l=[];;){if(t.sub){for(o=[];o.push(t),t.sub=!1,void 0!==(t=this.nodes[++this.index])&&t.hasOwnProperty("sub")&&!0===t.sub;);s=new e(o,this.input),l.push({code:s.get()})}if(l.push(t),void 0===(t=this.nodes[++this.index])||!t.hasOwnProperty("code")){--this.index;break}}if(0===l.length)return!1;if(/^[\d]+$/.test(l[0].code))r=i.placeholder;else{if(!(a=l[0].code.match(/^\s*[\d]+\s*,\s*([\w]+).*$/)))return!1;r=i[a[1]]}var u=l.map(function(t){return t.code}).join("");return{method:r.method,currNodes:u}},n.get=function(){return this.walk(),this.str.join("")},n.walk=function(){var t,e,n=this.nodes;this.index=0;for(var i=n.length;this.index<i;){if((t=n[this.index]).hasOwnProperty("code")){if(!(e=this.getFormatter(t,this.index)))return this.input;this.str.push(e.method(e.currNodes,this.input))}else this.str.push(t.data);this.index++}};var i={placeholder:{method:function(t,e){return e[t]}},choice:{method:function(t,e){var n,i,r,a=/^(-?\d*(?:\.\d+)?)([#<>=]{1})([\s\S]+?)$/,s=t.match(/^\s*([\d]+)\s*,\s*([\w]+)\s*,\s*([\s\S]*?)$/),o=s[3];o=o.split("|");for(var l,u=s[1],d=0,c=o.length;d<c;d++)switch(n=o[d],i=n.match(a),r=i[2],l=i[1],isNaN(Number(l))||(l=Number(l)),r){case"#":if(Number(e[u])===l)return i[3];break;case"<":if(l<Number(e[u]))return i[3].replace("{0,number,integer}",e[u]);break;case">":if(l>Number(e[u]))return i[3].replace("{0,number,integer}",e[u])}}},time:{method:function(t,e){return"time"===t.match(/(\d+)\s*,\s*(time|date)\s*,?\s*[\w]*/)[2]?e[1].getHours()+":"+e[1].getMinutes():e[1].getDate()+"/"+e[1].getMonth()+"1/"+e[1].getFullYear()}},date:{method:function(t,e){return"time"===t.match(this.test)[2]?e[1].getHours()+":"+e[1].getMinutes():e[1].getDate()+"/"+e[1].getMonth()+"1/"+e[1].getFullYear()}},number:{method:function(t,e){return e[t.match(/([\d]+)/)[1]]}}};return function(){function n(t,e){r[t]=e}var r={};return n("choice",i.choice),n("placeholder",i.placeholder),n("dateTime",i.dateTime),{formatters:r,add:n,format:function(n){var i=function(e){for(var n,i=new t(e),r=e.length;i.index<r;)(n=e[i.index]).hasOwnProperty("type")?i[n.type](e,n,i.index):i.data(e,n,i.index),i.index++;return i.nodes}(function(t){function e(t){for(var e=0,n=l.length;e<n;e++)if(t===l[e].char)return l[e];return!1}for(var n,i,r,a=0,s=t.length,o=[],l=[{type:"codeOpen",char:"{"},{type:"codeClose",char:"}"},{type:"string",char:"'"}],u=l.map(function(t){return t.char});t[a];){if(i="",n=t[a],r=e(n))o.push({char:n,type:r.type});else{for(n&&(i=n);-1===u.indexOf(t[a+1])&&a+1<s;)i+=t[++a];o.push({data:i})}a++}return o}(n)),r=Array.prototype.slice.call(arguments);return new e(i,r=r.splice(1)).get()}}}()}();"undefined"!=typeof module&&(module.exports=hbMessageFormat);var i18n={};i18n.get=function(){var t=Array.prototype.slice.call(arguments);if(0===t.length)return"";var e=pbLangObj[t[0]];return e?(t.splice(0,1),t.splice(0,0,e),hbMessageFormat.format.apply(hbMessageFormat.format,t)):""};var pb_has_message=function(){var t=arguments,e=t.length;if(0!==e)return 1===e?pbLangObj.hasOwnProperty(t[0]):void 0},pb_i18n=i18n.get;!function(t,e){"function"==typeof define&&define.amd?define("log",e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():t.log=e()}(this,function(){function t(t,e){return(e=t[e]).bind(t)}function e(e){return typeof console!==s&&(console[e]!==a?t(console,e):console.log!==a?t(console,"log"):r)}function n(t){for(var n=null,a=0;a<o.length;a++)n=o[a],i[n]=a<t?r:e(n)}var i={},r=function(){},a=void 0,s="undefined",o=["trace","log","debug","info","warn","error"];return i.setLevel=function(t){n(t)},i.enableAll=function(){n(0)},i.disableAll=function(t){n(6)},i.version="1.0.0",n(0),i}),function(t,e){"function"==typeof define&&define.amd?define("hbDialog",e):t.hbDialog=e()}(this,function(){"use strict";function t(t,e,n){t.addEventListener(e,n,!1),y.push({element:t,type:e,listener:n})}function e(t,e,n){t.removeEventListener(e,n,!1);for(var i=y.length-1;i>=0;i--)if(y[i].element===t&&y[i].type===e&&y[i].listener===n){y.splice(i,1);break}}function n(t){for(var n=y.length-1;n>=0;n--)(t.contains(y[n].element)||t===y[n].element)&&e(y[n].element,y[n].type,y[n].listener)}function i(t,e){(function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)})(t,e)||(t.className+=" "+e)}function r(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");n.test(t.className)&&(t.className=t.className.replace(n," "))}function a(t,e){return t.hasOwnProperty(e)}function s(e,n){var i=C("span");n.helperModuleName&&i.setAttribute("data-module-name",n.helperModuleName),n.helperHashName&&i.setAttribute("data-hash",n.helperHashName),i.innerHTML='<svg class="sites-icon small cursor-pointer"><use xlink:href="#zs-question"></use></svg>',t(i,"click",function(t){$E.dispatch(document,"help:inited",{element:t})}(i)),e.appendChild(i)}function o(e,n){var i;for(var r in n)a(n,r)&&(i=C("div"),n[r].className.split(/\s+/).forEach(function(t){t&&i.classList.add(t)}),i.innerText=n[r].label,n[r].attribute&&n[r].attribute.forEach(function(t){i.setAttribute(t.name,t.value)}),t(i,"click",n[r].callback),e.appendChild(i))}function l(){var t=document.createElement("div");return i(t,"hb-hidden-mask"),t}function u(e){var n=$D.get(".hb-mo-content",this.parentElement);S=l(),M=l(),document.body.appendChild(S),n.appendChild(M),H=this,L=function(t,e){t=t||window.event,e||(e=t.target||t.srcElement);var n=e.currentStyle||window.getComputedStyle(e,null),i=parseInt(n.borderInlineStartWidth,10),r=parseInt(n.borderBlockStartWidth,10),a=e.getBoundingClientRect();return{x:t.clientX-i-a.left,y:t.clientY-r-a.top}}(e),document.body.style.cursor="move",t(document,"mousemove",c),t(document,"mouseup",d)}function d(t){e(this,"mousedown",u),e(document,"mousemove",c),e(document,"mouseup",d),document.body.style.cursor="default",S&&S.parentNode.removeChild(S),M&&M.parentNode.removeChild(M)}function c(t){var e=t.clientX-L.x,n=t.clientY-L.y;H.parentElement.style.insetInlineStart=e+"px",H.parentElement.style.insetBlockStart=n+"px"}function h(t){return"0"===t?"0px":t}function f(e){this.closeBtn=null,this.dialog=null,this.overlay=null,this.state="closed",this.id=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()}(),this.appCtx=b,e||(e={}),this.settings=e,E.push(this),"inplace"===this.settings.type&&this.settings.referenceElement.setAttribute("data-hb-dialog-uuid",this.id),this.html=function(){var e=document.createDocumentFragment(),n=null,r=C("div"),a=C("div"),l=null,d=null,c=this.settings,f=null,p=null;return!0===c.header&&(d=C("div"),e.appendChild(d),d.className=k+" "+c.headerClass,d.innerHTML=c.headingText,this.header=d,"panel"===c.type&&(c.mask=!1,t(d,"mousedown",u))),$IS.object(c.header)&&(d=C("div"),e.appendChild(d),d.className=k+" "+T,c.header.headerLeft&&(f=C("div"),d.appendChild(f),f.className=N,O.innerText=c.header.headerLeft.text.headingText,c.header.headerLeft.text&&(f.innerHTML="<p class="+I+">"+O.innerHTML+"</p>"),$IS.object(c.header.headerLeft.helper)&&s(f,c.header.headerLeft.helper),c.header.headerLeft.buttons&&o(f,c.header.headerLeft.buttons)),c.header.headerRight&&(p=C("div"),d.appendChild(p),p.className=$,c.header.headerRight.buttons&&o(p,c.header.headerRight.buttons))),e.appendChild(a),a.className=w,a.style.width="100%",a.innerHTML=c.content,c.footer&&((l=C("div")).className=_+" "+c.footerClass,e.appendChild(l),l.innerHTML='<button class="mo-btn mo-btn__ok" data-action="ok">'+c.okText+'</button><button class="mo-btn mo-btn__cancel" data-action="cancel">'+c.cancelText+"</div>",o(l,c.buttons)),r.setAttribute("data-type",c.type),r.appendChild(e),"inplace"===c.type&&(c.entryAnimation="ScaleIn",c.exitAnimation="ScaleOut"),"modals"==c.type&&c.width&&(isNaN(c.maxWidth)||(r.style.maxInlineSize=c.maxWidth+"px"),isNaN(c.minWidth)||(r.style.minInlineSize=c.minWidth+"px")),c.mask&&((n=C("div")).appendChild(r),n.className=D+" "+c.maskClass,n.style.backgroundColor=c.maskColor),"fullscreen"===c.type?(c.offsetTop&&(r.style.height="calc( 100vh - "+h(c.offsetTop)+")",r.style.insetBlockStart=c.offsetTop),c.offsetLeft&&(r.style.width="calc( 100vw - "+h(c.offsetLeft)+")",r.style.insetInlineStart=c.offsetLeft),r.className=A+" x"+c.entryAnimation+"Full"):r.className=A+" x"+c.entryAnimation,"panel"===c.type&&(r.style.position="absolute",r.style.boxShadow="0 0 14px rgba(189, 189, 191, 0.75)"),c.footer&&(this.okBtn=r.querySelector('[data-action="ok"]'),this.cancelBtn=r.querySelector('[data-action="cancel"]'),l.className+=" "+c.footerClass,this.okBtn.className+=" "+c.okBtnClass,this.cancelBtn.className+=" "+c.cancelBtnClass),!0===c.closeBtn&&(this.closeBtn=C("span"),this.closeBtn.innerHTML=x,i(this.closeBtn,"hb-mo-close"),r.appendChild(this.closeBtn),this.closeBtnClass&&i(this.closeBtn,c.closeBtnClass)),this.mask=n,this.dialog=r,this.content=a,r.className+=" "+c.dialogClass,a.className+=" "+c.contentClass,r.setAttribute("data-fixed-header-footer",!!c.fixHeaderFooter),"inplace"===c.type&&i(r,"hb-mo-arrow"),n||r}.call(this);for(var n=0;n<E.length;n++)E[n].html.style.zIndex=1e3*(n+1);!0===this.settings.autoOpen&&this.open()}function p(t,e,n,i){var r,a,s,o,l=m(n);return"center"===t?(r=l.x+g(n,"width")/2-g(i,"width")/2,a=l.x+g(n,"width")/2+g(i,"width")/2):"left"===t?(r=l.x+g(n,"width")-g(i,"width"),a=l.x+g(i,"width")):"right"===t&&(r=l.x,a=l.x+g(i,"width")),"below"===e?(s=l.y+g(n,"height"),o=l.y+g(i,"height")+g(n,"height")+10):"upper"===e&&(s=l.y-g(i,"height"),o=l.y-g(i,"height")),{left:r,right:a,top:s,bottom:o}}function g(t,e){return parseFloat(window.getComputedStyle(t)[e].replace("px",""))}function m(t){for(var e=0,n=0;t;){if("BODY"==t.tagName){var i=t.scrollLeft||document.documentElement.scrollLeft,r=t.scrollTop||document.documentElement.scrollTop;e+=t.offsetLeft-i+t.clientLeft,n+=t.offsetTop-r+t.clientTop}else e+=t.offsetLeft-t.scrollLeft+t.clientLeft,n+=t.offsetTop-t.scrollTop+t.clientTop;t=t.offsetParent}return{x:e,y:n}}function v(t,e){e&&e.stopPropagation(),"ok"===t&&this.settings.onOk?this.settings.onOk():this.close(t)}var b,y=[],C=document.createElement.bind(document),E=[],x='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 224.512 224.512;" xml:space="preserve"><path d="M64 6.4L57.6 0 32 25.6 6.4 0 0 6.4 25.6 32 0 57.6 6.4 64 32 38.4 57.6 64l6.4-6.4L38.4 32"></path></svg>',w="hb-mo-content",_="hb-mo-footer",D="hb-dialog-overlay",A="hb-dialog",k="hb-mo-header",T="hb-mo-custom-header",N="hb-mo-header-left",$="hb-mo-header-right",I="hb-mo-header-text";t(document,"keydown",function(t){t.stopPropagation();var e=t.keyCode,n=(t.target,E[E.length-1]);n&&27===e&&!0===n.settings.escClose&&n.close()});var L,S,M,O=document.createElement("div"),R=["content"],B=(function(){var t,e=C("div"),n={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}(),function(){var t,e=C("div"),n={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(a(n,t)&&void 0!==e.style[t])return n[t]}(),function(){var t,e=C("div"),n={animation:"animationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(a(n,t)&&void 0!==e.style[t])return n[t]}()),H=null,j={type:"modals",entryAnimation:"FadeIn",exitAnimation:"FadeOut",closeBtn:!0,okBtn:!0,cancelBtn:!0,escClose:!0,mask:!0,autoOpen:!1,okText:"OK",cancelText:"Cancel",header:!0,footer:!0,onOpen:!1,beforeClose:!1,onClose:!1,onCancel:!1,onOk:!1,maskColor:"rgba(0,0,0,.7)",headingText:"Heading Text",maxWidth:600,fixHeaderFooter:!1,focus:"",minWidth:280,fixedWidth:!1,fixedHeight:!1,content:"",toggle:!1,offsetTop:"0px",offsetLeft:"0px",dialogClass:"",headerClass:"",contentClass:"",footerClass:"",closeBtnClass:"",okBtnClass:"",cancelBtnClass:"",maskClass:"",position:"below-center",dragHandlerClass:""};return f.prototype.close=function(a){function s(){if(e(this.dialog,B,this.boundRemoveDialog),this.mask)this.appCtx&&this.appCtx.view.purgeTemplate(this.mask),this.mask.parentNode.removeChild(this.mask);else{if(!this.dialog||!this.dialog.parentNode)return;this.appCtx&&this.appCtx.view.purgeTemplate(this.dialog),this.dialog.parentNode.removeChild(this.dialog)}1==E.length&&E[0]==this&&r(document.body,"no-scroll"),this.state="closed","inplace"===this.settings.type&&(this.settings.referenceElement.removeAttribute("data-hb-dialog-state"),this.settings.referenceElement.removeAttribute("data-hb-dialog-uuid")),$E.dispatch(document.body,"hbDialog:close",this),"close"===a?this.settings.onClose&&this.settings.onClose.call(this):"cancel"===a&&this.settings.onCancel&&this.settings.onCancel.call(this),function(t){for(var e=E.length-1;e>=0&&E[e].id!==t;e--);E[e]=null,E.splice(e,1)}(this.id)}function o(){"undefined"!=typeof $E&&$E.purge&&($E.purge(this.dialog),this.mask&&$E.purge(this.mask)),this.mask?(n(this.mask),this.mask.style.opacity=0):n(this.dialog),this.state="closing",$E.dispatch(document.body,"hbDialog:closing",this),this.settings.exitAnimation&&(this.boundRemoveDialog=s.bind(this),t(this.dialog,B,this.boundRemoveDialog)),"fullscreen"===this.settings.type?(r(this.dialog,"x"+this.settings.entryAnimation+"Full"),i(this.dialog,"x"+this.settings.exitAnimation+"Full")):(r(this.dialog,"x"+this.settings.entryAnimation),i(this.dialog,"x"+this.settings.exitAnimation)),this.settings.exitAnimation&&(this.boundRemoveDialog=s.bind(this),t(this.dialog,B,this.boundRemoveDialog))}void 0===a&&(a="close"),"opened"===this.state&&($E.dispatch(document.body,"hbDialog:beforeClose",this),this.settings.beforeClose?this.settings.beforeClose(o.bind(this)):o.call(this))},f.prototype.dismiss=function(){this.close("dismiss")},f.prototype.reposition=function(){if("fullscreen"!==this.settings.type&&"inplace"!==this.settings.type){var t=this.dialog.getBoundingClientRect();this.dialog.style.insetInlineStart=document.documentElement.clientWidth/2-t.width/2+"px",this.dialog.style.insetBlockStart=window.innerHeight/2-t.height/2+"px"}},f.prototype.disableButtons=function(){this.settings.footer&&(this.settings.okBtn&&(this.okBtn.disabled=!0),this.settings.cancelBtn&&(this.cancelBtn.disabled=!0))},f.prototype.enableButtons=function(){this.settings.footer&&(this.settings.okBtn&&(this.okBtn.disabled=!1),this.settings.cancelBtn&&(this.cancelBtn.disabled=!1))},f.prototype.open=function(){function n(){$E.dispatch(document.body,"hbDialog:open",l),l.settings.onOpen&&l.settings.onOpen.call(l),e(l.dialog,B,n)}var a=null,s=null,o=this.settings,l=this;if("fullscreen"===this.settings.type?r(this.dialog,"x"+this.settings.exitAnimation+"Full"):r(this.dialog,"x"+this.settings.exitAnimation),"inplace"===o.type)if(s=o.referenceElement,a=s.getAttribute("data-hb-dialog-state"),!0===o.toggle){if("opened"===a)return void this.close()}else if("opened"===a)return;this.state="opening",$E.dispatch(document.body,"hbDialog:beforeOpen",this),o.footer&&(o.okBtn?(this.okBtn.setAttribute("tabIndex",0),t(this.okBtn,"click",v.bind(this,"ok"))):this.okBtn.style.display="none",o.cancelBtn?(this.cancelBtn.setAttribute("tabIndex",0),t(this.cancelBtn,"click",v.bind(this,"cancel"))):this.cancelBtn.style.display="none"),"string"==typeof o.closeBtn&&(this.closeBtn=this.dialog.querySelector(o.closeBtn)),"string"==typeof o.okBtn&&(this.okBtn=this.dialog.querySelector(o.okBtn)),"string"==typeof o.cancelBtn&&(this.cancelBtn=this.dialog.querySelector(o.cancelBtn)),this.closeBtn&&(this.closeBtn.setAttribute("tabIndex",0),t(this.closeBtn,"click",v.bind(this,"close")),this.closeBtnClass&&i(this.closeBtn,this.closeBtnClass)),"inplace"!==o.type?("panel"!==o.type&&i(document.body,"no-scroll"),document.body.appendChild(this.html)):(s.parentNode.insertBefore(this.html,s.nextSibling),function(t,e,n){m(t);var r,a,s,o,l="rtl"==document.documentElement.getAttribute("dir");e.style.insetBlockStart=t.offsetTop+t.offsetHeight+5+"px",(r=n.match(/([\w]+)-center+/))?(o=p(a="center",s=r[1],t,e),"upper"===s&&(e.style.insetBlockStart=t.offsetTop-g(t,"height")-g(e,"height")+"px"),o.left<0?l?(e.style.insetInlineEnd=t.offsetLeft+"px",a="left"):(e.style.insetInlineStart=t.offsetLeft+"px",a="right"):o.right>document.documentElement.clientWidth?l?(e.style.insetInlineEnd=t.offsetLeft+g(t,"width")-g(e,"width")+"px",a="right"):(e.style.insetInlineStart=t.offsetLeft+g(t,"width")-g(e,"width")+"px",a="left"):l?e.style.insetInlineEnd=t.offsetLeft+g(t,"width")/2-g(e,"width")/2+"px":e.style.insetInlineStart=t.offsetLeft+g(t,"width")/2-g(e,"width")/2+"px"):(r=n.match(/([\w]+)-left+/))?(o=p(a="left",s=r[1],t,e)).left<0?l?(a="left",e.style.insetInlineEnd=t.offsetLeft+"px"):(a="right",e.style.insetInlineStart=t.offsetLeft+"px"):l?e.style.insetInlineEnd=t.offsetLeft+t.clientWidth-e.clientWidth+"px":e.style.insetInlineStart=t.offsetLeft+t.clientWidth-e.clientWidth+"px":(r=n.match(/([\w]+)-right+/))&&((o=p(a="right",s=r[1],t,e)).right>document.documentElement.clientWidth?l?(e.style.insetInlineEnd=t.offsetLeft+t.clientWidth-e.clientWidth+"px",a="right"):(e.style.insetInlineStart=t.offsetLeft+t.clientWidth-e.clientWidth+"px",a="left"):l?e.style.insetInlineEnd=t.offsetLeft+"px":e.style.insetInlineStart=t.offsetLeft+"px"),"upper"===s?o.top<0&&(s="below"):"below"===s&&window.innerHeight<o.bottom&&(s="upper"),i(e,s+"-"+a),"upper"===s?(i(e,"arrow-bottom"),e.style.insetBlockStart=t.offsetTop-g(t,"height")-g(e,"height")+"px"):i(e,"arrow-top")}.call(this,s,this.html,o.position)),this.html.setAttribute("tabIndex",0),"ok"===this.settings.focus?this.okBtn&&this.okBtn.focus():"cancel"===this.settings.focus?this.cancelBtn&&this.cancelBtn.focus():this.html.focus(),t(this.dialog,B,n),this.state="opened";this.dialog.getBoundingClientRect();"inplace"===this.settings.type?(s.setAttribute("data-hb-dialog-state","opened"),this.settings.closeOnOutsideClick&&(this.content.hasAttribute("tabindex")||this.content.setAttribute("tabindex",0),$E.bind(this.content,"focusout",function(t){var e=t.relatedTarget;(!e||e&&!l.dialog.contains(e))&&l.close("close")}),this.content.focus())):"fullscreen"===o.type?this.dialog.style.transform="translate3d(0,0,0)":this.reposition(),this.settings.dragHandlerClass&&function(t,e){function n(e){s&&(t.style.left=e.clientX-r+"px",t.style.top=e.clientY-a+"px")}function i(){s=!1,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)}var r,a,s=!1;document.getElementsByClassName(e)[0].addEventListener("mousedown",function(e){e.preventDefault(),s=!0,r=e.clientX-t.offsetLeft,a=e.clientY-t.offsetTop,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)})}(this.dialog,this.settings.dragHandlerClass)},f.setAppInstance=function(t){b=t},{Dialog:function(t){var e=function(t,e){var n;"fullscreen"!==t.type&&"inplace"!=t.type||void 0!==t.mask||(t.mask=!1);for(n in e)t.hasOwnProperty(n)||(t[n]=e[n]),"string"!=typeof t[n]||R.includes(n)||(O.innerText=t[n],t[n]=O.innerHTML);return t}(t,j),n=null,i=null;return"inplace"===e.type?(n=e.referenceElement.getAttribute("data-hb-dialog-uuid"),null===(i=function(t){for(var e=E.length-1;e>=0;e--)if(E[e].id===t)return E[e];return null}(n))?new f(e):i):new f(e)},headerTemplate:"",footerTemplate:"",closeOpenDialogs:function(t){var e;t instanceof f?e=[t]:t instanceof Array&&(e=t);for(var n,i=E.length-1;i>=0;i--)n=E[i],e?-1===e.indexOf(n)&&n.dismiss():n.dismiss()},getDialog:function(t){try{for(var e=0;e<E.length;e++)if(E[e].dialog.contains(t))return E[e]}catch(t){}},dialogInstances:E,setLocale:function(t){["okText","cancelText"].forEach(function(e){t.hasOwnProperty(e)&&t[e]&&(j[e]=t[e])})}}}),define("hbValidate",function(){function t(t){if(!(!t.appInstance instanceof Hummingbird)){this.appInstance=t.appInstance,this.onValid=t.onValid||null,this.onInvalid=t.onInvalid||null,this.onFailure=t.onFailure||null,this.onSuccess=t.onSuccess||null,this.i18nFn=t.i18nFn||null;var e=this.appInstance.messages||{};this.validationRules={email:{regex:/^((([^<>()[\]\\.,;:\s@!#&$%*"]+(\.[^<>()[\]\\.,;:\s@!#&$%*"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))?$/,message:e.INVALID_EMAIL_ADDRESS||"Invalid email address"},url:{regex:/^(https?:\/\/[\-A-Za-z0-9+&@#\/%?=~_|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_|])?/,message:e.INVALID_URL||"Invalid URL"},alphanumeric:{regex:/^([0-9A-Za-z]+)?$/,message:e.ALPHA_NUMERIC_ONLY||"Use digits and letters only"},number:{regex:/^(\d+)?$/,message:e.NUMERIC_ONLY||"Use digits only"},phonenumber:{regex:/^(\+|0)?((-|\.|\s)?(\()?[0-9](\))?){0,16}$/,message:e.INVALID_PHONE_NUMBER||"Invalid phone number format"},currency:{regex:/^(((?=.+)(?:([1-9]|0){1,14}))?(?:\.\d+)?)?$/,message:e.INVALID_CURRENCY||"Invalid currency"},required:{regex:/\S/,message:e.REQUIRED||"This field is required"},min:{validateFn:function(t,n,i,r){var a,o=r-i.trim().length;return a=o>0?s.i18nFn&&s.validationRules.min.i18nkey?s.i18nFn(s.validationRules.min.i18nkey,r,o):e.MIN?e.MIN+" "+r:"The number of characters should be greater than or equal to "+r:"",{valid:!(o>0),msg:a}}},max:{validateFn:function(t,n,i,r){var a,o=i.trim().length-r;return a=o>0?s.i18nFn&&s.validationRules.max.i18nkey?s.i18nFn(s.validationRules.max.i18nkey,r,o):e.MAX?e.MAX+" "+r:"The number of characters should be less than or equal to "+r:"",{valid:!(o>0),msg:a}}}},this.watchEvent=t.watchEvent||"change",this.submitHook=!0,this.html=t.html||{error:'<span class="hb-field-error" data-field-error="" role="alert">{{ msg }}</span>',success:'<span class="hb-field-success" data-field-success="" role="alert">{{msg}}</span>'},this.attributeName=t.attributeName||"data-validate",this.errorClass=t.errorClass||"hb-form-error",this.validClass=t.validClass||"",this.init(),s=this}}function e(t){$E.unbind(t.element,"focusout",e),l.now()}function n(t){return'<span class="hb-msg">'+t+"</span>"}function i(t,e){e.preventDefault();var n,i=this,a=r(this,t);return a.length>0?(t.onFailure&&t.onFailure(a,this),n={status:"failure",invalids:a},$E.dispatch(this,"hbValidate:submit",n)):(t.onSuccess&&t.onSuccess(a,this),n={status:"success"},this.__hbValSubmitBound?$E.dispatch(this,"hbValidate:submit",n):n.callback=function(t){$E.dispatch(i,"hbValidate:submit",{status:"success"})}),n}function r(t,e){var n,i=[],r=null,o=$D.getAll("[data-validate]",t),l=null;return e?l=e.attributeName:(l="data-validate",e=s),function(t){return Array.prototype.slice.call(t)}(o).reverse().forEach(function(t,s){r=t.getAttribute(l);t.getAttribute("data-err-msg");r&&(r=a(t.getAttribute(l)),(n=e.validateField(t,r,t.value))&&n.length>0&&(e.showValidationStatus(n,t,e),i.push(n)))}),i}function a(t){return t.trim().split(",").map(function(t){return t.trim()})}var s=null;t.prototype.validateField=function(t,e,n){var i=this,r=i.exts;if(t.hasAttribute("data-validate-skip"))return[];var a,s,o=!1,l=t.getAttribute("data-err-msg"),u=[];return r.forEach(function(e){e.check(t)&&(o=!0,(s=e.validate(t)).valid||(s.ext=e,s.binddata=t.getAttribute("data-bind"),u.push(s)))}),o||(u=e.map(function(r){var s,o;if(-1!==r.indexOf(":")&&(r=(s=r.split(":"))[0].trim(),o=s[1].trim(),isNaN(Number(o))||(o=Number(o))),i.validationRules[r])return i.validationRules[r].validateFn?i.validationRules[r].validateFn(t,e,n,o):i.validationRules[r].regex.test(n)?{valid:!0,type:r}:(a=i.i18nFn&&i.validationRules[r].i18nkey?i.i18nFn(i.validationRules[r].i18nkey):i.validationRules[r].message,{valid:!1,type:r,binddata:t.getAttribute("data-bind"),msg:l&&"required"==r?l:a})}).filter(function(t){return!(!t||t.valid)})),u};var o=null,l=null,u=null;return t.prototype.validateFn=function(n,i){function r(e,n){var i,r,l=l instanceof t?l:s,u=e.element,d=e.value;e.bindStr;u&&(null!==(r=u.getAttribute(l.attributeName))?(r=a(r),i=l.validateField(u,r,d),l.showValidationStatus(i,u,l,n),o=null):n())}var d;if(n.element!==u&&(o=null),n.element.hasAttribute("data-validate-wait")){if(d=n.element.getAttribute("data-validate-wait").trim(),d=Number(d),isNaN(d))return void r(n,i);null===o&&(o=function(t,e,n){var i,r=!1;return function(){function a(){clearTimeout(i)}function s(){r||(r=!0,a(),t.apply(o,l))}var o=this,l=arguments,u=n&&!i;return a(),i=setTimeout(function(){i=null,n||s()},e),u&&s(),{cancel:a,now:s}}}(r,d),u=n.element),l=o(n,i),$E.bind(n.element,"focusout",e,{args:n})}else r(n,i)},t.prototype.showValidationStatus=function(t,e,i,r){for(var a,s=!1,o=(e.getAttribute("data-err-msg"),[]),l=0;a=t[l];l++)a.ext&&a.ext.handleError(e)?(s=!0,a.ext.showError(e,a.msg),a.ext.focus(e)):o.push(n(a.msg));var u=e.closest("[data-err-target]")||e,d=$D.get("[data-field-error]",u.parentNode),c=o.join(" , ");t.length>0&&!s?(d?d.innerHTML=c:($D.addClass(u,this.errorClass),u.insertAdjacentHTML("afterend",i.html.error.replace("{{ msg }}",c))),e.focus(),i.onInvalid&&i.onInvalid(t,e),void 0!==r&&r()):(d&&($D.removeClass(e,this.errorClass),u.parentNode.removeChild(d)),i.onValid&&i.onValid(e),$D.removeClass(u,this.errorClass),$D.addClass(u,this.validClass),void 0!==r&&r())},t.prototype.init=function(){this.appInstance.extension.add("hb-validate","beforeModelUpdate",this.validateFn.bind(this)),this.appInstance.extension.add("hb-validate","afterRender",this.hookFormSubmit.bind(this))},t.prototype.hookFormSubmit=function(t,e){var n;n="string"==typeof t.targetId?$D.getById(t.targetId):t.targetId;for(var r,a=$D.getAll("form",n),s=a.length-1;this.submitHook&&s>=0;s--)r=i.bind(a[s],this),a[s].__hbValSubmitBound=r,a[s].__hbValidate=function(t){return{hasSubmitHook:function(){return!!this.__hbValSubmitBound}.bind(t),removeSubmitHook:function(){$E.unbind(this,"submit",this.__hbValSubmitBound),this.__hbValSubmitBound=null}.bind(t)}}(a[s]),$E.bind(a[s],"submit",r);e()},t.validateContext=r,t.prototype.formSubmit=i,t.prototype.exts=[],t.prototype.addCustomRule=function(t){t.validateFn?this.validationRules[t.name]={validateFn:t.validateFn}:this.validationRules[t.name]={regex:t.regex,message:t.message,i18nkey:t.i18nkey}},t.validateForm=r,t.showError=function(t,e,i){if(!i){var r=!1;if(s.exts.forEach(function(n){n.check(t)&&n.showError(t,e)&&(r=!0,n.focus(t))}),r)return}!function(t,e,i){var r=t.closest("[data-err-target]")||t,a=$D.get("[data-field-error]",r.parentNode);$D.addClass(r,i.errorClass),a?a.innerHTML='<span class="hb-msg">'+e+"</span>":r.insertAdjacentHTML("afterend",i.html.error.replace("{{ msg }}",n(e)))}(t,e,s)},t.removeError=function(t){var e=t.closest("[data-err-target]")||t;$D.removeClass(e,s.errorClass);var n=e.nextElementSibling;n&&n.hasAttribute("data-field-error")&&$D.remove(n)},t}),function(t,e){"function"==typeof define&&define.amd?define("notify",e):t.notify=e()}(this,function(){"use strict";function t(t){function e(){}t=t||"",this.msg=t,this.okLabel="Ok",this.cancelLabel="Cancel",this.onOk=e,this.onCancel=e,this.closeBtn=!1,this.defaultValue="";var n=$D.getByClass("hb-notify-cont");return 0===n.length&&(document.body.insertAdjacentHTML("beforeend",s),n=$D.getByClass("hb-notify-cont")),this.msgCont=n[0],this}function e(t,e,n,a,s){function d(){c&&window.clearTimeout(c),$D.removeClass(this,"slideInDownNotify"),$D.addClass(this,"slideOutUpNotify"),this.addEventListener(l,function t(){this.parentNode.removeChild(this),this.removeEventListener(l,t)})}t=u(t),n=u(n);var c,h,f,p,g=3e3;i&&r&&i===t&&n===r||("error"!==n&&"warning"!==n||(g=5e3),f=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e}(o.replace("{msg}",t).replace(/\{type\}/g,n).replace("{position}","right-bottom")),f=$D.get(".hb-notify-msg__item",f),p=$D.get(".hb-notify__close-icon",f),s||(p.style.display="none"),h=function(t){t&&t(),this.removeEventListener(l,h),s?p.addEventListener("click",d.bind(this)):c=window.setTimeout(d.bind(this),g)}.bind(f,a),f.addEventListener(l,h),$D.addClass(f,"slideInDownNotify"),$D.prepend(e,f),i=t,r=n,setTimeout(function(){r=null,i=null},3e3))}function n(t,e){for(var n=$D.getAll(".hb-notify-cont"),i=n.length-1;i>=0;i--)$D.remove(n[i]);e()}var i,r,a,s='<ul class="hb-notify-cont">\t\t\t\t\t</ul>',o='<li class="hb-notify-msg__item">\t\t\t\t\t        <div class="hb-notify {position} {type}">\t\t\t\t\t            <div class="hb-notify__icon-cont">\t\t\t\t\t                <div class="hb-notify__msg-icon hb-{type}"></div>\t\t\t\t\t            </div>\t\t\t\t\t            <div class="hb-notify__msg-cont">\t\t\t\t\t                <div class="hb-notify__msg-content">{msg}</div>\t\t\t\t\t            </div>\t\t\t\t\t            <div class="hb-notify__close-icon" style="fill:#FFFFFF"><svg class="svg-icon-10px"><use xmlns:xlink="ht""tp://www.w3.org/1999/xlink" xlink:href="#zs-delete-cross"></use></svg>\t\t\t\t\t          </div>\t\t\t\t\t        </div>\t\t\t\t\t    </li>',l=function(){var t,e=document.createElement("div"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t])return n[t]}(),u=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};return t.prototype.enableCloseBtn=function(){return this.closeBtn=!0,this},t.prototype.okLabel=function(t){return this.okLabel=t,this},t.prototype.cancelLabel=function(t){return this.cancelLabel=t,this},t.prototype.alert=function(t){alert(this.msg)},t.prototype.confirm=function(t,e){},t.prototype.defaultValue=function(t){this.defaultValue=t},t.prototype.prompt=function(t,e){},t.prototype.success=function(t){e(this.msg,this.msgCont,"success",t,this.closeBtn)},t.prototype.error=function(t){e(this.msg,this.msgCont,"error",t,this.closeBtn)},t.prototype.info=function(t){e(this.msg,this.msgCont,"info",t,this.closeBtn)},t.prototype.warning=function(t){e(this.msg,this.msgCont,"warning",t,this.closeBtn)},function(e,i){if(!i)return new t(e);(a=i.appCtx).extension.add("hb-notification","beforeRoute",n)}}),function(t,e){"function"==typeof define&&define.amd?define("hbUI",e):t.hbUI=e()}(this,function(){"use strict";function t(t,e,n,i){var r=window.setTimeout(function(){$D.removeClass(e,"active"),$D.removeClass(i,n),h.splice(t,1),window.clearTimeout(r),r=null},250)}function e(t){for(var e=l.length-1;e>=0;e--)if($D.hasClass(t,l[e]))return l[e]}function n(t,n){for(var a=$D.getAll(".hb-ui",t),s="",l=0,u=a.length;l<u;l++)void 0!==(s=e(a[l]))&&o[s].init(a[l],s);!1===c&&(c=!0,$E.bind(document,"keydown",r),$E.bind(document,"click",r)),n&&i(t)}function i(t){for(var n,i=$D.getAll(".hb-ui",t),r="",a=0,s=i.length;a<s;a++)void 0!==(r=e(i[a]))&&function(t,e){return t&&t.indexOf(e)>-1}((n=o[r]).cycles,"afterRenderCallBack")&&n.afterRenderCallBack&&o[r].afterRenderCallBack(i[a],r)}function r(t){p.hideAllActiveDD(t,function(t,e){for(var n=e;n&&n!==u;){if($D.hasClass(n,"hb-cbox-button")||"INPUT"===n.nodeName&&$D.hasClass(n,"dropdown-menu-cbox"))return t.stopPropagation(),n;if($D.hasClass(n,"hb-dd-cb"))return t.stopPropagation(),!0;if($D.hasClass(n,"select")||$D.hasClass(n,"dropdown-menu"))return!1;n=n.parentNode}return!0}(t,t.target))}function a(t,e){n(t.template),e()}function s(t,e){var n;i(n=$D.isNode(t.targetId)?t.targetId:$D.getById(t.targetId)),p.autofocus(n),e()}var o={},l=[],u="",d={},c=!1;d.ddActive=[];var h=d.ddActive,f={ELEMENT:1,ATTR:2,TEXT:3};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1});var p={};p.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},p.debounce=function(t,e,n){var i;return function(){var r=this,a=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(r,a)},e),s&&t.apply(r,a)}},p.throttle=function(t,e,n){var i=(new Date).getTime();return function(){var r=(new Date).getTime();r-i>=t&&(i=r,e.apply(n||null,arguments))}},p.getParentByClass=function(t,e){for(var n=e;n;){if($D.hasClass(n,t))return n;n=n.parentNode}return null},p.getParentByAttr=function(t,e){for(var n=e;n&&"BODY"!==n.tagName;){if(n.getAttribute(t))return n;n=n.parentNode}return null},p.fireEvent=function(t,e,n,i,r){i=void 0===i||i,r=void 0===r||r;if(document.createEventObject){return(a=document.createEventObject()).detail=n,a.cancelBubble=i,a.returnValue=r,t.fireEvent("on"+e,a)}var a;return(a=document.createEvent("HTMLEvents")).detail=n,a.initEvent(e,i,r),!t.dispatchEvent(a)},p.getCssProperty=function(t,e,n){var i=window.getComputedStyle(t,null).getPropertyValue(e);return"int"===n?parseInt(i.replace("px","").replace("%","")):i},p.splitby=function(t,e){for(var n=(e=e.split(t)).length-1;n>=0;n--)e[n]=e[n].trim();return e},p.getKeyCode=function(t){return t.keyCode?t.keyCode:t.charCode},p.getFormEl=function(t){for(var e=t;e=e.parentElement;)if("FORM"===e.tagName)return e},p.parseOptions=function(t){var e=t.getAttribute("data-options").split(","),n={};e.forEach(function(t,n){e[n]=t.trim(),e[n]=e[n].split(":")});for(var i=0,r=e.length;i<r;i++)n[e[i][0].trim()]=e[i][1].trim();return n},p.textToHtml=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e},p.buildFragment=function(t){var e=document.createDocumentFragment().appendChild(document.createElement("div"));return e.innerHTML=t,e},p.escapeHtml=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},p.parseHTML=function(t){var e=/^<(\w+)\s*\/?>(?:<\/\1>|)$/.exec(t);return e?[document.createElement(e[1])]:(e=p.buildFragment(t),Array.prototype.slice.call(e.childNodes))},p.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},p.prependChild=function(t,e){t.insertBefore(e,t.firstChild)},p.getMutationObserver=function(){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return t||!1},p.createElement=document.createElement.bind(document),p.hideAllActiveDD=function(e,n){if(n){for(var i,r,a,s,o,l=h.length-1;l>=0;l--)r=h[l].el,(i=$D.getByClass("dd-cont",r)[0]).hasAttribute("data-prevent-hide")?i.removeAttribute("data-prevent-hide"):(s=h[l].ex_ani,a=h[l].en_ani,$D.removeClass(i,a),$D.addClass(i,s),t(l,r,s,i));for(l=(o=$D.getByClass("dropdown-menu-cbox")).length-1;l>=0;l--)if(n.nodeType===f.ELEMENT){if("INPUT"===n.nodeName&&n.id===o[l].id)continue;"LABEL"===n.nodeName&&n.getAttribute("for")!==o[l].id&&!0===o[l].checked&&(o[l].checked=!1)}else o[l].checked=!1}},p.export=function(t,e){g[t]=e},p.isElementVisible=function(t,e){var n=t.getBoundingClientRect(),i=(e||document).elementFromPoint(n.x+n.width/2,n.y+n.height/2);return t.isSameNode(i)||t.contains(i)},p.autofocus=function(t){var n,i,r=$D.get("[hb-autofocus]",t);if(r){if(!r.matches("input, select, textarea, a, button"))return;if(n=window.getComputedStyle(r),$D.hasClass(r,"hb-ui")){if(void 0===(i=e(r)))return;o[i].focus&&o[i].focus(r,i)}else"none"===n.display||"hidden"===n.visibility||r.disabled||r.focus()}},d.animationEnd=function(){var t,e=document.createElement("div"),n={animation:"animationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t])return n[t]}();var g={_:d,components:o,getType:e,extend:function(t){!function(t){if($IS.array(t.tag)?t.tag.forEach(function(e){l.push(e),o[e]=t}):(l.push(t.tag),o[t.tag]=t),t.hasOwnProperty("api"))for(var e in t.api)t.api.hasOwnProperty(e)&&(g[e]=t.api[e])}(t)},init:function(t){"undefined"!=typeof Hummingbird&&t instanceof Hummingbird?(t.extension.add("hbUI",{beforeRender:a}),t.extension.add("hbUI",{afterRenderCallBack:s}),Object.defineProperty(d,"validateRules",{get:function(){if(void 0!==t.validateInstance)return t.validateInstance.validationRules},set:function(e){t.validateInstance.validationRules=t.validateInstance.validationRules||e}})):n(t,!0),$E.bind(document.body,"hbui:afterRender",function(t){i(t.target)})},list:function(){return l},NODE_TYPE:f,KEYCODE:{BACKSPACE:8,TAB:9,CAPSLOCK:20,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,DOWNARROW:40,UPARROW:38},utils:p,visible:i,hook:n};return p.export("focus",function(t){var n=window.getComputedStyle(t);if($D.hasClass(t,"hb-ui")){var i=e(t);if(void 0===i)return;o[i].focus&&o[i].focus(t,i)}else"none"===n.display||"hidden"===n.visibility||t.disabled||t.focus()}),g}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){function r(){for(var t=this.getAttribute("data-group"),e=this.checked,n=$D.getAll("input[data-group="+t+"]"),i=n.length-1;i>=0;i--)n[i].checked=e}function a(e){var i,r=$D.get("input.hb-ui",this);r.disabled||(t.getKeyCode(e)===n.SPACE?(e.preventDefault(),"radio"===r.type?r.checked||(r.checked=!0,t.fireEvent(r,"change")):(r.checked?r.checked=!1:r.checked=!0,t.fireEvent(r,"change"))):t.getKeyCode(e)===n.ENTER&&(i=t.getFormEl(e.target))&&t.fireEvent(i,"submit"))}return{tag:["checkbox","radio"],focus:function(t,e){return t.closest("[tabindex]").focus(),!0},init:function(e,n){if(!$D.hasClass(e,"radio__group")){var i=e.id?e.id:t.guid(),s=document.createElement("span"),o=document.createElement("label");e.id=i,s.className=n+"-cont",o.setAttribute("for",i),e.disabled?(s.setAttribute("tabindex",-1),$D.addClass(s,"hb-disable")):s.setAttribute("tabindex",0),$D.insertAfter(s,e),s.appendChild(e),s.appendChild(o),$D.hasClass(e,"hb-main")&&$E.bind(e,"change",r),$E.bind(s,"keypress",a),new MutationObserver(function(t){t.forEach(function(t){if("disabled"===t.attributeName){var e=t.target.closest("[tabindex]");t.target.hasAttribute("disabled")?$D.addClass(e,"hb-disable"):$D.removeClass(e,"hb-disable")}})}).observe(e,{attributes:!0})}}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e.KEYCODE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI.KEYCODE))}(function(t,e){function n(n){var i=this.getAttribute("for"),r=$D.getById(i);t.getKeyCode(n)===e.SPACE?(n.preventDefault(),r.checked?r.checked=!1:r.checked=!0,t.fireEvent(r,"change")):t.getKeyCode(n)===e.ENTER&&(formEl=t.getFormEl(n.target),formEl&&t.fireEvent(formEl,"submit"))}return{tag:["switch-2","switch"],focus:function(t,e){return t.nextSibling.focus(),!0},init:function(e,i){e.id=e.id?e.id:t.guid();var r=document.createElement("label");r.setAttribute("for",e.id),r.setAttribute("tabindex",0),r.innerHTML="<i></i>",t.insertAfter(r,e),$E.bind(r,"keypress",n)}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){function r(t){if(t.stopPropagation(),$E.unbind(document,"mouseup",a),$E.bind(document,"mouseup",a,{args:this}),$E.bind(window,"blur",a,{args:this}),$D.hasClass(this.btn,"hb-active"))$D.removeClass(this.btn,"hb-active"),hbAnimate(this.content).scaleOut({duration:"0.3s",direction:"down"});else{var e=this.content.attributes;if(e.dropup&&e.dropup.nodeValue&&function(t){return t.getBoundingClientRect().top+t.clientHeight>Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}(this.content)){var n=-(this.btn.offsetHeight+this.content.offsetHeight);this.content.style.insetBlockStart=Number(this.content.style.insetBlockStart.replace("px",""))+n+"px"}left=-this.content.clientWidth/2+this.btn.clientWidth/2+this.btn.offsetLeft,this.content.style.insetInlineStart=left+"px",$D.addClass(this.btn,"hb-active"),hbAnimate(this.content).scaleIn({duration:"0.3s",direction:"down"})}if(e&&e["close-dd"]&&e["close-dd"].nodeValue.includes("mouseleave")){$E.unbind(this.content,"mouseleave",a);var i=this;setTimeout(function(t){$E.bind(i.content,"mouseleave",a,{args:i})},300)}}function a(t,e){if(!($D.hasClass(t.target,"hb-dd-exclude")||t.target.closest&&t.target.closest(".hb-dd-exclude")))if("blur"==t.type)$D.removeClass(e.btn,"hb-active"),hbAnimate(e.content).scaleOut({duration:"0.3s",direction:"down"});else{t.target.closest(".hb-dd-btn")!=e.btn&&($D.removeClass(e.btn,"hb-active"),hbAnimate(e.content).scaleOut({duration:"0s",direction:"down"}))}}return{tag:["hb-dropdown"],init:function(t,e){var n=$D.get(".hb-dd-btn",t),i={btn:n,content:$D.get(".hb-dd-content ",t)};$E.bind(n,"click",r.bind(i))}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE))}(function(t,e,n){function i(t){var e=this.getAttribute("min"),n=this.getAttribute("max");this.value&&(this.value.startsWith(".")&&(this.value="0"+this.value),e&&0==e&&Number(this.value)<Number(e)?(this.value=e,this.setAttribute("data-value",e)):n&&Number(this.value)>Number(n)&&(this.value=n,this.setAttribute("data-value",n)))}function r(t){var e=this.getAttribute("min"),n=this.getAttribute("max");if(t.keyCode==d){var i=Number(this.value);e&&i<Number(e)?i=e:n&&i>Number(n)&&(i=n),this.value=i,this.setAttribute("data-value",i)}}function a(t){$D.hasClass(this,"hover")||$D.addClass(this,"hover")}function s(t){$D.hasClass(this,"hover")&&$D.removeClass(this,"hover")}function o(e){if("LI"===e.target.tagName){var n=e.target.getAttribute("data-value"),i=t.getParentByClass("hb-nu-cont",this),r=$D.get(".unit-selected",i),a=$D.get("input.hb-ui.unit",i);r.innerHTML=n,a.value=n,t.fireEvent(a,"change"),t.fireEvent(a,"input");i=e.target.parentNode.parentNode.parentNode;$D.removeClass(i,"hover")}}function l(e){e.preventDefault(),e.stopPropagation();var n=t.getParentByClass("hb-nu-cont",this),i=$D.get("input.hb-ui.number",n),r=i.value&&parseFloat(i.value.trim(),10),a=i.getAttribute("min")?parseInt(i.getAttribute("min").trim(),10):null,s=i.getAttribute("max")?parseInt(i.getAttribute("max").trim(),10):null,o=i.getAttribute("step")&&i.getAttribute("step").trim()?parseFloat(i.getAttribute("step").trim()):1,l=-1!=(o+"").indexOf(".")?(o+"").split(".")[1].length:0,u=$D.hasClass(e.target,"incre")?"+":"-",d=null;d=""!==r?"+"===u?r+o:"-"===u?r-o:"":a<0?0:a,d=a&&d<a?a:d,(d=s&&d>s?s:d)>=a&&d<=s&&(i.value=d.toFixed(l),i.setAttribute("data-value",d),t.fireEvent(i,"change"),t.fireEvent(i,"input"))}var u=[187,189,171,173,107,109,69],d=13;return{tag:["number","unit"],init:function(e,n){var d=!1;if("unit"!==n){var c=e.nextElementSibling;c&&$D.hasClass(c,"hb-ui")&&$D.hasClass(c,"unit")&&(d=!0);var h=document.createElement("div"),f=document.createElement("div"),p=document.createElement("div"),g=document.createElement("div"),m=document.createElement("div"),v=null,b="",y="";if(h.className=d?"hb-nu-cont units":"hb-nu-cont","true"==e.getAttribute("disable-sign")&&$E.bind(e,"keydown",function(t){u.indexOf(t.keyCode)>-1&&t.preventDefault()}),$E.bind(e,"keyup",i),$E.bind(e,"keydown",r),h.appendChild(f),f.className="controls",g.className="incre",m.className="decre",g.innerHTML="+",m.innerHTML="-",f.appendChild(g),f.appendChild(m),$E.bind(f,"click",l),d){if((v=function(t){var e=[];return t.getAttribute("units").split(",").forEach(function(t){e.push(t.trim())}),e}(c)).length<1)throw new Error("No unit specified");y=""!==c.value.trim()?c.value.trim():v[0],b='<span class="unit-selected">'+y+'</span><span class="down-arr">&#x25BC;<ul>',v.forEach(function(t){b+='<li data-value="'+t+'">'+t+"</li>"}),b+="</ul>",p.innerHTML=b,p.className="units",h.appendChild(p),$E.bind(p,"click",o),$E.bind(p,"mouseenter",a),$E.bind(p,"mouseleave",s)}t.insertAfter(h,e),d&&t.prependChild(h,c),t.prependChild(h,e)}},api:{updateUnit:function(e,n){var i=$D.getById(e);i.value=n;var r=t.getParentByClass("hb-nu-cont",i);$D.get(".unit-selected",r).innerHTML=n,t.fireEvent(i,"change")}}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._))}(function(t,e){function n(){var e=t.getParentByClass("dropdown-menu",this);if(!$D.get(".dd-btn",e).hasAttribute("disabled")){var n=$D.getByTag("ul",e)[0],r=n.getAttribute("data-animation").split(",");$D.hasClass(e,"active")?(console.log("hiding"),t.hideAllActiveDD(!0)):(t.hideAllActiveDD(!0),i.push({el:e,en_ani:r[0].trim(),ex_ani:r[1].trim()}),$D.addClass(e,"active"),$D.addClass(n,r[0].trim()))}}var i=e.ddActive;return{tag:["dropdown-menu"],init:function(t,e){$D.getByClass("dd-btn")[0],$E.bind($D.get(".dropdown-menu .dd-btn",t),"click",n)}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){function r(t){return document.getElementById(t)}function a(t,e,n){return void 0===n?t.getAttribute(e):t.setAttribute(e,n)}function s(){var t=a(this,"data-popup-content").trim().substr(1),e=(a(this,"data-title"),r(t)),n=a(this,"data-ref-el"),i=a(this,"data-popup-position"),s=i,o=n?r(n):this,l=a(this,"data-popup-duration");switch(i=i||"top",l=l||"0.3s",e.style.insetBlockStart=o.offsetTop+o.offsetHeight+5+"px","top"!==i&&"bottom"!==i||(e.style.insetInlineStart=o.offsetLeft+o.clientWidth/2-e.clientWidth/2+"px"),"left"!==i&&"right"!==i||(e.style.insetBlockStart=o.offsetLeft+o.clientWidth/2-e.clientWidth/2+"px"),a(e,"data-hb-arrow","arr-"+i),i){case"top":e.style.insetBlockStart="-"+(e.clientHeight+20-o.offsetTop)+"px",s="up";break;case"bottom":e.style.insetBlockStart=o.clientHeight+o.offsetTop+20+"px",s="down";break;case"left":e.style.insetBlockStart=o.clientHeight/2-e.clientHeight/2+o.offsetTop+"px",e.style.insetInlineStart=o.offsetLeft-e.clientWidth-20+"px";break;case"right":e.style.insetBlockStart=o.clientHeight/2-e.clientHeight/2+o.offsetTop+"px",e.style.insetInlineStart=o.offsetLeft+o.clientWidth+20+"px"}hbAnimate(e).scaleIn({duration:l,direction:s})}function o(){var t=r(a(this,"data-popup-content").trim().substr(1)),e=a(this,"data-popup-position"),n=a(this,"data-popup-duration");e=e||"top",n=n||"0.3s",hbAnimate(t).scaleOut({duration:n,direction:e})}return{tag:["hb-popup"],init:function(t,e){$E.bind(t,"mouseenter",s),$E.bind(t,"mouseleave",o)}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE,e.components.number))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE,hbUI.components.number))}(function(t,e,n,i,r){"use strict";function a(e){this.selectEl=e,this.dropdownList=null,this.en_ani="pullDown",this.ex_ani="pullUp",this.isTextArea=$D.hasClass(this.selectEl,"text-area"),this.isAutoComplete=$D.hasClass(this.selectEl,"autocomplete")||this.isTextArea,this.optGroups=$D.getAll("optgroup",e),this.hasOptGroup=this.optGroups.length>0,this.isTagInput=$D.hasClass(e,"hb-tags-input"),this.isTreeInput=$D.hasClass(e,"hb-tree-input"),this.hideTree=e.hasAttribute("data-hide-tree"),this.isRemote=e.hasAttribute("data-remote"),this.placeholder=e.getAttribute("placeholder"),this.limit=Number(e.getAttribute("data-limit")),this.constructHtml(),this.boundFns={},this.bindEvents(),this._noHideOnBlur=!1,this.initTree(e),this.searchVal="",this.debouncedSearchVal=t.debounce(this.clearSearchVal.bind(this),1e3);var n=e.getAttribute("data-delimiter-regex");n&&(this.delimiterRegex=new RegExp(n,"g")),!e.multiple&&e.hasAttribute("value")&&e.setAttribute("value",e.getAttribute("value")),this._hookMutationObserver(e)}function s(t){for(var e=t;!$D.hasClass(e,"hbui-cont");){if("LI"===e.tagName)return e;e=e.parentElement}return!1}function o(){$D.removeClass(this,"tag-glitter"),$E.unbind(this,e.animationEnd,o)}function l(e,n){var i=c(e,n);e.value=n,i.setAttribute("selected","true"),event&&"keydown"===event.type&&t.fireEvent(e,"change")}function u(t,e){for(var n=t.length-1;n>=0;n--)if($D.hasClass(t[n],"hover"))return e&&$D.removeClass(t[n],"hover"),n;return null!==this.currHovered&&this.currHovered<t.length&&this.currHovered}function d(t,e){var n=!1;e=e.toString().toLowerCase();for(var i=0,r=t.options.length;i<r;i++)if(!t.options[i].disabled&&t.options[i].text.toLowerCase().trim()===e.trim()){n=t.options[i];break}return n}function c(t,e){for(var n=t.options,i=t.length-1;i>=0;i--)if(n[i].value===e.toString())return n[i]}function h(t,e,n){return f(t,e,n,"li","value")}function f(t,e,n,i,r,a){var s,o=i+"["+r+'="'+e+'"]';try{s=a?$D.getAll(o,n):$D.get(o,n)}catch(t){var l,u=$D.getAll(i,n);if(a)return u;for(var d=u.length-1;d>=0;d--)if((l=u[d].getAttribute(r))&&l.trim()===e)return u[d]}return s}function p(e,n,i){i||(i=c(this.selectEl,e));var r,a=$D.hasClass(this.selectEl,"hb-tags-input"),s=$D.get(".selected-val",this.uiCont),o=i.getAttribute("data-color"),l=i.getAttribute("data-img-src"),u=i.getAttribute("data-icon-class"),d=i.getAttribute("data-class"),f=h(this.selectEl,e,this.uiCont);f&&(!0===n?$D.addClass(f,"active"):$D.removeClass(f,"active"));var p=i.text;o=o?'<span class="hb-color" style="background-color:'+o+'"></span>':"",l=l?'<img src="'+l+'"/>':"",u=u?u='<i class="'+u+'"></i>':"",d=d&&" "+t.escapeHtml(d)||"",this.isTreeInput&&(p=this._getXpath(i));(d=i.getAttribute("data-class"))&&(d=d.trim()),a||this.selectEl.multiple?((r=g.call(this,e))&&!1===n?$D.remove(r):r||!0!==n||(this.isTreeInput&&(p=this._getXpath(i)),s.insertAdjacentHTML("beforebegin",'<span class="hb-tag '+(d||"")+'" value="'+t.escapeHtml(e)+'">'+o+l+u+t.escapeHtml(p)+"<i>x</i></span>"),E($D.getAll(".hb-tag",this.uiCont))),s.value=""):"INPUT"===s.tagName?!0===n&&(this.isAutoComplete&&""===e?s.placeholder=this.placeholder||p||"":(s.value=p,s.setAttribute("data-value",e))):!0===n&&(s.setAttribute("value",e),s.innerHTML=o+l+u+t.escapeHtml(p))}function g(t){for(var e=$D.getAll(".hb-tag",this.uiCont),n=e.length-1;n>=0;n--)if(e[n].getAttribute("value")===t)return e[n];return!1}function m(t){for(var e=k.length-1;e>=0;e--)if(k[e].selectEl===t)return k[e];return!1}function v(t){var e=function(t){for(var e=k.length-1;e>=0;e--)if(k[e].uiCont===t)return k[e];return!1}(t);e&&e.hide()}function b(t,e,n){for(;e!==t;)n=n.parentNode.parentNode,e-=1;return n}function y(t,e,n,i){if(e.children)for(var r=0,a=e.children.length;r<a;r++)i.push({node:t[e.children[r]],level:n,text:t[e.children[r]][S],value:t[e.children[r]][M]}),y(t,t[e.children[r]],n+1,i)}function C(t,e,n,i){e.id_key;var r,a,s=e.child_key,o=(e.parent_key,e.root_id,e.text_val_key),l=e.value_key;void 0===i&&(i=[]),n=n||0;for(var u=0,d=t.length;u<d;u++)r="function"==typeof o?o(t[u]):o,a="function"==typeof l?l(t[u]):l,i.push({node:t[u],level:n,value:t[u][a],text:t[u][r]}),C(t[u][s],e,n+1,i);return i}function E(t){for(var e=t.length-1;e>=0;e--)$D.removeClass(t[e],"tag-warn")}e.validateRules=e.validateRules||{};var x=function(t,e,n){function i(){e.scrollTop=s.top-(a.y-e.scrollTop)}function r(){e.scrollTop=s.top-(a.y+a.height-e.scrollTop)+s.height}var a=e.getBoundingClientRect(),s=t.getBoundingClientRect();"top"!=n?"bottom"!=n?a.y>s.top?i():a.y+a.height<s.top+s.height&&r():r():i()};String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t});var w=e.ddActive,_='<div class="hbui-cont select">\t\t\t\t\t<div class="ip-field-cont">\t\t\t\t\t\t{input_node}\t\t\t\t\t</div>\t\t\t\t\t<div class="dropdown">\t\t\t\t\t\t<div class="dd-cont"></div>\t\t\t\t\t</div>\t\t\t\t\t{down-arr-icon}\t\t\t\t</div>',D='<span class="toggle-arr">                    <span></span>                </span>',A=a.prototype;A.constructHtml=function(){document.createElement("div").innerHTML=_;var t=this.selectEl.getAttribute("data-target-input"),e=document.createDocumentFragment(),n=document.createElement("div"),i=_.replace("{down-arr-icon}",D);if(t){var a=$D.get('[id="'+t+'"]',this.selectEl.parentElement);n.innerHTML=i.replace("{input_node}",a.outerHTML),$D.remove(a)}else n.innerHTML=i.replace("{input_node}",'<input type="text" class="selected-val" />');this.uiCont=n.firstElementChild,this.input=$D.get("input",this.uiCont);if("off"==this.selectEl.getAttribute("autocomplete")&&this.input.setAttribute("autocomplete","nope"),"number"==this.input.type){$D.addClass(this.input,"hb-ui number"),r.init(this.input);var s=this;$E.bind(this.input,"change",function(){s.setSelectValue(this.value,!1,!0)})}var o=document.createElement("div");o.className="selected-val","number"==this.input.type||this.isAutoComplete&&!$D.hasClass(this.selectEl,"hide-search-text")||(this.input.parentNode.replaceChild(o,this.input),this.input=o),o.setAttribute("tabindex",0),this.constructList(),e.appendChild(this.uiCont),(this.isTagInput||this.selectEl.multiple)&&$D.addClass(this.uiCont,"hb-tags-input-cont"),this.isTextArea&&$D.addClass(this.uiCont,"text-area-cont"),!this.selectEl.multiple||this.isTagInput||this.isAutoComplete||(o.style.display="none",this.input=$D.get(".ip-field-cont",this.uiCont),this.input.setAttribute("tabindex",0)),this.selectEl.parentNode.insertBefore(e,this.selectEl),$D.hasClass(this.selectEl,"round-corner")&&$D.addClass(this.uiCont,"round-corner"),this.dropdown=$D.get(".dd-cont",this.uiCont),this.dropdown.innerHTML="",this.dropdown.appendChild(this.dropdownList),this.processDisable()},A.constructList=function(e,n,i){e=e||this.selectEl.options;var r,a,s,o,l,u,d,c,h,f,p,m,v,b=document.createElement("ul");void 0===n&&(n=!0);var y,C;if(this.hasOptGroup){D=0;for(var x=(s=this.optGroups).length;D<x;D++){a=s[D].disabled,o=$D.getByTag("option",s[D]),(r=document.createElement("li")).className="optGroupLabel",r.innerHTML=s[D].label.trim(),b.appendChild(r);for(var w=0,_=o.length;w<_;w++)l=o[w].getAttribute("data-icon-class"),p=t.escapeHtml(o[w].text),l=l?'<i class="'+l+'"></i>':"",n&&(o[w].selected||o[w].hasAttribute("selected"))&&(h=o[w].value,f='<i class="'+o[w].getAttribute("data-icon-class")+'"></i>'+p,!0,(y=$D.get(".selected-val",this.uiCont)).setAttribute("value",h),y.innerHTML=f),r=document.createElement("li"),a&&(r.className="disabled"),r.setAttribute("value",o[w].value),r.setAttribute("data-group",s[D].label.trim()),r.innerHTML=l+p,b.appendChild(r);a=!1}}else{for(var D=0,A=e.length;D<A;D++)c=null,0===D&&this.isAutoComplete&&""===e[D].value.trim()?this.input.placeholder=this.placeholder||e[D].text||"":e[D].disabled||e[D].hasAttribute("disabled")||((r=document.createElement("li")).setAttribute("value",e[D].value),c=e[D].getAttribute("data-desc"),l=e[D].getAttribute("data-icon-class"),u=e[D].getAttribute("data-img-src"),d=e[D].getAttribute("data-color"),C=e[D].hasAttribute("data-class")?" "+t.escapeHtml(e[D].getAttribute("data-class")):"",p=t.escapeHtml(e[D].text),l=l?l='<i class="'+l+'"></i>':"",u=u?'<img src="'+u+'"/>':"",d=d?'<span class="hb-color" style="background-color:'+d+'"></span>':"",C=C?C.trim():"",(e[D].selected||e[D].hasAttribute("selected"))&&(y=$D.get(".selected-val",this.uiCont),r.className="active",n&&(this.selectEl.multiple?(!g.call(this,e[D].value)&&y.insertAdjacentHTML("beforebegin",'<span class="hb-tag '+C+' "  value="'+t.escapeHtml(e[D].value)+'">'+d+u+l+p+" <i>x</i></span>"),E($D.getAll(".hb-tag",this.uiCont))):"INPUT"===y.tagName?(y.value=e[D].text,y.setAttribute("data-value",e[D].value)):(y.setAttribute("value",e[D].value),y.innerHTML=d+u+l+p))),c?(m=!0,r.innerHTML=l+'<span class="hb_opt__text">'+p+'</span><span class="hb_opt__desc">'+c+"</span>"):this.isTreeInput?(v=e[D].hasAttribute("data-index")?e[D].getAttribute("data-index"):D,r.innerHTML=d+u+l+t.escapeHtml(this._getXpath(v))):r.innerHTML=d+u+l+p,b.appendChild(r),void 0!==i&&D===i+1&&$D.addClass(r,"hover"));0==e.length&&(this.input.placeholder=this.placeholder||"")}m&&$D.addClass(this.uiCont,"has-desc"),this.dropdownList=b},A._getXpath=function(e,n){for(var i,r,a=i=isNaN(e)?e:this.selectEl.options[e],s=n?t.escapeHtml(i.text):i.text,o=Number(i.getAttribute("data-level"));a;)if(a=a.previousElementSibling){if(r=Number(a.getAttribute("data-level")),isNaN(r))throw new Error("Error specifying level for tree input");if(r<=0)return s;r<o&&(o=r,s=(n?t.escapeHtml(a.text):a.text)+" > "+(n?t.escapeHtml(s):s))}return s},A.bindEvents=function(){this.boundFns.handleClick=this.handleClick.bind(this),this.boundFns.search=this.search.bind(this),this.boundFns.handleKeyNav=this.handleKeyNav.bind(this),this.boundFns.handleBlur=this.handleBlur.bind(this),this.boundFns.mouseDown=this.mouseDown.bind(this),$E.bind(this.uiCont,"click",this.boundFns.handleClick),$E.bind(this.uiCont,"keydown",this.boundFns.handleKeyNav),$E.bind(this.input,"focus",this.boundFns.handleClick,!0),$E.bind(this.input,"blur",this.boundFns.handleBlur,!0),$E.bind(this.uiCont,"mousedown",this.boundFns.mouseDown,!0);var t=this;this.isAutoComplete&&($E.bind(this.input,"keyup",this.boundFns.search),$E.bind(this.input,"paste",function(e){var n=this;setTimeout(function(){var e,i,r,a=t.selectEl.getAttribute("data-onpaste-regex"),s=[],o=t.selectEl.getAttribute("data-delimiter-regex");if(o&&(r=new RegExp(o,"g")),a)for(e=new RegExp(a,"g");i=e.exec(n.value);)i[1]&&s.push(i[1]);0===s.length&&(o||(o=/,/),s=n.value.split(r).map(function(t){return t.trim()}).filter(function(t){return!!t}),console.log(s)),t._handlePaste(n,s)},0)}))},A.isActive=function(){return $D.hasClass(this.uiCont,"active")},A.showDD=function(t,n){if(0!==this.selectEl.options.length||t){if(!n){var i=$D.get(".select__err-info",this.uiCont);i&&(i&&$D.remove(i),this.isAutoComplete&&(this.constructList(),this.dropdown.innerHTML="",this.dropdown.appendChild(this.dropdownList)))}this.dropdown.__timeout&&(window.clearTimeout(this.dropdown.__timeout),delete this.dropdown.__timeout),this.removeHoverOrActive($D.getAll(".dd-cont li",this.uiCont),"hover"),$D.addClass(this.uiCont,"active");var r=window.innerHeight-this.dropdown.getBoundingClientRect().top;r<=350&&(this.dropdown.style.maxBlockSize=r-10+"px"),$D.removeClass(this.dropdown,"pullUp"),$D.addClass(this.dropdown,"pullDown");var a=this;$E.bind(this.dropdown,e.animationEnd,function(){a.showOption()});for(var s=!0,o=0,l=w.length;o<l;o++)if(w[o].el===this.uiCont){s=!1;break}s&&w.push({el:this.uiCont,en_ani:this.en_ani,ex_ani:this.ex_ani})}},A.showValidationErr=function(t){var e=$D.get("ul",this.dropdown),n=$D.get(".select__info",this.dropdown);n&&$D.remove(n),e&&(e.style.display="none");var i=$D.get(".select__err-info",this.dropdown);i&&$D.remove(i),this.dropdown.insertAdjacentHTML("beforeend",'<div class="select__err-info">'+t+"</div>")},A.handleKeyNav=function(e){var i,r,a,s=t.getKeyCode(e),o=e.target;if(s===n.TAB&&"INPUT"===o.tagName){if(""===(r=o.value.trim()))return void e.stopPropagation();this._matchedOption?(console.log("asdf"),this.setOptionActive(this._matchedOption)):!(i=this.validate(r)).valid&&i.msg?this.showValidationErr(i.msg):(a=d(this.selectEl,r))&&this.setOptionActive(a),this.selectEl.multiple&&""!==r&&e.preventDefault()}else if("number"==this.input.type||s!==n.DOWNARROW&&s!==n.UPARROW)if(s===n.ESCAPE){if(!this.isActive())return;this.hideActiveDD(!0)}else if(s===n.ENTER)this._handleEnterKey(o,e);else if(s===n.BACKSPACE)console.log("in bkspc"),this._handleEscKey(o);else if(this.delimiterRegex&&this.delimiterRegex.test(e.key))e.preventDefault(),e.target.value.trim()&&this._handleEnterKey(o,null,e.target.value);else{var l=$D.getAll(".hb-tag",this.uiCont);0!==l.length&&$D.removeClass(l[l.length-1],"tag-warn")}else e.preventDefault(),this.isActive()||this.showDD(),s===n.DOWNARROW?this.highlightOption(this.uiCont,"next"):this.highlightOption(this.uiCont,"prev");e.stopPropagation()},A._noHovered=function(){for(var t=$D.getAll("li",this.uiCont),e=t.length-1;e>=0;e--)if($D.hasClass(t[e],"hover"))return!1;return!0},A._checkIfLimitExceeded=function(){return!!this.selectEl.hasAttribute("data-limit")&&(!isNaN(this.limit)&&this.selectEl.selectedOptions.length>=this.limit)},A._handlePaste=function(t,e){var n=this;e.forEach(function(e){n._handleEnterKey(t,null,e)})},A._handleEnterKey=function(e,n,i){this.uiCont;var r,a,s=n&&"keydown"===n.type&&13===n.which;i?a=!0:i=e&&e.value&&e.value.trim();var o,l=i&&d(this.selectEl,i);if(!n||this.isActive())if(n&&n.preventDefault(),this.selectEl.hasAttribute("data-allow-new"))if(l||""===i)this.setSelectValue(i,a,s);else{if(!this._noHovered())return void this.setSelectValue(i,a,s);if(!(r=this.validate(i)).valid&&r.msg)return void this.showValidationErr(r.msg);this.selectEl.multiple&&(e.insertAdjacentHTML("beforebegin",'<span class="hb-tag" value="'+t.escapeHtml(i)+'">'+t.escapeHtml(i)+" <i>x</i></span>"),E($D.getAll(".hb-tag",this.uiCont))),this.createNewSelectOption(e,i),t.fireEvent(this.selectEl,"change")}else this.setSelectValue(i,a,s);else(o=t.getFormEl(e))&&t.fireEvent(o,"submit")},A.sortSelectOptions=function(t){var e=this;if(t&&"SELECT"===t.tagName){var n=Array.prototype.slice.call(t.options);n.sort(function(t,n){return e.naturalSort(t.value,n.value)}),t.innerHTML="";for(var i=0;i<n.length;i++)t.add(n[i])}},A.naturalSort=function(t,e){for(var n=/(\d+|\D+)/g,i=t.match(n)||[],r=e.match(n)||[],a=0;a<Math.max(i.length,r.length);a++){var s=i[a],o=r[a];if(void 0===s)return-1;if(void 0===o)return 1;if(isNaN(s)||isNaN(o)){if(s<o)return-1;if(s>o)return 1}else{var l=parseInt(s,10),u=parseInt(o,10);if(l!==u)return l-u}}return 0},A.createNewSelectOption=function(t,e){var n;(n=document.createElement("option")).text=e,n.value=e,n.selected=!0,n.setAttribute("selected","true"),!this.selectEl.multiple&&this.selectEl.selectedOptions.length&&this.selectEl.selectedOptions[0].setAttribute("selected","false"),this.selectEl.appendChild(n),this.sortSelectOptions(this.selectEl),t.value="",this.dropdown.innerHTML="",this.constructList(this.selectEl.options,!1),this.dropdown.appendChild(this.dropdownList)},A._handleEscKey=function(t){if($D.hasClass(this.selectEl,"hb-tags-input")||$D.hasClass(this.selectEl,"hb-tree-input")||"true"==this.selectEl.getAttribute("multiple")){var e=$D.getAll(".hb-tag",this.uiCont);if(0!==e.length){var n,i=e[e.length-1],r=i.getAttribute("value");$D.hasClass(i,"tag-warn")?($D.remove(i),n=h(this.selectEl,r,this.uiCont),$D.removeClass(n,"active"),this.selectOption(n,!1)):"INPUT"===this.input.tagName&&0===this.input.value.length&&$D.addClass(i,"tag-warn")}}},A.validate=function(t){if(this._checkIfLimitExceeded())return{valid:!1,msg:this.getLimitExceedMsg()};if(!this.selectEl.hasAttribute("data-validate"))return{valid:!0};var n,i,r,a=[],s=this.selectEl.getAttribute("data-validate");if(!s)return{valid:!0};for(var o=(s=s.split(",").map(function(t){return t.trim()})).length-1;o>=0;o--)"required"!==s[o]&&(r=e.validateRules[s[o]])&&(r.regex?i=r.regex.test(t):"function"==typeof r.validateFn&&(i=r.validateFn(t)),i||(n=e.validateRules[s[o]].message,a.push(n)));var l="";if(a.length>0){o=0;for(var u=a.length;o<u;o++)0!==o&&(l+=", "),l+=a[o];return{valid:!1,msg:l}}return{valid:!0}},A.handleBlur=function(t){this.__blurredEl=this;var e,n=t.target;if("INPUT"===n.tagName&&"number"!=n.type){var i,r,a=this.selectEl.options,s=n.value.trim(),o=!1;if(this.selectEl.multiple){if("INPUT"===n.tagName){if(!this._matchedOption&&""===n.value.trim())return;if(!(i=this.validate(n.value)).valid&&i.msg)return this.showValidationErr(i.msg),void((r=$D.get(".dd-cont",this.uiCont))&&r.setAttribute("data-prevent-hide","true"));(e=d(this.selectEl,n.value))?this.setOptionActive(e):this.selectEl.hasAttribute("data-allow-new")&&(this._handleEnterKey(n,t),this.clearSearchVal())}}else{for(var l=0,u=a.length;l<u;l++)if(a[l].value.trim()===s||a[l].text.trim()===s){o=!0,$D.removeClass(this.uiCont,"sel-error"),a[l].hasAttribute("selected")||(a[l].setAttribute("selected",!0),a[l].selected=!0);break}o||(""===this.selectEl.value?n.value="":n.value=function(t){for(var e=t.options,n=t.value,i=0,r=e.length;i<r;i++)if(e[i].value.trim()===n)return this.isTreeInput?this._getXpath(e[i]):e[i].text}.call(this,this.selectEl))}!1===this._noHideOnBlur&&this.hideActiveDD(!0),this._noHideOnBlur=!1;var c=$D.get(".tag-warn",this.uiCont);c&&$D.removeClass(c,"tag-warn")}},A.setOptionActive=function(t){t.selected="true",t.setAttribute("selected",!0)},A.getLimitExceedMsg=function(){return this.selectEl.getAttribute("data-limit-msg")||"Limit reached"},A.setSelectValue=function(t,e,n){var i,r=$D.getByTag("li",this.uiCont),a=r.length;if(!d(this.selectEl,t)){t=parseFloat(t);var s=parseFloat(event.target.getAttribute("min")),o=parseFloat(event.target.getAttribute("max"));t<s?(event.target.value=s,t=s):t>o&&(event.target.value=o,t=o)}if(a<1)return this.selectEl.hasAttribute("data-allow-new")&&!isNaN(t)?void this.createNewSelectOption(this.input,t):void this.hideActiveDD(!0);var c=u.call(this,r);if(console.trace(c,e),e)for(var h=0;h<a;h++)r[h].getAttribute("value")===t&&(c=r[h]);else{if(!1===c){if(n)for(var f=0,g=r.length;f<g;f++)r[f].getAttribute("value")===this.input.value.trim()&&(c=r[f]);if(!1===c)return this.removeHoverOrActive(r,"active"),this.hideActiveDD(!0),d(this.selectEl,t)&&!this.selectEl.multiple&&l(this.selectEl,t),void console.log("returing")}else c=r[c];t=c.getAttribute("value")}if(this.selectEl.multiple)if(this.selectEl.multiple||$D.hasClass(this.selectEl,"autocomplete")){if(!(i=!e&&$D.hasClass(c,"active"))&&this._checkIfLimitExceeded())return void this.showValidationErr(this.getLimitExceedMsg());this.selectOption(c,!i,t),this.dropdown.innerHTML="",this.constructList(this.selectEl.options,!1,this.currHovered),this.dropdown.appendChild(this.dropdownList)}else $D.hasClass(c,"active")?($D.removeClass(c,"active"),this.selectOption(c,!1)):($D.addClass(c,"active"),this.selectOption(c,!0));else this.removeHoverOrActive(r,"active"),this.hideActiveDD(!0),p.call(this,t,!0),c=c||this.uiCont.querySelector("[value='"+t+"']"),$D.addClass(c,"active"),l(this.selectEl,t)},A.highlightOption=function(t,e){var n=$D.getByTag("li",this.uiCont),i=n.length;if(!(i<1)){var r=u.call(this,n,!0),a=$D.get("li.active",this.dropdownList);if(!1===r&&a)r=Array.prototype.slice.call(n).indexOf(a);var s=0;if("next"===e)for(s=r===i-1||!1===r?0:r+1;$D.hasClass(n[s],"optGroupLabel")||$D.hasClass(n[s],"disabled");)s=s===i-1?0:s+1;else for(s=0===r||!1===r?i-1:r-1;$D.hasClass(n[s],"optGroupLabel")||$D.hasClass(n[s],"disabled");)s=0===s?i-1:s-1;!1!==r?($D.addClass(n[s],"hover"),this._hasScroll()&&x(n[s],$D.get(".dd-cont",this.uiCont)),this.currHovered=s):($D.addClass(n[0],"hover"),this._hasScroll()&&x(n[0],$D.get(".dd-cont",this.uiCont)),this.currHovered=0)}},A._hasScroll=function(){var t=$D.get(".dd-cont",this.uiCont);return t.offsetHeight<t.scrollHeight},A.clearSearchVal=function(){this.searchVal=""},A.search=function(e){var i=t.getKeyCode(e);if(i===n.ENTER&&(e.preventDefault(),e.stopPropagation()),i!==n.DOWNARROW&&i!==n.UPARROW&&i!==n.ENTER&&i!==n.TAB){this.isActive()||this.showDD(!0);var r,a=e.target;if(this.isRemote)return(r=$D.get(".toggle-arr",this.uiCont))&&(r.insertAdjacentHTML("afterend",'<span class="loading-icon"><svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"></path><path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0C22.32,8.481,24.301,9.057,26.013,10.047z" transform="rotate(168 20 20)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 20 20" to="360 20 20" dur="0.5s" repeatCount="indefinite"></animateTransform></path></svg></span>'),$D.remove(r)),void(0===a.value.trim().length&&this._removeLoading());var s;"INPUT"===a.nodeName?s=e.target.value.trim():(s=e.key?e.key:String.fromCharCode(null!==e.charCode?e.charCode:e.keyCode),i===n.BACKSPACE?(this.searchVal=this.searchVal.substring(0,this.searchVal.length-1),s=this.searchVal):(s=this.searchVal+s,this.searchVal=s));for(var o=this.selectEl.options,l=[],u='<div class="select__info">'+(this.selectEl.hasAttribute("data-not-found-msg")?this.selectEl.getAttribute("data-not-found-msg"):"No item found.")+" {create_new_txt}</div>",d=0,c=o.length;d<c;d++)if($D.hasClass(this.selectEl,"hide-search-text")){if(o[d].text.toLowerCase().startsWith(s.toLowerCase())){this.focusOnItem(d);break}}else-1!==o[d].text.toLowerCase().indexOf(s.toLowerCase())&&(o[d].setAttribute("data-index",d),o[d].disabled||o[d].hasAttribute("disabled")||l.push(o[d]));if($D.hasClass(this.selectEl,"hide-search-text"))this.debouncedSearchVal();else if(this.dropdown.innerHTML="",0===l.length){if(this.validate(s).valid)if(this.selectEl.hasAttribute("data-not-found-msg-false")){if(!this.selectEl.multiple)return void(this.dropdown.style.visibility="hidden")}else u=this.selectEl.hasAttribute("data-allow-new")?u.replace("{create_new_txt}",'Press "enter" to create new.'):u.replace("{create_new_txt}",""),this.dropdown.innerHTML=u,this._matchedOption=null,this.showDD(!0)}else this.selectEl.multiple||"hidden"!==this.dropdown.style.visibility||(this.dropdown.style.visibility=""),this._matchedOption=l[0],this.constructList(l,!1),this.dropdown.appendChild(this.dropdownList)}},A.focusOnItem=function(t){""===this.selectEl.options[0].value&&t--;var e=$D.get(".hover",this.uiCont);e&&$D.removeClass(e,"hover");var n=$D.getAll("li",this.uiCont);n[t]&&($D.addClass(n[t],"hover"),x(n[t],$D.get(".dd-cont",this.uiCont)))},A.mouseDown=function(t){t.target;this.lastclicked=t.target;s(t.target);this._noHideOnBlur=!0},A.handleClick=function(t){var e,n=t.target;if("focus"===t.type){if(!0===this._noActionOnFocus)return void(this._noActionOnFocus=!1);if(this.lastclicked&&this.lastclicked===n)return void(this.lastclicked=null);this.lastclicked=null}var i,r=s(n);if($D.hasClass(n,"ip-field-cont")&&(this._noActionOnFocus=!0,this.input.focus()),r){if($D.hasClass(r,"disabled")||$D.hasClass(r,"optGroupLabel"))return;this.selectEl.multiple?$D.hasClass(r,"active")?($D.removeClass(r,"active"),(i=f(this.selectEl,r.getAttribute("value"),this.uiCont,".hb-tag","value"))&&$D.remove(i),this.selectOption(r,!1)):this._checkIfLimitExceeded()?(this.showValidationErr(this.getLimitExceedMsg()),this._noHideOnBlur=!0,this._noActionOnFocus=!0):($D.addClass(r,"active"),this.selectOption(r,!0)):(e=$D.get("li.active",this.uiCont),$D.hasClass(r,"disabled")||(e&&$D.removeClass(e,"active"),$D.addClass(r,"active"),this.selectOption(r,!0)))}else if($D.hasClass(n,"hb-tag")||$D.hasClass(n.parentElement,"hb-tag")){var a,o;"SPAN"===n.tagName?(a=n.getAttribute("value"),$D.remove(n)):(a=n.parentElement.getAttribute("value"),$D.remove(n.parentElement)),o=h(this.selectEl,a,this.uiCont);return $D.get(".select__err-info",this.uiCont)&&(this.constructList(),this.dropdown.innerHTML="",this.dropdown.appendChild(this.dropdownList)),o&&$D.removeClass(o,"active"),this.selectOption(o,!1,a),void t.stopPropagation()}$D.hasClass(this.uiCont,"active")?r&&this.selectEl.multiple||this.hideActiveDD(!0):(this.hideActiveDD(!0),this.showDD()),t&&"focus"!==t.type&&(this.selectEl.hasAttribute("data-skip-click-focus")||(this._noActionOnFocus=!0,this.input&&this.input.select&&this.input.select(),this.input.focus()))},A.showOption=function(){if(this.selectEl.value&&this.dropdownList){var e=$D.get('[value="'+t.escapeHtml(this.selectEl.value)+'"]',this.dropdownList),n=$D.get(".dd-cont",this.uiCont);e&&n&&x(e,n,"top")}};A.selectOption=function(n,i,r){r||(r=n.getAttribute("value"));for(var a,s=this.selectEl.options,l=this.selectEl.hasAttribute("multiple"),u=0,d=s.length;u<d;u++)if(s[u].value===r){var c=$D.get('.hb-tag[value="'+t.escapeHtml(r)+'"]',this.uiCont);if(c&&this.isTextArea)c&&(this.input.value="",$D.hasClass(c,"tag-glitter")||($E.bind(c,e.animationEnd,o),$D.addClass(c,"tag-glitter")));else if(!0===i?(s[u].selected=!0,s[u].setAttribute("selected","true")):(s[u].removeAttribute("selected"),s[u].selected=!1),a=s[u],l)break}else this.selectEl.multiple||(s[u].hasAttribute("selected")||s[u].selected)&&(s[u].removeAttribute("selected"),s[u].selected=!1);a&&t.fireEvent(this.selectEl,"change",{option:a,optionValue:a.getAttribute("value")})},A.hideActiveDD=function(t){this._matchedOptions=null;for(var e=w.length-1;e>=0;e--)v(w[e].el),w.splice(e,1);this.currHovered=null},A.removeHoverOrActive=function(t,e){for(var n=t.length-1;n>=0;n--)$D.removeClass(t[n],e)},A._hookMutationObserver=function(e){t.getMutationObserver()?this._setObserverSelect(e):$E.bind(e,"DOMAttrModified",SelectOnAttrModified)},A._setObserverSelect=function(e){var n=this;new(t.getMutationObserver())(function(t){for(var e in t)t.hasOwnProperty(e)&&n._selectMutated(t[e])}).observe(e,{attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributeOldValue:!0})},A._selectMutated=function(t){var e=t.target;if(e.nodeType!==i.ELEMENT||"SELECT"===e.tagName||"OPTION"===e.tagName){var n=t.type,r="";"childList"===n?(r=t.addedNodes.length>0?"added":t.removedNodes.length>0?"removed":"",this._processChildListMutation(t,e,r)):"attributes"===n&&this._handleAttributeChange(t,e)}},A._processSubtree=function(t,e){for(var n=t,i=Number(t.getAttribute("data-level"));n=n.nextElementSibling;)if(!n.disabled&&!n.hasAttribute("disabled")){if(Number(n.getAttribute("data-level"))<=i)break;!0===e?!0!==n.selected&&(n.selected=!0,n.setAttribute("selected",!0)):!1!==n.selected&&(n.selected=!1,n.removeAttribute("selected"))}},A._handleAttributeChange=function(t,e){this.uiCont;var n,i=null,r=[];if("OPTION"===e.tagName){if("selected"===t.attributeName){if(""===(i=e.getAttribute("value")||e.value).trim()&&(this.isTagInput||this.isTreeInput||this.isTextArea||this.isAutoComplete))return;if(p.call(this,i,e.selected,e),this.isTreeInput)for(var a=0,s=(n=$D.getAll("input",this.selectEl.parentElement)).length;a<s;a++)n[a].value.trim().toLowerCase()===i.toLowerCase().trim()&&(e.selected?(n[a].checked=!0,this.selectSubtree&&this._processSubtree(e,!0)):(n[a].checked=!1,this.selectSubtree&&this._processSubtree(e,!1)),this._handleTreeModification(n[a],e.selected));else if(!this.selectEl.multiple){for(var o=this.selectEl.options,l=e.hasAttribute("selected")||e.selected,u=$D.getAll("li",this.uiCont),d=this.selectEl.value,c=0,h=o.length;c<h;c++)(o[c].getAttribute("value")||o[c].value)!==i&&l&&(o[c].value===d||o[c].hasAttribute("selected")||o[c].selected)&&o[c].removeAttribute("selected");var f;for(a=u.length-1;a>=0;a--)(f=u[a].getAttribute("value"))&&l&&f.trim()!==i&&$D.removeClass(u[a],"active")}}}else if("SELECT"===e.tagName)if("value"===t.attributeName){i=e.getAttribute("value")||e.value;for(a=(r=this.selectEl.options).length-1;a>=0;a--)r[a].value===i?(r[a].selected=!0,r[a].setAttribute("selected",!0)):e.multiple||(r[a].hasAttribute("selected")||r[a].selected)&&(r[a].removeAttribute("selected"),r[a].selected=!1)}else if("not-found"===t.attributeName){if(this.selectEl.hasAttribute("not-found")){this._removeLoading(),this.selectEl.removeAttribute("not-found");var g='<div class="select__info">'+(this.selectEl.hasAttribute("data-not-found-msg")?this.selectEl.getAttribute("data-not-found-msg"):"No item found.")+"</div>";this.dropdown.innerHTML=g,this._matchedOption=null,this.showDD(!0)}}else"disabled"===t.attributeName?this.processDisable():"remove-loading"===t.attributeName&&this._removeLoading()},A.processDisable=function(){this.selectEl.hasAttribute("disabled")?(this.uiCont.setAttribute("hbui-disable",""),this.input.setAttribute("disabled",!0)):(this.uiCont.removeAttribute("hbui-disable",""),this.input.removeAttribute("disabled"))},A._processChildListMutation=function(t,e,n){var i=null,r=null,a="";"SELECT"===e.tagName?(i=e,"removed"===n?(r="OPTION"===t.removedNodes[0].tagName?t.removedNodes[0].value.trim():null,a="OPTION"===t.removedNodes[0].tagName?t.removedNodes[0].text.trim():t.removedNodes[0].label):"added"===n&&(t.addedNodes,this.constructList(),this.dropdown.innerHTML="",this.dropdown.appendChild(this.dropdownList),this._removeLoading(),this.selectEl.multiple?this.isActive()&&this.showDD():(this.removeHoverOrActive($D.getAll(".dd-cont li",this.uiCont),"active"),this.hideActiveDD(!0),p.call(this,this.selectEl.value,!0))),this.updateDropDownAfterMutation(i,{val:r,txt:a},n)):"OPTION"===e.tagName&&(r=e.value.trim(),a=e.text.trim(),i=e.parentNode)},A._removeLoading=function(){var t=$D.get(".loading-icon",this.uiCont);t&&(t.insertAdjacentHTML("afterend",D),$D.remove(t))},A.updateDropDownAfterMutation=function(t,e,n){var i=t.options,r=this.uiCont,a=$D.getByTag("li",r);if("removed"===n){for(var s=a.length-1;s>=0;s--)if(e.val&&a[s].getAttribute("value")===e.val)a[s].parentNode.removeChild(a[s]);else if(!e.val&&$D.hasClass(a[s],"optGroupLabel")&&a[s].innerHTML===e.txt){var o=f(0,e.txt,r,"li","data-group",!0);a[s].parentNode.removeChild(a[s]);for(s=o.length-1;s>=0;s--)o[s].parentNode.removeChild(o[s])}}else if("added"===n)for(s=i.length-1;s>=0;s--)(null===i[s].getAttribute("value")?i[s].value:i[s].getAttribute("value"))===e.val&&s},A.hide=function(){$D.removeClass(this.dropdown,this.en_ani),$D.addClass(this.dropdown,this.ex_ani),function(t,e,n){var i=window.setTimeout(function(){$D.removeClass(t,"active"),$D.removeClass(e,n),window.clearTimeout(i),delete e.__timeout},250);e.__timeout=i}(this.uiCont,this.dropdown,this.ex_ani),this.searchVal=""};var k=[];A.initTree=function(e){if($D.hasClass(e,"hb-tree-input")){var n=e.id?e.id:t.guid(),i=t.createElement("div"),r=document.createDocumentFragment(),a=null,s=null,o=null,l=null,u=null,d=e.multiple,c=null;this.dataDisableRoot=e.hasAttribute("data-disable-root"),this.selectSubtree=e.multiple&&e.hasAttribute("data-select-subtree"),this.separator=e.getAttribute("data-separator")||"/",e.id=n,i.className="hbui-tree-cont",this.hideTree&&$D.addClass(i,"hbui-hide-tree"),$D.insertAfter(i,e),i.appendChild(e);for(var h=0,f=-1,p=-1,g="",m=d?"":t.guid(),v=d?"checkbox":"radio",y=r,C="",E=!1,x="",w=0,_=e.options.length;w<_;w++)h=parseInt(e.options[w].getAttribute("data-level")),E=e.options[w].selected,x=this.dataDisableRoot&&0===w||e.options[w].disabled?"input-disable":"",p=w===_-1?-1:parseInt(e.options[w+1].getAttribute("data-level")),g=t.guid(),(s=t.createElement("li")).className="tree-open",(o=t.createElement("div")).className="tree-data",(l=t.createElement("div")).className="tree-view-"+v,C='<span class="'+x+'"><input type="'+v+'" id="'+g+'" value="'+t.escapeHtml(e.options[w].value)+'" name="'+m+'" ',""!==x&&(C+=" disabled ",e.options[w].setAttribute("disabled","")),E&&(C+=" checked "),C+='><label for="'+g+'"></label></span>\t\t\t\t\t\t<label for="'+g+'">'+e.options[w].innerHTML+"</label>",l.innerHTML=C,(u=t.createElement("span")).className="expand-collapse-icon",(-1===p||p<=h)&&(u.style.visibility="hidden"),o.appendChild(u),s.appendChild(o),o.appendChild(l),h>f?((a=t.createElement("ul")).className="hb-tree",a.appendChild(s),0===w?(a.className="tree-view",y.appendChild(a),a.className+=" hb-tree-root",c=a):y.lastChild.appendChild(a),y=a):h<f?(y=b(h,f,y)).appendChild(s):h===f&&y.appendChild(s),f=h;$E.bind(c,"change",this._handleTreeChangeEvent.bind(this)),$E.bind(c,"click",this._handleTreeClickEvent.bind(this)),i.appendChild(r)}},A._handleTreeChangeEvent=function(t){var e,n=t.target;if("INPUT"===n.tagName)for(var i=(e=this.selectEl.options).length-1;i>=0;i--)if(e[i].value.trim().toLowerCase()===n.value.trim().toLowerCase()){if(n.checked)return e[i].setAttribute("selected",!0),void(e[i].selected=!0);e[i].removeAttribute("selected"),e[i].selected=!1}},A._handleTreeClickEvent=function(t){var e=t.target,n=e.parentNode.parentNode;"expand-collapse-icon"===e.className&&n&&($D.hasClass(n,"tree-open")?($D.removeClass(n,"tree-open"),$D.addClass(n,"tree-close")):$D.hasClass(n,"tree-close")&&($D.removeClass(n,"tree-close"),$D.addClass(n,"tree-open")))},A._handleTreeModification=function(e,n){var i=e.value,r="",a=t.getParentByClass("hb-ui",e),s=this.selectEl,o=s.options,l=$D.get('input[type="text"]',this.input);n=void 0===n?e.checked:n;for(var u=0,d=o.length;u<d;u++)!0===n&&(o[u].value===i?(n?l&&(l.value=""):(r=f(0,i,a,".hb-tag","value"))&&$D.remove(r),$E.fireEvent(s,"change"),$E.fireEvent(s,"input")):s.hasAttribute("multiple")||o[u].hasAttribute("selected")&&(o[u].removeAttribute("selected"),(r=f(0,i,a,".hb-tag","value"))&&$D.remove(r)))};var T,N,$,I,L,S,M;return t.export("expandTree",function(t){for(var e=$D.getAll(".hb-tree",t.parentNode),n=e.length-1;n>=0;n--)$D.removeClass(e[n],"tree-close"),$D.addClass(e[n],"tree-open")}),t.export("collapseTree",function(t){for(var e=$D.getAll(".hb-tree",t.parentNode),n=e.length-1;n>=0;n--)$D.removeClass(e[n],"tree-open"),$D.addClass(e[n],"tree-close")}),t.export("convertFormat",function(t,e){var n={},i={},r="",a="",s=null;T=e.id_key,N=e.child_key,$=e.parent_key,I=e.root_id,L=e.root_name,S=e.text_val_key,M=e.value_key;for(var o=0,l=t.length;o<l;o++)a=t[o][T],r=t[o][$],t[o][T]===I&&(i[t[o][T]]=L||null),void 0===n[a]?n[a]=t[o]:(s=n[a][N],n[a]=t[o],n[a][N]=s),n[r]||(n[r]={}),n[r][N]||(n[r][N]=[]),t[o][T]!==I&&n[r][N].push(a);return function(t,e){for(var n=[],i=Object.keys(e),r=0,a=i.length;r<a;r++)n.push({node:i[r],level:0,text:e[i[r]]||"ROOT"}),y(t,t[i[r]],1,n);return n}(n,i)}),t.export("convertNested",C),{init:function(t,e){k.push(new a(t))},tag:["select","hb-tags-input","autocomplete"],focus:function(t,e){var n=m(t);if(n)return n._noActionOnFocus=!0,n.input.focus(),!0},validate:function(t){var n,i=m(t),r=i.input,a=t.selectedOptions,s=t.getAttribute("data-validate");if(!s)return{valid:!0};if(-1!==(s=s.split(",").map(function(t){return t.trim()})).indexOf("required")&&(0===a.length||1===a.length&&""===a[0].value))return{valid:!1,msg:e.validateRules.required.message||"Cannot be empty"};if(r&&"INPUT"===r.tagName&&""!==r.value)n=i.validate(r.value);else for(var o=0,l=a.length;o<l;o++)if(!(n=i.validate(a[o].value)).valid)return n;return n},showError:function(t,e){var n,i=m(t);i&&(i.showValidationErr(e),(n=$D.get(".dd-cont",i.uiCont))&&n.setAttribute("data-prevent-hide","true"),i.showDD(!0,!0))},hide:v}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){"use strict";function r(){}function a(){var t;if(t=$D.getById(H)){var e=ot.instance||lt.instance;return e&&e.ulCont.appendChild(t),t}return t=doc.createElement("div"),t.id=H,$D.addClass(t,j),document.body.appendChild(t),t}function s(e){if(this.ulCont=e.container,this.ulCont.setAttribute(z,this.id=t.guid()),this.ulClass=e.ulClass,this.liClass=e.liClass,this.sortType=e.type,this.handle=e.handle,this.siblingSort=e.siblingSort,this.nodeClass=e.nodeClass,this.isTree=e.isTree,this.treeIns=e.treeIns,this.isCue=e.isCue,this.orderAttr=e.orderAttr,this.custom_hide=e.custom_hide,this.elements=this.getEls(),this.external=e.external,e.external){var n=Number(e.container.getAttribute(Z));n&&n>0&&(this.minItem=n)}$.add(this)}function o(){T(this).refresh()}function l(){a().removeAttribute("style")}function u(t){var e,n=T(this),i=t.target;if(n.handle){if(!$D.hasClass(i,P))for(;i&&!$D.hasClass(i,P)&&!$D.hasClass(i,n.liClass);)i=i.parentElement;i&&$D.hasClass(i,P)&&(e=$D.findParent(i,n.liClass))}else n.handle||(e=$D.hasClass(i,n.liClass)?i:$D.findParent(i,n.liClass));n.getEls().indexOf(e)>-1&&(e.draggable=!0,_(t))}function d(t,e){return"."+t+" > ."+e}function c(t,e,n){var i=function(t,e,n,i){var r=Math.atan2(i-e,n-t);return 180*(r<0?r+2*Math.PI:r)/Math.PI}(e.left,e.top,t.clientX,t.clientY);return i>=0?i<45?st:i<130?it:i<180?rt:void 0:i<-45?at:nt}function h(t){return t.getBoundingClientRect()}function f(t){return $D.get("ul."+M,t)}function p(t){var e=I;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hasInstance(t))return e[n]}function g(t,e,n){var i=t.getBoundingClientRect();$D.css(t,"transition","none"),$D.css(t,"will-change","transform"),$D.css(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0px)"),clearTimeout(t.anim),t.anim=setTimeout(function(){$D.css(t,"transition","all "+n+"ms"),$D.css(t,"transform",""),$D.css(t,"will-change",""),t.anim=!1},0)}function m(t,e){$E.unbind(t,"dragenter",(e?lt:ot).onEnter)}function v(t,e){$E.bind(t,"dragend",(e?lt:ot).onEnd)}function b(t,e){$E.unbind(t,"dragend",(e?lt:ot).onEnd)}function y(t,e){$E.bind(t,"dragenter",(e?lt:ot).onEnter)}function C(t,e){$E.bind(t,"dragleave",(e?lt:ot).onLeave)}function E(t,e){$E.unbind(t,"dragleave",(e?lt:ot).onLeave)}function x(t,e){$E.bind(t,"dragover",(e?lt:ot).onOver)}function w(t,e){$E.unbind(t,"dragover",(e?lt:ot).onOver)}function _(t){t.stopPropagation()}function D(t,e){t.setAttribute(X,e);for(var n,i=$D.get("."+this.liClass,t);i;)(n=$D.get("."+this.nestedClass,i))&&D.call(this,n,e+1),i=i.nextElementSibling}function A(e){this.container=e.container,this.nestedInstances=new r,this.ulClass=S,this.nestedClass=M,this.liClass=L,this.handle=$D.hasClass(this.container,U),this.siblingSort=$D.hasClass(this.container,Y),this.sortType=this.container.getAttribute(F),this.isCue=$D.hasClass(this.container,B),this.minorGC=new r,this.orderAttr=this.container.getAttribute(K),this.custom_hide=this.container.getAttribute(J),this.maxDepth=this.container.hasAttribute(V)?Number(this.container.getAttribute(V)):-1,D.call(this,e.container,0);for(var n=$D.getAll("."+M,e.container),i=0;i<n.length;i++)this.addInstance(n[i]);this.addInstance(this.container),this.container.setAttribute(G,this.id=t.guid()),I.add(this)}function k(t){return $D.hasClass(t,S)?t:t.closest("."+L)}function T(t){if(!t)throw new Error("getInstance of "+t);return $D.hasClass(t,L)&&(t=$D.findParentByTag(t,"ul")),$.get(t)}var N={},$=null,I=null,L="hb-sortable-item",S="hb-sortable-tree",M="hb-sortable-nested",O="hb-sort-not-allowed",R="hb-dragged-el",B="hb-sort-cue",H="visualCue",j="hb-visual-cue",F="data-orientation",P="hb-item-handle",q="hb-sort-hide",U="hb-sort-handle",V="data-max-depth",Y="hb-sort-sibling",W="hb-sort-placeholder",z="data-sort-id",X="data-depth",G="data-tree-id",K="data-sort-attr",J="data-sort-tree-hide",Z="min-item";N.tag=["hb-sortable","hb-sortable-tree"];var Q=30,tt=0,et=1,nt=2,it=3,rt=6,at=7,st=8;r.prototype={get:function(t,e){return this[t.getAttribute(e?G:z)]},add:function(t){this[t.id]=t},remove:function(t){delete this[t.id]},getCount:function(){var t=0;for(var e in this)this.hasOwnProperty(e)&&t++;return t}},$=new r,I=new r,s.prototype={init:function(){for(var t=this.elements,e=0;e<t.length;e++)this.bindEl(t[e]);this.bindCont()},moved:function(){this.elements=this.getEls();var t=this.elements.length;this.external?0===t?$E.bind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulExEnter):1===t&&$E.unbind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulExEnter):0==t&&this.destroy()},getIndex:function(t){return this.elements.indexOf(t)},getOrder:function(){var t=this.orderAttr;if(t){for(var e=[],n=this.getEls(),i=0;i<n.length;i++)e.push(n[i].getAttribute(t));return e}},destroy:function(){$.remove(this),$D.remove(this.ulCont)},bindCont:function(){$E.bind(this.ulCont,"mousedown",u),$E.bind(this.ulCont,"sortable:modified",o),this.isTree&&!this.siblingSort?($E.unbind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulEnter),$E.bind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulEnter)):this.external&&0==this.elements.length&&($E.unbind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulExEnter),$E.bind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulExEnter))},bindEl:function(t){$E.bind(t,"dragstart",(this.isCue?lt:ot).onStart),!this.isTree||this.siblingSort||this.isCue||function(t,e){$E.bind(t,"drag",(e?lt:ot).onDrag)}(t,this.isCue),this.nodeClass&&(t=$D.get(d(this.liClass,this.nodeClass),t)),y(t,this.isCue),x(t,this.isCue),function(t,e){$E.bind(t,"drop",(e?lt:ot).onDrop)}(t,this.isCue)},unbindCont:function(){$E.unbind(this.ulCont,"mousedown",u),$E.unbind(this.ulCont,"sortable:modified",o),this.isTree&&!this.siblingSort&&$E.unbind(this.ulCont,"dragenter",(this.isCue?lt:ot).ulEnter)},unbindEl:function(t){$E.unbind(t,"dragstart",(this.isCue?lt:ot).onStart),!this.isTree||this.siblingSort||this.isCue||function(t,e){$E.unbind(t,"drag",(e?lt:ot).onDrag)}(t,this.isCue),this.nodeClass&&(t=$D.get(d(this.liClass,this.nodeClass),t)),m(t,this.isCue),w(t,this.isCue),function(t,e){$E.unbind(t,"drop",(e?lt:ot).onDrop)}(t,this.isCue)},isLast:function(t){var e=this.getEls();return e[e.length-1]==t},isFirst:function(t){return this.getEls()[0]==t},isTop:function(){return $D.hasClass(this.ulCont,S)},getEls:function(){return function(t,e,n){return Array.prototype.slice.call($D.getAll("["+z+'="'+t+'"] > .'+e,n))}(this.id,this.liClass,this.ulCont)},getParent:function(){if($D.hasClass(this.ulCont,S))throw Error("This is the top level no paretn is valid");return $D.findParent(this.ulCont,this.liClass)},addChild:function(t,e){this.isTree&&(5==e?this.addLast(t):4==e&&this.addFirst(t))},addFirst:function(t){var e=this.getEls()[0];e?$D.insertBefore(e,t):this.ulCont.appendChild(t)},addLast:function(t){this.ulCont.appendChild(t)},listen:function(t){0==this.getEls().length&&this.destroy(),t.remove(this)},refresh:function(){var t=this,e=t.getEls();e.forEach(function(e){-1==t.elements.indexOf(e)&&t.bindEl(e)}),t.elements=e},unbind:function(){if($.remove(this),this.isTree){var t=this.treeIns;t.minorGC.remove(this),t.nestedInstances.remove(this)}},hide:function(){$D.addClass(this.ulCont,q),this.custom_hide&&$D.addClass(this.ulCont,this.custom_hide)},show:function(){$D.removeClass(this.ulCont,q),this.custom_hide&&$D.removeClass(this.ulCont,this.custom_hide)}};var ot={};ot.ulEnter=function(t){ot.hoverInstance=T(this),_(t),t.preventDefault()},ot.ulExEnter=function(t){var e=ot.hoverInstance=T(this);ot.instance!==e&&0==e.elements.length&&e.addFirst(ot.curDraggedEl)},ot.onStart=function(t){var e,n=t.target;if($D.hasClass(n,L)||$D.hasClass(n,P)){var i=ot.hoverInstance=ot.instance=T(n);ot.treeInstance=p(ot.instance),ot.curDraggedEl=this,ot.instance.external&&(ot.interData={from:i,pos:i.getIndex(this)}),ot.instance.isTree&&(ot.treeData={from:i,pos:i.getIndex(this)},(ot.sub_tree=f(ot.curDraggedEl))&&T(ot.sub_tree).hide()),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",JSON.stringify({})),_(t),ot.instance.nodeClass&&(e=$D.get(d(ot.instance.liClass,ot.instance.nodeClass),n)),m(e||n),v(n),$D.addClass(this,R)}},ot.onEnd=function(t){_(t);var e,n,i=function(t){var e=t.instance,n=t.hoverInstance,i=t.interData;return!(!e.external||!n.external||n==i.from)}(ot),r=ot.instance,a=ot.hoverInstance,s=i||ot.interData?ot.interData.pos:r.getIndex(this),o=null,l=ot.treeInstance,u=null,c=ot.treeData;return r.moved(),-1==(o=l?a.getIndex(this):r.getIndex(this))&&(o=(a=T(this)).getEls().indexOf(this)),r!=a&&a&&a.moved(),this.draggable=!1,n=i?a.ulCont:l?l.container:r.ulCont,l||i||s==o?i?u={element:this,from:{cont:ot.interData.from.ulCont,pos:s},to:{cont:n,pos:a.getIndex(this)},order:a.getOrder(),interDrop:!0}:!l||c.from==a&&c.pos==o||(u={element:this,from:{parent:k(c.from.ulCont),pos:c.pos},to:{parent:k(a.ulCont),pos:o},order:l.getOrder()}):u={prevPos:s,curPos:o,element:this,order:r.getOrder()},null!=u&&$E.dispatch(n,"sortable:rearranged",u),l&&l.broadCast(),$D.removeClass(this,R),ot.instance.isTree&&ot.sub_tree&&T(ot.sub_tree).show(),b(this),ot.instance.nodeClass&&(e=$D.get(d(ot.instance.liClass,ot.instance.nodeClass),this)),$D.removeClass(ot.curDraggedEl,O),y(e||this),ot.instance=null,ot.curHoverEl=null,ot.curDraggedEl=null,ot.treeInstance=null,ot.interData=null,!1},ot.onEnter=function(t){ot.curHoverEl=$D.hasClass(this,W)?$D.findParent(this,L):this;var e=ot.hoverInstance=T(ot.curHoverEl);if(!ot.isValid())return $D.addClass(ot.curDraggedEl,O),void C(this);$D.removeClass(ot.curHoverEl,O);var n=ot.curHoverEl.getBoundingClientRect(),i=ot.curDraggedEl.getBoundingClientRect(),r=ot.curDraggedEl,a=ot.treeInstance,s=ot.curHoverEl;_(t);if(function(t){var e=t.instance,n=t.hoverInstance;return e.external&&n.external&&e!=n}(ot))t.clientY<n.top+n.height/2?$D.insertBefore(s,r):$D.insertAfter(r,s),m(s,!1),g(r,i,100),setTimeout(y.bind(null,s,!1),100),function(t){t.curHoverEl;var e=t.instance,n=t.hoverInstance;ot.interDropped=!0,e.moved(),n.moved(),t.instance=n}(ot);else{if(i.top>n.top||!(i.left<n.left||i.top<n.top))(i.top>n.top||i.left>n.left)&&$D.insertBefore(s,r);else if(a&&!a.siblingSort){var o=c(t,i),l=f(s);switch(o){case it:if(!l||l&&!function(t){return T(t).getEls().length>0}(l)){$D.insertAfter(r,s);break}case st:l&&!function(t){return!$D.hasClass(t,q)}(l)&&T(l).show(),a&&a.maxDepth>-1&&Number(e.ulCont.getAttribute(X))>=a.maxDepth?$D.insertAfter(r,s):a.addSubTree(s,r,4)}}else $D.insertAfter(r,s);g(r,i,100),g(s,n,100)}return C(this),!1},ot.onOver,ot.onLeave=function(t){E(this),$D.removeClass(ot.curDraggedEl,O),ot.curHoverEl=null},ot.onDrag=function(t){if(!ot.curHoverEl){var e=ot.curDraggedEl,n=function(t,e,n,i,r){return n>t.top&&n<t.bottom?e<t.left&&t.left-e>Q?tt:e>t.left&&e-t.left>Q?et:void 0:c(i,t)}(h(e),t.clientX,t.clientY,t),i=T(e);if(ot.treeInstance&&ot.treeInstance.maxDepth>-1&&Number(i.ulCont.getAttribute(X))>=ot.treeInstance.maxDepth)return;switch(n){case rt:case tt:if(i.isLast(e)&&!i.isTop()){var r=i.getParent();$D.insertAfter(e,r)}break;case st:case et:if(!i.isFirst(e)){(r=e.previousElementSibling)&&ot.treeInstance.addSubTree(r,e,5)}}}return!1},ot.isValid=function(){var t,e,n,i=ot.instance,r=ot.hoverInstance,a=ot.treeInstance;return!!ot.instance&&(t=i.ulCont,a&&a.maxDepth>-1&&(e=!0,n=Number(i.ulCont.getAttribute(X))),!(e&&n>a.maxDepth)&&(!(($D.hasClass(t,S)||$D.hasClass(t,M))&&!function(t,e){return p(t).hasBoth(t,e)}(i,r))&&((i==r||!r.siblingSort&&!i.siblingSort)&&(!(i.external&&r.external&&i.minItem&&i.elements.length<=i.minItem)&&!!(i.external&&r.external||ot.treeInstance||i==r)))))};var lt={};return lt.ulEnter=function(t){$E.bind(this,"dragleave",lt.ulLeave)},lt.ulLeave=function(){l(),$E.unbind(this,"dragleave",lt.ulLeave)},lt.onStart=function(t){var e,n=t.target;if($D.hasClass(n,L)||$D.hasClass(n,P)){lt.hoverInstance=lt.instance=T(n),lt.treeInstance=p(lt.instance),lt.curDraggedEl=this,lt.instance.isTree&&(lt.sub_tree=f(lt.curDraggedEl))&&T(lt.sub_tree).hide(),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",null),_(t),lt.instance.nodeClass&&(e=$D.get(d(lt.instance.liClass,lt.instance.nodeClass),n)),v(n,!0);var i=e||n;m(i,!0),w(i,!0),$D.addClass(this,R)}},lt.onOver=function(t){if(t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",lt.isValid()){lt.curDraggedEl;var e=lt.curHoverEl,n=(lt.instance,lt.hoverInstance,function(t,e){return t.clientY<=e.top+e.height/2?nt:it}(t,h(e)));return lt.anyChange(n,e,lt.pos,lt.refEL)&&(!function(t,e){var n=a(),i=h(t);n.style.insetInlineStart=i.left+"px",n.style.insetBlockStart=(e?i.bottom:i.top)+"px",n.style.width=i.width+"px"}(lt.curHoverEl,n!=nt&&n==it),lt.pos=n,lt.refEL=e),_(t),t.preventDefault(),!1}},lt.anyChange=function(t,e,n,i){return t!=n||e!=i},lt.onOverDecision=function(t,e){},lt.onEnter=function(t){if(lt.curHoverEl=$D.hasClass(this,W)?$D.findParent(this,L):this,lt.hoverInstance=T(lt.curHoverEl),t.preventDefault(),lt.isValid())return C(this,!0),!1},lt.onLeave=function(t){E(this,!0)},lt.onDrag=function(t){},lt.onDrop=function(t){_(t),t.preventDefault();t.dataTransfer.getData("text/plain");var e=t.target;if(lt.isValid()){lt.instance.nodeClass&&$D.get(d(lt.instance.liClass,lt.instance.nodeClass),e);var n=h(lt.refEL),i=h(lt.curDraggedEl);lt.pos==nt?$D.insertBefore(lt.refEL,lt.curDraggedEl):lt.pos==it&&$D.insertAfter(lt.curDraggedEl,lt.refEL),g(lt.curDraggedEl,i,300),g(lt.refEL,n,300)}},lt.onEnd=function(t){_(t);var e,n,i,r=lt.instance,a=lt.hoverInstance,s=r.getIndex(this),o=null,u=lt.treeInstance,c=null;return r.moved(),r!=a&&a&&a.moved(),o=r.getIndex(this),u||(i=lt.instance.getOrder()),this.draggable=!1,n=u?u.container:r.ulCont,!u&&(c={prevPos:s,curPos:o,element:lt.curDraggedEl,order:i}),s!=o&&$E.dispatch(n,"sortable:rearranged",c),u&&u.broadCast(),$D.removeClass(this,R),lt.instance.isTree&&lt.sub_tree&&T(lt.sub_tree).show(),b(this,!0),lt.instance.nodeClass&&(e=$D.get(d(lt.instance.liClass,lt.instance.nodeClass),this)),y(e||this,!0),x(e||this,!0),l(),lt.instance=null,lt.curHoverEl=null,lt.curDraggedEl=null,lt.treeInstance=null,!1},lt.isValid=function(t){return!!lt.instance},N.init=function(t,e){var n;if(n=T(t))return n;"hb-sortable"==e?new s({container:t,ulClass:"hb-sortable",liClass:L,type:t.getAttribute(F),handle:$D.hasClass(t,U),isCue:$D.hasClass(t,B),orderAttr:t.getAttribute(K),siblingSort:$D.hasClass(t,Y),external:t.hasAttribute("allow-external")}).init():"hb-sortable-tree"==e&&new A({container:t}).init()},A.prototype={init:function(){var t=this.nestedInstances;for(var e in t)t.hasOwnProperty(e)&&t[e].init()},hasInstance:function(t){return this.nestedInstances.hasOwnProperty(t.id)},hasBoth:function(t,e){return this.hasInstance(t)&&this.hasInstance(e)},genUl:function(){var t=document.createElement("ul");return $D.addClass(t,M),t},addInstance:function(t,e){var n=new s({container:t,ulClass:this.nestedClass,liClass:this.liClass,type:this.sortType,handle:this.handle,siblingSort:this.siblingSort,nodeClass:W,orderAttr:this.orderAttr,custom_hide:this.custom_hide,treeIns:this,isCue:this.isCue,isTree:!0});return this.nestedInstances.add(n),n},removeInstance:function(t){},addSubTree:function(t,e,n){var i,r=f(t),a=T(t);r?(i=T(r)).addChild(e,n):((r=this.genUl()).appendChild(e),r.setAttribute(X,Number(a.ulCont.getAttribute(X))+1),i=this.addInstance(r),this.minorGC.add(i),i.bindCont(),t.appendChild(r))},getOrder:function(){var t=this.nestedInstances,e={},n=null;if(this.orderAttr){for(var i=Object.keys(t),r=0;r<i.length;r++){var a=(n=t[i[r]]).getOrder();a&&a.length>0&&(e[k(n.ulCont).getAttribute(this.orderAttr)]=a)}return e}},broadCast:function(){var t=this.minorGC;for(var e in t)t.hasOwnProperty(e)&&t[e].listen(t)}},N.focus=function(t,e){if($D.isNode(t))return t.focus(),!0},N.getOrder=function(t){var e=T(t);if($D.hasClass(t,S)&&(e=p(e)),e)return e.getOrder()},t.export("getSortableOrder",N.getOrder),N.hide=function(t){T(t).hide()},N.destroy=function(t){T(t).destroy()},N}),function(t){if("function"==typeof define&&define.amd)require(["hbUI"],function(e){e.extend(t.call(null))});else{var e=t.call(null);"undefined"!=typeof hbUI?hbUI.extend(e):window.hbRangeInput=e}}(function(){function t(t,e){var n=JSON.parse(JSON.stringify(t));for(var i in e)n[i]=e[i];return n}function e(t){return t.type.indexOf("touch")>-1?t.changedTouches[0].clientX:t.clientX}function n(t,e){return t.sort(function(t,n){return e?Number(t.getAttribute("data-value"))-Number(n.getAttribute("data-value")):t-n})}function i(t){return t%1==0?0:t.toString().split(".")[1].length}function r(t){return parseFloat(t.toFixed(O))}function a(t,e){var n,a,s,o;t=r(t),e=r(e);return t%1==0&&e%1==0?t%e:(n=i(t),a=i(e),s=n>a?n:a,o=Math.pow(10,s),t*o%(e*o)/o)}function s(t){for(var e=[],n=t[0],i=1;i<t.length;i++)e.push(t[i]-n),n=t[i];return e}function o(t,e){return t.split(e).map(function(t){return Number(t.trim())})}function l(t){var e,n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("span"),a=d(t),s=[];n.appendChild(i),i.appendChild(r);for(var o,l=0;l<a.thumb;l++)(o=document.createElement("span")).appendChild(document.createElement("span")),$D.addClass(o,I),s.push(o),i.appendChild(o),!a.ratio||0!=l&&l!=a.thumb-1||o.setAttribute("disabled","");$D.addClass(n,w),$D.addClass(i,T),$D.addClass(r,$),a.ratio&&$D.addClass(i,L),t.setAttribute(_,""),t.parentNode.replaceChild(n,t),n.appendChild(t),e={cont:n,slider:i,track:r,thumbs:s,options:a,input:u(t,a)},a.input&&(e.input.setAttribute(D,a.input),t.setAttribute(A,a.input)),p(e),function(t){$E.unbind(t.slider,"mousedown"),$E.unbind(t.slider,"touchstart"),$E.bind(t.slider,"mousedown",g.bind(t.slider,t)),$E.bind(t.slider,"touchstart",g.bind(t.slider,t)),$E.unbind(t.input,"change",v),$E.unbind(t.input,"value:change",v),$E.bind(t.input,"change",v),$E.bind(t.input,"value:change",v)}(e),t[S]=!0}function u(t,e){var n;return e.input&&(e[k]&&(n=t.closest(e[k])),t=$D.get("["+D+'="'+e.input+'"]',n)),t}function d(t){var e,n,i=function(t){var e={};return(t.getAttribute("range-options")||"").split(";").forEach(function(t){if(t.trim()){var n=t.split(":");e[n[0].trim()]=n[1].trim()}}),e}(t),r=u(t,i),a={},s="true"==r.getAttribute("ratio"),o=s?j:H,l=s?B:R;for(var d in o)e=r.getAttribute(d)||o[d],n=typeof o[d],a[d]="number"==n?Number(e):"boolean"==n?"true"==e:e.trim();for(var c in l)e=i[c]||l[c],n=typeof l[c],a[c]="number"==n?Number(e):"boolean"==n?"true"==e:e.trim();return a.ratio&&(a.thumb=a.split+1),a}function c(t,e){var n,i,r=t.input,a=r.value;return a?(r.hasAttribute(M)||(n=o(a,t.options.seperator),m(t,i=t.options.ratio?function(t,e,n){for(var i=[e],r=e,a=0;a<t.length;a++)i.push(t[a]+r),r=i[a+1];return i}(n,t.options.min,t.options.max):n,n,e)),i=o(a,t.options.seperator)):i=function(t){for(var e=(t.options.max-t.options.min)/(t.thumbs.length+1),n=[],i=t.options.min+e;i<t.options.max;i+=e)n.push(f(t,i));return n}(t),i}function h(t){var e=d(t),n=t.closest("."+w),i=u(t,e);return{cont:n,slider:$D.get("."+T,n),track:$D.get("."+$,n),thumbs:Array.prototype.slice.call($D.getAll("."+I,n)),options:e,input:i}}function f(t,e){var n=t.options.step,i=t.options.min;if(1==n)return Math.round(e);var r,s,o,l,u=e,d=n,c=a(i,n);n%1!=0&&(s=e%1!=0?e.toString().split(".")[1].length:0,r=(o=n.toString().split(".")[1].length)>s?o:s,u*=l=Math.pow(10,r),d*=l);var h=Math.floor(u/d),f=u%d,p=parseFloat((h*d).toFixed(5))+(f/d<=.5?0:d);return(r?p/l:p)+c}function p(t,e){for(var n,i=c(t,e),r=t.options.ratio,a=r?s(i):null,o=(t.track.getBoundingClientRect(),0);n=t.thumbs[o];o++)b(i[o],t.options)&&(n.setAttribute("data-value",i[o]),x(t,n,i[o]),r&&o>0&&(n.setAttribute("data-ratio",a[o-1]),n.firstElementChild.innerText=""));t.options.input||(t.input.value=(r?a:i).join(t.options.seperator))}function g(t,i){function r(e){e.preventDefault(),$D.removeClass(t.track,N),$D.removeClass(o,N),$E.unbind(document.body,"mousemove",u),$E.unbind(document.body,"touchmove",u),$E.unbind(document.body,"mouseup",r),$E.unbind(document.body,"touchend",r),m(t,function(t,e){for(var i=[],r=0;r<t.length;r++)i[r]=Number(t[r].getAttribute("data-value"));return n(i)}(t.thumbs)),delete t.range}if(-1!=i.type.indexOf("touch")||0==i.button){i.preventDefault();var a=y(t,e(i)),s=$D.get('[data-value="'+a+'"]',t.slider);if(s&&s.hasAttribute("disabled"))return!1;var o=function(t,e){for(var n,i,r,a=null,s=null,o=0;n=t[o];o++)i=Number(n.getAttribute("data-value")),r=function(t,e){return t>e?t-e:e-t}(i,e),!n.hasAttribute("disabled")&&(null==a||r<a)&&(a=r,s=n);return s}(t.thumbs,a),l=Number(o.getAttribute("data-value"));E(t,o,e(i)),function(t,e,i){var r,a,s=c(t),o=t.options.max,l=t.options.min,u=f(t,t.thumbs[0].getBoundingClientRect().width/t.track.getBoundingClientRect().width*(o-l));if(t.options.thumb>1){s.splice(s.indexOf(e),1),s=n(s);for(var d=0;d<s.length;d++){if(i<s[d]){a=s[d]<=o?s[d]-u:o,r=0==d?l:(s[d-1]>l?s[d-1]:l)+u;break}d==s.length-1&&(a=o,r=s[d]>=l?s[d]+u:l)}t.range={min:r,max:a}}t.options.ratio&&C(t,i)}(t,l,a),t.slider.appendChild(o);var u=function(t,n){n.preventDefault(),E(t,this,e(n))}.bind(o,t);$E.bind(document.body,"mousemove",u),$E.bind(document.body,"touchmove",u),$E.bind(document.body,"mouseup",r),$E.bind(document.body,"touchend",r),$D.addClass(t.track,N),$D.addClass(o,N)}}function m(t,e,n,i){$E.unbind(t.input,"change",v),t.input.setAttribute(M,e.join(t.options.seperator)),t.input.value=(t.options.ratio?n||s(e):e).join(t.options.seperator),!i&&$E.dispatch(t.input,"change"),$E.bind(t.input,"change",v)}function v(t){var e=Number(this.value),n=h(function(t){return t.hasAttribute(D)?$D.get("["+A+'="'+t.getAttribute(D)+'"]'):t}(this)),i=n.options;b(e,i)&&1==i.thumb&&x(n,n.thumbs[0],e)}function b(t,e){var n=!1;return e.min<=t&&t<=e.max&&0==a(t-e.min,e.step)&&(n=!0),n}function y(t,e){var n=t.track.getBoundingClientRect(),i=t.range?t.range:t.options,r=i.min,a=i.max,s=f(t,t.options.min+(e-n.left)/n.width*(t.options.max-t.options.min));return s<r?r:s>a?a:s}function C(t,e){var i=t.range=t.range||{},r=n(Array.prototype.slice.call($D.getAll("."+I,t.slider)),!0),a=$D.get('[data-value="'+e+'"]',t.slider),s=r.indexOf(a);i.low=Number(r[s-1].getAttribute("data-value")),i.high=Number(r[s+1].getAttribute("data-value"))}function E(t,e,n){x(t,e,y(t,n))}function x(t,e,n){var i=t.options.ratio;e.style.insetInlineStart=(n-t.options.min)/(t.options.max-t.options.min)*t.track.getBoundingClientRect().width-e.getBoundingClientRect().width/2+"px",e.setAttribute("data-value",n),e.firstElementChild.innerText=i?"":n;var r=t.range;if(i&&t.input[S]){r||C(t,n),r=t.range,e.setAttribute("data-ratio",n-r.low),e.firstElementChild.innerText="";var a=$D.get('[data-value="'+r.high+'"]',t.slider),s=r.high-n;a.setAttribute("data-ratio",s),a.firstElementChild.innerText=rat?"":s}}var w="hb-range-cont",_="data-hb-range",D="data-range-source",A="data-range-for",k="cont-sel",T="range-slider",N="active",$="track",I="thumb",L="ratio",S="__hb_range",M="data-range-value",O=4,R={input:"","cont-sel":"body"},B=t(R,{}),H={min:0,max:100,step:1,thumb:1,split:2,ratio:!1,seperator:","},j=t(H,{seperator:":"});return{tag:["range"],afterRenderCallBack:function(t){p(h(t),!0)},beforeRender:l,cycles:["beforeRender","afterRenderCallBack"],init:l}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils))}):hbUI.extend(t.call(null,hbUI.utils))}(function(t){function e(t){var e="",n=t.target,i="",r="",a="";if("I"===n.nodeName.toUpperCase()){if(a=n.getAttribute("data")&&n.getAttribute("data").trim(),e=n.parentNode.parentNode.parentNode,!(i=$D.get("select",e)))return;for(var s=0,o=(r=i.options).length;s<o;s++)r[s].value===a&&r[s].removeAttribute("selected");n.parentNode.className="fadeOut";var l=window.setTimeout(function(){n.parentNode.parentNode.removeChild(n.parentNode),window.clearTimeout(l)},300)}}function n(e){e.hasAttribute("id")||(e=e.closest(".nav [id]"));var n=$D.getById(e.id+"-c");if("SPAN"===e.tagName.toUpperCase()||"A"===e.tagName.toUpperCase()||""!==e.id){var r=function(t,e,n){for(var i=n;i.parentNode&&-1===i.parentNode.className.indexOf(t);)i=i.parentNode;return e?i.parentNode.querySelector(e):i.parentNode}("hb-ui","",e),o=r.getAttribute(a)||l,u=r.getAttribute(s)||l,d=$D.get(".active",r);i(r),$D.addClass(e,o),n&&($D.addClass(n,u),t.autofocus(n));var c={tab:"",el:e,content:"",previousEl:d};$E.dispatch(r,"hbtabs:clicked",c)}}function i(t){var e=t.getAttribute(o);e&&(e=e.trim()),e=e||"li,a";for(var n=$D.getAll(".nav "+e,t),i=$D.getAll(".content",t),r=t.getAttribute(a)||l,u=t.getAttribute(s)||l,d=i.length-1;d>=0;d--)$D.removeClass(i[d],u);for(d=n.length-1;d>=0;d--)$D.removeClass(n[d],r)}function r(t){n(t.target)}var a="data-tabactive-class",s="data-contentactive-class",o="data-nav-header",l="active";return t.export("openTabs",n),t.export("clearTabs",i),{tag:["hb-tabs"],init:function(t){var n=$D.get(".nav",t);$D.get(".contents",t),$E.bind(n,"click",r),$E.bind(t,"click",e)}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e))}):hbUI.extend(t.call(null,hbUI.utils,hbUI))}(function(t,e){function n(t,e){var n,p,g,m=$D.getByClass("hb-tabs-menu",e);0===m.length&&console.log("No tabs menu specified"),n=$D.get('[data-default="true"]',m[0]),m=m[0],p=$D.getByClass("hb-tabs-content",e)[0];var v=$D.hasClass(e,l),b={cont:e,content:p,menu:m,defaultTab:n,type:v?u:d};if(t==c){if($E.bind(m,"click",i.bind(b)),function(t){var e=document.createElement("div");e.className=f,e.style.minHeight="1px",t&&t.appendChild(e)}(p),n){if(defaultTabName=n.getAttribute("data-tab"),!defaultTabName)throw"tabName not specified";if(!(g=$D.get('[data-tab="'+defaultTabName.trim()+'"]',p)))throw'Cannot find content with data-tab="'+defaultTabName+'"';v||$D.addClass(n,o),v?r(b,g):$D.addClass(g,o)}else{v||$D.addClass($D.get("[data-tab]",m),o);var y=$D.get("[data-tab]",p);v?r(b,y):$D.addClass(y,o)}v&&(e.__hbTabsCtx=b)}t==h&&v&&($E.bind(p,"scroll",a.bind(b)),s(b),$E.bind(window,"resize",function(t){s(b)}))}function i(n){var i,a,s,u,d,c,h;if(i=$D.getChildConts(".hb-tabs-menu [data-tab]",this.menu),s=t.getParentByAttr("data-tab",this.target||n&&n.target),i&&s&&(a=s.getAttribute("data-tab"),!this.cont.__hbEnableTab||this.cont.__hbEnableTab(a))){$D.hasClass(s,o)||(c=!0);var f=$D.hasClass(this.cont,l);if(f||$D.addClass(s,o),$D.hasClass(this.cont,"hb-inline")||f){tabsContents=$D.getChildConts(".hb-tabs-content [data-tab]",this.content);for(var p=tabsContents.length-1;p>=0;p--)if(d=tabsContents[p].getAttribute("data-tab"),u=$D.get('[data-tab="'+d+'"]',this.menu),$D.hasClass(tabsContents[p],o)){if(d===a){h=tabsContents[p];continue}$D.removeClass(tabsContents[p],o),u&&$D.removeClass(u,o)}else d===a?(f?r(this,tabsContents[p],!0):$D.addClass(tabsContents[p],o),h=tabsContents[p],e.visible(h)):($D.removeClass(tabsContents[p],o),u&&$D.removeClass(u,o))}c&&$E.dispatch(this.cont,"hbtabs2:clicked",{tab:a,el:s,content:h})}}function r(t,e,n){var i=t.content;i.scrollTop,e.offsetTop;s(t),e.scrollIntoView({behavior:"smooth"}),n&&($E.unbind(i,"scroll",a),$E.bind(i,"scroll",a.bind(t)))}function a(t){for(var e,n=this.content,i=$D.getChildConts(".hb-tabs-menu [data-tab]",this.menu),r=0;e=i[r];r++){var a=e.getAttribute("data-tab");if(a){var s=$D.get('[data-tab="'+a+'"]',n),l=s.offsetTop,u=l+s.offsetHeight,d=(n.scrollTop+n.offsetTop).toFixed();d>=l&&d<u&&function(t){var e=$D.get(".hb-tabs-menu [data-tab].active",this.menu);if(e&&e.getAttribute("data-tab")==t)return;for(var n,i=$D.getChildConts(".hb-tabs-menu [data-tab]",this.menu),r=0;n=i[r];r++)n.getAttribute("data-tab")==t?$D.addClass(n,o):$D.removeClass(n,o)}.call(this,a)}}}function s(t){var e=t.content,n=$D.getByClass(f,t.cont)[0],i=1,r=$D.getAll("[data-tab]",e),a=r[r.length-1].getBoundingClientRect().height;i=(i=e.getBoundingClientRect().height-a-(function(t){for(var e=$D.getAll("[data-cont-space]",t.content),n=0,i=0;i<e.length;i++)n+=e[i].getBoundingClientRect().height;return n}(t)-1))<=0?1:i.toFixed(),n&&(n.style.minHeight=i+"px")}var o="hb-active",l="hb-scroll",u="scroll",d="default",c="beforeRender",h="afterRenderCallBack",f="hb-tab-spacer",p=[c,h];return t.export("showTabs2",function(t){var e=t.closest(".hb-tabs2");i.call({cont:e,target:t,menu:$D.get(".hb-tabs-menu",e),content:$D.get(".hb-tabs-content",e)})}),{init:n.bind(null,c),afterRenderCallBack:n.bind(null,h),cycles:p,tag:["hb-tabs2"]}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE))}(function(t,e,n){"use strict";function i(t){this.searchDiv=t,this.searchEl,this.searchicon="",this.searchIcon="",this.setSearchEl(),this.input,this.uiCont,this.hbuiCont,this.searchVal="",this.tagContainer,this.dropdownList,this.placeholder=this.searchEl.hasAttribute("placeholder")?u(this.searchEl,"placeholder"):"",this.allowMultiple=!!this.searchEl.hasAttribute("allow-multiple")&&u(this.searchEl,"allow-multiple"),this.autoFocus=this.searchEl.hasAttribute("hb-autofocus"),this.constructHtml(),this.en_ani="pullDown",this.ex_ani="pullUp",this.boundFns={},this.isDefaultTag=!1,this.bindEvents(),this.checkForDefaultValues()}function r(t){return""==t.searchIcon&&t.uiCont.children.length>1||t.uiCont.children.length>2}function a(t,e){for(var n=0;n<t.children.length;n++)e==u(t.children[n],"type")?$D.addClass(t.children[n],"active"):$D.removeClass(t.children[n],"active")}var s='<span style="color: black;"></span>    \t\t\t\t\t<span>: </span><i>x</i>',o=[],l=i.prototype;l.setSearchEl=function(){var t=this.searchDiv;if("SELECT"==t.nodeName)this.searchEl=t;else if(t.children.length>0)for(var e=0;e<t.children.length;e++)"SELECT"==t.children[e].nodeName?this.searchEl=t.children[e]:t.children[e].hasAttribute("hb-search-icon")&&(this.searchIcon=t.children[e])},l.constructHtml=function(){var t=document.createElement("DIV");t.innerHTML='<div class="ip-field-cont">\t\t\t\t\t<div hb-search-icon style="display:none"></div>            \t\t<input type="text" class="selected-val" placeholder="">            \t</div>       \t\t\t<div class="dropdown">            \t\t<div class="dd-cont">            \t\t</div>        \t\t</div>',$D.addClass(t,"hbui-cont hb-search select hb-tags-input-cont"),this.searchEl.parentElement.insertBefore(t,this.searchEl),this.searchEl.style.display="none",this.uiCont=t.firstElementChild,d(this.uiCont,"tabindex","0"),this.input=$D.get("input",this.uiCont),d(this.input,"placeholder",this.placeholder),this.searchEl.hasAttribute("autocomplete")&&"off"==u(this.searchEl,"autocomplete")&&d(this.input,"autocomplete","nope"),this.hbuiCont=this.uiCont.parentElement,""!=this.searchIcon&&(this.searchicon=this.uiCont.firstElementChild,this.searchicon.appendChild(this.searchIcon.firstElementChild),$D.addClass(this.searchicon,u(this.searchIcon,"hb-search-icon-class")),this.searchicon.style.display="",this.searchIcon.style.display="none"),this.constructDropDownList(this.searchEl.options),this.dropdown=$D.get(".dd-cont",this.hbuiCont),this.dropdown.innerHTML="",this.dropdown.appendChild(this.dropdownList)},l.constructDropDownList=function(e){for(var n=document.createElement("ul"),i=0;i<e.length;i++){var r=document.createElement("li");d(r,"value",e[i].value),d(r,"type",e[i].innerText);var a=document.createElement("span"),s=document.createTextNode(t.escapeHtml(e[i].innerText)+" : ");if(a.style.color="black",a.appendChild(s),r.appendChild(a),e[i].hasAttribute("placeholder")){var o=document.createElement("span"),l=t.escapeHtml(u(e[i],"placeholder")),c=document.createTextNode(l);o.appendChild(c),d(r,"placeholder",l),r.appendChild(o)}0==i&&$D.addClass(r,"active"),r.style.wordBreak="break-word",r.style.wordWrap="break-word",n.appendChild(r)}this.dropdownList=n},l.bindEvents=function(){this.boundFns.handleClick=this.handleClick.bind(this),this.boundFns.handleKeyNav=this.handleKeyNav.bind(this),this.boundFns.removeSearchTag=this.removeSearchTag.bind(this),this.boundFns.handleBlur=this.handleBlur.bind(this),this.boundFns.handleMouseDown=this.handleMouseDown.bind(this),this.boundFns.hideDropDown=this.hideDropDown.bind(this),this.boundFns.checkForDefaultValues=this.checkForDefaultValues.bind(this),$E.bind(this.hbuiCont,"click",this.boundFns.handleClick),$E.bind(this.uiCont,"keyup",this.boundFns.handleKeyNav),$E.bind(this.dropdown,"click",this.boundFns.handleClick),$E.bind(this.dropdownList,"mousedown",this.boundFns.handleMouseDown),$E.bind(this.dropdownList,"keyup",this.boundFns.handleKeyNav),$E.bind(this.input,"blur",this.boundFns.handleBlur)},l.checkForDefaultValues=function(){if(""!=u(this.searchEl,"value")&&""!=u(this.searchEl,"type")){this.isDefaultTag=!0;var t=g(u(this.searchEl,"type"),this.dropdownList.children);this.createSearchTag(t,u(this.searchEl,"value")),a(this.dropdownList,t)}this.autoFocus&&this.input.focus()},l.handleMouseDown=function(e){var n=e.target,i=this.dropdownList.children;if("LI"==n.nodeName||n.parentElement&&"LI"==n.parentElement.nodeName)if(n="LI"==n.parentElement.nodeName?n.parentElement:n,this.allowMultiple?_markActive(n):a(this.dropdownList,u(n,"type")),r(this))this.allowMultiple?this.createSearchTag(u(n,"type"),""):(this.tagContainer.children[0].innerText=u(n,"type"),d(this.tagContainer,"type",n.value),this.input.value="",this.input.focus(),this.hideDropDown(),t.fireEvent(this.searchEl,"change",{search_type:u(this.tagContainer,"type"),search_text:u(this.tagContainer,"value")}));else if(""!=this.input.value){var s=c(i);s=null!=s?s:h(i),this.createSearchTag(u(s,"type"),this.input.value)}},l.handleClick=function(t){var e=t.target,n=this.dropdownList.children;"I"==e.nodeName?(this.removeSearchTag(e),f(n)):(this.showDropDown(),this.input.focus())},l.handleKeyNav=function(e){var i=e.target,a=t.getKeyCode(e),s=r(this);if(a==n.ENTER){var o=this.dropdownList.children,l=c(o);""==this.input.value&&null==l?t.fireEvent(this.searchEl,"change",{search_type:u(this.tagContainer,"type"),search_text:u(this.tagContainer,"value")}):(l=null!=l?l:h(o),this.createSearchTag(u(l,"type"),i.value))}else if(a===n.DOWNARROW||a===n.UPARROW)$D.hasClass(this.hbuiCont,"active")?a==n.DOWNARROW?this.hoverOption("next"):a==n.UPARROW&&this.hoverOption("prev"):a==n.DOWNARROW&&this.showDropDown();else if(""!=i.value&&null!=this.dropdownList){o=this.dropdownList.children;this.allowMultiple||(this.searchVal=i.value,$D.hasClass(this.hbuiCont,"active")||this.showDropDown(),s&&(d(this.tagContainer,"value",i.value),this.tagContainer.children[1].innerText=": "+i.value)),p(this.searchVal,o)}else a==n.BACKSPACE?(s&&this.removeSearchTag(),f(this.dropdownList.children)):a===n.ESCAPE?$D.hasClass(this.hbuiCont,"active")&&this.hideDropDown():f(this.dropdownList.children)},l.createSearchTag=function(e,n){var i,a=this.uiCont.children.length-1;if(r(this))if(this.allowMultiple&&""!=u(this.input.children[a-1],"value")&&null!=u(this.input.children[a-1],"value")){var o=document.createElement("SPAN");o.innerHTML=s,$D.addClass(o,"hb-tag"),this.input.insertBefore(o,this.input.childNodes[a]),this.input.children[a+1].value="",(i=this.input.children[a]).children[0].innerText=e,d(i,"type",m(e,this.dropdownList.children))}else(i=this.tagContainer).children[0].innerText=e,d(i,"type",m(e,this.dropdownList.children));else(i=document.createElement("SPAN")).innerHTML=s,$D.addClass(i,"hb-tag"),d(i,"type",m(e,this.dropdownList.children)),d(i,"value",n),i.children[0].innerText=e,n.length>10?i.children[1].innerText=": "+n.substring(0,10)+"...":i.children[1].innerText=": "+n,this.uiCont.insertBefore(i,this.input);this.input.value="",d(this.input,"placeholder",""),this.input.focus(),this.tagContainer=""==this.searchicon?this.uiCont.children[0]:this.uiCont.children[1],this.hideDropDown(),this.allowMultiple||this.isDefaultTag||t.fireEvent(this.searchEl,"change",{search_type:u(this.tagContainer,"type"),search_text:u(this.tagContainer,"value")}),this.isDefaultTag=!1},l.handleBlur=function(t){this.hideDropDown()},l.hideDropDown=function(t){$D.removeClass(this.dropdown.parentElement,"pullDown"),$D.addClass(this.dropdown.parentElement,"pullUp"),$D.removeClass(this.hbuiCont,"active")},l.hoverOption=function(t){var e=this.dropdownList.children,n=c(this.dropdownList.children),i=(n=null!=n?n:h(this.dropdownList.children)).value;"next"==t&&i<e.length-1?($D.addClass(e[i+1],"hover"),$D.removeClass(e[i],"hover")):"prev"==t&&i>0&&($D.addClass(e[i-1],"hover"),$D.removeClass(e[i],"hover"))},l.showDropDown=function(t){$D.removeClass(this.dropdown.parentElement,this.ex_ani),$D.addClass(this.dropdown.parentElement,this.en_ani),$D.addClass(this.hbuiCont,"active")},l.removeSearchTag=function(e){var n=this.uiCont.children.length;null!=e?(u(e.parentElement,"type"),this.uiCont.removeChild(e.parentElement)):(u(this.uiCont.children[n-2],"type"),this.uiCont.removeChild(this.uiCont.children[n-2])),1==this.uiCont.children.length&&"INPUT"==this.uiCont.children[0].nodeName&&d(this.uiCont.children[0],"placeholder",this.placeholder),t.fireEvent(this.searchEl,"change",{search_type:null,search_text:null})};var u=function(t,e){return t.getAttribute(e)},d=function(t,e,n){t.setAttribute(e,n)},c=function(t){for(var e=0;e<t.length;e++)if($D.hasClass(t[e],"hover"))return t[e];return null},h=function(t){for(var e=0;e<t.length;e++)if($D.hasClass(t[e],"active"))return t[e]},f=function(t){for(var e=0;e<t.length;e++)t[e].firstElementChild.style.color="black",t[e].lastElementChild.style="",t[e].hasAttribute("placeholder")?t[e].lastElementChild.textContent=u(t[e],"placeholder"):t[e].lastElementChild.textContent="",$D.removeClass(t[e],"hover")},p=function(t,e){for(var n=0;n<e.length;n++)e[n].firstElementChild.style="",e[n].lastElementChild.style.color="black",e[n].lastElementChild.textContent=t},g=function(t,e){for(var n=0;n<e.length;n++)if(u(e[n],"value")==t)return e[n].type},m=function(t,e){for(var n=0;n<e.length;n++)if(u(e[n],"type")==t)return e[n].value};return{tag:["hb-search"],init:function(t){o.push(new i(t))}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e))}):hbUI.extend(t.call(null,hbUI.utils,hbUI))}(function(t,e){function n(t,e){t==i&&function(t){var e=t.parentElement;if(!e)return;$D.removeClass(e,"fixed"),$D.addClass(e,"nogrow");var n=window.innerHeight-e.getBoundingClientRect().top;console.log(e.clientHeight,n),e.clientHeight>n?($D.removeClass(e,"nogrow"),$D.addClass(e,"fixed")):$D.addClass(e,"nogrow")}(e)}var i="afterRenderCallBack",r=["beforeRender",i];return{init:n.bind(null,"beforeRender"),afterRenderCallBack:n.bind(null,i),cycles:r,tag:["hb-pagination"]}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){var r="is-focus";return{tag:["hb-input-focus"],init:function(t,e){function n(e){var n=e.keyCode?e.keyCode:e.which;s.focus();var r=t.getElementsByTagName("input");null!=r&&27!=n&&13!=n&&(r[0].click(),$E.bind(r[0],"focus",i),$E.bind(r[0],"blur",a))}function i(){$D.addClass(t,r)}function a(){$D.removeClass(t,r)}var s=t.querySelector("input");$E.bind(t,"click",n),$E.bind(t,"keyup",n),$E.bind(s,"focus",i),$E.bind(s,"keyup",i),$E.bind(s,"blur",a)}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._))}(function(t,e){return{tag:["hb-help"],init:function(t,e){t.innerHTML='<svg class="sites-icon inline"><use xlink:href="#icon-zsites-helpfill"></use></svg>',$E.dispatch(document,"help:inited",{element:t})}}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){function r(t){var e=this.getAttribute("data-isAsync"),n=null;if(p!==t&&!this.hasAttribute("hb-custom-acc")){p=t;var i=t.target,r=(n=null,i),s="";do{if($D.hasClass(r,u)){s=h,i=r;break}if($D.hasClass(r,d)){s=f,i=r;break}}while(r=r.parentNode);s===h&&((n=i.nextElementSibling)&&$D.hasClass(n,c)?l(i):"true"===e?a(i):($E.dispatch(t.target,"hbAccordian:beforeOpen",o.bind(i,i)),o(i)))}}function a(t,e){$E.dispatch(t,"hbAccordian:beforeOpen",o.bind(t,t,e))}function s(e,n){var i=e.nextElementSibling;n||(n=t.getParentByClass("hb-ui",e));$D.hasClass(i,c)?l(e):"true"===n.getAttribute("data-isAsync")?a(e,n):($E.dispatch(e,"hbAccordian:beforeOpen",o.bind(e,e,n)),o(e,n))}function o(e,n){var i;n||(n=t.getParentByClass("hb-ui",e)),i=n.getAttribute("data-hb-tablike");var r=e.nextElementSibling;r&&$D.hasClass(r,d)&&!$D.hasClass(r,c)&&($D.hasClass(r,c)||("true"===i&&function(t,e){for(var n=$D.getAll(".hb-acc-title",t),i=0,r=n.length;i<r;i++)n[i]!==e&&l(n[i])}(n,e),$D.addClass(e,c),$D.addClass(r,c),$D.removeClass(r,"hb-accordian__closing"),$D.addClass(r,"hb-accordian__opening"),hbAnimate(r).show({callback:function(n){$D.removeClass(n,"hb-accordian__opening"),t.autofocus(r),$E.dispatch(e,"hbAccordian:afterOpen",{content:n,title:e})}})))}function l(t){var e=t.nextElementSibling;e&&$D.hasClass(e,d)&&$D.hasClass(e,c)&&($D.removeClass(t,c),$D.removeClass(e,c),$D.addClass(e,"hb-accordian__closing"),hbAnimate(e).hide({callback:function(e){$E.dispatch(t,"hbAccordian:close",{content:e,title:t})}}))}var u="hb-acc-title",d="hb-acc-content",c="hb-active",h=1,f=2,p=null;return t.export("openAccordian",a),t.export("closeAccordian",l),t.export("toggleAccordian",s),t.export("accordianExtension",function(t,e){t.caller instanceof Hummingbird||(t.moduleCtx.toggleAccordian=s.bind(null,t.caller.parentNode)),e()}),{tag:["hb-accordian"],init:function(t,e){$E.bind(t,"click",r)}}});var hbAnimate=function(){"use strict";function t(t){var e,n,i=["Moz","Webkit","O","ms"],r=document.createElement("div"),a=t.charAt(0).toUpperCase()+t.substr(1);for(n=0;n<i.length;++n)if((e=i[n]+a)in r.style)return e;if(t in r.style)return t}function e(t,e){(function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)})(t,e)||(t.className+=" "+e)}function n(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");n.test(t.className)&&(t.className=t.className.replace(n," "))}function i(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function r(t,e){return t.hasOwnProperty(e)}function a(t){if(!t)throw"No argument specified for hbAnimate";return"string"==typeof t?new s(function(t,e){return e||(e=u),e.querySelector(t)}(t)):1===t.nodeType?new s(t):void 0}function s(t){this.element=t,this.queue=[],this.totalDuration=0}function o(t){var e=new Date,n=f(function(){var i=(new Date-e)/t.duration;i>1&&(i=1);var r=t.delta(i);t.step(r),1==i&&(p(n),t.callback&&t.callback())},t.delay||10)}var l=window,u=document,d=void 0,c=(Object.prototype.toString,l.requestAnimationFrame||function(){var t=0;return l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||function(e){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-t)),t=i+n,setTimeout(function(){e(i+n)},n)}}()),h=!!(l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame&&l.mozCancelRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame),f=function(t,e){function n(){(new Date).getTime()-i>=e&&(t.call(),i=(new Date).getTime()),r&&r.value?r.value=c(n):p(r)}if(!h)return l.setInterval(t,e);var i=(new Date).getTime(),r=new Object;return r.value=c(n),r},p=function(t){null!==t&&void 0!==t.value&&(l.cancelAnimationFrame?l.cancelAnimationFrame(t.value):l.webkitCancelAnimationFrame?l.webkitCancelAnimationFrame(t.value):l.webkitCancelRequestAnimationFrame?l.webkitCancelRequestAnimationFrame(t.value):l.mozCancelRequestAnimationFrame?l.mozCancelRequestAnimationFrame(t.value):l.oCancelRequestAnimationFrame?l.oCancelRequestAnimationFrame(t.value):l.msCancelRequestAnimationFrame?l.msCancelRequestAnimationFrame(t.value):clearInterval(t),t.value=null)};(function(){var t,e=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(r(n,t)&&e.style[t]!==d)return n[t]})(),function(){var t,e=document.createElement("div"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(r(n,t)&&e.style[t]!==d)return n[t]}();return{}.clearRequestInterval=p,s.prototype.forceRepaint=function(t){t.offsetHeight},s.prototype.css=function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e.style[t(i)]=n[i]);return this},s.prototype.transition=function(t){this.element.style.removeProperty("transition"),this.css(this.element,t[0]),2===t.length&&(this.forceRepaint(this.element),this.css(this.element,t[1]))},s.prototype.translate=function(t){var e=function(t){return parseFloat(t.replace("s",""))}(t.duration);return t.x=t.x||0,t.y=t.y||0,t.z=t.z||0,this.totalDuration+=e,this.queue.push({duration:e,css:"transform:translate3D("+t.x+", "+t.y+", "+t.z+")"}),this},s.prototype.scaleOut=function(t){return i(t=t||{},{duration:"0.3s"}),this.transition([{opacity:1,transform:"scale3d(1, 1, 1)",display:"block"},{opacity:0,transform:"scale3d(.1, .1, .1)",display:"block",transition:"all "+t.duration}]),this},s.prototype.scaleIn=function(t){return i(t=t||{},{duration:"0.3s"}),this.transition([{opacity:0,transform:"scale3d(.1, .1, .1)",display:"block"},{opacity:1,display:"block",transform:"scale3d(1, 1, 1)",transition:"all "+t.duration}]),this},s.prototype.flip=function(){return this},s.prototype.rotate=function(t){return t.duration||(t.duration="0.3s"),this.transition([{transform:"rotate3d(0, 0, 1, 0deg)"},{transform:"rotate3d(0, 0, 1, "+t.degree+"deg)",transition:"transform "+t.duration}]),this},s.prototype.blur=function(t){return i(t=t||{},{blur:"3px",duration:"0.3s"}),this.transition([{filter:"blur("+t.blur+")",transition:"all "+t.duration}]),this},s.prototype.focus=function(t){return i(t=t||{},{duration:"0.3s"}),this.transition([{filter:"blur(0)",transition:"all "+t.duration}]),this},s.prototype.fadeIn=function(t){return i(t=t||{},{duration:"0.3s"}),this.transition([{opacity:0},{opacity:1,transition:"opacity "+t.duration}]),this},s.prototype.fadeOut=function(t){return t=t||{},i(t,{duration:"0.3s"}),this.transition([{opacity:1},{opacity:0,transition:"opacity "+t.duration}]),this},s.prototype.animate=function(t,n,i){this.css(this.element,t),e(this.element,"hb-animated"),this.element.setAttribute("data-hb-animate",n+function(t){return t.charAt(0).toUpperCase()+t.substr(1)}(i))},s.prototype.slideIn=function(t){var e={"animation-duration":t.duration};this.animate(e,"slide","in")},s.prototype.slideOut=function(t){this.animate(t,"slide","out")},s.prototype.scaleIn=function(t){var e={"animation-duration":t.duration};switch(t.direction){case"up":e["transform-origin"]="center bottom";break;case"down":e["transform-origin"]="center top";break;case"left":e["transform-origin"]="center right";break;case"right":e["transform-origin"]="center left"}this.animate(e,"scale","in")},s.prototype.scaleOut=function(t){var e={"animation-duration":t.duration};this.animate(e,"scale","out")},s.prototype.appearIn=function(t){var e={"animation-duration":t.duration};this.animate(e,"appear","in")},s.prototype.hide=function(t){var e=this.element.clientHeight,n=this;o({delay:10,duration:400,delta:function(t){return Math.pow(t,1.5)},step:function(t){n.element.style.height=e-t*e+"px"},callback:function(){t.callback&&t.callback(n.element)}})},s.prototype.show=function(t){var e,n=this;this.element.style.display="block",this.element.style.height="100%",e=window.getComputedStyle(this.element).height.replace("px",""),e=parseFloat(e),this.element.style.height="0",this.forceRepaint(this.element),o({delay:10,duration:400,delta:function(t){return Math.pow(t,2)},step:function(t){n.element.style.height=e*t+"px"},callback:function(){n.element.style.height="auto",t.callback&&t.callback(n.element)}})},s.prototype.tada=function(){return this},s.prototype.bounce=function(){return this},s.prototype.fly=function(){return this},s.prototype.swing=function(){return this},s.prototype.spin=function(){return this},s.prototype.purge=function(){n()},s.prototype.end=function(){var t=".some-ani {-webkit-animation-fill-mode: both;-webkit-animation-name: some; -webkit-animation-duration: "+this.totalDuration+"s;}",n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n);var i=0;t+="@-webkit-keyframes some {";for(var r=0,a=this.queue.length;r<a;r++)t+=(i+=this.queue[r].duration)/this.totalDuration*100+"% {"+this.queue[r].css+"}";t+="}",n.innerHTML=t,e(this.element,"some-ani")},a}();!function(t,e){"function"==typeof define&&define.amd?define("hbColorpicker",e.bind(null,window,document)):(t.hbColorpicker=e(t,document),"complete"===document.readyState?hbColorpicker.init():window.addEventListener("load",function(){hbColorpicker.init()}))}(this,function(t,e){"use strict";function n(t){return"rgba( "+t[0]+", "+t[1]+", "+t[2]+", "+(t[3]>-1?t[3]:1)+" )"}function i(t){return Array.isArray(t)||(t=t.match(/([\d*\.?\d*]+)/g)),t[3]||(t[3]=1),t}function r(t){return e.getElementById(t)}function a(t,n){return(n=n||e).querySelector(t)}function s(t,n){return(n=n||e).querySelectorAll(t)}function o(t){return Number(t.replace("px",""))}function l(t,e){return window.getComputedStyle(t)[e]}function u(t,e,n){t.addEventListener(e,n,!1),pt.push({element:t,type:e,listener:n})}function d(t,e,n){t.removeEventListener(e,n,!1);for(var i=pt.length-1;i>=0;i--)if(pt[i].element===t&&pt[i].type===e&&pt[i].listener===n){pt.splice(i,1);break}}function c(t){t&&t.stopPropagation()}function h(t,e){if(document.createEventObject){var n=document.createEventObject();return t.fireEvent("on"+e,n)}return(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)}function f(t){(Ot=document.createElement("span")).style.backgroundColor=t,Ot.className="hb-color__color",Rt.appendChild(Ot)}function p(t,n){var i=t.color,o=t.noGradColorChange,l=void 0!==i[3]?i[3]:w(st),u=a('[data-id="rgba-code"]',Q).classList.contains("hb-color__active")||l<1;(ht=t.hue)||(ht=Vt.RGB2HSL(i)[0]);var d;(d=t.hexCode?t.hexCode:Vt.RGB2HEX(i)).length>7&&(d=d.substr(0,7)),mt.hex=d,a("input",r("hex-code")).value=d;var c;u?(i[3]=l,A("rgba")):(A("hex"),i[3]=1),(c=s("input",r("rgba-code")))[0].value=i[0],c[1].value=i[1],c[2].value=i[2],c[3].value=i[3],mt.r=i[0],mt.g=i[1],mt.b=i[2],mt.a=i[3];a("#color-preview_new",Q).style.backgroundColor="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")",function(t){e.querySelectorAll(".hb-cp-opacity-stop").forEach(function(e){e.setAttribute("stop-color","rgb("+t[0]+","+t[1]+","+t[2]+")")})}(i),g(l),o||t.similarColors||et&&(et.style.backgroundColor="rgb("+i[0]+", "+i[1]+", "+i[2]+")"),t.similarColors||function(){for(var t,e="",n=8;n>4;n--)e+='<div class="hb-color__color" style="background-color:'+(t="hsla("+ht+", 60%, "+11*n+"%, 1)")+'" color="'+t+'"></div>';for(var i=6;i<8;i++)e+='<div class="hb-color__color" style="background-color:'+(t="hsla("+ht+", "+11*i+"%, 50%, 1)")+'" color="'+t+'"></div>';for(;n>=1;n--)e+='<div class="hb-color__color" style="background-color:'+(t="hsla("+ht+", 60%, "+11*n+"%, 1)")+'" color="'+t+'"></div>';at.innerHTML=e}(),!n&&Ut(S())}function g(t){var e=o(l(ot,"width"));st.style.insetInlineStart=t*e-o(l(st,"width"))/2+"px"}function m(){var e=JSON.parse(t.localStorage.getItem(yt));xt.RECENT=Array.isArray(e)&&e.length>0?e:["#ffffff"]}function v(t,e){function n(t){return e?t+u:t}function i(t){return e?t+d:t}var r,a,s,u,d,c,h=o(l(Q,"width")),f=o(l(Q,"height")),p=Mt.getOffset(gt),g=t.getBoundingClientRect();t&&(a=function(t,e){return"left"===bt.position?t.left-e>0?"left":"right":t.left+e>window.innerWidth?"left":"right"}(r=Mt.getOffset(t),h),s=function(t,e){return"bottom"===bt.position?t.top+t.height+e>window.innerHeight?"top":"bottom":t.top-e-125<0?"bottom":"top"}(r,f)),e&&(c=e.getBoundingClientRect(),u=g.top-c.top,d=g.left-c.left),t&&"true"===bt.fixed?bt.position?("left"===a?Q.style.insetInlineStart=r.left-h+"px":"right"===a&&(Q.style.insetInlineStart=t.getBoundingClientRect().right+"px"),"top"===s?Q.style.insetBlockStart=r.top+"px":"bottom"===s&&(Q.style.insetBlockStart=r.top+t.getBoundingClientRect().height+"px")):(Q.style.insetInlineStart="left"===a?r.left+r.width-h+"px":r.left+"px",window.innerHeight<p.top+p.height+f?Q.style.insetBlockStart=p.top-f+"px":Q.style.insetBlockStart=p.top+p.height+"px"):("left"===a?Q.style.insetInlineStart=i(-h)+"px":"right"===a&&(Q.style.insetInlineStart=i(0)+"px"),"top"===s?Q.style.insetBlockStart=n(-f-5)+"px":"bottom"===s&&(Q.style.insetBlockStart=n(g.height+5)+"px"))}function b(){for(var t=0,n=0,i=a("#hb-color__rectsvg",tt),r=(a("#hb-color__dragsvg",tt),0);r<360;r++)!function(t,n,i,r,a,s,o,l){var u=wt+"://www.w3.org/2000/svg",d=e.createElementNS(u,"line");d.setAttributeNS(null,"stroke",s),d.setAttributeNS(null,"x1",n),d.setAttributeNS(null,"y1",i),d.setAttributeNS(null,"x2",r),d.setAttributeNS(null,"y2",a),d.setAttributeNS(null,"stroke-width",o),t.appendChild(d)}(i,t+=210/360,0,n+=210/360,15,"hsla("+r+", 100%, 50%, 1)",1);var s,o=a("#cp-trans-bg",Q),l=wt+"://www.w3.org/2000/svg",u=wt+"://www.w3.org/1999/xlink";for(r=0;r<20.6;r++)(s=document.createElementNS(l,"use")).setAttributeNS(u,"xlink:href","#cp-trans-square"),s.setAttributeNS(null,"x",10*r),s.setAttributeNS(null,"y",0),o.appendChild(s)}function y(t){var e,n=t.target;if("LI"!==n.nodeName){if(!(e=n.closest("li")))return;n=e}var i=r(n.getAttribute("data-id"));if(null!==i){var u=a(".hb-color__active",n.parentElement);u!==n&&(u.classList.remove("hb-color__active"),n.classList.add("hb-color__active"));var d=a(".hb-color__active",i.parentElement);d!==i&&(d.classList.remove("hb-color__active"),i.classList.add("hb-color__active"));"hbcolor:hex"===n.getAttribute("data-event")?(st.style.insetInlineStart=o(l(ot,"width"))-o(l(st,"width"))/2+"px",s(".hb-color__ip-fields input",Q)[3].value=1,z("HEX")):z("R")}}function C(t){A(t.target.value),Ut(S())}function E(t){if(t.target.classList.contains("hb-color__color")){var e=l(t.target,"backgroundColor");p({color:e=i(e),hue:Vt.RGB2HSL(e)[0],similarColors:!!at.contains(t.target)})}}function x(t,e){jt=e||this,Bt=t.clientX,Ht=Mt.getOffset(jt).left-Mt.getOffset(jt.parentElement).left,u(document,"mousemove",_),u(document,"mouseup",function t(){d(document,"mousemove",_),d(document,"mouseup",t),jt=null})}function w(t){var e=Mt.getOffset(t.parentElement),n=Mt.getOffset(t),i=o(l(t.parentElement,"width"));return o(((n.left+10-e.left)/i+"").substr(0,4))}function _(t){var e=t.clientX,n=w(jt),i=Ht+(e-Bt),r=o(l(jt.parentElement,"width")),a=o(l(jt.parentElement,"inset-inline-start"));i<-10?(n=0,jt.style.insetInlineStart=a-10+"px"):i>a+r-10?(n=1,jt.style.insetInlineStart=a+r-10+"px"):n>=0&&n<=1&&(jt.style.insetInlineStart=i+"px"),D(n=w(jt))}function D(t){var e;t<1&&(e=a('[data-id="hex-code"]')).classList.contains("hb-color__active")&&(e.classList.remove("hb-color__active"),r("hex-code").classList.remove("hb-color__active"),a('[data-id="rgba-code"]',Q).classList.add("hb-color__active"),r("rgba-code").classList.add("hb-color__active"),A("rgba"));var n=l(s(".hb-color__preview")[1],"backgroundColor");(n=i(n))[3]=t,p({color:n})}function A(t){var e=r(Et);if(e){e.value!=t&&(e.value=t),mt.active=t;var n=a("#"+t+"-code",Q),i=a('[id$="-code"].hb-color__active',Q),u=a('[data-id$="-code"].hb-color__active',Q),d=a('[data-id="'+t+'-code"]',Q);i!=n&&(i.classList.remove("hb-color__active"),n.classList.add("hb-color__active"),u.classList.remove("hb-color__active"),d.classList.add("hb-color__active"),"hex"===t?(st.style.insetInlineStart=o(l(ot,"width"))-o(l(st,"width"))/2+"px",s(".hb-color__ip-fields input",Q)[3].value=1,z("HEX")):(z("R"),st.style.insetInlineStart=o(l(ot,"width"))*mt.a-o(l(st,"width"))/2+"px",s(".hb-color__ip-fields input",Q)[3].value=mt.a))}}function k(t){Q.style.insetInlineStart=t.clientX+Pt+"px",Q.style.insetBlockStart=t.clientY-qt+"px"}function T(t){function e(){for(var t=i.contexts.length-1;t>=0;t--)d(i.contexts[t],"mouseup",e),d(i.contexts[t],"mousemove",k);Ft=null}Pt=this.getBoundingClientRect().right-t.clientX,qt=t.clientY-this.getBoundingClientRect().top,Ft=o(l(Q,"width"));for(var n=gt.id,i=ft[n],r=i.contexts.length-1;r>=0;r--)u(i.contexts[r],"mousemove",k),u(i.contexts[r],"mouseup",e);t.stopPropagation()}function N(e){if(gt){ht=255,function(){for(var t=pt.length-1;t>=0;t--)d(pt[t].element,pt[t].type,pt[t].listener)}();var n=Q.parentNode;if(n.parentNode.removeChild(n),e){var i=new CustomEvent("hbColorpicker",{detail:{id:gt.id,action:"close"}});gt.dispatchEvent(i)}gt.classList.remove(Ct),M(S()),t.localStorage.setItem(yt,JSON.stringify(xt.RECENT)),h(gt,"colorpicker:close"),gt=null}}function $(t){return"hex"===t.active?X(t.hex):"rgba"===t.active&&function(t){return"rgba"===t.active&&G(t.r)&&G(t.g)&&G(t.b)&&t.a>=0&&t.a<=1}(t)}function I(t){"hex"==mt.active?X(t.value)||(t.value="#FFFFFF"):t.value=function(t,e,n,i){var r=Number(t);return e=Number(e),n=Number(n),i=Number(i),""===t.trim()?i:r<=e?e:r>=n?n:r||i}(t.value,t.getAttribute("min"),t.getAttribute("max"),t.getAttribute("data-def"))}function L(t){if(!$(mt))throw"Not a valid color";var e=S();Ut(e),M(e),c(t),function(t){t&&t.preventDefault()}(t),N(!0)}function S(){return"hex"===mt.active?mt.hex:"rgba("+mt.r+","+mt.g+","+mt.b+","+mt.a+")"}function M(t){X(t)&&(t=n(Vt.HEX2RGB(t)));var e=xt.RECENT,i=e.indexOf(t);i>-1&&e.splice(i,1),e.unshift(t),e.length>10&&(e.length=10)}function O(t){27===t.keyCode&&B(t)}function R(t){var e=t.relatedTarget;Q==e||Q.contains(e)||(e&&e.hasAttribute("data-cp")&&e.setAttribute("data-focusout",""),B(t))}function B(t){c(t),N(!0)}function H(t){var e=t.target,n=e.getAttribute("data-cp");if("INPUT"===e.nodeName){var i=e.value.trim();if("HEX"===n)X(i)?(p({color:Vt.HEX2RGB(i),hexCode:i}),7===i.length&&(mt.hex=i)):i.length>7&&(e.value=mt.hex);else if(/R|G|B|A/.test(n)){I(e);var r=[a('[data-cp="R"]',Q).value,a('[data-cp="G"]',Q).value,a('[data-cp="B"]',Q).value,a('[data-cp="A"]',Q).value];p({color:r,hexCode:Vt.RGB2HEX(r)})}}}function j(t){var e=t.clientX-t.target.getBoundingClientRect().left,n=t.target.getBoundingClientRect();"true"===bt.fixed&&(e=t.clientX-n.left),st.style.insetInlineStart=e-10+"px";var i=e/o(l(this,"width"));D(i=o((i+"").substr(0,3))),x(t,st)}function F(t,e){t.stopPropagation(),jt=e||this,u(document,"mousemove",P),u(document,"mouseup",function t(){d(document,"mousemove",P),d(document,"mouseup",t)}),P(t)}function P(t){var e=Mt.getOffset(et),n=(Mt.getOffset(t.target),t.clientX-e.left),i=t.clientY-e.top,r=o(l(et,"width")),a=o(l(et,"height"));n<0&&(n=0),i<0&&(i=0),n>r&&(n=r),i>a&&(i=a),function(t){jt.style.insetInlineStart=t.x-6+"px",jt.style.insetBlockStart=t.y-6+"px"}({x:n,y:i});var s=100*n/r,u=100*i/a;u=100-u;p({color:Vt.HSV2RGB([ht,s,u]),noGradColorChange:!0,hue:ht})}function q(t){var e=t.target,n=a(".hb-color__circle-picker",Q);e.classList.contains("hb-color__gradient")&&(n.style.insetInlineStart=t.layerX-6+"px",n.style.insetBlockStart=t.layerY-6+"px"),F(t,n)}function U(t,e){function n(){d(document,"mousemove",V),d(document,"mouseup",n),jt=null}jt=e||this,Bt=t.clientX,Ht=Mt.getOffset(jt).left-Mt.getOffset(jt.parentElement).left,u(document,"mousemove",V),u(document,"mouseup",n)}function V(t){var e=t.clientX,n=w(jt),i=Ht+(e-Bt),r=o(l(jt.parentElement,"width")),a=o(l(jt.parentElement,"inset-inline-start"));i<-10?(n=0,jt.style.insetInlineStart=a-10+"px"):i>a+r-10?(n=1,jt.style.insetInlineStart=a+r-10+"px"):n>=0&&n<=1&&(jt.style.insetInlineStart=i+"px");var s="hsla("+(n*=360)+"%, 100%, 50%, 1)",u=n;p({color:n=Vt.HSL2RGB(s),hue:u})}function Y(t){var e=Mt.getOffset(t.target),n=Mt.getOffset(t.target.parentElement);rt.style.insetInlineStart=e.left-n.left-10+"px";var i=t.target.getAttribute("stroke");if(i){var r=Vt.HSL2RGB(i.trim());p({color:r,hue:Vt.RGB2HSL(r)[0]}),U(t,rt)}}function W(t,e){var n=this.hasAttribute("data-focusout");if(ct='<div class="hb-colorpicker" tabindex="0" dir="ltr"><div class="hb-cp__drag-icon">{{transparent_bg}}</div><form id="hb-color-input"><div class="hb-color__top"><ul id="color-format" class="hb-color__option">{{theme_heading}}{{std_heading}}{{recent_heading}}<li data-id="hb-color__circle" class="hb-cp__icon">{{cpIcon}}</li></ul></div><div class="hb-color__current"><div id="color-preview_current" class="hb-color__preview"></div><div id="color-preview_new" class="hb-color__preview" style="background-color:#F94"></div><div class="color-posrel"><select id="hbcp-type" class="color-select" ><option data-id="hex-code" data-event="hbcolor:hex" class="hb-color__active" value="hex">HEX</option><option data-id="rgba-code" data-event="hbcolor:rgba" value="rgba">RGBA</option></select></div><div class="hb-color__preview-code hb-color__option-content" id="hb-color-input-cont"><div id="hex-code" class="hb-color__code hb-color__active"><input data-cp="HEX" type="text"></div><div id="rgba-code" class="hb-color__code"><div class="hb-color__ip-fields"><div><input type="number" min="0" step="1" max="255" data-def="0" maxlength="3" data-cp="R"></div><div><input type="number" min="0" step="1" max="255" data-def="0" maxlength="3" data-cp="G"></div><div><input type="number" min="0" step="1" max="255" data-def="0" maxlength="3" data-cp="B"></div><div><input type="number" min="0" step="0.01" max="1" data-def="0" data-cp="A"></div></div><div class="hb-color__ip-fields" style="display:none"><div>R</div><div>G</div><div>B</div><div>A</div></div></div></div></div><div class="hb-color__right-col"><div id="palette-cont"><div class="hb-color__palettes hb-color__option-content">{{theme_content}}{{std_content}}{{recent_content}}<div id="hb-color__circle" class="hb-color__palette"><div class="hb-color__left-col" id="color-picker_cont"><div class="hb-color__gradient"><div class="hb-color__circle-picker"></div></div><div class="hb-color__rect">{{color_rect}}<div class="hb-color__drag-rect"></div></div></div></div></div></div><div class="hb-color__apha">{{alpha}}<div class="hb-color__drag-alpha"></div></div><div class="hb-color__similar"></div></div><div class="hb-color__buttons" style="display:none"><button type="submit" class="hb-color_btn hb-color__ok">OK</button><button type="button" class="hb-color_btn hb-color__cancel">Cancel</button></div></form><div class="shadow-hide"></div>',null!=(ut=this.getAttribute("data-exclude"))&&""!=ut&&(dt=ut.trim().split(",")).forEach(function(t){var e="{{"+(t=t.trim())+"_heading}}",n="{{"+t+"_content}}";ct=(ct=ct.replace(e,"")).replace(n,"")}),null===gt&&!n||(N(),gt!=this)){if(n)return this.removeAttribute("data-focusout"),void this.blur();gt=this,function(t){bt={};var e=t.getAttribute("data-cp");t&&e?((e=e.split(",")).forEach(function(t){t=t.trim().split(":"),bt[t[0].trim()]=t[1].trim()}),bt.offset=parseInt(bt.offset,10),bt.el=t):bt=vt}(this);var o,l,d,c=t.target,w=document.createDocumentFragment(),_=document.createElement("div"),D="INPUT"===this.tagName;bt.refEl?ft[gt.id].contexts.forEach(function(t){l||(l=a(bt.refEl,t))}):l=gt,bt.contEl&&ft[gt.id].contexts.forEach(function(t){d||(d=a(bt.contEl,t))}),_.innerHTML=ct.replace("{{theme_heading}}",Tt).replace("{{theme_content}}",It).replace("{{std_heading}}",Nt).replace("{{std_content}}",Lt).replace("{{recent_heading}}",$t).replace("{{recent_content}}",St).replace("{{cpIcon}}",_t).replace("{{alpha}}",Dt).replace("{{color_rect}}",kt).replace("{{transparent_bg}}",At).replace(/{{httpStr}}/g,wt),w.appendChild(_),function(t){tt=a(".hb-color__rect",t),rt=a(".hb-color__drag-rect",t),Q=a(".hb-colorpicker",t),et=a(".hb-color__gradient",t),nt=a(".hb-color__preview",t),it=a(".hb-color__palettes",t),at=a(".hb-color__similar",t),ot=a("#hb-color__apha",t),st=a(".hb-color__drag-alpha",t),lt=a(".hb-color__option",t)}(w),function(){var t=it.childNodes[0],e=lt.childNodes[0];t&&$D.addClass(t,"hb-color__active");e&&$D.addClass(e,"hb-color__active")}(),b(),function(){if(s(".hb-color__option",Q).forEach(function(t){u(t,"click",y)}),u(a("#hbcp-type",Q),"change",C),a(".hb-cp__icon",Q),u(it,"click",E),u(at,"click",E),u(a("#hb-color__rectsvg",Q),"mousedown",Y),u(st,"mousedown",x),u(rt,"mousedown",U),u(a(".hb-color__circle-picker",Q),"mousedown",F),u(et,"mousedown",q),u(ot,"mousedown",j),u(Q,"input",H),u(a(".hb-color__cancel",Q),"click",B),u(a("#hb-color-input",Q),"submit",L),u(Q,"keydown",O),u(Q,"focusout",R),"true"===bt.fixed){var t=a(".hb-cp__drag-icon",Q);u(t,"mousedown",T),u(t,"dragstart",function(t){t&&t.preventDefault(),t&&t.stopPropagation()})}}(),m(),"true"===bt.fixed?document.body.appendChild(w):c.parentNode.insertBefore(w,c.nextSibling),D?(o=""===gt.value.trim()?"#F00":gt.value.trim(),a("#hex-code input",Q).value=o):(o=gt.getAttribute("data-hb-color"))||(o="#F00"),function(){var t=a("#hb-color__recent",it),e=a("#hb-color__std",it),n=a("#hb-color__theme",it);null!=ut&&""!=ut?(dt.includes("theme")||(Rt=n,xt.THEME.forEach(f)),dt.includes("std")||(Rt=e,xt.STD.forEach(f)),dt.includes("recent")||(Rt=t,xt.RECENT.forEach(f))):(Rt=t,xt.RECENT.forEach(f),Rt=e,xt.STD.forEach(f),Rt=n,xt.THEME.forEach(f))}(),nt&&(nt.style.backgroundColor=o),et&&(et.style.backgroundColor=o);var k;X(o)?(k=Vt.HEX2RGB(o),A("hex")):(k=i(o),a('[data-id="hex-code"]',Q).classList.remove("hb-color__active"),a("#hex-code",Q).classList.remove("hb-color__active"),a('[data-id="rgba-code"]',Q).classList.add("hb-color__active"),a("#rgba-code",Q).classList.add("hb-color__active"),g(k[3]),A("rgba"));var $=s("input",r("rgba-code"));$[0].value=k[0],$[1].value=k[1],$[2].value=k[2],$[3].value=k[3],p({color:k},!0),"true"===bt.fixed&&Q.classList.add("hb-color__fixed"),"custom"!==bt.position&&v(l,d),gt.classList.add(Ct),z();if(u(r(Et),"change",function(){A(this.value)}),e){var I=new CustomEvent("hbColorpicker",{detail:{id:gt.id,action:"open"}});gt.dispatchEvent(I)}h(gt,"colorpicker:open")}}function z(t){a('[data-cp="'+(t||("rgba"==mt.active?"R":"HEX"))+'"]',Q).focus()}function X(t){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(t)}function G(t){var e=Number(t);return!isNaN(e)&&e>=0&&e<=255}function K(t,e,n){t=t||this,e=e||null,n=n||[document];t.id&&(ft.hasOwnProperty(t.id)&&J(t),ft[t.id]={element:t,func:e,contexts:n},t.addEventListener("click",Z))}function J(t){t.removeEventListener("click",Z)}function Z(t){gt?this.id===gt.id?N.call(this,!0):(N.call(gt),W.call(this,t,!0)):W.call(this,t,!0)}var Q,tt,et,nt,it,rt,at,st,ot,lt,ut,dt,ct,ht=0,ft={},pt=[],gt=null,mt={hex:"",r:0,g:0,b:0,a:0},vt={position:"right",offset:"0",dial:"true",palette:"true"},bt={},yt="zoho.sites.cp.recent",Ct="hb-colorpicker-active",Et="hbcp-type",xt={STD:["#F1C40F","#F39C12","#E67E22","#D35400","#C0392B","#3498DB","#2980B9","#34495E","#2ECC71","#27AE60","#9B59B6","#013A51","#8E44AD","#ECF0F1","#FFFFFF","#000000"],THEME:["#EAEA04","#EA7704","#F4F44E","#B2EA79","#3004ea","#04EA04","#04EA77","#013A51"],RECENT:[]},wt="http",_t='<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "{{httpStr}}://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" width="28px" height="20px" viewBox="0 0 10605 10603" preserveAspectRatio="xMidYMid" fill-rule="evenodd" clip-path="url(#presentation_clip_path)" stroke-width="28.222" stroke-linejoin="round" xmlns="{{httpStr}}://www.w3.org/2000/svg" xmlns:xlink="{{httpStr}}://www.w3.org/1999/xlink" xml:space="preserve"> <defs class="ClipPathGroup">  <clipPath id="presentation_clip_path" clipPathUnits="userSpaceOnUse">   <rect x="0" y="0" width="10605" height="10603"/>  </clipPath> </defs> <defs class="TextShapeIndex">   </defs> <defs class="EmbeddedBulletChars">  <g id="bullet-char-template57356" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 580,1141 L 1163,571 580,0 -4,571 580,1141 Z"/>  </g>  <g id="bullet-char-template57354" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 8,1128 L 1137,1128 1137,0 8,0 8,1128 Z"/>  </g>  <g id="bullet-char-template10146" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 174,0 L 602,739 174,1481 1456,739 174,0 Z M 1358,739 L 309,1346 659,739 1358,739 Z"/>  </g>  <g id="bullet-char-template10132" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 2015,739 L 1276,0 717,0 1260,543 174,543 174,936 1260,936 717,1481 1274,1481 2015,739 Z"/>  </g>  <g id="bullet-char-template10007" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 0,-2 C -7,14 -16,27 -25,37 L 356,567 C 262,823 215,952 215,954 215,979 228,992 255,992 264,992 276,990 289,987 310,991 331,999 354,1012 L 381,999 492,748 772,1049 836,1024 860,1049 C 881,1039 901,1025 922,1006 886,937 835,863 770,784 769,783 710,716 594,584 L 774,223 C 774,196 753,168 711,139 L 727,119 C 717,90 699,76 672,76 641,76 570,178 457,381 L 164,-76 C 142,-110 111,-127 72,-127 30,-127 9,-110 8,-76 1,-67 -2,-52 -2,-32 -2,-23 -1,-13 0,-2 Z"/>  </g>  <g id="bullet-char-template10004" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 285,-33 C 182,-33 111,30 74,156 52,228 41,333 41,471 41,549 55,616 82,672 116,743 169,778 240,778 293,778 328,747 346,684 L 369,508 C 377,444 397,411 428,410 L 1163,1116 C 1174,1127 1196,1133 1229,1133 1271,1133 1292,1118 1292,1087 L 1292,965 C 1292,929 1282,901 1262,881 L 442,47 C 390,-6 338,-33 285,-33 Z"/>  </g>  <g id="bullet-char-template9679" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 813,0 C 632,0 489,54 383,161 276,268 223,411 223,592 223,773 276,916 383,1023 489,1130 632,1184 813,1184 992,1184 1136,1130 1245,1023 1353,916 1407,772 1407,592 1407,412 1353,268 1245,161 1136,54 992,0 813,0 Z"/>  </g>  <g id="bullet-char-template8226" transform="scale(0.00048828125,-0.00048828125)">   <path d="M 346,457 C 273,457 209,483 155,535 101,586 74,649 74,723 74,796 101,859 155,911 209,963 273,989 346,989 419,989 480,963 531,910 582,859 608,796 608,723 608,648 583,586 532,535 482,483 420,457 346,457 Z"/>  </g>  <g id="bullet-char-template8211" transform="scale(0.00048828125,-0.00048828125)">   <path d="M -4,459 L 1135,459 1135,606 -4,606 -4,459 Z"/>  </g> </defs> <defs class="TextEmbeddedBitmaps"/> <g>  <g id="id2" class="Master_Slide">   <g id="bg-id2" class="Background"/>   <g id="bo-id2" class="BackgroundObjects"/>  </g> </g> <g class="SlideGroup">  <g>   <g id="id1" class="Slide" clip-path="url(#presentation_clip_path)">    <g class="Page">     <g class="Group">      <g class="com.sun.star.drawing.EllipseShape">       <g id="id3">        <path fill="rgb(255,255,255)" stroke="none" d="M 9046,9044 C 8357,9733 7615,10162 6674,10414 5733,10666 4875,10666 3934,10414 2993,10162 2251,9733 1562,9044 873,8355 444,7613 192,6672 -60,5731 -60,4873 192,3932 444,2991 873,2249 1562,1560 2251,871 2993,442 3934,190 4875,-62 5733,-62 6674,190 7615,442 8357,871 9046,1560 9735,2249 10164,2991 10416,3932 10668,4873 10668,5731 10416,6672 10164,7613 9735,8355 9046,9044 L 9046,9044 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id4">        <path fill="rgb(255,255,0)" stroke="none" d="M 5304,5302 L 3934,190 C 4875,-62 5733,-62 6674,190 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id5">        <path fill="rgb(0,0,255)" stroke="none" d="M 5304,5302 L 6674,10414 C 5733,10666 4875,10666 3934,10414 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id6">        <path fill="rgb(255,128,0)" stroke="none" d="M 5304,5302 L 6674,190 C 7615,442 8357,871 9046,1560 L 9046,1560 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id7">        <path fill="rgb(0,127,255)" stroke="none" d="M 5304,5302 L 3934,10414 C 2993,10162 2251,9733 1562,9044 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id8">        <path fill="rgb(255,0,0)" stroke="none" d="M 5304,5302 L 9046,1560 C 9735,2249 10164,2991 10416,3932 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id9">        <path fill="rgb(0,255,255)" stroke="none" d="M 5304,5302 L 1562,9044 1562,9044 C 873,8355 444,7613 192,6672 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id10">        <path fill="rgb(255,0,127)" stroke="none" d="M 5304,5302 L 10416,3932 C 10668,4873 10668,5731 10416,6672 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id11">        <path fill="rgb(0,255,128)" stroke="none" d="M 5304,5302 L 192,6672 C -60,5731 -60,4873 192,3932 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id12">        <path fill="rgb(255,0,255)" stroke="none" d="M 5304,5302 L 10416,6672 C 10164,7613 9735,8355 9046,9044 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id13">        <path fill="rgb(0,255,0)" stroke="none" d="M 5304,5302 L 192,3932 C 444,2991 873,2249 1562,1560 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id14">        <path fill="rgb(128,0,255)" stroke="none" d="M 5304,5302 L 9046,9044 9046,9044 C 8357,9733 7615,10162 6674,10414 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id15">        <path fill="rgb(127,255,0)" stroke="none" d="M 5304,5302 L 1562,1560 C 2251,871 2993,442 3934,190 L 5304,5302 Z"/>       </g>      </g>      <g class="com.sun.star.drawing.EllipseShape">       <g id="id16">        <path fill="rgb(255,255,255)" stroke="none" d="M 6553,6550 C 6323,6779 6076,6922 5762,7006 5448,7090 5162,7090 4849,7006 4535,6922 4287,6779 4058,6550 3828,6320 3685,6072 3601,5759 3517,5445 3517,5159 3601,4845 3685,4532 3828,4284 4058,4054 4287,3825 4535,3682 4849,3598 5162,3514 5448,3514 5762,3598 6076,3682 6323,3825 6553,4054 6783,4284 6926,4532 7010,4845 7094,5159 7094,5445 7010,5759 6926,6072 6783,6320 6553,6550 L 6553,6550 Z"/>       </g>      </g>     </g>    </g>   </g>  </g> </g></svg>',Dt='<svg style="cursor:pointer" id="hb-color__apha" xmlns="{{httpStr}}://www.w3.org/2000/svg" xmlns:xlink="{{httpStr}}://www.w3.org/1999/xlink" width="222" height="10">    <defs>        <linearGradient id="opacityGradient" xmlns:xlink="{{httpStr}}://www.w3.org/1999/xlink">            <stop class="hb-cp-opacity-stop" offset="0%" stop-color="rgb(255,0,0)" stop-opacity="0"></stop>            <stop class="hb-cp-opacity-stop" offset="100%" stop-color="rgb(255,0,0)" stop-opacity="1"></stop>        </linearGradient>        <g id="cp-trans-square" width="15" height="15">            <rect x="0" y="5" width="5" height="5" fill="#ffffff"></rect>            <rect x="5" y="5" width="5" height="5" fill="#aaaaaa"></rect>            <rect x="5" y="0" width="5" height="5" fill="#ffffff"></rect>            <rect x="0" y="0" width="5" height="5" fill="#aaaaaa"></rect>            <rect x="15" y="10" width="5" height="5" fill="#ffffff"></rect>            <rect x="10" y="10" width="5" height="5" fill="#aaaaaa"></rect>        </g>    </defs>    <g id="cp-trans-bg">        <use xmlns:xlink="{{httpStr}}://www.w3.org/1999/xlink" xlink:href="#cp-trans-square" x="190" y="0"></use>    </g>    <rect id="zp-cp-alpha-rect" x="0" y="0" height="100%" width="100%" fill="url(#opacityGradient)"></rect></svg>',At='<svg xmlns="{{httpStr}}://www.w3.org/2000/svg" xmlns:xlink="{{httpStr}}://www.w3.org/1999/xlink" width="20" height="10">                        <rect x="0" y="0" width="2" height="2" fill="#AAA"></rect>                        <rect x="5" y="0" width="2" height="2" fill="#AAA"></rect>                        <rect x="10" y="0" width="2" height="2" fill="#AAA"></rect>                        <rect x="15" y="0" width="2" height="2" fill="#AAA"></rect>                        <rect x="0" y="5" width="2" height="2" fill="#AAA"></rect>                        <rect x="5" y="5" width="2" height="2" fill="#AAA"></rect>                        <rect x="10" y="5" width="2" height="2" fill="#AAA"></rect>                        <rect x="15" y="5" width="2" height="2" fill="#AAA"></rect>                    </svg>',kt='<svg style="border-radius:0" id="hb-color__rectsvg" xmlns="{{httpStr}}://www.w3.org/2000/svg" xmlns:xlink="{{httpStr}}://www.w3.org/1999/xlink"/></svg>',Tt='<li data-id="hb-color__theme">Theme</li>',Nt='<li data-id="hb-color__std">Standard</li>',$t='<li data-id="hb-color__recent">Recent</li>',It='<div id="hb-color__theme" class="hb-color__palette"></div>',Lt='<div id="hb-color__std" class="hb-color__palette"></div>',St='<div id="hb-color__recent" class="hb-color__palette"></div>';m();var Mt={};Mt.scrollX=function(e){return(e=e||t).pageXOffset||e.document.documentElement.scrollLeft},Mt.scrollY=function(e){return(e=e||t).pageYOffset||e.document.documentElement.scrollTop},Mt.getOffset=function(t,e){if(!t)throw new Error("Element to _find offset doesnot exists.");e=e||window;var n=t.getBoundingClientRect();return{top:"true"===bt.fixed?n.top:n.top+this.scrollY(e),left:"true"===bt.fixed?n.left:n.left+this.scrollX(e),height:n.height,width:n.width}},Mt.eventOffset=function(t,e){t=t||window.event,e||(e=t.target||t.srcElement);var n=e.currentStyle||window.getComputedStyle(e,null),i=parseInt(n.borderLeftWidth,10),r=parseInt(n.borderTopWidth,10),a=e.getBoundingClientRect();return{x:"true"===bt.fixed?t.clientX:t.clientX-i-a.left,y:"true"===bt.fixed?t.clientY:t.clientY-r-a.top}};var Ot,Rt,Bt,Ht,jt,Ft,Pt,qt,Ut=function(t,e,n){var i;return function(){var r=this,a=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(r,a)},e),s&&t.apply(r,a)}}(function(t){var e=ft[gt.id];"INPUT"===gt.tagName?gt.value=t:(gt.setAttribute("data-hb-color",t),e&&e.func&&e.func(mt.hex)),h(gt,"change")},20),Vt=function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return String("0123456789ABCDEF".substr(t>>4&15,1))+"0123456789ABCDEF".substr(15&t,1)}var r=/([\d*\.?\d*]+)/g;return{byte2Hex:e,HEX2RGB:function(t){var e;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3==(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),e="0x"+e.join(""),[e>>16&255,e>>8&255,255&e,1];throw new Error("Bad Hex")},RGB2HEX:function(n){t(n)||(n=n.match(r));var i="";return n[3]>-1&&1!=n[3]&&(i=e(Math.round(255*n[3]))),"#"+e(n[0])+e(n[1])+e(n[2])+i},HSV2RGB:function(e){t(e)||(e=e.match(r));var n,i,a,s,o,l,u,d,c=e[0],h=e[1],f=e[2],p=parseFloat(e[3]||1);if(h/=100,f/=100,0==h)return n=i=a=f,[Math.round(255*n),Math.round(255*i),Math.round(255*a),p];switch(c/=60,s=Math.floor(c),o=c-s,l=f*(1-h),u=f*(1-h*o),d=f*(1-h*(1-o)),s){case 0:n=f,i=d,a=l;break;case 1:n=u,i=f,a=l;break;case 2:n=l,i=f,a=d;break;case 3:n=l,i=u,a=f;break;case 4:n=d,i=l,a=f;break;default:n=f,i=l,a=u}return[Math.round(255*n),Math.round(255*i),Math.round(255*a),p]},HSL2RGB:function(e){t(e)||(e=e.match(r));var n,i,a,s,o,l,u,d,c,h=Math.max(Math.min(parseInt(e[0],10),360),0)/360,f=Math.max(Math.min(parseInt(e[1],10),100),0)/100,p=Math.max(Math.min(parseInt(e[2],10),100),0)/100,g=parseFloat(e[3]||1);if(0==(n=p<=.5?p*(1+f):p+f-p*f))return[0,0,0];switch(i=2*p-n,a=(n-i)/n,h*=6,s=Math.floor(h),o=h-s,l=n*a*o,s){case 1:u=n-l,d=n,c=i;break;case 2:u=i,d=n,c=i+l;break;case 3:u=i,d=n-l,c=n;break;case 4:u=i+l,d=i,c=n;break;case 5:u=n,d=i,c=n-l;break;default:u=n,d=i+l,c=i}return[Math.round(255*u),Math.round(255*d),Math.round(255*c),g]},RGB2HSL:function(e){t(e)||(e=e.match(r));var n,i,a,s=Math.max(Math.min(parseInt(e[0],10)/255,1),0),o=Math.max(Math.min(parseInt(e[1],10)/255,1),0),l=Math.max(Math.min(parseInt(e[2],10)/255,1),0),u=parseFloat(e[3]||1),d=Math.max(s,o,l),c=Math.min(s,o,l),h=(d+c)/2;return d!==c?(n=d-c,a=h>.5?n/(2-d-c):n/(d+c),i=d===s?(o-l)/n+(o<l?6:0):d===o?(l-s)/n+2:(s-o)/n+4,i/=6):i=a=0,[Math.round(360*i),Math.round(100*a),Math.round(100*h),u]},RGB2STR:n,STR2RGB:i}}();return{init:function(t){s(".hb-colopicker",t=t||document).forEach(function(t){K(t)})},bind:K,setStandardColors:function(t){xt.STD=t},setThemeColors:function(t){xt.THEME=t},showColorPicker:W,hideColorPicker:N,convert:Vt,unbind:J,setCtx:function(t){contexts=t}}}),function(t,e){"function"==typeof define&&define.amd?define("hbDateFormatter",[],e):"object"==typeof module?module.exports=e():t.formatDate=e()}(this,function(){"use strict";function t(t){return(t<0||t>9?"":"0")+t}function e(t){for(var e="",n=0,i=(t+="").length;n<i;n++)e+=r.numbersArr[Number(t[n])];return e}function n(t,e){for(var n=t,i=0,r=(t=t.split("")).length;i<r;i++)":"===t[i]||" "===t[i]?(t.splice(i,1),i--):-1!==e.indexOf(t[i])&&(t.splice(i,1),i--);return t=t.join(""),{index:n.indexOf(t),ampm:t}}var i={},r={},a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"];i.isInteger=function(t){return!!t.match(/^(\d+)$/)},i.getInt=function(t,e,n,r){for(var a=r;a>=n;a--){var s=t.substring(e,e+a);if(s.length<n)return null;if(i.isInteger(s))return s}return null},i.format=function(n,i){"object"!=typeof n&&(n=new Date(n)),i+="";var a="",s=0,o="",l="",u=n.getYear()+"",d=n.getMonth()+1,c=n.getDate(),h=n.getDay(),f=n.getHours(),p=n.getMinutes(),g=n.getSeconds(),m=!1;u.length<4&&(u=""+(u-0+1900));var v={y:e(""+u),yyyy:e(u),yy:e(u.substring(2,4)),M:e(d),MM:e(t(d)),MMM:r.monthsAll[d-1],NNN:r.monthsAll[d+11],d:e(c),dd:e(t(c)),E:r.weekdaysLong[h+7],EE:r.weekdaysLong[h],H:e(f),HH:e(t(f))};for(r.yearChar&&("after"===r.yearChar.pos?(v.y+=r.yearChar.char,v.yyyy+=r.yearChar.char):(v.y=r.yearChar.char+v.y,v.yyyy=r.yearChar.char+v.yyyy)),r.dayChar&&("after"===r.dayChar.pos?(v.d+=r.dayChar.char,v.dd+=r.dayChar.char):(v.d=r.dayChar.char+v.d,v.dd=r.dayChar.char+v.dd)),r.monthChar&&("after"===r.monthChar.pos?(v.M+=r.monthChar.char,v.MM+=r.monthChar.char):(v.M=r.monthChar.char+v.d,v.MM=r.monthChar.char+v.dd)),v.h=0==f?12:f>12?f-12:f,v.hh=e(t(v.h)),v.h=e(v.h),v.K=f>11?f-12:f,v.k=f+1,v.KK=e(t(v.K)),v.kk=e(t(v.k)),v.a=f>11?r.pmChars:r.amChars,v.m=e(p),v.mm=e(t(p)),v.s=e(g),v.ss=e(t(g));s<i.length;){for(o=i.charAt(s),l="";i.charAt(s)==o&&s<i.length;)l+=i.charAt(s++);"HH"===l&&(m=!0),"a"===l&&m||(null!=v[l]?a+=v[l]:a+=l)}return a.trim()},i.parse=function(t,e){t+="",e+="";for(var n,r,s=0,o=0,l="",u="",d=new Date,c=d.getYear(),h=d.getMonth()+1,f=1,p=0,g=0,m=0,v="";o<e.length;){for(l=e.charAt(o),u="";e.charAt(o)===l&&o<e.length;)u+=e.charAt(o++);if("yyyy"===u||"yy"===u||"y"===u){if("yyyy"===u&&(n=4,r=4),"yy"===u&&(n=2,r=2),"y"===u&&(n=2,r=4),null===(c=i.getInt(t,s,n,r)))return NaN;s+=c.length,2===c.length&&(c=c>70?c-0+1900:c-0+2e3)}else if("MMM"===u||"NNN"===u){h=-1;for(var b,y,C,E=0;E<24;E++){for(b=a[E],y=0,C="";/^[a-zA-Z]+$/.test(t[s+y]);)C+=t[s+y],y++;if(C.toLowerCase()===b.toLowerCase()&&("MMM"===u||"NNN"===u)){(h=E+1)>12&&(h-=12),s+=b.length;break}}if(h<1||h>12)return NaN}else if("EE"===u||"E"===u)for(var x=0;x<daysAll.length;x++){var w=daysAll[x];if(t.substring(s,s+w.length).toLowerCase()===w.toLowerCase()){s+=w.length;break}}else if("MM"===u||"M"===u){if(null===(h=i.getInt(t,s,u.length,2))||h<1||h>12)return NaN;s+=h.length}else if("dd"===u||"d"===u){if(null===(f=i.getInt(t,s,u.length,2))||f<1||f>31)return NaN;s+=f.length}else if("hh"===u||"h"===u){if(null===(p=i.getInt(t,s,u.length,2))||p<0||p>12)return NaN;s+=p.length}else if("HH"===u||"H"===u){if(null===(p=i.getInt(t,s,u.length,2))||p<0||p>23)return NaN;s+=p.length}else if("KK"===u||"K"===u){if(null===(p=i.getInt(t,s,u.length,2))||p<0||p>11)return NaN;s+=p.length}else if("kk"===u||"k"===u){if(null===(p=i.getInt(t,s,u.length,2))||p<1||p>24)return NaN;s+=p.length,p--}else if("mm"===u||"m"===u){if(null===(g=i.getInt(t,s,u.length,2))||g<0||g>59)return NaN;s+=g.length}else if("ss"===u||"s"===u){if(null===(m=i.getInt(t,s,u.length,2))||m<0||m>59)return NaN;s+=m.length}else if("a"===u){if("am"===t.substring(s,s+2).toLowerCase())v="AM";else{if("pm"!==t.substring(s,s+2).toLowerCase())return NaN;v="PM"}s+=2}else{if(t.substring(s,s+u.length)!==u)return NaN;s+=u.length}}if(s!==t.length)return NaN;if(2===h)if(c%4==0&&c%100!=0||c%400==0){if(f>29)return NaN}else if(f>28)return NaN;if((4===h||6===h||9===h||11===h)&&f>30)return NaN;p<12&&"PM"===v?p=p-0+12:p>11&&"AM"===v&&(p-=12);return new Date(c,h-1,f,p,g,m).getTime()};var s=function(t){var e,n=!1;void 0===t.value?(e=this.value,n=!0):e=t.value,"object"!=typeof e&&(e=i.parse(e,t.from));var r=i.format(e,t.to);return n?(this.value=r,this):r};return s.parse=i.parse,s.format=i.format,s.setLocale=function(t){t||(t="en"),r={},s.lang=t;var e,i,a=new Array(7);for(e=18;e<25;e++)a[(i=new Date(Date.UTC(2012,2,e))).getDay()]=i;var o,l=new Array(12);for(e=0;e<12;e++)l[(o=new Date(Date.UTC(2012,e,1))).getMonth()]=o;for(r.weekdaysLong=a.map(function(e){return new Intl.DateTimeFormat(t,{weekday:"long"}).format(e)}),r.weekdaysShort=a.map(function(e){return new Intl.DateTimeFormat(t,{weekday:"short"}).format(e)}),r.weekdaysNarrow=a.map(function(e){return new Intl.DateTimeFormat(t,{weekday:"narrow"}).format(e)}),r.monthsLong=l.map(function(e){return new Intl.DateTimeFormat(t,{month:"long"}).format(e)}),r.monthsShort=l.map(function(e){return new Intl.DateTimeFormat(t,{month:"short"}).format(e)}),r.monthsAll=r.monthsShort.concat(r.monthsLong),r.numbersArr=[],e=0;e<60;e++)r.numbersArr.push(new Intl.DateTimeFormat(t,{second:"numeric"}).format(new Date(Date.UTC(2012,0,12,0,0,e))));var u=new Intl.DateTimeFormat(s.lang,{year:"numeric"}).format(new Date("05 June 1988"));u=u.split("").forEach(function(t){var e=r.numbersArr.indexOf(t);-1===e&&(r.yearChar={char:t,pos:0===e?"before":"after"})});var d=new Intl.DateTimeFormat(s.lang,{month:"numeric"}).format(new Date("05 June 1988"));d=d.split("").forEach(function(t){var e=r.numbersArr.indexOf(t);-1===e&&(r.monthChar={char:t,pos:0===e?"before":"after"})});var c=new Intl.DateTimeFormat(s.lang,{day:"numeric"}).format(new Date("05 June 1988"));c=c.split("").forEach(function(t){var e=r.numbersArr.indexOf(t);-1===e&&(r.dayChar={char:t,pos:0===e?"before":"after"})});var h=new Intl.DateTimeFormat(t,{hour:"numeric",minute:"numeric",hour12:!0}).format(new Date("05 June 1988 06:00")),f=new Intl.DateTimeFormat(t,{hour:"numeric",minute:"numeric",hour12:!0}).format(new Date("05 June 1988 18:00")),p=n(h,r.numbersArr),g=n(f,r.numbersArr);r.amChars=p.ampm,r.pmChars=g.ampm,r.ampmPos=0===p.index?"before":"after",s.locale=r},s}),function(t,e){"function"==typeof define&&define.amd?define("hbDatepicker",["hbDateFormatter"],e):t.hbDatepicker=e(formatDate)}(this,function(t){"use strict";function e(t){return Number(t)+1+""}function n(t){return Number(t)-1+""}function i(t,e){var n=t[0];return e=e||B,"#"===n&&0===t.lastIndexOf("#")?B.getElementById(t.substr(1)):"."===n&&0===t.lastIndexOf(".")?e.getElementsByClassName(t.substr(1)):W.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)}function r(t){return B.querySelector(t)}function a(t,e){return-1!==c(t.className.trim()).indexOf(e)}function s(t,e){var n=c(t.className.trim());-1===n.indexOf(e)&&n.push(e),t.className=n.join(" ")}function o(t,e){var n=c(t.className.trim()),i=n.indexOf(e);-1!==i&&n.splice(i,1),t.className=n.join(" ")}function l(t){return t.hasAttribute("data-start")&&t.hasAttribute("data-end")?2:t.hasAttribute("data-start")||t.hasAttribute("data-end")}function u(t,e){if(!t)throw new Error("Element to find offset doesnot exists.");e=e||R;var n=t.getBoundingClientRect();return{top:n.top+function(t){return(t=t||R).pageYOffset||t.document.documentElement.scrollTop}(e),left:n.left+function(t){return(t=t||R).pageXOffset||t.document.documentElement.scrollLeft}(e)}}function d(t){var e=t.target,n=e.id,i=e.className;a(e,"day")?n="day":a(e,"yr-list")?n="yr-select":a(e,"month-list")&&(n="month-select"),n&&function(t,e){switch(t){case"dis-yr-back":Q.prevYear();break;case"dis-yr-next":Q.nextYear();break;case"dis-mon-back":Q.prevMon();break;case"dis-mon-next":Q.nextMon();break;case"cur-dis-year":Q.showyears();break;case"cur-dis-month":Q.showMonths();break;case"day":Q.selectDay(e);break;case"hb_clock":case"hb_calendar":Q.togglePick(e);break;case"hb_today":Q.selectDate(new Date);case"hb-hr-down":Q.changeHrVal("down");break;case"hb-min-down":Q.changeMinVal("down");break;case"hb-hr-up":Q.changeHrVal("up");break;case"hb-min-up":Q.changeMinVal("up");break;case"hb-time-format":Q.changeFmVal();break;case"hb-dp-cancel":case"hb-dp-mask":Q.close();break;case"hb-dp-ok":Q.ok();break;case"yr-select":Q.selectYr(e);break;case"month-select":Q.selectMonth(e)}}(n||i,e)}function c(t){return t.replace(/ {2,}/g," ").split(" ")}function h(t){return t.replace(" ","").split(",")}function f(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function p(t){var e=t.target.getAttribute("data-hb-period");if("custom"!==e){var n,r,a=(e=e.split(","))[0],s=e[1],o="-"===a[0],l=Q.getNow();switch(l=Date.parse(l.getMonth()+1+" "+l.getDate()+" "+l.getFullYear()),l=new Date(l),n=new Date(l),s){case"D":n.setDate(n.getDate()+Number(a)),o?l.setDate(l.getDate()-1):n.setDate(n.getDate()-1);break;case"W":"0"===a?(n.setDate(l.getDate()-l.getDay()),l.setDate(l.getDate()+(7-l.getDay())-1)):o?(l.setDate(l.getDate()-l.getDay()-1),n.setDate(l.getDate()+7*Number(a)+1)):(l.setDate(l.getDate()+(7-l.getDay())),n.setDate(l.getDate()+7*Number(a)-1));break;case"M":"0"===a?(l.setDate(l.getDate()-l.getDate()+1),(n=new Date(l)).setDate(l.getDate()+f(l)-l.getDate())):o?(l.setDate(l.getDate()-l.getDate()),(n=new Date(l)).setMonth(n.getMonth()+(Number(a)+2)),n.setDate(n.getDate()-n.getDate()+1),n.setMonth(n.getMonth()-1)):(l.setDate(l.getDate()+f(l)-l.getDate()+1),(n=new Date(l)).setMonth(n.getMonth()-1+Number(a)),n.setDate(l.getDate()+f(n)-1))}l.getTime()<n.getTime()?(l,r=n):(r=l,n),r.setHours(23),r.setMinutes(59);J.currentProxyInput,i('[data-group="'+y(J.currentInput,"data-group")+'"]')}else J.show({periods:!1,ctx:J.currentProxyInput})}function g(t){var e=function(t){return"which"in t?t.which:t.keyCode}(t);V.indexOf(e)>-1&&x.call(this,t)}function m(t,e,n){y(t,"min",e),y(t,"max",n)}function v(t){y(this,"data-value",this.value)}function b(t){return!0===t||"true"===t}function y(t,e,n){if(null===n||void 0===n)return t.getAttribute(e);t.setAttribute(e,n)}function C(t){var e,n,i="which"in t?t.which:t.keyCode,r=t.target.id;if(-1==Y.indexOf(i)&&t.preventDefault(),y(this,"data-value"),n=this.value,0===Number(n))return this.setAttribute("data-value",Number(n)),void(n.length>2?this.value=n.substring(0,2):this.value=n);e=function(t,e,n,i){var r=Number(t);return e=Number(e),n=Number(n),i=Number(i),""===t.trim()?i:r<=e?e:r>=n?n:r||i}(n,this.getAttribute("min"),this.getAttribute("max"),this.getAttribute("data-def")),r=this.id,(e+"").length<=2&&("hb-min-val"==r&&(e=D(e,X.minutes_step)),e<10&&(e="0"+e),y(this,"data-value",Number(e)),this.value=e)}function E(t){var e=t.keyCode,n=t.target.id;8==e||46==e||37==e||39==e||e>47&&e<58||e>95&&e<106||t.preventDefault(),38===e?"hb-hr-val"===n?Q.changeHrVal("up"):Q.changeMinVal("up"):40===e&&("hb-hr-val"===n?Q.changeHrVal("down"):Q.changeMinVal("down"))}function x(t){t.preventDefault(),J.show({periods:!1,ctx:this})}function w(t){27===t.keyCode&&(t.stopPropagation(),t.preventDefault(),Q.close())}function _(t,e,n,i,r){if("prev"==r){var a=0==n.month?11:n.month-1,s=0==n.month?n.year-1:n.year;t=Date.parse(a+1+" "+i+" "+s)}else if("next"==r){var o=11==n.month?0:n.month+1,l=11==n.month?n.year+1:n.year;t=Date.parse(o+1+" "+i+" "+l)}return-1!==e.disabled_days.indexOf(new Date(t).getDay())||t-Date.parse(e.min_date)<0||Date.parse(e.max_date)-t<0}function D(t,e){return e>1&&(t=Math.floor(t/e)*e),t}function A(t){for(var e="",n=0,i=(t+="").length;n<i;n++)e+=L[parseInt(t[n])];return e}var k,T,N,$,I,L,S,M,O,R=window,B=document,H=["S","M","T","W","T","F","S"],j=[31,28,31,30,31,30,31,31,30,31,30,31],F="Ok",P="Cancel",q="START",U="END",V=[8,46],Y=[8,9,46,27,37,38,39,40],W=/^[a-z-_]$/i,z={mode:"landscape",format:"dd-MM-yyyy HH:mm",start_date:"",min_date:"01 01 1800",max_date:"12 31 2100",start_day:0,allowed_days:"",disabled_days:"",disable_old_dates:!1,disable_new_dates:!1,time_picker:!1,time_format:"12h",start_time:"",minutes_step:1,show_today_button:!0,mask:!0,data_start:!1,data_end:!1,data_group:!1,hb_theme:"",locale:"en"},X={},G=Date.parse,K={},J={};J.utils=K,K.getDaysCount=function(t,e){return void 0!==t?1===t&&(e%4==0&&e%100!=0||e%400==0)?29:j[t]:1===curMonth&&(curYear%4==0&&curYear%100!=0||curYear%400==0)?29:j[curMonth]},J.parse=function(t,e){if(e)return this.utils.getDateFromFormat(t,e);var n,i=G(t),r=0;return isNaN(i)&&(n=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(t))&&("Z"!==n[8]&&(r=60*+n[10]+ +n[11],"+"===n[9]&&(r=0-r)),n[7]=n[7]||"000",i=Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5]+r,+n[6],+n[7].substr(0,3))),i},J.datediff=function(t,e){if(!t)throw new Error("From Date should be specified");var n=new Date(1970,0,1,0).getTime(),i=new Date,r=(e=e&&e instanceof Date?e:i)-t,a=new Date(n+r),s=a.getFullYear()-1970,o=a.getMonth(),l=a.getDate()-1,u=a.getHours(),d=a.getMinutes(),c=a.getSeconds(),h={years:0,months:0,days:0,hours:0,minutes:0,seconds:0};return s<0?h:(h.years=s>0?s:0,h.months=o>0?o:0,h.days=l>0?l:0,h.hours=u>0?u:0,h.minutes=d>0?d:0,h.seconds=c>0?c:0,h)};J.init=function(e){e=e||{};var n,r,a=i("#hbUI-datepicker");e.locale||L||J.setLocale("en"),a&&(n=a.parentNode).parentNode.removeChild(n),B.body.insertAdjacentHTML("beforeend",tt),a=i("#hbUI-datepicker");for(var l in e)z[l]=e[l];e.okText&&(F=e.okText),e.cancelText&&(P=e.cancelText),e.startText&&(q=e.startText),e.endText&&(U=e.endText),e.ctx||(e.ctx=document.body);var u;if(a)for(var d=i(".hbui-datepicker",e.ctx),c=d.length-1;c>=0;c--)d[c].hasAttribute("initted")&&"true"==d[c].getAttribute("initted")||(o(r=d[c].cloneNode(),"hbui-datepicker"),s(r,"datepicker__proxy-el"),y(r,"data-value",d[c].value),d[c].value&&(u=t.format(new Date(d[c].value),y(r,"format")),r.value=u),d[c].parentNode.insertBefore(r,d[c]),d[c].className+=" hide",d[c].setAttribute("initted","true"),r.removeEventListener("click",J.show),r.addEventListener("click",J.show),r.removeEventListener("keypress",x),r.addEventListener("keypress",x),r.setAttribute("onpaste","return false"),r.setAttribute("onCut","return false"),r.removeEventListener("keydown",g),r.addEventListener("keydown",g));var h=i(".hb-time-c");h&&2===h.length&&("before"===O?(h[1].parentNode.removeChild(h[1]),i("#time-picker-cont").className="fm-before"):(i("#time-picker-cont").className="fm-after",h[0].parentNode.removeChild(h[0])))},J.show=function(t){var e,n=i("#hbUI-datepicker"),r=i("#hb-dp-mask"),a=null,o=null,l=null,c=null,f=this;if(0!==Object.keys(X).length&&Q.reset(),t&&t.hasOwnProperty("periods")&&(f=t.ctx),t&&!t.hasOwnProperty("periods")&&f.hasAttribute("data-period")&&(s(n,"hb-dp-period"),(e=f.getAttribute("data-period"))&&(e=e.split(",").map(function(t){var e=(t=t.trim().split(":"))[0].trim(),n=t[1].trim();return'<div data-hb-period="'+e.match(/(-?[\d]+)/)[1]+","+e.match(/([A-Z]+)/)[1]+'">'+n+"</div>"}),i("#hb-dp__period-cont").innerHTML=e.join("")+'<div data-hb-period="custom">Custom Range</div>',i("#hb-dp__period-cont").addEventListener("click",p))),f.hasAttribute("minutes-step")){"SELECT"===(_=i("#hb-min-val")).tagName&&_.removeEventListener("input",v),(c=document.createElement("select")).id="hb-min-val",m(c,0,59),y(c,"data-def",0);for(var g,x=0;x<60;x+=Number(f.getAttribute("minutes-step")))x<10&&(x="0"+x),(g=document.createElement("option")).text=A(x),g.value=x,c.appendChild(g),x=Number(x);_.removeEventListener("input",C),_.parentNode.replaceChild(c,_),c.addEventListener("input",v)}else{var _;if("INPUT"!==(_=i("#hb-min-val")).tagName){var D=document.createElement("input");D.id="hb-min-val",_.parentNode.replaceChild(D,_),_.setAttribute("data-def","00"),m(_,0,59)}}J.currentInput=f.nextElementSibling,J.currentProxyInput=f,function(t){var e="",n=null,i=null;if(Object.keys(z).forEach(function(i,r){e=i.replace(/_/g,"-"),(n=t.getAttribute(e))&&(X[i]=n.trim())}),function(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}(X,z),X.allowed_days){for(var r=h(X.allowed_days),a=[],s=0;s<=6;s++)r.includes(s.toString())||a.push(s);a.length>0&&(X.disabled_days=a.toString())}X.disabled_days=h(X.disabled_days),X.disabled_days.forEach(function(t,e){X.disabled_days[e]=parseInt(t,10)}),X.minutes_step=parseInt(X.minutes_step,10),X.time_picker=b(X.time_picker),X.show_today_button=b(X.show_today_button),X.mask=b(X.mask),i=Q.getNow(),b(X.disable_old_dates)&&(X.min_date=i.getMonth()+1+" "+i.getDate()+" "+i.getFullYear()),b(X.disable_new_dates)&&(X.max_date=i.getMonth()+1+" "+i.getDate()+" "+i.getFullYear()),J.setLocale(X.locale)}(f),X.time_picker?(i("#time-picker-cont").style.display="",i("#cur-sel-month").removeAttribute("style"),i("#cur-sel-year").removeAttribute("style")):i("#time-picker-cont").style.display="none",null==(l=J.currentInput.getAttribute("data-value"))&&(l=J.currentInput.value),l=l?new Date(l):Q.getNow(),J.curDateVal=l,X.mask?(r.style.display="block",r.addEventListener("click",d),s(B.body,"no-scroll")):(B.body.appendChild(n),n.addEventListener("click",d),a=u(J.currentInput.previousElementSibling),n.style.cssText="position:absolute; inset-block-start:"+a.top+"px; inset-inline-start:"+a.left+"px; margin-block-start:"+J.currentInput.clientHeight+"px;",s(n,"border")),X.time_picker&&s(n,"hb-time"),"portrait"===X.mode&&s(n,"portrait"),function(){var t="";"0"==X.start_day?H.forEach(function(e){t+='<span class="day-txt">'+e+"</span>"}):"1"===X.start_day&&(H.forEach(function(e,n){0!==n&&(t+='<span class="day-txt">'+e+"</span>")}),t+='<span class="day-txt">'+H[0]+"</span>"),i("#hb-day-short").innerHTML=t}();var k=i("#hb-hr-val");"24h"===X.time_format?(s(i("#time-picker-cont"),"hr24"),m(k,0,23)):m(k,1,12),Q.renderDates(),""!==X.start_date?(o=X.start_date.match(/^([a-zA-Z]+) ([\d]+), ([\d]{4}|[\d]{2})$/),Q.setCurDate(o[2],o[1],o[3],"cur"),i("#cur-dis-year").innerHTML=o[3],y(i("#cur-dis-year"),"data-val",o[3]),i("#cur-dis-month").innerHTML=o[1],y(i("#cur-dis-month"),"data-val",o[1]),o=new Date(o[1]+" "+o[2]+" "+o[3]),i("#cur-sel-day-text").innerHTML=$[o.getDay()],Q.renderDates()):Q.selectDate(l),""!==X.hb_theme&&s(n,X.hb_theme);var T=i("#hb-dp-ok");T.innerHTML=F,i("#hb-dp-cancel").innerHTML=P,i("#hb-min-val").addEventListener("input",C),i("#hb-min-val").addEventListener("keydown",E),i("#hb-hr-val").addEventListener("input",C),i("#hb-hr-val").addEventListener("keydown",E),T.focus(),n.addEventListener("keydown",w)};var Z={t:null,inUp:function(t){s(t,"slideInUp"),s(t,"animated"),this.clear(),this.t=setTimeout(function(){o(t,"slideInUp"),o(t,"animated"),clearTimeout(Z.t),Z.t=null},205)},inDown:function(t){s(t,"slideInDown"),s(t,"animated"),this.clear(),this.t=setTimeout(function(){o(t,"slideInDown"),o(t,"animated"),clearTimeout(Z.t)},205)},clear:function(){this.t&&clearTimeout(this.t)}},Q={nextYear:function(){var t=i("#cur-dis-year"),e=parseInt(y(t,"data-val").trim(),10);i("#cur-dis-year-0").innerHTML=A(e),y(i("#cur-dis-year-0"),"data-val",e),t.innerHTML=A(e+1),y(t,"data-val",e+1),i("#cur-dis-year-1").innerHTML=A(e+2),y(i("#cur-dis-year-1"),"data-val",e+2),Z.inUp(i("#pick-year-cont")),this.renderDates()},prevYear:function(){var t=i("#cur-dis-year"),e=parseInt(y(t,"data-val").trim());i("#cur-dis-year-0").innerHTML=A(e),y(i("#cur-dis-year-0"),"data-val",e),t.innerHTML=A(e-1),y(t,"data-val",e-1),i("#cur-dis-year-1").innerHTML=A(e-2),y(i("#cur-dis-year-1"),"data-val",e-2),Z.inDown(i("#pick-year-cont")),this.renderDates()},nextMon:function(){var t,e=i("#cur-dis-month"),n=i("#pick-mon-cont"),r=e.innerHTML.trim(),a=T.indexOf(r),s=11===a?0:a+1,o=11===s?0:s+1;0===s&&(t=parseInt(y(i("#cur-dis-year"),"data-val").trim(),10)+1,i("#cur-dis-year").innerHTML=A(t),y(i("#cur-dis-year"),"data-val",t)),e.innerHTML=T[s],y(e,"data-val",s),i("#cur-dis-month-0").innerHTML=r,i("#cur-dis-month-1").innerHTML=T[o],Z.inUp(n),this.renderDates()},prevMon:function(){var t,e=i("#cur-dis-month"),n=i("#pick-mon-cont"),r=Number(y(e,"data-val")),a=0===r?11:r-1,s=11===a?0:a+1;11===a&&(t=parseInt(y(i("#cur-dis-year"),"data-val").trim(),10)-1,i("#cur-dis-year").innerHTML=A(t),y(i("#cur-dis-year"),"data-val",t)),e.innerHTML=T[a],y(e,"data-val",a),i("#cur-dis-month-0").innerHTML=T[r],i("#cur-dis-month-1").innerHTML=T[s],Z.inDown(n),this.renderDates()},showyears:function(){var t,e=y(i("#cur-dis-year"),"data-val"),n=10-Number(e[3]),r="",a="";e=Number(e);for(var s=10-n+1;s>=0;s--)t=e-s,0===s&&(a="curr-yr"),r+='<span data-value="'+t+'" class="yr-list '+a+'">'+A(t)+"</span>";for(s=1;s<=n;s++)r+='<span data-value="'+(t=e+s)+'" class="yr-list">'+A(t)+"</span>";i("#hb-day-short").style.display="none",i("#dates-cont").innerHTML=r},showMonths:function(){var t=Number(y(i("#cur-sel-month"),"data-val")),e=k.map(function(e,n){var i="";return t===n&&(i="curr-yr"),'<span class="month-list '+i+'" data-val="'+n+'">'+e+"</span>"});i("#hb-day-short").style.display="none",i("#dates-cont").innerHTML=e.join("")},selectYr:function(t){var e=Number(y(t,"data-value"));i("#cur-dis-year").innerHTML=A(e),y(i("#cur-dis-year"),"data-val",e),i("#cur-dis-year-0").innerHTML=A(e),y(i("#cur-dis-year-0"),"data-val",e-1),i("#cur-dis-year-1").innerHTML=A(e),y(i("#cur-dis-year-1"),"data-val",e+1),this.renderDates()},selectMonth:function(t){var e=Number(y(t,"data-val")),n=t.innerHTML;i("#cur-dis-month").innerHTML=n,y(i("#cur-dis-month"),"data-val",e),this.renderDates()},selectDay:function(t){var s=null,o=y(i("#cur-dis-year"),"data-val"),u=y(i("#cur-dis-month"),"data-val"),d=(Number(u),y(t,"data-nu")),c=J.currentInput;this.getCurDateInfo();a(t,"disabled")||(a(t,"next-month-days")?(d=y(t,"data-nun"),Q.nextMon(),"11"==u?(u="0",o=e(o)):u=e(u),t=r('[data-nu="'+d+'"]')):a(t,"prev-month-days")&&(d=y(t,"data-nup"),Q.prevMon(),"0"==u?(u="11",o=n(o)):u=n(u),t=r('[data-nu="'+d+'"]')),(s=r(".day.active"))&&(s.className="day"),this.setCurDate(d,u,o,"cur"),t.className="day active",s&&(s.className="day"),l(c)&&Q.fixDateDisplay({day:d,month:u,year:o},t))},fixDateDisplay:function(t,e){var n,r,o=i(".hb-picker-cont .day"),u=J.currentInput,d=new Date(t.year,Number(t.month),t.day),c={min:null,max:null},h=i('[data-group="'+u.getAttribute("data-group")+'"][data-start]'),f=i('[data-group="'+u.getAttribute("data-group")+'"][data-end]'),p=u.hasAttribute("data-start");l(u);p?(c.max=y(h[0],"max-date"),c.max=c.max&&new Date(c.max),c.min=d):(c.min=y(f[0],"min-date"),c.min=c.min&&new Date(c.min),c.max=d),d=d.getTime();for(var g=0,m=o.length;g<m;g++)a(o[g],"disabled")||a(o[g],"next-month-days")||a(o[g],"prev-month-days")||(r=!1,n=new Date(t.year,Number(t.month),Number(y(o[g],"data-nu"))),r=this.isWithinRangeFn(c.min,c.max,n),(n=n.getTime())===d?p?(o[g].className="day active2",c.max&&s(o[g],"hb-start")):o[g].className="day hb-end active2":o[g].className=1===r?"day hb-start active2":2===r?"day hb-end active2":!0===r?"day hb-bet":"day")},setCurDate:function(t,e,n,r){t&&(i("#"+r+"-sel-day").innerHTML=A(t),y(i("#"+r+"-sel-day"),"data-val",t)),e&&T&&(i("#"+r+"-sel-month").innerHTML=T[e],y(i("#"+r+"-sel-month"),"data-val",e)),n&&(i("#"+r+"-sel-year").innerHTML=A(n),y(i("#"+r+"-sel-year"),"data-val",n));var a=new Date(Number(n),Number(e),Number(t,10)).getDay();"cur"===r&&(i("#"+r+"-sel-day-text").innerHTML=$[a])},getNow:function(){var t=new Intl.DateTimeFormat("en",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:X.timeZone}).format(new Date),e=t.match(/^([\d]{1,2})\/([\d]{1,2})\/([\d]{2}|[\d]{4}),\s([\d]{1,2}):([\d]{1,2}):([\d]{1,2})\s([\w]{2})$/);return"PM"==e[7]&&12!=e[4]&&(e[4]=Number(e[4])+12),t=new Date(e[3],Number(e[1])-1,e[2],e[4],e[5],e[6])},getCurDateInfo:function(){var t={};return t.month=Number(y(i("#cur-sel-month"),"data-val")),t.year=Number(y(i("#cur-sel-year"),"data-val")),t.day=Number(y(i("#cur-sel-day"),"data-val")),t.hr=Number(y(i("#hb-hr-val"),"data-value")),t.min=Number(y(i("#hb-min-val"),"data-value")),t.fm=Number(y(i("#hb-time-format"),"data-value")),t},renderDates:function(t){var e=this.monthDetails(),n="",r=0,a=null,s=-1,o=0,u=-1,d=!1,c=null,h=null,f=null,p=!1,g="",m="",v="",b=J.currentInput,C=l(b);if(C){var E={min:null,max:null},x=i('[data-group="'+b.getAttribute("data-group")+'"][data-start]'),w=i('[data-group="'+b.getAttribute("data-group")+'"][data-end]'),D=b.hasAttribute("data-start");D?X.max_date=y(x[0],"max-date"):X.min_date=y(w[0],"min-date"),D?(X.max_date&&(X.max_date=new Date(X.max_date),E.max=X.max_date),E.min=new Date(J.currentProxyInput.value)):(X.min_date&&(X.min_date=new Date(X.min_date),E.min=X.min_date),E.max=new Date(J.currentProxyInput.value))}for(t||(t=this.getSelectDate(e)),f=this.getCurDateInfo(),r=0,a=e.prevMonthDates.length;r<a;r++)n+='<span class="day prev-month-days'+(_("",X,e,e.prevMonthDates[r],"prev")?" disabled ":"")+'" data-nup="'+L[e.prevMonthDates[r]]+'">'+L[e.prevMonthDates[r]]+"</span>",o++;for(r=0,a=e.daysCount;r<a;r++)g="",m="",v="",s=r+1,u="1"===X.start_day?(o+1)%7:o%7,c=!!X.min_date&&Date.parse(e.month+1+" "+s+" "+e.year)-Date.parse(X.min_date)<0,h=!!X.max_date&&Date.parse(X.max_date)-Date.parse(e.month+1+" "+s+" "+e.year)<0,d=-1!==X.disabled_days.indexOf(u)||c||h,C&&(p=this.isWithinRangeFn(E.min,E.max,new Date(e.year,e.month,s))),d?v="disabled":C&&p?1===p?(g="active2",m="hb-start"):2===p?(g="active2",m="hb-end"):m="hb-bet":this.shouldSelectDate(t,s)&&f.year===e.year&&f.month===e.month&&(g="active"),n+='<span class="day '+v+" "+m+" "+g+'" data-nu="'+s+'">'+L[s]+"</span>",o++;for(a=o%7==0?0:7-o%7,r=1;r<=a;r++)n+='<span class="day next-month-days'+(_("",X,e,L[r],"next")?" disabled ":"")+'" data-nun="'+L[r]+'">'+L[r]+"</span>";i("#dates-cont").innerHTML=n,i("#hb-day-short").style.display="block"},isWithinRangeFn:function(t,e,n){var i=!1;return null!==t&&null!==e&&(t=t.getTime(),e=e.getTime(),(n=n.getTime())===t?i=1:n===e?i=2:n>t&&n<e&&(i=!0),i)},getSelectDate:function(t){var e=this.getCurDateInfo(),n=null;return X.data_group||e.year===t.year&&e.month===t.month&&(n=e.day),n},shouldSelectDate:function(t,e){if("[object Array]"===Object.prototype.toString.call(t)){if(-1!==t.indexOf(e))return!0}else if(t===e)return!0;return!1},monthDetails:function(){for(var t=Number(y(i("#cur-dis-year"),"data-val")),e=Number(y(i("#cur-dis-month"),"data-val")),n=e-1>-1?e-1:11,r=e-1>-1?t:t-1,a=K.getDaysCount(e,t),s=K.getDaysCount(n,r),o=new Date(t,Number(e),1).getDay(),l=(new Date(t,Number(e),a).getDay(),[]),u="1"===X.start_day?0===o?s-5:s-o+2:s-o+1;u<=s;u++)l.push(u);return{firstOfMonth:o,daysCount:a,prevDaysCount:s,prevMonthDates:l,month:e,year:t}},togglePick:function(){var t=i("#hb-pick-toggle");"date"===t.getAttribute("data-state")?(t.setAttribute("data-state","clock"),s(i("#time-picker-cont"),"active")):(t.setAttribute("data-state","date"),o(i("#time-picker-cont"),"active"))},changeHrVal:function(t){var e=i("#hb-hr-val"),n=Number(y(e,"data-value")),r=-1,a="12h"===X.time_format,s=a?12:23;"up"===t?r=n===s?a?1:0:n+1:"down"===t&&(r=1===n?a?s:0:0===n?s:n-1),r=r<10?"0"+r:r,e.value=A(r),y(e,"data-value",r)},changeMinVal:function(t){var e=i("#hb-min-val"),n=Number(y(e,"data-value")),r=-1;"up"===t?r=n+X.minutes_step>59?X.minutes_step-(60-n):n+X.minutes_step:"down"===t&&(r=n-X.minutes_step<0?n-X.minutes_step+60:n-X.minutes_step),r=r<10?"0"+r:r,e.value=A(r),y(e,"data-value",r)},changeFmVal:function(t){var e=i("#hb-time-format");"12h"===X.time_format&&("AM"===y(e,"data-value")?(e.innerHTML=M,y(e,"data-value","PM")):(e.innerHTML=S,y(e,"data-value","AM")))},close:function(){o(B.body,"no-scroll"),i("#hb-dp-mask").style.display="none",i("#hb-min-val").removeEventListener("input",C),i("#hb-hr-val").removeEventListener("input",C),i("#hbUI-datepicker").removeEventListener("keydown",w),this.reset(),J.currentProxyInput.focus()},ok:function(){var e,n,r=y(i("#cur-sel-day"),"data-val"),a=y(i("#cur-sel-month"),"data-val"),s=y(i("#cur-sel-year"),"data-val"),o=y(i("#hb-hr-val"),"data-value"),u=y(i("#hb-min-val"),"data-value"),d=y(i("#hb-time-format"),"data-value"),c=J.currentInput,h=c.hasAttribute("data-start"),f=l(c),p="24h"===X.time_format,g=parseInt(o);p&&(d=""),X.time_picker||(o=0,u=0);var m=new Date(s,a,r,function(t,e){var n=t;return"PM"!=e&&"AM"!=e||(t>0&&t<12?"PM"==e&&(n+=12):"AM"==e&&(n=0)),n}(g,d),u),v=t.format(m,X.format);J.currentInput.value=J.currentInput.hasAttribute("data-iso")?m.toISOString():v,J.currentInput.setAttribute("data-value",m.toISOString()),J.currentProxyInput.value=v,e=i('[data-group="'+c.getAttribute("data-group")+'"][data-start]'),n=i('[data-group="'+c.getAttribute("data-group")+'"][data-end]'),f&&(h?(n[0].setAttribute("min-date",m),n[1].setAttribute("min-date",m)):(e[0].setAttribute("max-date",m),e[1].setAttribute("max-date",m))),function(t,e){if(document.createEventObject){var n=document.createEventObject();return t.fireEvent("on"+e,n)}(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)}(J.currentInput,"change"),this.close(),f&&h&&n[0].click()},reset:function(){o(i("#time-picker-cont"),"hr24");var t=i("#hb-dp-mask"),e=i("#hbUI-datepicker"),n=i("#hb-dp__period-cont");n&&(n.innerHTML=""),t.contains(e)?t.removeEventListener("click",d):(t.appendChild(e),e.removeEventListener("click",d)),e.style.cssText="",e.className="hb-dp-cont",X={},J.currentInput=null},selectToday:function(){var t=this.getNow();i("#cur-sel-day-text").innerHTML=$[t.getDay()],i("#cur-sel-month").innerHTML=T[t.getMonth()],y(i("#cur-sel-month"),"data-val",t.getMonth()),i("#cur-sel-year").innerHTML=A(t.getFullYear()),y(i("#cur-sel-year"),"data-val",t.getFullYear()),i("#cur-sel-day").innerHTML=A(t.getDate()),y(i("#cur-sel-day"),"data-val",t.getDate()),i("#cur-dis-year").innerHTML=A(t.getFullYear()),y(i("#cur-dis-year"),"data-val",t.getFullYear()),i("#cur-dis-month").innerHTML=T[t.getMonth()],y(i("#cur-dis-month"),"data-val",t.getMonth()),this.renderDates(t.getDate())},selectDate:function(t){if(i("#cur-sel-day-text").innerHTML=$[t.getDay()],i("#cur-sel-month").innerHTML=T[t.getMonth()],y(i("#cur-sel-month"),"data-val",t.getMonth()),i("#cur-sel-year").innerHTML=A(t.getFullYear()),y(i("#cur-sel-year"),"data-val",t.getFullYear()),i("#cur-sel-day").innerHTML=A(t.getDate()),y(i("#cur-sel-day"),"data-val",t.getDate()),i("#cur-dis-year").innerHTML=A(t.getFullYear()),y(i("#cur-dis-year"),"data-val",t.getFullYear()),i("#cur-dis-month").innerHTML=T[t.getMonth()],y(i("#cur-dis-month"),"data-val",t.getMonth()),X.time_picker){var e=t.getHours(),n=t.getMinutes(),r="",a=!0;"12h"===X.time_format&&(e>11?(12!==e&&(e-=12),r=M,a=!1):(r=S,0==e&&(e=12))),(e+="").length<2&&(e="0"+e),(n=D(n,X.minutes_step)+"").length<2&&(n="0"+n),y(i("#hb-hr-val"),"data-value",e),i("#hb-hr-val").value=A(e),y(i("#hb-min-val"),"data-value",n),i("#hb-min-val").value=A(n),y(i("#hb-time-format"),"data-value",a?"AM":"PM"),i("#hb-time-format").innerHTML=r}this.renderDates(t.getDate())},setRange:function(t){Q.range=t,s(i("#hb-range-"+t),"active")}};J.setLocale=function(e){z.locale=e,t.setLocale(e);var n=t.locale;k=n.monthsShort,T=n.monthsLong,H=n.weekdaysNarrow,N=n.weekdaysShort,$=n.weekdaysLong,I=n.monthsShort.concat(n.monthsLong),L=n.numbersArr,S=n.amChars,M=n.pmChars,O=n.ampmPos};var tt='<div id="hb-dp-mask" style="display:none"  ><div class="hb-dp-cont" id="hbUI-datepicker" tabindex="0"><div class="hb-dp-left">\x3c!-- START:  SINGLE DATE SELECT CONT --\x3e<div class="cur-dt-cont"><div class="hb-date"><div class="hb-only-date"><div class="hb-year" id="cur-sel-year"></div><div class="hb-display-flex"><div class="hb-day" id="cur-sel-day"></div><div class="hb-month" id="cur-sel-month"></div></div><div class="hb-mon-day-text"><div class="hb-day-text" id="cur-sel-day-text"></div></div></div><div id="time-picker-cont" class="fm-after"><div class="hb-btns-up"><i class="arrow top" id="hb-hr-up"></i><i class="arrow top" id="hb-min-up"></i></div><div class="hb-time-c hb-input-cont 111"><span id="hb-time-format" class="hb-time-format" data-value=""></span><label for="hb-hr-val" class="zs-visually-hidden">Hour</label><input type="text" data-value="12" value="12" id="hb-hr-val" min="1" max="12" data-def="12"/><label for="hb-min-val" class="zs-visually-hidden">minutes</label><input type="text" data-value="12" value="12" id="hb-min-val"/ min="0" max="59" data-def="00"></div><div class="hb-time-c hb-input-cont 222"><input type="number" pattern="\\d*" data-value="12" value="12" id="hb-hr-val"  min="1" max="12" data-def="12"/><label for="hb-hr-val" class="zs-visually-hidden">Hour</label><input type="number" pattern="\\d*" data-value="12" value="12" id="hb-min-val"  min="0" max="59" data-def="00"/><label for="hb-min-val" class="zs-visually-hidden">minutes</label><span id="hb-time-format" class="hb-time-format" data-value=""></span></div><div class="hb-btns-down"><i class="arrow bottom" id="hb-hr-down"></i><i class="arrow bottom" id="hb-min-down"></i></div></div></div></div>\x3c!-- END:  SINGLE DATE SELECT CONT --\x3e</div>\x3c!-- END : left  --\x3e<div class="hb-picker-cont"><div class="dt-picker-cont"><div class="hb-year-sel"><i class="arrow left fl-lt" id="dis-yr-back"></i><span id="pick-year-cont"><span id="cur-dis-year-0" > a </span><span id="cur-dis-year"> b </span><span id="cur-dis-year-1" > c </span> </span><i class="arrow fl-rt" id="dis-yr-next"></i></div><div class="hb-month-sel"><i class="arrow left fl-lt" id="dis-mon-back"></i><span id="pick-mon-cont"><span id="cur-dis-month-0" >a</span><span id="cur-dis-month" >b</span> <span id="cur-dis-month-1" >c</span></span><i class="arrow fl-rt" id="dis-mon-next"></i></div><div class="hb-day-sel" id="hb-day-short"></div><div class="hb-day-sel" id="dates-cont"></div><div class="hb-btns-cont"><button type="button" class="hb-btns hb-ok" id="hb-dp-ok">OK</button><button type="button" class="hb-btns hb-cancel" id="hb-dp-cancel">CANCEL</button></div></div></div><div class="period-picker" id="hb-dp__period-cont"></div></div></div>';return J}),function(t,e){"function"==typeof define&&define.amd?define("notify",e):t.notify=e()}(this,function(){"use strict";function t(t){function e(){}t=t||"",this.msg=t,this.okLabel="Ok",this.cancelLabel="Cancel",this.onOk=e,this.onCancel=e,this.closeBtn=!1,this.defaultValue="";var n=$D.getByClass("hb-notify-cont");return 0===n.length&&(document.body.insertAdjacentHTML("beforeend",s),n=$D.getByClass("hb-notify-cont")),this.msgCont=n[0],this}function e(t,e,n,a,s){function d(){c&&window.clearTimeout(c),$D.removeClass(this,"slideInDownNotify"),$D.addClass(this,"slideOutUpNotify"),this.addEventListener(l,function t(){this.parentNode.removeChild(this),this.removeEventListener(l,t)})}t=u(t),n=u(n);var c,h,f,p,g=3e3;i&&r&&i===t&&n===r||("error"!==n&&"warning"!==n||(g=5e3),f=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e}(o.replace("{msg}",t).replace(/\{type\}/g,n).replace("{position}","right-bottom")),f=$D.get(".hb-notify-msg__item",f),p=$D.get(".hb-notify__close-icon",f),s||(p.style.display="none"),h=function(t){t&&t(),this.removeEventListener(l,h),s?p.addEventListener("click",d.bind(this)):c=window.setTimeout(d.bind(this),g)}.bind(f,a),f.addEventListener(l,h),$D.addClass(f,"slideInDownNotify"),$D.prepend(e,f),i=t,r=n,setTimeout(function(){r=null,i=null},3e3))}function n(t,e){for(var n=$D.getAll(".hb-notify-cont"),i=n.length-1;i>=0;i--)$D.remove(n[i]);e()}var i,r,a,s='<ul class="hb-notify-cont">\t\t\t\t\t</ul>',o='<li class="hb-notify-msg__item">\t\t\t\t\t        <div class="hb-notify {position} {type}">\t\t\t\t\t            <div class="hb-notify__icon-cont">\t\t\t\t\t                <div class="hb-notify__msg-icon hb-{type}"></div>\t\t\t\t\t            </div>\t\t\t\t\t            <div class="hb-notify__msg-cont">\t\t\t\t\t                <div class="hb-notify__msg-content">{msg}</div>\t\t\t\t\t            </div>\t\t\t\t\t            <div class="hb-notify__close-icon" style="fill:#FFFFFF"><svg class="svg-icon-10px"><use xmlns:xlink="ht""tp://www.w3.org/1999/xlink" xlink:href="#zs-delete-cross"></use></svg>\t\t\t\t\t          </div>\t\t\t\t\t        </div>\t\t\t\t\t    </li>',l=function(){var t,e=document.createElement("div"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t])return n[t]}(),u=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};return t.prototype.enableCloseBtn=function(){return this.closeBtn=!0,this},t.prototype.okLabel=function(t){return this.okLabel=t,this},t.prototype.cancelLabel=function(t){return this.cancelLabel=t,this},t.prototype.alert=function(t){alert(this.msg)},t.prototype.confirm=function(t,e){},t.prototype.defaultValue=function(t){this.defaultValue=t},t.prototype.prompt=function(t,e){},t.prototype.success=function(t){e(this.msg,this.msgCont,"success",t,this.closeBtn)},t.prototype.error=function(t){e(this.msg,this.msgCont,"error",t,this.closeBtn)},t.prototype.info=function(t){e(this.msg,this.msgCont,"info",t,this.closeBtn)},t.prototype.warning=function(t){e(this.msg,this.msgCont,"warning",t,this.closeBtn)},function(e,i){if(!i)return new t(e);(a=i.appCtx).extension.add("hb-notification","beforeRoute",n)}}),function(t){"function"==typeof define&&define.amd?require(["hbUI"],function(e){e.extend(t.call(null,e.utils,e._,e.KEYCODE,e.NODE_TYPE))}):hbUI.extend(t.call(null,hbUI.utils,hbUI._,hbUI.KEYCODE,hbUI.NODE_TYPE))}(function(t,e,n,i){function r(t,e){for(var n=!1;t!==e;){if(t.getAttribute("data-pgn-action")){n=!0;break}t=t.parentNode}return!!n&&t}function a(t){var e=t.target,n=e.getAttribute("data-pgn-action"),i=r(e,this);$E.dispatch(document,"sort-table",{type:n,target:e,el:i,data:this.getAttribute("data-pgn")})}function s(t){var e=t.target,n=e.getAttribute("data-pgn-action"),i=e.getAttribute("data-page-no"),a=r(e,this);$E.dispatch(document,"page-changed",{type:n,target:e,el:a,partialName:this.getAttribute("data-pgn-partialName"),data:this.getAttribute("data-pgn"),page_no:i})}return{tag:["pagination-header","pagination-controls"],init:function(t,e){"pagination-header"===e?$E.bind(t,"click",a):"pagination-controls"===e&&$E.bind(t,"click",s)}}}),function(t,e){"function"==typeof define&&define.amd?define("hbPanel",e):t.hbPanel=e()}(this,function(){function t(t){return Array.prototype.slice.call(t)}function e(t){return Number(t.replace("px",""))}function n(){return"_"+Math.random().toString(36).substr(2,9)}function i(t){return(t=t||win).pageYOffset||t.document.documentElement.scrollTop}function r(t,e){if(!t)throw new Error("Element to _find offset doesnot exists.");e=e||window;var n=t.getBoundingClientRect();return{top:n.top+i(e),left:n.left+function(t){return(t=t||win).pageXOffset||t.document.documentElement.scrollLeft}(e),right:n.right,bottom:n.bottom+i(e),width:n.width}}function a(t){for(var e=t;e;){if(e.hasAttribute("data-hb-panel"))return e;e=e.parentElement}return!1}function s(t){t.stopPropagation();var e=function(t){for(var e=t;e&&!e.hasAttribute("data-hb-panel__select");){if("LI"===e.tagName)return e;e=e.parentElement}return null}(t.target);if(e){var n,i,r,s=E(e.getAttribute("data-value"));C.hasAttribute("data-panel-innerhtml")||(C.setAttribute("data-value",s),r=C,(n=C.getAttribute("data-hb-panel_preview-id"))&&(i=$D.get('[data-hb-panel_preview-target="'+n+'"]'))&&(r=i),r.style.display=e.hasAttribute("data-preview-hide")?"none":"",r.innerHTML=e.innerHTML),$E.dispatch(C,"hbPanel:change",{value:s,element:e}),p(a(e))}}function o(e){var n=e.target,i=$D.get("[data-hb-panel__select] ul",this.parentNode),r=n.value.trim(),a=function(t){for(var e=t;e&&!e.hasAttribute("data-hb-panel");)e=e.parentElement;return e}(n);if(x=w[a.getAttribute("data-hb-panel")],(r=r.toLowerCase()).length<2&&x)i.innerHTML=x.innerHTML;else{var s,o="";t($D.getAll("[data-value]",x)).forEach(function(t){-1!==(s=(s=E(t.getAttribute("data-value").trim())).toLowerCase()).indexOf(r)&&(o+='<li data-value="'+s+'">'+t.innerHTML+"</li>")}),i.innerHTML=""===o?'<span style="padding:12px">Not found</span>':o}}function l(t){$E.unbind(window,"mousemove",d),$E.bind(window,"mousemove",d),m=t.offsetX,v=t.offsetY,b=t.target.parentElement}function u(){$E.unbind(window,"mousemove",d)}function d(t){b.style.insetInlineStart=t.x-m+"px",b.style.insetBlockStart=t.y-v+"px"}function c(t){var e={},n=t.getAttribute("data-hb-panel__selectEl");return t&&n?((n=n.split(",")).forEach(function(t){t=t.trim().split(":"),e[t[0].trim()]=isNaN(t[1])?t[1].trim():parseInt(t[1].trim(),10)}),e):e}function h(i,d,h){function m(t){return t||""}var v,b,E,x=i.getAttribute("data-hb-panel__btn"),_=r(i),D=i.hasAttribute("data-hb-panel__selectEl"),A=D&&c(i)||{},k=a(i),T=i.hasAttribute("data-close-parent"),N=i.getAttribute("data-hb-panel__pos"),$=$D.get("[data-hb-panel__search]",d),I=$D.get("[data-hb-panel__draghandle]",d),L=i.hasAttribute("data-hb-panel_hide-mouseout"),S="rtl"==document.documentElement.getAttribute("dir");D&&(C=i,v=$D.get("[data-hb-panel__select]",d),$E.bind(d,"click",function(t){t.preventDefault(),t.stopPropagation()}),$E.bind(v,"click",s),(b=$D.get("ul",v))&&(w[x]=b.cloneNode(!0)),E=$D.get("input",$),$&&($E.bind($,"keyup",o),E.tabIndex=0)),I&&($E.bind(I,"mousedown",l),$E.bind(window,"mouseup",u)),L&&$E.bind(d,"mouseout",function(){p(d)}),T&&!1!==k&&(N&&(N=N.split(",").map(function(t){return t.trim()})),p(k));var M=e(window.getComputedStyle(d).height);"custom"===N?(d.style.insetBlockStart="-1000px",d.style.insetInlineStart="-1000px"):T&&null!==N?(d.style.insetBlockStart=N[0].split(":")[1],d.style.insetInlineStart=N[1].split(":")[1]):window.innerHeight-_.bottom<M?(d.style.insetBlockStart=_.top-M+e(window.getComputedStyle(i).height)+m(A.marginBlockStart)+"px",d.style.insetInlineStart=S?window.innerWidth-i.getBoundingClientRect().right+m(A.marginInlineStart)+"px":_.left+m(A.marginInlineStart)+"px"):(d.style.insetBlockStart=_.top+m(A.marginBlockStart)+"px",d.style.insetInlineStart=S?window.innerWidth-i.getBoundingClientRect().right+m(A.marginInlineStart)+"px":_.left+m(A.marginInlineStart)+"px");t($D.getAll("[data-hb-panel__btn]",d)).forEach(function(t){var e=n();t.setAttribute("data-hb-panel__id",e),$E.bind(t,"click",g)}),$E.bind(d,"click",f),$D.addClass(d,"hb-panel__open"),d.setAttribute("data-hb-panel__id",h),y[h]={panel:d,parent:k},E&&(E.focus(),E.value=""),$E.dispatch(d,"hb-panel:open:"+x,{refEl:i})}function f(t){for(var e in y)y[e].parent===this&&$D.hasClass(y[e].panel,"hb-panel__open")&&p(y[e].panel)}function p(t,e){var n=$D.get("[data-hb-panel__select] ul",t);x=w[t.getAttribute("data-hb-panel")],n&&x&&(n.innerHTML=x.innerHTML);for(var i=function(t){var e=[];for(var n in y)y[n].parent===t&&e.push(y[n]);return e}(t),r=i.length-1;r>=0;r--)p(i[r].panel);$D.removeClass(t,"hb-panel__open"),e||(e=t.getAttribute("data-hb-panel__id")),delete w[t.getAttribute("data-hb-panel")],x=null,delete y[e],$E.purge(t),$E.dispatch(t,"hb-panel:close:"+t.getAttribute("data-hb-panel"))}function g(t){t.stopPropagation();var e=this.getAttribute("data-hb-panel__btn"),n=$D.get('[data-hb-panel="'+e+'"]');if($D.hasClass(this,"hb-panel")&&0!==Object.keys(y).length)p(n,i);else if(n){var i=this.getAttribute("data-hb-panel__id");$D.hasClass(n,"hb-panel__open")?p(n,i):function(t,e,n){function i(){$E.unbind(t,"hb-panel:beforeOpen:complete",i),h.apply(r,a)}var r=this,a=arguments;t.hasAttribute("data-hb-panel__selectEl")&&("true"==c(t).beforeOpen?($E.bind(t,"hb-panel:beforeOpen:complete",i),$E.dispatch(t,"hb-panel:beforeOpen:init",a)):h.apply(this,a))}(this,n,i)}}var m,v,b,y={},C=null,E=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},x=null,w={};return{init:function(e){t((e=e||document).querySelectorAll(".hb-panel")).forEach(function(t){if(!t.hasAttribute("data-hb-panel__customInit")){var e=n();t.setAttribute("data-hb-panel__id",e),$E.unbind(t,"click",g),$E.bind(t,"click",g)}})},close:p}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():t.Hummingbird=e()}(this,function(){"use strict";function t(t,e){return t.hasOwnProperty(e)}function e(){}function n(t){return JSON.parse(JSON.stringify(t))}function i(t,e){var n={};return t.forEach(function(t,i){e[i]?n[e[i]]=t:n["arg"+i]=t}),n}function r(t,e,n){for(var i=null,r={},a=0,s=t.length;a<s;a++)t[a].id===e&&(i=t[a].params);return n&&n.length>0?(n.forEach(function(t,e){r[n[e]]=i[t]}),function(t){return Object.keys(t).length>0}(r)?r:null):i}function a(t){return window.location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+t}function s(t,e){return t.replace(/:([\w-\._]+)/g,function(t,n){return e[n]})}function o(t,e){var n=e.target,i=n.getAttribute("data-bind"),r=i&&i.split(".");if(r&&t&&!function(t){if(-1!==[13,27,38,40,9].indexOf(t))return!0}(e.keyCode?e.keyCode:e.charCode)&&!e.__visited){e.__visited=!0;var a,s=r.length,o="",u=this;u.bindObj||(u.bindObj={}),a=u.bindObj,o=function(t){var e,n;return"checkbox"===t.type?void 0===(e=t.value)||null===e?e=!!t.checked:t.checked||(e=!1):"radio"===t.type?void 0!==(e=t.value)&&null!==e||(e=!!t.checked):"SELECT"===t.tagName?("select-one"===t.type&&(n=t.selectedOptions).length>0&&(e=n[0].value),e=t.value):e=t.value,"string"==typeof e&&(e=e.trim()),e}(n),t.extension.callExtension("beforeModelUpdate",[{element:n,value:o,bindStr:i,appCtx:t}],function(e){if(!e)return O.is("core")&&O.log("Interrupted at beforeModelUpdate"),void(t._.r.prevRoutesSeq=[]);var n=null,i=r.length,d=u.modelObj;r.forEach(function(t,e){var r;t=t.trim(),null!==n?(a[n]||(a[n]={}),a[n][t]=o,n=null):/([\w]+)\[(\d+)\]/.test(t)?(r=t.match(/([\w]+)\[(\d+)\]/),n=Number(r[2]),a[r[1]]||(a[r[1]]=new Array(n)),i-1===e?("boolean"==typeof(d=d[r[1]][n])?o="true"===o:isNaN(d)||(o=Number(o)),a[r[1]][n]=o):(a=a[r[1]],d=l(d,r[1]))):(d=l(d,t),e!==s-1?F.object(a[t])||(a[t]={}):("boolean"==typeof d&&(o="true"===o),a[t]=o),a=a[t])})})}}function l(t,e){return t&&e&&t[e]}function u(t,e){this.map=[],this.id=1,this.routesSeq=[],this.prevRoutesSeq=[],this.config={},this.__tracker=[],this.redirects={},this.config.titleFormat=t.titleFormat||"My Site Title",this.config.prefix=function(t){return 0===t.length?"":"/"===t.charAt(0)?t:"/"+t}(t.prefix||""),this.startRoute=null,this.prevModule=null,e&&(this.appCtx=e)}function d(t,e){return""!=e&&0===t.indexOf(e)&&t.length>e.length}function c(t){if(t){(this.requireVersion?this.requireVersion:require)([this.__curRoute.module],function(t){void 0===t&&O&&O.warn("Module is undefined. Check module name or module file: "+this.__curRoute.module);var e=this.__curRoute;e.curBindCtx=t,this.appCtx.extension.callExtension("afterModuleLoad",[{caller:e.caller,url:e.urlOri,queryString:this.__curURL.queryString,moduleCtx:t,fnName:e.func,prevModuleCtx:this.prevModule}],function(t,e){if(!e)return void(O&&O.is("core")&&O.log("Interrupted at beforeRoute"));var n=this.__curRoute,i=n.params?n.params:[];null===this.prevModule||this.prevModule.modelObj||this.prevModule.bindObj||this.prevModule===t||(this.prevModule.modelObj={},this.prevModule.bindObj={});this.prevModule=t,t.modelObj||(t.modelObj={}),t.bindObj||(t.bindObj={}),t.__modify||(t.__modify=o.bind(t,this.appCtx));if(!F.function(t[n.func]))throw new Error('Function "'+n.func+'" specified in route '+n.urlOri+" is not defined.");(i=Object.keys(i).map(function(t){return i[t]})).push(this.appCtx),i.push(this.__curURL.queryString),t[n.func].apply(this.appCtx,i),this._afterModuleLoad(n.caller,n.urlOri,n.pushStateFlag)}.bind(this,t))}.bind(this),this._handleRequireErr)}else O.is("core")&&O.log("Interrupted at beforeModuleLoad")}function h(t,e){return W.call(t,e)}function f(t){this.data=t,this.children=[],this.parent=null}function p(t,e){this.str=t,this.tokenRe=/({{.*?}}|{%.*?%}|{#.*?#})/g,this.id=e,this.tokens=[],this.endTags=[],this.blockTypes=Object.keys(Y)}function g(t){return t.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})}function m(t){return t.replace(/"/g,'\\"').replace(/'/g,"\\'")}function v(t){return"string"==typeof t?t.replace(/\n/g,"\\n"):t}function b(t,e,n,i){this.inBrowser="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),this.tmpl_id=t.replace(/-/g,"_"),this.str=e,this.viewFnStr="",this.macroStr="",this.partialStr="",this.currTokenIndex=0,this.tokenizer=new p(e,t),this.tokenizer.init(),this.ast=this.tokenizer.ast,this.tokens=this.tokenizer.tokens,this.endTags=this.tokenizer.endTags,this.indexVars=0,this.loops=0,this.notFlag=!1,this.indentLevel=4,this.indentLevelMacro=4,this.indentLevelPartial=4,this.inBrowser?this.showErrInfo=n&&n.showErrInfo||!0:this.showErrInfo=!1,this.config=n,this.currCodeType="view",this.currLoopCtx,this.viewEngineInstance=i,this.macros={},this.partials={}}function y(t){return/<\s*input\s/g.test(t)?"input":/<\s*select\s/g.test(t)?"select":/<\s*textarea\s/g.test(t)?"textarea":null}function C(t,e){var n=e||{},i=/(\w+)\s+contains\s+(?:(("|')(?:.+)?\3)|(\w+))/,r=[],a=[];if(i.test(t))return function(t,e){var n="",i=C(t[1]);if(e.skipExpr)return i;if(void 0!=t[4])throw new Error("variables not allowed in contains statement");return n+="Object.prototype.toString.call("+i+") === '[object Object]' ? ("+i+".hasOwnProperty("+t[2]+") ): ("+i+".indexOf("+t[2]+") > -1)"}(i.exec(t),n);var s=0;return t=(t=(t=t.replace(/[\w\.]+\s*\[(\s*".*?"\s*)\]/g,function(t,e,n){return t=t.replace(/\["/,".").replace(/"\]/,""),a.push(t),"__SQ_NOTS__"})).replace(/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/g,function(t,e,n){return r.push(t),"__STRR__"})).replace(/[a-zA-Z_$\.]+[\w\.$]*/gm,function(t,e,n){return"true"===t||"false"===t?t:"__STRR__"===t?r[s++]:-1!==Q.indexOf(t)?t:"u._r(ctx, "+J+', "'+t+'")'}),s=0,t=t.replace(/__SQ_NOTS__/,function(){return a[s++]})}function E(t){return(t=t||"").match(/([\w]+)/g)}function x(t,e){var n,i=document.createDocumentFragment(),r=/<tr[\s\S]*?<\/tr>/.test(t);for((n=e&&r?document.createElement("table"):document.createElement("div")).innerHTML=t,e&&r&&(n=n.querySelector("tbody"));n.firstChild;)i.appendChild(n.firstChild);return i}function w(t,e){t&&void 0===t.autoEscape&&(t.autoEscape=!0),this.config=t,this.cache={},this.filter=V,e&&(this.appCtx=e)}function _(t){t||O.is("core")&&O.log("Interrupted at beforeRender.")}function D(t){t&&delete et[t]}function A(e){if(e!==at){at=e;var n=e.target,i=n,r=null,a="",s="",o=null,l=this.getAttribute("data-hb-id");if($D.hasClass(n,"disabled"))return e.stopPropagation(),void e.preventDefault();if(t(et,this.getAttribute("data-hb-id"))&&et[l])for(;i!==this&&null!==i;)if(r=i.getAttribute("data-event"),n=i,i=i.parentNode,r)for(var u=0,d=(r=k(r)).length;u<d&&!e.cancelBubble;u++)s=r[u][0],a=r[u][1],et[l]&&et[l][s]&&et[l][s][a]&&(o=et[l][s][a],e.type===s&&o&&o.call(n,e))}}function k(t){if(""===t)return[];return(t=t.trim().split(",")).map(function(t){return t.trim().split(" ")})}function T(t){for(var e=t.options,n=e.length-1;n>=0;n--)if(e[n].hasAttribute("data-default"))return e[n];return!1}function N(t){for(var e,n,i,r=t.length-1;r>=0;r--)if("radio"===(e=t[r]).type||"checkbox"===e.type)e.value===e.getAttribute("data-value")&&(e.checked=!0);else if("TEXTAREA"===e.tagName)e.value=e.value;else if("SELECT"===e.tagName){if("select-one"!==e.type)continue;(i=e.getAttribute("value")||e.getAttribute("data-value"))&&""===i.trim()?(n=T(e))&&(e.value=n.value):i&&(e.value=i.trim())}else e.hasAttribute("data-value")&&(e.value=e.getAttribute("data-value"))}function $(t,e,n){for(var i,r,a=e.getAttribute?e.getAttribute("data-hb-id"):e,s=0,o=t.length;s<o;s++)for(var l=0,u=(i=k((r=t[s]).getAttribute("data-event"))).length;l<u;l++)!function(t,e,n,i,r){var a=e[0],s=e[1],o=!1,l=!1,u=function(t,e){var n=t,i=!1;return(e=e.split(".")).forEach(function(t){n[t]?n=n[t]:i=!0}),i?null:n}(i,s),d=et[t]?Object.keys(et[t]):[];if(-1===["click","change"].indexOf(a))return void $E.bind(n,a,u);$D.isNode(r)||"string"!=typeof t||(r=$D.get('[data-hb-id="'+t+'"]'));if(void 0===et[t])et[t]={},et[t][a]={},o=!0;else if(-1===d.indexOf(a))et[t][a]={},o=!0;else{for(var c=$E.listeners.length-1;c>=0;c--)if($E.listeners[c].element===r&&$E.listeners[c].type===a){l=!0;break}l||(o=!0)}o&&$E.bind(r,a,A);et[t][a][s]||(et[t][a][s]=u)}(a,i[l],r,n,e)}function I(t,e,n){this.logLevel=t,this.types={router:!0,view:!0,core:!0,extension:!0},this._filterBy(e,n),this.setLevel(t)}function L(t){var e,n,i,r,a,s,o;if(P?t.mode||(t.mode="development"):t.mode="server",t.prefix||(t.prefix=""),t.constants||(t.constants={}),t.filterLog||(t.filterLog=["router","view","core","extension"]),t.filterLogType===M&&(t.filterLogType=!0),t.logLevel===M&&(t.logLevel="production"===t.mode?0:2),O=new I(t.logLevel,t.filterLog,t.filterLogType),P&&(e=function(t,e,n){e.type&&"popstate"===e.type&&(e=R.location.pathname,n=!1),e=S(e,t.configs.prefix),t._.r.redirects[e]&&(e=t._.r.redirects[e]),t._.r.navigate(e,n,this)}.bind(null,this),n=new U(e,this)),i=new tt(this),r=new u({titleFormat:t.titleFormat,prefix:t.prefix},this),a=new w({templatePath:t.viewPath,ext:t.ext||".html",showErrInfo:t.showErrInfo||!0},this),P&&(this.addRoute=r.addRoute.bind(r),this.navigate=e,this.goBack=r.goBack.bind(r),this.setRequireVersion=r.setRequireVersion.bind(r),this.removeRequireVersion=r.removeRequireVersion.bind(r)),this.utils=q,this.constants=t.constants,this.data=t.data||{},this.configs=t,this.hsNav=n,this.view=a,this.view.cache={},this.extension=i,this.version="v1.0.0",this._={r:r},this.messages=t.messages||{},s=this.view.cache,"production"===t.mode)for(var l=(o=Object.keys(t.viewPath)).length-1;l>=0;l--)s[o[l]]=window[o[l]+"ViewCache"]}function S(t,e){return"string"==typeof t?t.replace(a(e),""):t}var M,O,R,B,H,j=Object.prototype.toString,F={array:function(t){return"[object Array]"===j.call(t)},date:function(t){return"[object Date]"===j.call(t)},function:function(t){return"[object Function]"===j.call(t)},regex:function(t){return"[object RegExp]"===j.call(t)},object:function(t){return"[object Object]"===j.call(t)},url:function(t){return/^https?:\/\/[\-A-Za-z0-9+&@#\/%?=~_|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_|]/.test(t)}},P="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window);P?(R=window,H=R,document,navigator.userAgent.toLowerCase().indexOf("msie 9.0")>0,(B=P&&window.navigator.userAgent.toLowerCase())&&B.indexOf("trident")>0,B&&B.indexOf("android")>0,B&&/(iphone|ipad|ipod|ios)/i.test(B)):(H=global,require("fs"));var q=function(){function n(e,i){var r,a=Object.prototype.toString;for(r in i)t(i,r)&&("object"==typeof i[r]?(e[r]||(e[r]="[object Array]"===a.call(i[r])?[]:{}),n(e[r],i[r])):e[r]=i[r])}function i(t,e,n){var r,a=Object.prototype.toString.call(t);if((e=e||{})[n=n||""])return t;switch(a){case"[object Object]":r=function(t,e,n,r){var a;for(var s in t)a=t[s],e[s]=i(a,n,r+(r?".":"")+s);return e}(t,{},e,n);break;case"[object Array]":r=function(t,e,n,r){for(var a=0;a<t.length;a++)e[a]=i(t[a],n,r+"["+a+"]");return e}(t,[],e,n);break;case"[object Number]":case"[object Boolean]":case"[object RegExp]":case"[object Date]":r=t;break;default:r=function(t){var e;if(!t)return t;document.createElement("div").innerText=t;try{e=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}(t)}catch(n){e=t}return e}(t)}return r}return{mergeObj:function(t,e){var i=JSON.parse(JSON.stringify(t));return n(i,e),i},escapeHtml:i,runSeries:function(t,n,i,r){function a(t){return null===t||void 0===t}function s(e,r){if(e||!1===e?(u[l]=e,d=!0):a(r)||l>-1&&(c[l]=r),++l>=o)return d?i(u,c):i(null,c);try{t[l].apply(null,n)}catch(t){s(t)}}var o=t.length,l=-1,u=[],d=!1,c=[];if(a(n)&&(n=[]),F.array(t)){if(a(i)&&(i=e),0===o)return i(null,c);n.push(s),s()}else O.is("core")&&O.warn("Invalid tasks for series.")}}}();u.prototype.addRoute=function(t,e){var n=null,i=[],r=null;return F.regex(t)?r=t:(n=function(t){return t.replace(/\//g,"\\/")}(t).replace(/:([\w-]+)/g,function(){return i.push(arguments[1]),"([\\w\\-\\.]+)"}),r=new RegExp("^"+n+"$")),this.map.push({id:this.id++,url:t,re:r,module:e.module,fn:e.fn,start:!!e.start,loader:!!e.loader,args:i,dep:e.dep,title:e.title}),e.start&&!this.startRoute&&/^[\/\.\w_-]+$/.test(t)&&(this.startRoute=t),this.id-1},u.prototype.addRouteRedirect=function(t,e){"string"==typeof t&&"string"==typeof e&&t!==e&&(this.redirects[t]=e)},u.prototype.removeRouteRedirectFrom=function(t){delete this.redirects[t]},u.prototype.removeRouteRedirectTo=function(t){for(var e in this.redirects)this.redirects[e]===t&&delete this.redirects[e]},u.prototype.navigate=function(t,e,n){var i=null;if(0==this.map.length)return O.warn("No Route has been added yet");void 0===e&&(e=!0),n||(n=this),i=this._parseRoute(t,n),this.__curURL=i,this.__prevUrl=window.location.href,i&&this._processRouting(i,n,t,e)},u.prototype.setRequireVersion=function(t){this.requireVersion=t},u.prototype.removeRequireVersion=function(){delete this.requireVersion},u.prototype.goBack=function(t){var e,n,i,r,a=null,s=null,o=this.__tracker,l=this.map,u=[];if(t&&t.dep){for(O.info("options Provided for goBack",t),n=l[o[o.length-1].id-1],i=t&&t.dep,r=0===(i=!isNaN(Number(i))&&i>0?i:1);n.dep&&i;)n=l[n.dep-1],u.push(n),i--;t:for(;u.length>0;){n=u.pop();e:for(var d=0;d<o.length;d++){if(o[d].id==n.id){o.length=d+1,e=!0;break t}if(function(t,e,n){for(var i=t[n-1].dep;i;){if(i==e)return!0;i=t[(n=i)-1].dep}return!1}(l,n.id,o[d].id)){if(/^\/[/.\w-]+$/.test(l[n.id-1].url)){o.length=d,e=!0,o.push({id:n.id,url:l[n.id-1].url});break t}break e}}}}t&&t.level&&!isNaN(Number(t.level))&&t.level>0&&o.length>t.level&&(o.length=o.length-t.level),o.length>1&&!r?(a=(s=o[o.length-2]).url,O.info("Navigated From URL found to be",s.url)):(a=this._getParentRoute(e?o[o.length-1]:null),O.info("Parent Url => ",a)),a&&this.appCtx.navigate(a)},u.prototype._getParentRoute=function(t){var e,n,i=this.map,r=/\/[^\/]+?$/,a=!1,s=null;t?(e=t.id,n=t.url):(e=this.__curRoute.id,n=this.__curRoute.urlOri);t:for(;s!==n;){s=n,n=n.replace(r,"");for(var o=0;o<i.length;o++)if(e!=i[o].id&&i[o].re.test(n)&&!i[o].loader){a=!0;break t}}return a?n:this.startRoute},u.prototype._parseRoute=function(t,e){var n="";return void 0===t?(O&&O.is("router")&&routerwarn("URL is undefined"),null):(e&&e.href&&(t=e.href),(t=t.replace(a(this.config.prefix),"")).length>1&&"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),/\?([\w-]+(=[\w-]*)?(&[\w-]+(=[\w-]*)?)*)?/.test(t)&&(n=function(t){var e={};return(t=t.split("&")).forEach(function(t){t=t.split("="),e[t[0]]=t[1]}),e}(t.substring(t.indexOf("?")+1)),t=t.substring(0,t.indexOf("?"))),{url:t,queryString:n})},u.prototype._getRoutesStack=function(t,e,a,o){var l=t.url,u=t.queryString,d=null,c=-1,h=-1,f=null,p=!1,g=!1,m="";this.routesSeq=[],e.href||(e="appCtx");for(var v=0,b=this.map.length,y=0,C=this.map.length;y<C;){for(v=0;v<b;v++)if(f=this.map[v],p=!1,d=null,g=!1,-1===c&&f.re.test(l)?(l.match(f.re)[1]&&(d=i(l.match(f.re).slice(1),f.args)),p=!0,g=o,O&&O.is("router")&&O.info("Route matched : "+l+" ==> "+f.url)):-1!==c&&f.id===c&&(g=!1,p=!0,d=r(this.routesSeq,h,f.args),f.args.length>0&&(a=d?s(f.url,d):f.url),O&&O.is("router")&&O.info("Dependent route : "+l+" ==> "+f.url)),p){m=d&&(m=f.title.match(/arg([\d]+)/))?d["arg"+m[1]]:f.title,this.routesSeq.push({id:f.id,module:f.module,func:f.fn,depRouteId:f.dep,title:m,params:d,queryString:u,caller:e,urlOri:a,pushStateFlag:g});break}if(v===b||!this.map[v].dep)break;h=this.map[v].id,c=this.map[v].dep,y++}if(!p)return O&&O.is("router")&&O.warn("No route found for url : "+l),void $E.dispatch(document.body,"hbRouter:routenotfound");var E=[];E=n(this.routesSeq),this._removeRoutedRoutes(),this.prevRoutesSeq=n(E)},u.prototype._processRouting=function(t,e,n,i){function r(t){t?this.processNextRouteInSequence():O&&O.is("core")&&O.log("Interrupted at beforeRoute")}this._getRoutesStack(t,e,n,i),this.appCtx&&this.routesSeq.length>0?this.appCtx.extension.callExtension("beforeRoute",[{curRoutesStack:this.routesSeq,prevModule:this.prevModule}],r.bind(this)):r.call(this,!0)},u.prototype._removeRoutedRoutes=function(){var t=this.routesSeq.length,e=this.prevRoutesSeq.length,n=t-e,i=0;n>0?i=n:n<0||(i=1);for(var r=t-1,a=e-1;r>=i&&a>=0&&(this.routesSeq[r].id===this.prevRoutesSeq[a].id&&0!==r);r--,a--)this.routesSeq.pop();this.prevRoutesSeq=[]},u.prototype.processNextRouteInSequence=function(){this.__complete=!1;var t=this.routesSeq.length-1;this.__curRoute=this.routesSeq[t],this.addTrack(),this.appCtx?this.appCtx.extension.callExtension("beforeModuleLoad",[this.routesSeq[t]],c.bind(this)):c.call(this,!0)},u.prototype.addTrack=function(){if(!(this.routesSeq.length>1)){for(var t=this.__tracker,e=this.__curRoute,n=-1,i=0;i<t.length;i++)if(d(t[i].url,e.urlOri)||e.id===t[i].id?n=i:this.map[e.id-1].start&&(n=0),n>-1){t.length=n;break}t.push({id:e.id,url:e.urlOri})}},u.prototype.getNavigationUrl=function(){return this.__curURL&&this.__curURL.url},u.prototype._renderTitle=function(){var t=/:([\w.-]+)/,e=this.routesSeq.length>0&&this.routesSeq[this.routesSeq.length-1]||this.__curRoute,n=e.title;t.test(n)&&(n=e.params[n.match(t)[1]]),n!==M&&!1!==n&&(n=this.config.titleFormat.replace("{title}",n),document.title=n)},u.prototype._afterModuleLoad=function(t,e,n){this._renderTitle(),Hummingbird&&("appCtx"===t&&e&&n?this.appCtx.hsNav._.changeUrl({url:e},"",e):t&&"A"===t.tagName&&t.href!==M&&this.appCtx.hsNav._.changeUrl({url:e},"",e))},u.prototype._handleRequireErr=function(t){("scripterror"===t.requireType||"timeout"===t.requireType&&t.requireModules)&&(!1===require.specified(t.requireModules.toString())?O&&O.is("router")&&O.error("Module "+t.requireModules+" is not defined in config file."):O&&O.is("router")&&O.error("Check if module file exists and is defined in config file. Module name : "+t.requireModules))};var U=function(){function t(t,e){this.routeFn=t,this.appCtx=e,this.init()}function e(e,n){this._=new t(e,n),this.appCtx=n,this.initHistory()}if(P){var n=window;return t.prototype.init=function(){this.historySupport?n.addEventListener("popstate",this.routeFn,!1):O.warn("Browser doesnot support HTML5 history api.")},t.prototype.historySupport=!(!n.history||!n.history.pushState),t.prototype.changeUrl=function(t,e,i){var r=window.location.href;this.historySupport&&(r=r.replace(a(this.appCtx.configs.prefix),""))!==i&&n.history.pushState(t,e,i)},t.prototype.clickHandler=function(t,e){t.id=t.getAttribute("id")||(new Date).getTime();var n=this;t.addEventListener("click",function(i){i.preventDefault();var r=t.getAttribute("href");e?n.routeFn.call(t,r,!0):n.historySupport&&n.changeUrl({url:r},"",r)},!1)},t.prototype._bind=function(t,e){for(var n,i=0;n=t[i];i++)$D.hasClass(n,"jsnav-exclude")||this.clickHandler(n,e)},e.prototype.hookNewUrls=function(t){var e;(e="string"==typeof t?$D.get("#"+t):t)?(this._._bind($D.getAll("a.jsnav",e),!0),this._._bind($D.getAll(".jsnav-tab a",e),this._.clickHandler,!1),this._._bind($D.getAll("li.jsnav",e),!0)):O.is("router")&&O.warn("Cannot hook new urls for targetId : ",t)},e.prototype.initHistory=function(){this._._bind($D.getAll("a.jsnav"),this._.clickHandler,!0),this._._bind($D.getAll("li.jsnav"),this._.clickHandler,!0)},e}}(),V=function(t){this.value=t,this.objType=typeof t};V.add=function(t){Object.defineProperty(V.prototype,t.name,{value:t.method})},V.prototype={escapeRegExp:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},lower:function(){return this.value=this.value.toLowerCase(),this},upper:function(){return this.value=this.value.toUpperCase(),this},subStr:function(t,e){return this.value=e?this.value.substr(t,e):this.value.substr(t),this},remove:function(t){t=this.escapeRegExp(t);var e=new RegExp(t,"g");return this.value=this.value.replace(e,""),this},removeFirst:function(t){t=this.escapeRegExp(t);var e=new RegExp(t);return this.value=this.value.replace(e,""),this},append:function(t){return this.value=this.value+t,this},prepend:function(t){return this.value=t+this.value,this},truncate:function(t){return this.value=this.value.substr(0,t),this},trim:function(){return this.value=this.value.replace(/^\s+|\s+$/g,""),this},camelize:function(){return this.value=function(t){return t.replace(/(^[a-zA-Z])|[ \.\?!]([a-zA-Z])/g,function(t){return 1===t.length?t.charAt(0).toUpperCase():t.charAt(0)+t.charAt(1).toUpperCase()})}(this.value),this},lstrip:function(){return this.value=this.value.replace(/^(\s+|\t+)/g,""),this},rstrip:function(){return this.value=this.value.replace(/(\s+|\t+)$/g,""),this},plus:function(t){var e=Number(this.value);if(isNaN(e)||"number"!=typeof t)throw new Error("Cannot perform plus operation on non-numerical value");return this.value=e+t,this},minus:function(t){var e=Number(this.value);if(isNaN(e)||"number"!=typeof t)throw new Error("Cannot perform minus operation on non-numerical value");return this.value=e-t,this},multiply:function(t){var e=Number(this.value);if(isNaN(e)||"number"!=typeof t)throw new Error("Cannot perform multiply operation on non-numerical value");return this.value=e*t,this},divide:function(t){var e=Number(this.value);if(isNaN(e)||"number"!=typeof t)throw new Error("Cannot perform divide operation on non-numerical value");return this.value=e/t,this},modulo:function(t){var e=Number(this.value);if(isNaN(e)||"number"!=typeof t)throw new Error("Cannot perform modulo operation on non-numerical value");return this.value=e%t,this},format:function(t){var e=new Date(this.value),n=e.getDate(),i=e.getDay(),r=e.getMonth(),a=e.getFullYear(),s=a+"",o=e.getHours()>11?e.getHours()-12:0==e.getHours()?12:e.getHours(),l=e.getHours(),u=e.getMinutes(),d=e.getSeconds(),c=e.getHours()<12?"a.m":"p.m",h=e.getHours()<12?"a":"p",f=e.getHours()<12?"AM":"PM",p={d:n,dd:n>9?n:"0"+n,ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i],yy:s.substr(2),yyy:s.substr(1),yyyy:a,m:r,mm:r>9?r:"0"+r,mmm:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"][r],mmmm:["January","February","March","April","May","June","July","August","September","October","November","December"][r],M:u,MM:u>9?u:"0"+u,h:o,hh:o>9?o:"0"+o,H:l,HH:l>9?l:"0"+l,s:d,ss:d>9?d:"0"+d,t:c,tt:h,a:f};return t=t.replace(/d{1,3}|m{1,4}|y{2,4}|s{1,2}|h{1,2}|H{1,2}|s{1,2}|t{1,2}|M{1,2}|a{1,2}/g,function(t){return p[t]?p[t]:t}),this.value=t,this},split:function(t,e){return t=new RegExp(this.escapeRegExp(t),"g"),this.value=void 0!==e&&null!==e?this.value.split(t)[e]:this.value.split(t),this},replace:function(t,e){return this.value=this.value.replace(new RegExp(t,"g"),e),this},json:function(t){return this.value=JSON.stringify(this.value,null,isNaN(t)?0:t),this.escHtml()},toJSONString:function(){return this.json.apply(this,arguments)},parseJSON:function(){return JSON.parse(this.value)},escHtml:function(){if("string"!=typeof this.value)return this;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return this.value=this.value.replace(/[&<>"'\/]/g,function(e){return t[e]}),this},encodeURIComponent:function(){return this.value=H.encodeURIComponent(this.value),this},escapeNewLine:function(){return this.value=this.value.replace(/\n/g,"\\n"),this},first:function(){return this.value.length>0&&(this.value=this.value[0]),this},last:function(){return this.value.length>0&&(this.value=this.value[this.value.length-1]),this},defVal:function(t){return this.value&&""!==this.value.trim()?this.value:t},join:function(){return this.value&&F.array(this.value)?this.value=this.value.join(","):this.value="",this},toValue:function(){return this.value}};var Y={if:{parserRule:"if EXPRESSION",lexerRules:{EXPRESSION:".*",WHITESPACE:"\\s"},opensBlock:!0},else:{parserRule:"else",opensBlock:!0,closesBlock:["if","elif","when"]},elif:{parserRule:"elif EXPRESSION",lexerRules:{EXPRESSION:".*",WHITESPACE:"\\s"},opensBlock:!0,closesBlock:["if","elif"]},endif:{parserRule:"endif",closesBlock:["if","else","elif"]},assign:{parserRule:"assign VARIABLE *= *EXPRESSION",lexerRules:{VARIABLE:"[\\w\\.$]+",WHITESPACE:"\\s",EXPRESSION:".*"}},capture:{parserRule:"capture VARIABLE",lexerRules:{VARIABLE:"[\\w.]+",WHITESPACE:"\\s"},opensBlock:!0},endcapture:{parserRule:"endcapture",closesBlock:["capture"]},for:{parserRule:{In:"for VARIABLE in LIST",InObj:"for VARIABLE, VARIABLE in LIST",Range:"for VARIABLE in range\\(START, STOP,? ?STEP?\\)",Slice:"for VARIABLE in LIST\\[START:STOP:?STEP?\\]",Partial:"for VARIABLE in LIST partial VARIABLE ARGS?",PartialObj:"for VARIABLES in LIST partial VARIABLE ARGS?"},lexerRules:{VARIABLE:"\\s?[\\w.]+\\s?",VARIABLES:"[\\w,\\s]+",LIST:"\\s?[\\w.]+\\s?",START:"\\s?[\\d|\\w]*\\s?",STOP:"\\s?[\\d|\\w]*\\s?",STEP:"\\s?[\\d|\\w]*\\s?",WHITESPACE:"\\s?",ARGS:"\\([\\w,\\s]+\\)"},opensBlock:!0},forelse:{parserRule:"forelse",closesBlock:["for"],opensBlock:!0},endfor:{parserRule:"endfor",closesBlock:["for","forelse"]},cycle:{parserRule:'cycle "VALUES"',lexerRules:{VALUES:".*"}},case:{parserRule:"case VARIABLE",lexerRules:{VARIABLE:"[\\w.]+",WHITESPACE:"\\s"},opensBlock:!0},when:{parserRule:"when VALUE",lexerRules:{VALUE:'".*"|NUMBER|JSON'},opensBlock:!0,closesBlock:["when","case"]},endcase:{parserRule:"endcase",closesBlock:["else","when","case"]},raw:{parserRule:"raw",opensBlock:!0},endraw:{parserRule:"endraw",closesBlock:["raw"]},comment:{parserRule:"comment",opensBlock:!0},endcomment:{parserRule:"endcomment",closesBlock:["comment"]},macro:{parserRule:"macro MACRONAME \\(ARGS?\\)",lexerRules:{MACRONAME:"[\\w.]+",ARGS:"[\\w,\\s]+",WHITESPACE:"\\s?"},opensBlock:!0},endmacro:{parserRule:"endmacro",closesBlock:["macro"]},include:{parserRule:'include "PATH"',lexerRules:{PATH:".*"}},debug:{parserRule:'debug "TYPE"',lexerRules:{TYPE:"[\\w,\\s]+"}},options:{parserRule:'options "OPTIONSYNTAX"',lexerRules:{OPTIONSYNTAX:".*"}}},W=Object.prototype.hasOwnProperty,z={NUMBER:"-?[\\d]+.?[\\d]*",JSON:"",BOOLEAN:"true|false"},X=/([A-Z]+)/g,G=p.prototype;G.syntaxError=function(t,e){throw new Error("\nSYNTAX ERROR: "+t+" \nLine no: "+e.lineno+" \nCode: "+e.value+" \nid: "+e.id)},G.error=function(t,e){throw new Error("\nSYNTAX ERROR: "+t+" \nLine no: "+e.lineno+" \nCode: "+e.value+" \nid: "+e.id)},G.getTokenData=function(t){var e=this,n=[],i=function(t,e){t="^"+t+"$";var i=null;if(i=new RegExp(t,"g").exec(e)){for(var r=1,a=i.length;r<a;r++)n.push(i[r]);return!0}return!1},r={};return"block"===t.type?r=function(r){var a,s,o="",l=null,u=!1,d="";(o=(r=function(t){return t=t.trim().match(/{%(.*)%}/)[1].trim()}(r)).match(/^([\w]+)/))?o=o[1]:e.syntaxError("Tag not specified. ",t);var c=Y[o];if(c||e.syntaxError("Undefined block. ",t),"string"==typeof(s=c.parserRule))l=(l=c.hasOwnProperty("lexerRules")&&c.lexerRules.hasOwnProperty("WHITESPACE")?s.replace(/ {1,}/g,c.lexerRules.WHITESPACE):s.replace(/ {1,}/g,"\\s")).replace(X,function(t){return"("+(a=function(t){for(var e in z)h(z,e)&&(t=t.replace(e,z[e]));return t}(c.lexerRules[t]))+")"}),u=i(l,r);else for(var f in s)if(h(s,f)&&(l=s[f],l=l.replace(X,function(t){return"("+c.lexerRules[t]+")"}),l=l.replace(/ {1,}/g,c.lexerRules.WHITESPACE),u=i(l,r))){d=f;break}return u||e.syntaxError("invalid ",t),c.endTag&&e.endTags.push(c.endTag),{tag:o,subTagType:d,data:r,args:n,endTag:c.endTag}}(t.value):"expression"===t.type?r=function(t){return{data:function(t){return t=t.trim().match(/{{(.*)}}/)[1].trim()}(t)}}(t.value):"code"===t.type&&(r=function(t){return{data:function(t){return t=t.trim().match(/{#(.*)#}/)[1].trim()}(t)}}(t.value)),function(t,e){for(var n in e)h(e,n)&&(t[n]=e[n])}(r,t),r};G.init=function(){if(""!==this.str){var t,e=/[\n]/g,n="",i="",r=0,a=null,s=1,o=[],l=new f("ast");l.isRoot=!0;for(var u,d,c,h,p=l,g=!1,m=!1,v=null,b=this.str.split(this.tokenRe),y=0,C=b.length;y<C;)g=!1,m=!1,d=null,v=(a=(n=b[y]).match(e))?a.length:0,i=this.getTokenType(n),t=new f(c=this.getTokenData({type:i,value:n,lineno:s,index:r++,id:this.id})),"block"===i&&((u=Y[c.tag]).closesBlock&&(m=!0,d=u.closesBlock,h=o.pop(),-1===d.indexOf(h.tag)&&this.error("Unclosed block",h)),u.opensBlock&&(g=!0,o.push(c))),m?(d&&-1!==d.indexOf(p.data.tag)?((p=p.parent).children.push(t),t.parent=p):(t.parent=p,p.children.push(t)),g&&(p=t)):g&&(t.parent=p,p.children.push(t),p=t),g||m||(p.children.push(t),t.parent=p),this.tokens.push(c),s+=v,"block"===i&&c,y++;if(this.ast=l,0!==o.length)for(var E=0,x=o.length;E<x;E++)this.error("Unclosed block",o[E])}},G.getTokenType=function(t){return/{%.*?%}/.test(t)?"block":/{{.*?}}/.test(t)?"expression":/{#.*?#}/.test(t)?"code":"data"};var K=/^[a-zA-Z_$.]+[\w$]*$/,J="opt",Z=b.prototype;Z.nextToken=function(){return this.tokens[++this.currTokenIndex]},Z.hasNextToken=function(){return this.currTokenIndex+2<=this.tokens.length},Z.parse=function(t){this.walkAst(this.ast);return this.createViewObj(this.getClassStr("main",t.models,t.contexts))},Z.walkAst=function(t){for(var e=0,n=t.children.length;e<n;e++)this.astIndex=e,this.astCurr=t.children,this.parseToken(t.children[e])},Z.parseUntilBlocks=function(){},Z.getClassStr=function(t,e,n){return"main"===t?this.createMainClass(this.tmpl_id,this.viewFnStr,e,n):this.createClass(this.tmpl_id,this.viewFnStr,e,n)},Z.parseToken=function(t){var e=t.data;this.currNode=t,this.currToken=e,this.currLine=e.lineno,this.currValue=e.value,this.currType=e.type,this.addNewLine(),"block"===this.currType?this.parseBlock():"data"===this.currType?this.parseData():"expression"===this.currType?this.parseExpr():"code"===this.currType&&this.parseCode(),this.showErrInfo&&(this.notFlag?this.notFlag=!0:this.addCode("\n"+this.indent()+"tk_index = "+e.index+";")),++this.currTokenIndex},Z.getNewIndexVar=function(){return"i_v"+this.indexVars++},Z.genLoopId=function(){return"l_"+this.loops++},Z.createViewObj=function(t,e){var n=this,i="{\n";return i+='\t"tmpl_id": "'+this.tmpl_id+'",\n',i+='\t"macros": {',Object.keys(this.macros).forEach(function(t,e){e>0&&(i+="\n\t\t,"),i+="\n    "+t+":"+n.macros[t].trim()}),i+="\n\t},\n",i+='\t"partials": {',Object.keys(this.partials).forEach(function(t,e){e>0&&(i+="\n\t\t,"),i+="\n\t\t"+t+":"+n.partials[t].trim()}),i+="\n\t},\n",i+='\t"viewFn": '+t,e&&(i+=',\n"macros": '+e),i+="}"},Z.createClass=function(t,e,n){var i="";return n=n||"",i+="function "+t+" ("+n+") {\n",i+=this.indent(1)+'var v = ""; \n__fn_code_here__\n',i+=this.indent()+"return v;\n",(i+=this.indent()+"}").replace("__fn_code_here__",e)},Z.createMainClass=function(t,e,n,i){var r="";return this.indentLevel=1,r+="function "+t+"(ctx, "+J+") {\n",r+=this.indent(1)+'"use strict";\n',r+=this.indent(1)+"ctx = ctx || {};\n",r+=this.indent()+"var t = this, u = t.u, e = u.exists, f = t.filters;\n",this.inBrowser&&(r+=this.indent()+"var tk_index = 0;\n",r+=this.indent()+"try {\n",this.increaseIndent()),r+=this.indent()+'var v = "";',r+=this.indent()+"__fn_code_here__",r+=this.indent()+"return v;\n",this.inBrowser&&(r+=this.indent(-1)+"} catch (e) {\n",r+=this.indent(1)+'console.log(e, "\\nline no: ", t.tokens[ tk_index + 1 ].lineno, "\\ncode: ", t.tokens[ tk_index + 1 ].value);\n',r+=this.indent(-1)+"}\n"),(r+=this.indent(-1)+"}\n").replace("__fn_code_here__",e)},Z.error=function(t,e){var n,i;throw e?(n=e.value,i=e.lineno):(n=this.currValue,i=this.currLine),new Error("\n"+t+"\nCode: "+n+"\nLine no. : "+i)},Z.parseCode=function(){this.addCode(this.currToken.data)},Z.addMacroCode=function(t,e){this.macroStr+=this.indent()+t,!0===e?this.indentLevel++:!1===e&&this.reduceIndent(),this.addNewLine()},Z.addPartialCode=function(t,e){this.viewFnStr+=this.indent()+t,!0===e?this.indentLevel++:!1===e&&this.reduceIndent(),this.addNewLine()},Z.addCode=function(t,e){e||(e=0),"macro"===this.currCodeType?this.macroStr+=this.indent()+t:"partial"===this.currCodeType?this.partialStr+=this.indent()+t:this.viewFnStr+=this.indent()+t,this.modifyIndent(e),this.addNewLine()},Z.addStr=function(t){"macro"===this.currCodeType?this.macroStr+=this.indent()+'v += "'+m(v(t))+'";':"partial"===this.currCodeType?this.partialStr+=this.indent()+'v += "'+m(v(t))+'";':this.viewFnStr+=this.indent()+'v += "'+m(v(t))+'";',this.addNewLine()},Z.addExpr=function(t){"macro"===this.currCodeType?this.macroStr+=this.indent()+"v += "+t+";":"partial"===this.currCodeType?this.partialStr+=this.indent()+"v += "+t+";":this.viewFnStr+=this.indent()+"v += "+t+";"},Z.addNewLine=function(){"macro"===this.currCodeType?this.macroStr+="\n":"partial"===this.currCodeType?this.partialStr+="\n":this.viewFnStr+="\n"},Z.modifyIndent=function(t){"macro"===this.currCodeType?this.indentLevelMacro=this.indentLevelMacro+t:"partial"===this.currCodeType?this.indentLevelPartial=this.indentLevelPartial+t:this.indentLevel=this.indentLevel+t},Z.reduceIndent=function(){this.modifyIndent(-1)},Z.increaseIndent=function(){this.modifyIndent(1)},Z.indent=function(t){if(!this.inBrowser)return"";var e,n="",i=0;i=void 0===t?0:t,"macro"===this.currCodeType?(this.indentLevelMacro=this.indentLevelMacro+i,e=this.indentLevelMacro):"partial"===this.currCodeType?(this.indentLevelPartial=this.indentLevelPartial+i,e=this.indentLevelPartial):(this.indentLevel=this.indentLevel+i,e=this.indentLevel);for(var r=e-1;r>=0;r--)n+="\t";return n},Z.getFormFieldType=function(t){var e,n=!0;for(n=this.tokens[t];n&&null===(e=y(n.value));)t--,n=this.tokens[t];return e},Z.genMacroCall=function(t){var e,n,i=t.match(/^([\w.]+)\s?\((.*)\)$/),r=i[1],a=i[2],s=a&&a.split(","),o="",l="";return void 0!==a&&Array.isArray(s)&&s.forEach(function(t,e){t=t.trim(),0!==e&&(o+=","),K.test(t)?o+="ctx."+s[e]:o+=s[e]}),l=r+"( "+J+(o.trim()?", ":"")+o,e=o.trim(),n='"'+r+'"',o="if (t.macros."+r+") { v += t.macros."+l+" ) } else { v+= u._resolveMacro(ctx, "+J+", t.viewEngineInstance, "+n+", ["+e+"])}"},Z.processPartialArgs=function(t){if(!t)return"";var e=" ";return t.forEach(function(t,n){e+=", ctx."+t.trim()}),e},Z.processTextArea=function(){for(var t,e=this.currTokenIndex;t=this.tokens[e].value,!/<\/textarea>/.test(t);)e++;return e},Z.parseExpr=function(){var t,e,n,i=/on *"(.*)"/,r="",a=null,s=this.currToken.data,o="";/([|]+)/g.test(s)?(s=function(t){for(var e=0,n=t.length,i=[],r=0,a=!1;e<n;)"("===t[e]?a=!0:!0===a&&")"===t[e]&&(a=!1),a||"|"!==t[e]?(void 0===i[r]&&(i[r]=""),i[r]+=t[e]):r++,e++;return{var:i[0].trim(),filters:i.slice(1)}}(s),o+="new f( u._r(ctx, "+J+', "'+s.var+'"))',s.filters.forEach(function(t){if(!1===/\w+\(.*\)/.test(t))o+="."+t+"()";else{e=function(t){var e,n=t.match(/([\w]+)\((.*)\)/),i={filterName:n[1],args:[]};return n&&(n=n[2].split(/,(?=(?:(?:[^"']*"'){2})*[^"']*$)/)).forEach(function(t){e=/^'.*'$/.test(t.trim())||/^".*"$/.test(t.trim())?"string":isNaN(Number(t))?"variable":"constant",i.args.push({type:e,val:t.trim()})}),i}(t),n=e.args,o+="."+e.filterName+"(";for(var i=0,r=n.length;i<r;i++)0!==i&&(o+=", "),"variable"===n[i].type&&(o+="ctx."),o+=n[i].val;o+=")"}}),o+=".value",this.addExpr(o)):i.test(s)?this.addStr('data-event="'+s.match(i)[1]+'"'):/bind ([\w+.]*)/.test(s)?(r=this.processInputField(s),a=this.getFormFieldType(this.currToken.index),this.addStr('data-bind="'+r+'"'),"input"===a?(this.addNewLine(),this.addStr(' data-value="'),this.addCode("v += new f(u._r(ctx, "+J+', "'+r+'")).escHtml().value;'),this.addStr('"')):"select"===a?(this.addStr(' value="'),this.addCode("v += new f(u._r(ctx, "+J+', "'+r+'")).escHtml().value;'),this.addStr('"')):"textarea"===a&&(this.addStr(' value="'),this.addCode("v += new f(u._r(ctx, "+J+', "'+r+'")).escHtml().value;'),this.addStr('"'))):(t=function(t){return t.match(/([\w]+)\((.*)\)/)}(s))?"i18n"===t[1]?this.addCode("v += opt.i18n("+function(t){var e=t.split(",");return t="",e.forEach(function(e,n){e=e.trim(),n>=1?(t+=", ",K.test(e)?t+=" ctx."+e:t+=e):t+=e}),t}(t[2])+");"):this.addCode(this.genMacroCall(s)):!function(t){return"loop"===t.split(".")[0]}(s)?this.addCode("v += "+C(s)+";"):this.addCode("v += u._r("+s+");")},Z.processInputField=function(t){var e;if(e=t.match(/^bind\s+([\w\.?]+)$/))e=e[1].trim();else{if(!(e=t.match(/^bind\s+([\w\.]+\[\d+\][\w\.]*)$/)))throw new Error("invalid bind syntax");e=e[1].trim()}if(""===e)throw new Error("invalid bind syntax");return e};var Q=["loop.index","loop.index0","loop.first","loop.last","loop.revindex","loop.revindex0","loop.length"];Z.parseIf=function(t){t.args;this.addCode("if ("+C(t.args[0])+") { ",1),this.walkAst(this.currNode)},Z.parseEndif=function(t){this.addNewLine(),this.reduceIndent(),this.addCode("}")},Z.parseElse=function(t){var e=this;this.reduceIndent();var n=(this.currNode,this.currNode.parent,e.getPrevNode().data.tag);"if"===n||"elif"===n?this.addCode("} else {",1):"when"===n&&this.addCode("default:",1),this.walkAst(this.currNode)},Z.parseElif=function(t){this.reduceIndent(),this.addCode("} else if ("+C(t.args[0])+") { ",1),this.walkAst(this.currNode)},Z.varExists=function(){},Z.parseAssign=function(t){var e=t.args,n=e[0],i=e[1];this.addCode("ctx."+n+" = "+C(i,{skipExpr:!0})+";")},Z.parseCapture=function(t,e){var n=t.args[0];this.currTokenIndex++,this.addCode("ctx."+n+" = (function(){",1),this.addCode('var v = "";'),this.walkAst(this.currNode),this.addNewLine(),this.addCode("return v;"),this.reduceIndent(),this.addCode("})();")},Z.parseEndcapture=function(){},Z.getPrevNode=function(){return this.astCurr[this.astIndex-1]},Z.parseEndfor=function(t,e){var n=this.getPrevNode();this.reduceIndent(),"Partial"!==n.data.subTagType&&"PartialObj"!==n.data.subTagType&&(this.addCode("}",-1),this.addCode("}",-1),this.unclosedForElse?this.addCode(")();"):this.addCode("})();"),this.unclosedForElse=!1)},Z.parseForIn=function(t){var e=t.args[0],n=t.args[1],i=this.getNewIndexVar(),r=this.genLoopId();this.currLoopCtx=r,this.addCode("(function() {",1),this.addCode("ctx."+r+" = {};"),this.addCode("var loop = ctx."+r),this.addCode("if ("+function(t){var e="",n="ctx.";return(t=t.split(".")).forEach(function(t,i){0!==i?(n+="."+t,e+=" && "):n+=t,e+=n}),e}(n)+" && ctx."+n+".length > 0) {",1),this.addCode("for(var "+i+" = 0, len = ctx."+n+".length; "+i+" < len; "+i+"++) {",1),this.addCode("ctx."+e+" = ctx."+n+"["+i+"];"),this.addCode("loop = u.genLoopObj(ctx."+n+", "+i+", len );"),this.walkAst(this.currNode)},Z.parseForInObj=function(t){var e=t.args[0],n=t.args[1],i=t.args[2],r=this.getNewIndexVar(),a=this.getNewIndexVar(),s=this.genLoopId();this.currLoopCtx=s,this.addCode("(function() {",1),this.addCode("ctx."+s+" = {};"),this.addCode("var loop = ctx."+s),this.addCode("var "+a+";"),this.addCode("if (ctx."+i+") {",1),this.addCode(a+" = Object.keys(ctx."+i+");"),this.reduceIndent(),this.addCode("}"),this.addCode("if ("+a+" && "+a+".length > 0) {",1),this.addCode("for(var "+r+" = 0, len = "+a+".length; "+r+" < len; "+r+"++) {",1),this.addCode("ctx."+e+" = "+a+"["+r+"];"),this.addCode("ctx."+n+" = ctx."+i+"[ ctx."+e+"];"),this.addCode("loop = u.genLoopObj(ctx."+i+", "+r+", len );"),this.walkAst(this.currNode)},Z.parseForRange=function(t){var e=t.args[0],n=t.args[1],i=t.args[2],r=t.args[3];r||(r=1),K.test(n.trim())&&(n="ctx."+n),K.test(i.trim())&&(i="ctx."+i),r.trim&&K.test(r.trim())&&(r="ctx."+r);var a=this.getNewIndexVar();this.addCode("(function() {",1),this.addCode("if (true) {",1),this.addCode("for (var "+a+" = "+n+";"+a+" < "+i+"; "+a+"+= "+r+"){",1),this.addCode("ctx."+e+" = "+a),this.walkAst(this.currNode)},Z.parseForSlice=function(t){var e=t.args[0],n=t.args[1],i=t.args[2],r=t.args[3],a=t.args[4];a||(a=1),r||(r="u._r(ctx, "+J+', "'+n+'").length'),K.test(i.trim())&&(i="ctx."+i),K.test(r.trim())&&(r="ctx."+r),a.trim&&K.test(a.trim())&&(a="ctx."+a);var s=this.getNewIndexVar();this.addCode("(function() {",1),this.addCode("if (true) {",1),this.addCode("var "+e+";"),this.addCode("for (var "+s+" = "+i+";"+s+" < "+r+"; "+s+"+= "+a+"){",1),this.addCode("ctx."+e+" = ctx."+n+"["+s+"]"),this.walkAst(this.currNode)},Z.parseForPartial=function(t){var e=t.args,n=e[0],i=e[1].trim(),r=e[2],a=this.getNewIndexVar(),s=E(e[3]),o="";if(s&&s.length>0&&(o=", "+s.join(",")),this.addCode("if (u.exists(ctx."+i+")) {",1),this.addCode("for (var "+a+" = 0 ;"+a+" <= (ctx."+i+".length - 1) ; "+a+"+= 1) {",1),this.addCode("ctx."+n+" = ctx."+i+"["+a+"]"),"view"!==this.currCodeType&&(this.prevCodeType=this.currCodeType),this.currCodeType="partial",this.addCode("function "+r+"("+J+", "+n+o+") {"),this.addCode("var t = this.parent, u = t.u, e = u.exists, f = t.filters;"),this.addCode("var ctx = {};"),this.addCode("ctx."+n+" = arguments[1];"),s){for(var l=0,u=s.length;l<u;l++)this.addCode("ctx."+s[l]+" = arguments["+(l+2)+"];");this.reduceIndent()}this.addCode("var tk_index = 0;"),this.addCode('var v = "";'),this.walkAst(this.currNode),"partial"!==this.currCodeType&&this.error("Error in parse code "),this.addNewLine(),this.addCode("return v;"),this.reduceIndent(),this.addCode("}"),this.addNewLine(),this.reduceIndent(),"view"!==this.prevCodeType?(this.currCodeType=this.prevCodeType,this.prevCodeType=null):this.currCodeType="view",this.addCode("v += t.partials."+r+"("+J+", ctx."+n+this.processPartialArgs(s)+");",-1),this.addCode("}",-1),this.addCode("}",-1),this.partials[r]=this.partialStr,this.partialStr=""},Z.parseForPartialObj=function(t){var e=t.args,n=e[0],i=n.split(",").map(function(t){return t.trim()}),r=e[1],a=e[2],s=E(e[3]),o="";s&&s.length>0&&(o=", "+s.join(","));var l=this.getNewIndexVar();if(this.addCode("if (u.exists(ctx."+r+")) {",1),this.addCode("var keys = Object.keys(ctx."+r+");"),this.addCode("var "+n+";"),this.addCode("for (var "+l+" = 0 ;"+l+" <= (keys.length - 1) ; "+l+"+= 1) {",1),this.addCode("ctx."+i[0]+" = keys["+l+"];"),this.addCode("ctx."+i[1]+" = ctx."+r+"[keys["+l+"]];"),"view"!==this.currCodeType&&(this.prevCodeType=this.currCodeType),this.currCodeType="partial",this.addCode("function "+a+"("+n+o+") {"),this.addCode("var t = this.parent, u = t.u, e = u.exists, f = t.filters;"),this.addCode("var tk_index = 0;"),this.addCode('var v = "";'),this.addCode("var ctx = {};"),this.addCode("ctx."+i[0]+" = arguments[0];"),this.addCode("ctx."+i[1]+" = arguments[1];"),s){this.addCode("for(var __i = 1, __len = arguments.length; __i < __len; __i++) {",1);for(var u=0,d=s.length;u<d;u++)this.addCode("ctx."+s[u]+" = arguments[__i]");this.reduceIndent(),this.addCode("}",-1)}this.walkAst(this.currNode),this.addNewLine(),this.addCode("return v;",-1),this.addCode("}",-1),"view"!==this.prevCodeType?(this.currCodeType=this.prevCodeType,this.prevCodeType=null):this.currCodeType="view",this.addCode("v += t.partials."+a+"(ctx."+i[0]+", ctx."+i[1]+this.processPartialArgs(s)+");",-1),this.addCode("}",-1),this.addCode("}",-1),this.partials[a]=this.partialStr,this.partialStr=""},Z.parseForelse=function(t){this.reduceIndent(),this.addCode("}",-1),this.addCode("} else {",1),this.unclosedForElse=!0,this.walkAst(this.currNode)},Z.parseBlock=function(){var t=this.currToken,e="parse"+g(t.tag)+g(t.subTagType);if("function"==typeof this[e])return this[e](t);this.error('Parse fn not written for tag "'+t.tag+'". ')},Z.parseComment=function(){},Z.parseEndcomment=function(){},Z.parseCase=function(t){this.addCode("switch(ctx."+t.args[0]+") {",1),this.notFlag=!0},Z.parseWhen=function(t){this.addCode("case "+t.args[0]+":",1),this.walkAst(this.currNode),this.addNewLine(),this.addCode("break;"),this.reduceIndent()},Z.parseEndcase=function(){this.reduceIndent(),this.addCode("}")},Z.parseRaw=function(t){this.currTokenIndex++;for(var e;"endraw"!==this.tokens[this.currTokenIndex].tag;)e=this.tokens[this.currTokenIndex],this.addStr(e.value),this.currTokenIndex++;this.currTokenIndex--},Z.parseEndraw=function(){},Z.parseData=function(){var t=this.currToken;this.addStr(v(t.value))},Z.parseMacro=function(t){"view"!==this.currCodeType&&(this.prevCodeType=this.currCodeType),this.currCodeType="macro";var e=this,n=t.args[0],i=t.args[1],r=i;""===r||void 0===r||null===r?r="()":(i=i.trim()).length>0&&(r=(r=i.split(",")).map(function(t){return t.trim()})),i=i||"",this.addCode("function "+n+"("+J+(i?", ":"")+i+") {",1),this.addCode("try {",1),this.addCode("var t = this.parent, u = t.u, e = u.exists, f = t.filters;"),this.addCode("var tk_index = 0;"),this.addCode("var ctx = {};"),Array.isArray(r)&&r.forEach(function(t){e.addCode("ctx."+t+"="+t+";")}),this.addCode('var v = "";'),this.walkAst(this.currNode),"macro"!==this.currCodeType&&this.error("Error in parse code."),this.addNewLine("macro"),this.addCode("return v;",-1),this.addCode("} catch (e) {",1),this.addCode('console.log("macro catch", e);'),this.addCode("}",-1),this.addNewLine("macro"),this.addCode("}"),this.macros[n]=this.macroStr,this.macroStr="","view"!==this.prevCodeType?(this.currCodeType=this.prevCodeType,this.prevCodeType=null):this.currCodeType="view"},Z.parseEndmacro=function(){},Z.parseOn=function(){},Z.parseCycle=function(t){var e=nt(t.args[0],",");this.addCode("if (loop.first){",1),this.addCode("t.cA = "+JSON.stringify(e)+"; t.cAI = 0; } else {"),this.addCode("t.cAI = t.cAI < t.cA.length - 1 ? t.cAI + 1 : 0;"),this.reduceIndent(),this.addCode("}"),this.addCode("v += t.cA[ t.cAI ];")},Z.parseInclude=function(t){var e,n,i,r,a,s,o,l=this.config.templatePath,u=t.args[0],d=this.config.ext;t.id;u&&0!==u.length||this.error('Incorrect path in include: "'+this.currToken.tag+'". ');var c=(u=u.trim().split(":"))[u.length-1];if(c=c.replace(/-/g,"_"),4===u.length||3===u.length?(l=l[u[0]]+"/"+u[1]+"/"+u[2],o=u[0]):2===u.length?l=l+"/"+u[0]+"/"+u[1]:1===u.length&&(l=l+"/"+u[0]),o||this.appCtx&&(o=this.appCtx.configs.viewPathDefaultKey),this.inBrowser){if(e=new RegExp('<script.*id="'+c+'".*>[\\s\\S]*?([\\s\\S]*?.*)<\/script>'),(n=new XMLHttpRequest).open("GET",l+d,!1),n.send(),200!==n.status)throw new Error("Error while include");a="return "+(a=(r=new b(c,(i=n.responseText.match(e))?i[1]:n.responseText,this.config,this.viewEngineInstance)).parse({tmpl_id:c}))+";",s=new Function(a)(),this.viewEngineInstance.set(s,r,o),o?this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'", "'+o+'");'):this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'");')}else o?this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'", "'+o+'");'):this.addCode("v += u.resolveInclude(ctx, "+J+', t.viewEngineInstance, "'+c+'");')},Z.parseDebug=function(t){for(var e,n=t.args[0],i=["models","model","modules"],r=(n=n.split(",")).length-1;r>=0;r--){if(e=n[r].trim(),-1===i.indexOf(e))throw new Error("Error at: "+JSON.stringify(t));"models"!==e&&"model"!==e||this.addCode("console.log(ctx, "+J+");"),this.addCode("console.log(ctx."+e+");")}},Z.parseOptions=function(t){var e,n,i=t.args[0].split(","),r=["model","text","value","emptyVal","defVal"],a=["model","defVal"],s=this,o={};i.length<=2?(e="arr",n=a):(e="obj",n=r),0===(i=i.map(function(t){return t=t.trim(),t=t.split(":"),t[0]=t[0].trim(),t[1]=t[1].trim(),-1===n.indexOf(t[0])&&s.error("Incorrect argument type in option tag : "+t[0]),o[t[0]]=t[1],t})).length&&this.error("Incorrect arguments in options block ");var l=this.getNewIndexVar(),u=this.getNewIndexVar();"obj"===e?(this.addCode("for (var "+l+" = 0, "+u+" = ctx."+o.model+".length; "+l+" < "+u+"; "+l+"++) {",1),this.addStr('<option value="'),this.addCode("v += ctx."+o.model+"["+l+']["'+o.value+'"]'),this.addStr('"'),this.addCode("if ("+o.defVal+" == ctx."+o.model+"["+l+']["'+o.value+'"]) {'),this.addStr(" data-default "),this.addCode("}"),this.addStr(">"),this.addCode("v += ctx."+o.model+"["+l+']["'+o.text+'"]'),this.addCode('v += "</option>"'),this.reduceIndent(),this.addNewLine(),this.addCode("}")):"arr"===e&&(this.addCode("for (var "+l+" = 0, "+u+" = ctx."+o.model+".length; "+l+" < "+u+"; "+l+"++) {",1),this.addStr('<option value="'),this.addCode("v += ctx."+o.model+"["+l+"]"),this.addStr('"'),this.addCode('if ("'+o.defVal+'" == ctx.'+o.model+"["+l+"]) {"),this.addStr(" data-default "),this.addCode("}"),this.addStr(">"),this.addCode("v += ctx."+o.model+"["+l+"]"),this.addCode('v += "</option>"'),this.reduceIndent(),this.addNewLine(),this.addCode("}"))};var tt=function(){function t(t){this.appCtx=t,this.extensions={appStart:{},beforeRoute:{},afterRoute:{},beforeModuleLoad:{},afterModuleLoad:{},beforeRender:{},afterRender:{},afterRenderCallBack:{},beforeModelUpdate:{},afterModelUpdate:{}}}return t.prototype.eventExists=function(t){return this.extensions.hasOwnProperty(t)},t.prototype.add=function(t){var e,n,i,r=this;if(F.object(arguments[1]))i=arguments[1],Object.keys(i).forEach(function(e){if(n=i[e],!r.eventExists(e))throw new Error('Inappropriate event. Event "'+e+"\" doesn't exist. ");r.extensions[e][t]=n});else{if(e=arguments[1],n=arguments[2],!this.eventExists(e))throw new Error('Inappropriate event. Event "'+e+"\" doesn't exist. ");this.extensions[e][t]=n}},t.prototype.callExtension=function(t,e,n){for(var i=Object.keys(this.extensions[t]),r=this.extensions[t],a=[],s=i.length-1;s>=0;s--)a.push(r[i[s]]);return e&&e[0]&&(e[0].appCtx=this.appCtx),q.runSeries(a,e,function(i,r){i?(O.is("extension")&&O.error("Event: ",t," Errors: ",i),n(!1,e)):n(!0,e[0])}),!0},t}(),et={},nt=function(t,e){var n=[];return t.split(e).forEach(function(t,e){(t=t.trim())&&n.push(t.trim())}),n},it={genLoopObj:function(t,e,n){return{first:0===e,last:e===n-1,index0:e,index:++e,even:e%2==0,odd:e%2!=0,revindex:n-e+1,revindex0:n-e,length:n}},remWS:function(t){return t.replace(/[\n\t\r]/g,"").replace(/>( *)</g,"><").replace(/ {2,}/g," ").trim()},exists:function(t){return null!==t&&void 0!==t},safeString:function(t){if("string"!=typeof t)return t;var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return t=t.replace(/[&<>"'\/]/g,function(t){return e[t]})},i18n:function(){return""},_r:function(t,e,n){if(void 0===n&&it.exists(t))return t;var i,r;return n=n.split("."),i=n[0]&&t.hasOwnProperty(n[0])?t:e.gctx,n.forEach(function(t,e){void 0!==i&&(!0===/([\w]+)\[(\d+)\]/.test(t)?(r=t.match(/([\w]+)\[(\d+)\]/),i=i[r[1]][r[2]]):i=i[t])}),void 0!==i&&null!==i||(i=""),i},_resolveMacro:function(t,e,n,i,r){for(var a=[e].concat(r),s=0;s<e.m_ctx.length;s++){var o=e.m_ctx[s].split("/"),l=n.cache[o[0]],u=l&&l[o[1]];if(u&&u.macros[i])return u.macros[i].apply(u.macros,a)}return H[i].apply(void 0,a)},resolveInclude:function(t,e,n,i,r){var a,s;return i=i.replace(/-/g,"_"),n.appCtx?(r&&"undefined"!==r||(r="sites_face"),(s=r?n.cache[r][i]:n.cache[i])?("development"!==n.appCtx.configs.mode&&n.set(s,"",r),a=s.viewFn(t,e)):(O.warn("Include tag: compiled template not found : ",i),a="")):a=n.cache[i].viewFn(t,e),a},_isT:function(t){return"false"!==t&&Boolean(t)}},rt=w.prototype;rt.render=function(t,e){var n=t.mountPoint,i=t.bindCtx;if("string"==typeof t.mountPoint&&(n=document.querySelector("#"+n)),!n)throw new Error("Mount Point is invalid.",n);t.toAppend||($E.purge(n),this.unbindDelegatedEvents(n),n.innerHTML=""),Hummingbird&&this.appCtx&&"production"===this.appCtx.configs.mode&&this.set(t,"",t.viewPathType);var r={gctx:t.globals||{},m_ctx:t.macros_ctx||[],i18n:this.appCtx.configs.i18n||it.i18n},a=x(t.viewFn(t.models,r)),s=a.querySelectorAll("[data-event]"),o=a.querySelectorAll("[data-bind]");n.getAttribute("data-hb-id")||n.setAttribute("data-hb-id","hb-"+parseInt(1e6*Math.random())),N(o,t.context),$(s,n,t.context),Hummingbird&&this.appCtx&&(t.template=a,this.appCtx.extension.callExtension("beforeRender",[t],_),i&&($E.bind(n,"keyup",i.__modify),$E.bind(n,"change",i.__modify))),n.setAttribute("data-tmpl-id","hb-"+t.templateId),n.appendChild(a),e&&e()},rt.purgeTemplate=function(t){"string"==typeof t&&(t=$D.get(t)),this.unbindDelegatedEvents(t),$E.purge(t)},rt.unbindDelegatedEvents=function(t){delete et[t.getAttribute("data-hb-id")];for(var e=$D.getAll("[data-hb-id]",t),n=e.length-1;n>=0;n--)D(e[n].getAttribute("data-hb-id"));t.hasAttribute("data-hb-id")&&D(t.getAttribute("data-hb-id"))};var at=null;rt.parse=function(t,e){var n=t.templateId,i=t.templateStr,r=t.data_contexts,a=t.data_models,s=t.viewPathType;if(!i)throw new Error("no template specified for template id: ",n);r||(r=""),a||(a=""),t.models=nt(a,","),t.contexts=nt(r,",");var o=new b(n,i,this.config,this,s),l=o.parse(t);if(e)return l;l="return "+l+";";var u=new Function(l)();return this.set(u,o,s),u.viewFn.bind(u)},rt.set=function(t,e,n){n?(this.cache[n]||(this.cache[n]={}),this.cache[n][t.tmpl_id]||(this.cache[n][t.tmpl_id]={}),this.cache[n][t.tmpl_id]=t):(this.cache[t.tmpl_id]||(this.cache[t.tmpl_id]={}),this.cache[t.tmpl_id]=t),t.u=it,t.viewEngineInstance=this,t.macros.parent=t,t.partials.parent=t,e&&(t.tokens=e.tokens),t.filters=V},rt.renderPartial=function(t){var n,i=this,r=function(t){var e,n;if(""===t||!t)throw"Invalid Partial";return-1!==(t=t.trim().split("."))[0].indexOf(":")&&(e=(n=t[0].split(":"))[0],t[0]=n[2]&&-1!==n[2].indexOf("/")?n[2].split("/")[1]:n[1]),{templateType:e,partialInfo:t}}(t.partial),a=r.templateType,s=r.partialInfo[0],o=r.partialInfo[1],l={gctx:t.globals||{},m_ctx:t.macros_ctx||[],i18n:this.appCtx.configs.i18n||it.i18n};n=a?this.cache[a][s]:this.cache[s],t.args.unshift(l);var u=n.partials[o].apply(n.partials,t.args),d="string"==typeof t.refEl?$D.get(t.refEl):t.refEl;if(!d)throw new Error("Invalid reference element for partial");u=x(u,!0),t.template=u;var c=function(t){for(var e=t;e&&e.hasAttribute;){if(e.hasAttribute("data-hb-id"))return e.getAttribute("data-hb-id");e=e.parentElement}}(d);return this.appCtx&&(this.appCtx.hsNav.hookNewUrls(u),this.appCtx.extension.callExtension("beforeRender",[t],function(){switch(N(u.querySelectorAll("[data-bind]")),$($D.getAll("[data-event]",u),c,t.context),t.insertType){case"append":$D.append(d,u);break;case"prepend":$D.prepend(d,u);break;case"insertAfter":$D.insertAfter(u,d);break;case"insertBefore":$D.insertBefore(d,u);break;case"replace":i.purgeTemplate(d),d.parentNode.replaceChild(u,d)}i.appCtx.extension.callExtension("afterRenderCallBack",[{tmplId:s,models:t.args,targetId:d,ctx:{},moduleNames:{},curTemplateId:11}],e)})),u},void 0===P&&(P="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window));var st=P?window.console:console,e=function(){},ot=["trace","log","info","warn","error"];return I.prototype.setLevel=function(t){var n=this;ot.forEach(function(t,i){i<n.logLevel?n[t]=e:n[t]=function(t,n){return t[n]?t[n].bind(t,n.toUpperCase()+": "):e}(st,t)})},I.prototype.is=function(t){return this.types[t]},I.prototype._filterBy=function(e,n){if(e)for(var i in this.types)t(this.types,i)&&(-1===e.indexOf(i)?this.types[i]=!n:this.types[i]=n)},L.prototype.start=function(){var t=this;this.extension.callExtension("appStart",[{appCtx:this}],function(){t.hasRouterConfig()&&t.navigate(R.location.href),$E.dispatch(document,"hbjs:app:start",{appCtx:t})})},L.prototype.next=function(){if(this.hasRouterConfig()){var t=this._.r,e=t.routesSeq.pop();e&&e.id&&(O.is("router")&&O.log("completedRoute: ID:",e.id," urlOri: ",S(e.urlOri,this.configs.prefix)," Remaining routes: ",t.routesSeq.length),t.routesSeq.length>0?t.processNextRouteInSequence():this.extension.callExtension("afterRoute",[{appCtx:this,id:e.id}],function(t){this.appCtx.__curRoute=null,this.__complete=!0,t||O.is("core")&&O.log("Interrupted at afterRoute")}.bind(this._.r)))}else O.warn("No Route has been added yet")},L.prototype.interruptRoute=function(t,e,n){switch(t){case"beforeRoute":$E.fireEvent(document,"routeInterrupted")}},L.prototype.hasUnsavedData=function(){return!!(this.hasRouterConfig()&&this._.r.prevModule&&F.object(this._.r.prevModule.bindObj)&&Object.keys(this._.r.prevModule.bindObj).length>0)},L.prototype.render=function(t){if(this._&&this._.r&&t.hasOwnProperty("routeId")&&"number"==typeof t.routeId&&this._.r.__curRoute&&this._.r.__curRoute.id!==t.routeId)O.warn("The specified routeId : "+t.routeId+", does not match current Route Id : "+this._.r.__curRoute.id);else{var e,n,i,r,a,s,l,u,d=t.models||{},c=t.context||{},h=t.globals||{},f=t.macros_ctx||{},p=t.args,g=this,m=null,v=t.template.trim().split(":"),b=t.bindCtx;if(3===v.length?(u=(r=/(.*):(.*):(.*)\/(.*)/.exec(t.template))[1],e=r[1]+":"+r[2],n=r[3],i=r[4],a=r[2]):2===v.length&&(r=/(.*):(.*)\/(.*)/.exec(t.template),e=r[1],n=r[2],i=r[3],a=r[1]),c&&c[a]&&c[a].modelObj)for(var y in d)d.hasOwnProperty(y)&&(c[a].modelObj[y]=d[y]);if(null===t.target)throw new Error("!! TEMPLATE ERROR: Target id specified for template : "+i+" is invalid. Check in module file.");if(F.object(b))F.function(b.__modify)||(b.__modify=o.bind(b,this));else if(null!==b)if(this._.r.__curRoute)this._.r.__complete||(b=this._.r.__curRoute.curBindCtx);else{O.warn("specify a bindCtx, when a render is not part of a route",t)}l=this._.r.__curRoute&&this._.r.__curRoute.id,m=this.view.cache||{};var C;if("production"!==this.configs.mode)u?(m[u]||(m[u]={}),C=m[u]):C=m,C[i]||(C[i]={module:a,tmplFile:n,dataModels:d,context:c,tmplTarget:t.target}),this.parseTemplate({module:e,models:d,tmplFile:n,tmplId:i,tmplTarget:t.target,ctx:c,globals:h,macros_ctx:f,callback:t.callback,args:p,nextRoute:t.nextRoute,render:!0,bindCtx:b,viewPathType:u,toAppend:t.toAppend,curTemplateId:l});else{u||(u=this.configs.viewPathDefaultKey),(s=m[u][i]).mountPoint=t.target,s.bindCtx=b,s.toAppend=t.toAppend,s.models=d,s.context=c,s.globals=h,s.macros_ctx=f,s.viewPathType=u;var E=Object.keys(c).toString();g.view.render(s,function(){g._afterTmplRender(e,d,i,t.target,c,E,l,t.callback,t.args),t.nextRoute&&g.next()})}}},L.prototype.parseTemplate=function(t){var e,n=this,i="",r=t.module,a=t.bindCtx,s=t.viewPathType,o=t.curTemplateId;if(P){if(!r)return void O.error("module needs to be specified");-1!==r.indexOf(":")?(r=t.module.split(":"),i=this.view.config.templatePath[r[0]]+"/"+r[1]):i=this.view.config.templatePath+"/"+r,O.info("Loading: ",i+"/"+t.tmplFile+".html")}if(!P||"development"!==this.configs.mode)return"server"===this.configs.mode?e=n.view.parse(t,!0):-1;!function(t,e){var n=$D.get('[data-viewpath-type="'+t+'"][data-template-file="'+e+'"]');n&&$D.remove(n)}(s,t.tmplFile),$X.get({url:i+"/"+t.tmplFile+".html",handler:function(){try{!function(t,e,n){var i=document.createElement("div");i.setAttribute("data-viewpath-type",e),i.setAttribute("data-template-file",n),document.body.appendChild(i),i.innerHTML=t}(this.responseText,s,t.tmplFile);var i=$D.get('[data-viewpath-type="'+s+'"][data-template-file="'+t.tmplFile+'"] script#'+t.tmplId);if(null===i)throw new Error("Template: "+t.tmplId+" Couldnot be found.");var l=i.getAttribute("data-modules");e=n.view.parse({templateId:t.tmplId,templateStr:i.innerHTML,data_models:i.getAttribute("data-models"),data_modules:l,viewPathType:s}),P&&t.render&&n.view.render({templateId:t.tmplId,mountPoint:t.tmplTarget,models:t.models,context:t.ctx,globals:t.globals,macros_ctx:t.macros_ctx,viewFn:e,bindCtx:a,toAppend:t.toAppend}),n._afterTmplRender(r,t.models,t.tmplId,t.tmplTarget,t.ctx,l,o,t.callback,t.args),t.nextRoute&&n.next()}catch(e){O.error("Err while rendering template: "+t.tmplId,e)}}})},L.prototype._afterTmplRender=function(t,n,i,r,a,s,o,l,u){var d=this;this.hsNav.hookNewUrls(r),this.extension.callExtension("afterRender",[{tmplId:i,models:n,targetId:r,ctx:a,moduleNames:s,curTemplateId:o}],function(t){l&&l.apply(null,u),t?d.extension.callExtension("afterRenderCallBack",[{tmplId:i,models:n,targetId:r,ctx:a,moduleNames:s,curTemplateId:o}],e):O.is("core")&&O.log("Interrupted at afterRender.")})},L.parse=function(t,e){var n;n=t.ViewInstance?t.ViewInstance:new w(e);var i=t.tmplId||"t_1";return{ViewInstance:n,render:n.parse({templateId:i,templateStr:t.template})}},L.prototype.hasRouterConfig=function(){return this._.r.map.length>0},L}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():window.jsonDiff=e()}(0,function(){"use strict";var t=function(t,e){this.old_json=t,this.new_json=e,this.diff=new diff_match_patch,this.checksum=0};return t.prototype={checkIfJObj:function(t){return"[object object]"===this.getObjDataType(t)},create_patch:function(t,e,n){if(!(n||this.checkIfJObj(this.old_json)&&this.checkIfJObj(this.new_json)))throw new TypeError("Provide a valid JSON Object");for(var i={},r=t||this.old_json,a=e||this.new_json,s=Object.keys(r),o=0;o<s.length;o++){null!=a[u=s[o]]&&void 0!=r[u]||this.putinObj(i,u,null,null)}var l=Object.keys(a);for(o=0;o<l.length;o++){var u;if(null===r[u=l[o]]||void 0===r[u])this.putinObj(i,u,null,a[u]);else if(this.getObjDataType(a[u])!=this.getObjDataType(r[u]))this.putinObj(i,u,null,"[object string]"==this.getObjDataType(a[u])?this.form_delta(r[u],a[u]):a[u]);else{var d=u?r[u]:r,c=u?a[u]:a;switch(this.getObjDataType(a[u])){case"[object object]":var h=this.create_patch(d,c,!0);Object.keys(h).length>0&&(i[u]=h,this.checksum++);break;case"[object array]":for(var f=c.length,p=0;p<f;p++)this.patch_array(c[p],d,u,i,p);d.length>f&&(i||(i={}),i[u]||(i[u]={}),i[u]["-_"]=d.length-f);break;case"[object number]":case"[object boolean]":this.compare_datas(d,c)||(i[u]=c,this.checksum++);break;case"[object string]":this.compare_datas(d,c)||this.putinObj(i,u,null,this.form_delta(d,c))}}}return i},form_delta:function(t,e){var n=t.length,i=e.length;if(n>50&&i>50&&Math.abs(n-i)<Math.min(n,i)){var r=[];return r[0]=this.diff.diff_toDelta(this.diff.diff_main(t,e)),r}return e},patch_array:function(t,e,n,i,r){var a=this.getObjDataType(t),s=-1;if("[object string]"==a||"[object number]"==a){if(this.compare_datas(e[r],t))return;return e.forEach(function(n,i,r){this.compare_datas(e[i],t)&&(s=i)},this),i[n]||this.putinObj(i,n,null,{}),-1!=s?this.putinObj(i[n],"~_",r,s):this.putinObj(i[n],"+_",r,t)}if("[object object]"==a){if(this.compare_datas(e[r],t))return;for(var o=0;o<e.length;o++)this.compare_datas(e[o],t)&&(s=o);if(-1!=s)this.putinObj(i[n],"~_",r,s);else if(e[r]){var l=this.create_patch(e[r],t,!0);Object.keys(l).length>0&&(i[n]||this.putinObj(i,n,null,{}),this.putinObj(i[n],r,null,l))}else i[n]||this.putinObj(i,n,null,{}),this.putinObj(i[n],"+_",r,t)}else if("[object array]"==a){if(this.compare_datas(e[r],t))return;for(o=0;o<e.length;o++)this.compare_datas(e[o],t)&&(s=o);if(i[n]||this.putinObj(i,n,null,{}),-1!=s)this.putinObj(i[n],"~_",r,s);else for(var u=t.length,d=0;d<u;d++)i[n](this.patch_array(t[d],e[d],n,i,d))}},putinObj:function(t,e,n,i){null==n?(t[e]=i,this.checksum++):(t[e]||(t[e]={}),t[e][n]=i)},compare_datas:function(t,e){var n=this.getObjDataType(e);if(this.getObjDataType(t)!=n)return!1;switch(n){case"[object object]":if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var i in e){if(!t[i])return!1;if(!this.compare_datas(t[i],e[i]))return!1}break;case"[object array]":if(t.length!=e.length)return!1;for(var r in e)if(!this.compare_datas(t[r],e[r]))return!1;break;default:return t===e}return!0},getObjDataType:function(t){return Object.prototype.toString.call(t).toLowerCase()},apply_patch:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];if(e[r])if(null==t[r])delete e[r];else{var a=this.getObjDataType(t[r]),s=this.getObjDataType(e[r]);s!=a&&null!=t[r]?"[object array]"==s&&"[object object]"==a?this.merge_object(e,t,r,s,a):"[object string]"==s&&"[object array]"==a&&1==t[r].length?this.replaceInObj(e,r,this.getfromDelta(e[r],t[r])):this.replaceInObj(e,r,t[r]):this.merge_object(e,t,r,s,a)}else this.replaceInObj(e,r,t[r])}return e},merge_object:function(t,e,n,i,r){var a=t[n],s=e[n];if(null==e[n])return delete old_json[n],old_json;switch(r){case"[object object]":if("[object array]"==i){for(var o=Object.keys(s),l=0;l<o.length;l++)"~_"!=o[l]&&"-_"!=o[l]&&"+_"!=o[l]&&"#_"!=o[l]&&this.replaceInObj(t[n],o[l],this.apply_patch(s[o[l]],a[o[l]]));s["~_"]||s["+_"]||s["#_"]?this.replaceInObj(t,n,this.merge_array(a,s)):s["-_"]?t[n]=this.merge_array(a,s):this.checksum--}else this.replaceInObj(t,n,this.apply_patch(s,t[n]));break;case"[object array]":this.replaceInObj(t,n,"[object string]"==i&&1==e[n].length?this.getfromDelta(t[n],s):s);case"[object string]":case"[object number]":case"[object boolean]":this.replaceInObj(t,n,s);break;case"[object null]":delete t[n],this.checksum--}return t},replaceInObj:function(t,e,n){t[e]=n,this.checksum--},getfromDelta:function(t,e){var n=this.diff.diff_fromDelta(t,e[0]),i=this.diff.patch_make(n);return this.diff.patch_apply(i,t)[0]},merge_array:function(t,e){var n=t.slice(0),i=e["~_"],r=e["+_"],a=e["-_"],s=e["#_"];if(i||r||a||s){for(var o in i){var l=n[o],u=i[o];switch(this.getObjDataType(l)){case"[object object]":t[o]=this.apply_patch(u,t[o]);break;default:t[o]=n[u]}}if(a)for(o=0;o<a;o++)t.pop();for(var o in r){var d=r[o];switch(this.getObjDataType(d)){case"[object object]":for(var c={},h=Object.keys(d),f=0;f<h.length;f++)c[h[f]]=d[h[f]];t[o]=c;break;default:t[o]=d}}for(var p in s)if(s.hasOwnProperty(p)){if("object"==typeof(d=s[p])&&!Array.isArray(d)){var g=t[parseInt(p)]||{};for(var m in d)if(d.hasOwnProperty(m)){var v=d[m];null===v?delete g[m]:g[m]=v}t[parseInt(p)]=g}}return t}}},t}),function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=function(){for(var t=0,e=1,n=2;e!=n;)t++,e=n,n<<=1;return t}()}function e(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0}t.prototype.diff_main=function(t,e,n,i){if(void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),i=i,null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var r=n,a=this.diff_commonPrefix(t,e);n=t.substring(0,a),t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var s=t.substring(t.length-a);return t=t.substring(0,t.length-a),e=e.substring(0,e.length-a),t=this.diff_compute(t,e,r,i),n&&t.unshift([0,n]),s&&t.push([0,s]),this.diff_cleanupMerge(t),t},t.prototype.diff_compute=function(t,e,n,i){var r;if(!t)return[[1,e]];if(!e)return[[-1,t]];r=t.length>e.length?t:e;var a=t.length>e.length?e:t,s=r.indexOf(a);if(-1!=s)return r=[[1,r.substring(0,s)],[0,a],[1,r.substring(s+a.length)]],t.length>e.length&&(r[0][0]=r[2][0]=-1),r;if(1==a.length)return[[-1,t],[1,e]];if(r=this.diff_halfMatch(t,e)){var o=r[0];return t=r[1],a=r[2],e=r[3],r=r[4],o=this.diff_main(o,a,n,i),i=this.diff_main(t,e,n,i),o.concat([[0,r]],i)}if(n&&(t.length<100||e.length<100)&&(n=!1),n&&(t=(o=this.diff_linesToChars(t,e))[0],e=o[1],o=o[2]),r=this.diff_bisect(t,e,i),n){for(this.diff_charsToLines(r,o),this.diff_cleanupSemantic(r),r.push([0,""]),e=t=n=0,a=o="";n<r.length;){switch(r[n][0]){case 1:e++,a+=r[n][1];break;case-1:t++,o+=r[n][1];break;case 0:if(t>=1&&e>=1){for(o=this.diff_main(o,a,!1,i),r.splice(n-t-e,t+e),n=n-t-e,t=o.length-1;t>=0;t--)r.splice(n,0,o[t]);n+=o.length}t=e=0,a=o=""}n++}r.pop()}return r},t.prototype.diff_bisect=function(t,e,n){for(var i=t.length,r=e.length,a=Math.ceil((i+r)/2),s={1:0},o={1:0},l=i-r,u=l%2!=0,d=0;d<a&&!((new Date).getTime()>n);d++){for(var c=-d;c<=d;c+=2){for(var h,f=(h=c==-d||c!=d&&s[c-1]<s[c+1]?s[c+1]:s[c-1]+1)-c;h<i&&f<r&&t.charAt(h)==e.charAt(f);)h++,f++;if(s[c]=h,u){var p=l-c;if(void 0!==o[p]){var g=i-o[p];if(h>=g)return(i=this.diff_main(t.substring(0,h),e.substring(0,f),!1,n)).concat(this.diff_main(t.substring(h),e.substring(f),!1,n))}}}for(p=-d;p<=d;p+=2){for(h=(g=p==-d||p!=d&&o[p-1]<o[p+1]?o[p+1]:o[p-1]+1)-p;g<i&&h<r&&t.charAt(i-g-1)==e.charAt(r-h-1);)g++,h++;if(o[p]=g,!u&&(c=l-p,void 0!==s[c]&&(h=s[c],f=h-c,g=i-g,h>=g)))return(i=this.diff_main(t.substring(0,h),e.substring(0,f),!1,n)).concat(this.diff_main(t.substring(h),e.substring(f),!1,n))}}return[[-1,t],[1,e]]},t.prototype.diff_linesToChars=function(t,e){function n(t){for(var e="",n=0,a=-1,s=i.length;a<t.length-1;){-1==(a=t.indexOf("\n",n))&&(a=t.length-1);var o=t.substring(n,a+1);n=a+1,(r.hasOwnProperty?r.hasOwnProperty(o):void 0!==r[o])?e+=String.fromCharCode(r[o]):(e+=String.fromCharCode(s),r[o]=s,i[s++]=o)}return e}var i=[],r={};i[0]="";return[n(t),n(e),i]},t.prototype.diff_charsToLines=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],a=0;a<i.length;a++)r[a]=e[i.charCodeAt(a)];t[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,a=0;n<r;)t.substring(a,r)==e.substring(a,r)?a=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,a=0;n<r;)t.substring(t.length-r,t.length-a)==e.substring(e.length-r,e.length-a)?a=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;if(n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n)),n=Math.min(n,i),t==e)return n;i=0;for(var r=1;;){var a=t.substring(n-r);if(-1==(a=e.indexOf(a)))return i;r+=a,0!=a&&t.substring(n-r)!=e.substring(0,r)||(i=r,r++)}},t.prototype.diff_halfMatch=function(t,e){function n(t,e,n){for(var i,r,s,o,l=t.substring(n,n+Math.floor(t.length/4)),u=-1,d="";-1!=(u=e.indexOf(l,u+1));){var c=a.diff_commonPrefix(t.substring(n),e.substring(u)),h=a.diff_commonSuffix(t.substring(0,n),e.substring(0,u));d.length<h+c&&(d=e.substring(u-h,u)+e.substring(u,u+c),i=t.substring(0,n-h),r=t.substring(n+c),s=e.substring(0,u-h),o=e.substring(u+c))}return 2*d.length>=t.length?[i,r,s,o,d]:null}var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(i.length<4||2*r.length<i.length)return null;var a=this,s=n(i,r,Math.ceil(i.length/4));i=n(i,r,Math.ceil(i.length/2));var o;if(!s&&!i)return null;o=i?s&&s[4].length>i[4].length?s:i:s;var l;return t.length>e.length?(s=o[0],i=o[1],r=o[2],l=o[3]):(r=o[0],l=o[1],s=o[2],i=o[3]),o=o[4],[s,i,r,l,o]},t.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,a=0,s=0,o=0,l=0,u=0;a<t.length;)0==t[a][0]?(n[i++]=a,s=l,o=u,u=l=0,r=t[a][1]):(1==t[a][0]?l+=t[a][1].length:u+=t[a][1].length,null!==r&&r.length<=Math.max(s,o)&&r.length<=Math.max(l,u)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,a=--i>0?n[i-1]:-1,u=l=o=s=0,r=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;)-1==t[a-1][0]&&1==t[a][0]&&(e=t[a-1][1],n=t[a][1],(i=this.diff_commonOverlap(e,n))&&(t.splice(a,0,[0,n.substring(0,i)]),t[a-1][1]=e.substring(0,e.length-i),t[a+1][1]=n.substring(i),a++),a++),a++},t.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 5;var o=0;return(t.charAt(t.length-1).match(n)||e.charAt(0).match(n))&&(o++,(t.charAt(t.length-1).match(i)||e.charAt(0).match(i))&&(o++,(t.charAt(t.length-1).match(r)||e.charAt(0).match(r))&&(o++,(t.match(a)||e.match(s))&&o++))),o}for(var n=/[^a-zA-Z0-9]/,i=/\s/,r=/[\r\n]/,a=/\n\r?\n$/,s=/^\r?\n\r?\n/,o=1;o<t.length-1;){if(0==t[o-1][0]&&0==t[o+1][0]){var l=t[o-1][1],u=t[o][1],d=t[o+1][1],c=this.diff_commonSuffix(l,u);if(c){var h=u.substring(u.length-c);l=l.substring(0,l.length-c),u=h+u.substring(0,u.length-c),d=h+d}c=l,h=u;for(var f=d,p=e(l,u)+e(u,d);u.charAt(0)===d.charAt(0);){l+=u.charAt(0),u=u.substring(1)+d.charAt(0),d=d.substring(1);var g=e(l,u)+e(u,d);g>=p&&(p=g,c=l,h=u,f=d)}t[o-1][1]!=c&&(c?t[o-1][1]=c:(t.splice(o-1,1),o--),t[o][1]=h,f?t[o+1][1]=f:(t.splice(o+1,1),o--))}o++}},t.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r="",a=0,s=!1,o=!1,l=!1,u=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(l||u)?(n[i++]=a,s=l,o=u,r=t[a][1]):(i=0,r=""),l=u=!1):(-1==t[a][0]?u=!0:l=!0,r&&(s&&o&&l&&u||r.length<this.Diff_EditCost/2&&s+o+l+u==3)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,r="",s&&o?(l=u=!0,i=0):(a=--i>0?n[i-1]:-1,l=u=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,i=0,r=0,a="",s="";n<t.length;)switch(t[n][0]){case 1:r++,s+=t[n][1],n++;break;case-1:i++,a+=t[n][1],n++;break;case 0:i+r>1?(0!==i&&0!==r&&(0!==(e=this.diff_commonPrefix(s,a))&&(n-i-r>0&&0==t[n-i-r-1][0]?t[n-i-r-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(s,a))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),0===i?t.splice(n-i-r,i+r,[1,s]):0===r?t.splice(n-i-r,i+r,[-1,a]):t.splice(n-i-r,i+r,[-1,a],[1,s]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=r=0,s=a=""}for(""===t[t.length-1][1]&&t.pop(),i=!1,n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),i=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),i=!0)),n++;i&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,a=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(i+=t[n][1].length),-1!==t[n][0]&&(r+=t[n][1].length),!(i>e));n++)a=i,s=r;return t.length!=n&&-1===t[n][0]?s:s+(e-a)},t.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,a=/\n/g,s=0;s<t.length;s++){var o=t[s][0],l=t[s][1],u=l.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(a,"&para;<br>");switch(o){case 1:e[s]='<ins style="background:#E6FFE6;">'+u+"</ins>";break;case-1:e[s]='<del style="background:#FFE6E6;">'+u+"</del>";break;case 0:e[s]="<span>"+u+"</span>"}-1!==o&&l.length}return e.join("")},t.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var a=t[r][0],s=t[r][1];switch(a){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:e+=Math.max(n,i),i=n=0}}return e+=Math.max(n,i)},t.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,a=e.split(/\t/g),s=0;s<a.length;s++){var o=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{n[i++]=[1,decodeURI(o)]}catch(t){throw Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var l=parseInt(o,10);if(isNaN(l)||l<0)throw Error("Invalid number in diff_fromDelta: "+o);o=t.substring(r,r+=l),"="==a[s].charAt(0)?n[i++]=[0,o]:n[i++]=[-1,o];break;default:if(a[s])throw Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(r!=t.length)throw Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n},t.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap(t,e,n):-1},t.prototype.match_bitap=function(t,e,n){function i(t,i){var r=t/e.length,s=Math.abs(n-i);return a.Match_Distance?r+s/a.Match_Distance:s?1:r}if(e.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r=this.match_alphabet(e),a=this,s=this.Match_Threshold,o=t.indexOf(e,n);-1!=o&&(s=Math.min(i(0,o),s),-1!=(o=t.lastIndexOf(e,n+e.length))&&(s=Math.min(i(0,o),s)));var l=1<<e.length-1;o=-1;for(var u,d,c,h=e.length+t.length,f=0;f<e.length;f++){for(u=0,d=h;u<d;)i(f,n+d)<=s?u=d:h=d,d=Math.floor((h-u)/2+u);h=d,u=Math.max(1,n-d+1);var p=Math.min(n+d,t.length)+e.length;for((d=Array(p+2))[p+1]=(1<<f)-1,p=p;p>=u;p--){var g=r[t.charAt(p-1)];if(d[p]=0===f?(d[p+1]<<1|1)&g:(d[p+1]<<1|1)&g|(c[p+1]|c[p])<<1|1|c[p+1],d[p]&l&&(g=i(f,p-1))<=s){if(s=g,!((o=p-1)>n))break;u=Math.max(1,2*n-o)}}if(i(f+1,n)>s)break;c=d}return o},t.prototype.match_alphabet=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},t.prototype.patch_addContext=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin,(n=e.substring(t.start2-i,t.start2))&&t.diffs.unshift([0,n]),(i=e.substring(t.start2+t.length1,t.start2+t.length1+i))&&t.diffs.push([0,i]),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+i.length,t.length2+=n.length+i.length}},t.prototype.patch_make=function(t,n,i){var r;if("string"==typeof t&&"string"==typeof n&&void 0===i)r=t,(n=this.diff_main(r,n,!0)).length>2&&(this.diff_cleanupSemantic(n),this.diff_cleanupEfficiency(n));else if(t&&"object"==typeof t&&void 0===n&&void 0===i)n=t,r=this.diff_text1(n);else if("string"==typeof t&&n&&"object"==typeof n&&void 0===i)r=t,n=n;else{if("string"!=typeof t||"string"!=typeof n||!i||"object"!=typeof i)throw Error("Unknown call format to patch_make.");r=t,n=i}if(0===n.length)return[];i=[],t=new e;var a=0,s=0,o=0,l=r;r=r;for(var u=0;u<n.length;u++){var d=n[u][0],c=n[u][1];switch(a||0===d||(t.start1=s,t.start2=o),d){case 1:t.diffs[a++]=n[u],t.length2+=c.length,r=r.substring(0,o)+c+r.substring(o);break;case-1:t.length1+=c.length,t.diffs[a++]=n[u],r=r.substring(0,o)+r.substring(o+c.length);break;case 0:c.length<=2*this.Patch_Margin&&a&&n.length!=u+1?(t.diffs[a++]=n[u],t.length1+=c.length,t.length2+=c.length):c.length>=2*this.Patch_Margin&&a&&(this.patch_addContext(t,l),i.push(t),t=new e,a=0,l=r,s=o)}1!==d&&(s+=c.length),-1!==d&&(o+=c.length)}return a&&(this.patch_addContext(t,l),i.push(t)),i},t.prototype.patch_deepCopy=function(t){for(var n=[],i=0;i<t.length;i++){var r=t[i],a=new e;a.diffs=[];for(var s=0;s<r.diffs.length;s++)a.diffs[s]=r.diffs[s].slice();a.start1=r.start1,a.start2=r.start2,a.length1=r.length1,a.length2=r.length2,n[i]=a}return n},t.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],a=0;a<t.length;a++){var s,o=t[a].start2+i,l=this.diff_text1(t[a].diffs),u=-1;if(l.length>this.Match_MaxBits?-1!=(s=this.match_main(e,l.substring(0,this.Match_MaxBits),o))&&(-1==(u=this.match_main(e,l.substring(l.length-this.Match_MaxBits),o+l.length-this.Match_MaxBits))||s>=u)&&(s=-1):s=this.match_main(e,l,o),-1==s)r[a]=!1,i-=t[a].length2-t[a].length1;else if(r[a]=!0,i=s-o,o=-1==u?e.substring(s,s+l.length):e.substring(s,u+this.Match_MaxBits),l==o)e=e.substring(0,s)+this.diff_text2(t[a].diffs)+e.substring(s+l.length);else if(o=this.diff_main(l,o,!1),l.length>this.Match_MaxBits&&this.diff_levenshtein(o)/l.length>this.Patch_DeleteThreshold)r[a]=!1;else{this.diff_cleanupSemanticLossless(o),l=0;var d;for(u=0;u<t[a].diffs.length;u++){var c=t[a].diffs[u];0!==c[0]&&(d=this.diff_xIndex(o,l)),1===c[0]?e=e.substring(0,s+d)+c[1]+e.substring(s+d):-1===c[0]&&(e=e.substring(0,s+d)+e.substring(s+this.diff_xIndex(o,l+c[1].length))),-1!==c[0]&&(l+=c[1].length)}}}return e=e.substring(n.length,e.length-n.length),[e,r]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=(i=t[0]).diffs;if(0==r.length||0!=r[0][0])r.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>r[0][1].length){var a=e-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}return i=t[t.length-1],0==(r=i.diffs).length||0!=r[r.length-1][0]?(r.push([0,n]),i.length1+=e,i.length2+=e):e>r[r.length-1][1].length&&(a=e-r[r.length-1][1].length,r[r.length-1][1]+=n.substring(0,a),i.length1+=a,i.length2+=a),n},t.prototype.patch_splitMax=function(t){for(var n=this.Match_MaxBits,i=0;i<t.length;i++)if(t[i].length1>n){var r=t[i];t.splice(i--,1);for(var a=r.start1,s=r.start2,o="";0!==r.diffs.length;){var l=new e,u=!0;for(l.start1=a-o.length,l.start2=s-o.length,""!==o&&(l.length1=l.length2=o.length,l.diffs.push([0,o]));0!==r.diffs.length&&l.length1<n-this.Patch_Margin;){o=r.diffs[0][0];var d=r.diffs[0][1];1===o?(l.length2+=d.length,s+=d.length,l.diffs.push(r.diffs.shift()),u=!1):-1===o&&1==l.diffs.length&&0==l.diffs[0][0]&&d.length>2*n?(l.length1+=d.length,a+=d.length,u=!1,l.diffs.push([o,d]),r.diffs.shift()):(d=d.substring(0,n-l.length1-this.Patch_Margin),l.length1+=d.length,a+=d.length,0===o?(l.length2+=d.length,s+=d.length):u=!1,l.diffs.push([o,d]),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}o=(o=this.diff_text2(l.diffs)).substring(o.length-this.Patch_Margin),""!==(d=this.diff_text1(r.diffs).substring(0,this.Patch_Margin))&&(l.length1+=d.length,l.length2+=d.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=d:l.diffs.push([0,d])),u||t.splice(++i,0,l)}}},t.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},t.prototype.patch_fromText=function(t){var n=[];if(!t)return n;t=t.split("\n");for(var i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<t.length;){var a=t[i].match(r);if(!a)throw Error("Invalid patch string: "+t[i]);var s=new e;for(n.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),i++;i<t.length;){a=t[i].charAt(0);try{var o=decodeURI(t[i].substring(1))}catch(t){throw Error("Illegal escape in patch_fromText: "+o)}if("-"==a)s.diffs.push([-1,o]);else if("+"==a)s.diffs.push([1,o]);else if(" "==a)s.diffs.push([0,o]);else{if("@"==a)break;if(""!==a)throw Error('Invalid patch mode "'+a+'" in: '+o)}i++}}return n},e.prototype.toString=function(){var t,e;t=["@@ -"+(t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"];var n;for(e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}t[e+1]=n+encodeURI(this.diffs[e][1])+"\n"}return t.join("").replace(/%20/g," ")},window.diff_match_patch=t,window.patch_obj=e,window.DIFF_DELETE=-1,window.DIFF_INSERT=1,window.DIFF_EQUAL=0}();
